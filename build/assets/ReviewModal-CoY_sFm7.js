import{r as h,j as e}from"./ui-CrM3Hg5W.js";import{C as y,b as v,c as g,B as i,a as w,L as o,T as b,d as R}from"./index-cRR29Qlm.js";import{J as x,X as S,an as C,ao as D,Y as T}from"./icons-Duv7h_B3.js";import"./vendor-BWX1YzKK.js";import"./supabase-BRe8iXyT.js";import"./utils--BulIq_u.js";import"./components-B9TP8a8L.js";function A({isOpen:j,onClose:c,onSubmit:p,transaction:t,currentUser:k}){const[s,l]=h.useState({rating:5,comment:"",wouldRecommend:!0,deliveryRating:5,communicationRating:5,qualityRating:5}),[r,u]=h.useState(!1);if(!j)return null;const f=async a=>{a.preventDefault(),u(!0);try{await p(s),c()}catch(m){console.error("Error submitting review:",m)}finally{u(!1)}},n=(a,m,N)=>e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{children:N}),e.jsxs("div",{className:"flex items-center gap-1",children:[[1,2,3,4,5].map(d=>e.jsx("button",{type:"button",onClick:()=>m(d),className:"p-1 hover:scale-110 transition-transform",children:e.jsx(x,{className:`w-6 h-6 ${d<=a?"text-yellow-400 fill-yellow-400":"text-gray-300"}`})},d)),e.jsxs("span",{className:"ml-2 text-sm text-muted-foreground",children:[a,"/5"]})]})]});return e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs(y,{className:"w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(v,{className:"flex flex-row items-center justify-between space-y-0 pb-4",children:[e.jsxs(g,{className:"flex items-center gap-2",children:[e.jsx(x,{className:"w-5 h-5"}),"Leave a Review"]}),e.jsx(i,{variant:"ghost",size:"sm",onClick:c,children:e.jsx(S,{className:"w-4 h-4"})})]}),e.jsxs(w,{className:"space-y-6",children:[e.jsxs("div",{className:"bg-muted/50 rounded-lg p-4",children:[e.jsx("h3",{className:"font-semibold text-lg",children:"Transaction Details"}),e.jsxs("div",{className:"space-y-2 mt-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Product:"}),e.jsx("span",{className:"font-medium",children:t.productName})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:t.otherPartyType==="seller"?"Seller:":"Buyer:"}),e.jsx("span",{className:"font-medium",children:t.otherPartyName})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Amount:"}),e.jsxs("span",{className:"font-medium",children:[t.dealAmount.toLocaleString()," MMK"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Completed:"}),e.jsx("span",{className:"font-medium",children:new Date(t.completedAt).toLocaleDateString()})]})]})]}),e.jsxs("form",{onSubmit:f,className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-semibold",children:"Overall Experience"}),n(s.rating,a=>l({...s,rating:a}),"How would you rate this transaction overall?")]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-semibold",children:"Detailed Ratings"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n(s.qualityRating,a=>l({...s,qualityRating:a}),"Product Quality"),n(s.communicationRating,a=>l({...s,communicationRating:a}),"Communication"),n(s.deliveryRating,a=>l({...s,deliveryRating:a}),"Delivery")]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs(o,{children:["Would you recommend this ",t.otherPartyType,"?"]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs(i,{type:"button",variant:s.wouldRecommend?"default":"outline",onClick:()=>l({...s,wouldRecommend:!0}),className:"flex items-center gap-2",children:[e.jsx(C,{className:"w-4 h-4"}),"Yes"]}),e.jsxs(i,{type:"button",variant:s.wouldRecommend?"outline":"destructive",onClick:()=>l({...s,wouldRecommend:!1}),className:"flex items-center gap-2",children:[e.jsx(D,{className:"w-4 h-4"}),"No"]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"comment",children:"Your Review (Optional)"}),e.jsxs("div",{className:"relative",children:[e.jsx(T,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),e.jsx(b,{id:"comment",value:s.comment,onChange:a=>l({...s,comment:a.target.value}),className:"pl-10 min-h-[100px]",placeholder:"Share your experience with this transaction. What went well? What could be improved?"})]})]}),e.jsxs("div",{className:"bg-primary/10 rounded-lg p-4",children:[e.jsx("h4",{className:"font-semibold mb-2",children:"Review Summary"}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Overall Rating:"}),e.jsx("div",{className:"flex items-center gap-1",children:[1,2,3,4,5].map(a=>e.jsx(x,{className:`w-4 h-4 ${a<=s.rating?"text-yellow-400 fill-yellow-400":"text-gray-300"}`},a))})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Recommendation:"}),e.jsx(R,{variant:s.wouldRecommend?"default":"destructive",children:s.wouldRecommend?"Yes":"No"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Quality:"}),e.jsxs("span",{children:[s.qualityRating,"/5"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Communication:"}),e.jsxs("span",{children:[s.communicationRating,"/5"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Delivery:"}),e.jsxs("span",{children:[s.deliveryRating,"/5"]})]})]})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx(i,{type:"button",variant:"outline",onClick:c,className:"flex-1",disabled:r,children:"Cancel"}),e.jsx(i,{type:"submit",className:"flex-1",disabled:r,children:r?"Submitting...":"Submit Review"})]})]})]})]})})}export{A as ReviewModal};
