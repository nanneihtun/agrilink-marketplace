function ON(t,s){for(var n=0;n<s.length;n++){const i=s[n];if(typeof i!="string"&&!Array.isArray(i)){for(const o in i)if(o!=="default"&&!(o in t)){const l=Object.getOwnPropertyDescriptor(i,o);l&&Object.defineProperty(t,o,l.get?l:{enumerable:!0,get:()=>i[o]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const d of l.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&i(d)}).observe(document,{childList:!0,subtree:!0});function n(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(o){if(o.ep)return;o.ep=!0;const l=n(o);fetch(o.href,l)}})();function tf(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function LN(t){if(Object.prototype.hasOwnProperty.call(t,"__esModule"))return t;var s=t.default;if(typeof s=="function"){var n=function i(){return this instanceof i?Reflect.construct(s,arguments,this.constructor):s.apply(this,arguments)};n.prototype=s.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(i){var o=Object.getOwnPropertyDescriptor(t,i);Object.defineProperty(n,i,o.get?o:{enumerable:!0,get:function(){return t[i]}})}),n}var qu={exports:{}},co={},Hu={exports:{}},Ke={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dg;function $N(){if(Dg)return Ke;Dg=1;var t=Symbol.for("react.element"),s=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),d=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),h=Symbol.iterator;function y(I){return I===null||typeof I!="object"?null:(I=h&&I[h]||I["@@iterator"],typeof I=="function"?I:null)}var j={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b=Object.assign,w={};function S(I,V,D){this.props=I,this.context=V,this.refs=w,this.updater=D||j}S.prototype.isReactComponent={},S.prototype.setState=function(I,V){if(typeof I!="object"&&typeof I!="function"&&I!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,I,V,"setState")},S.prototype.forceUpdate=function(I){this.updater.enqueueForceUpdate(this,I,"forceUpdate")};function k(){}k.prototype=S.prototype;function C(I,V,D){this.props=I,this.context=V,this.refs=w,this.updater=D||j}var E=C.prototype=new k;E.constructor=C,b(E,S.prototype),E.isPureReactComponent=!0;var P=Array.isArray,T=Object.prototype.hasOwnProperty,A={current:null},R={key:!0,ref:!0,__self:!0,__source:!0};function $(I,V,D){var ae,ce={},pe=null,W=null;if(V!=null)for(ae in V.ref!==void 0&&(W=V.ref),V.key!==void 0&&(pe=""+V.key),V)T.call(V,ae)&&!R.hasOwnProperty(ae)&&(ce[ae]=V[ae]);var X=arguments.length-2;if(X===1)ce.children=D;else if(1<X){for(var xe=Array(X),ye=0;ye<X;ye++)xe[ye]=arguments[ye+2];ce.children=xe}if(I&&I.defaultProps)for(ae in X=I.defaultProps,X)ce[ae]===void 0&&(ce[ae]=X[ae]);return{$$typeof:t,type:I,key:pe,ref:W,props:ce,_owner:A.current}}function J(I,V){return{$$typeof:t,type:I.type,key:V,ref:I.ref,props:I.props,_owner:I._owner}}function z(I){return typeof I=="object"&&I!==null&&I.$$typeof===t}function q(I){var V={"=":"=0",":":"=2"};return"$"+I.replace(/[=:]/g,function(D){return V[D]})}var Q=/\/+/g;function Z(I,V){return typeof I=="object"&&I!==null&&I.key!=null?q(""+I.key):V.toString(36)}function he(I,V,D,ae,ce){var pe=typeof I;(pe==="undefined"||pe==="boolean")&&(I=null);var W=!1;if(I===null)W=!0;else switch(pe){case"string":case"number":W=!0;break;case"object":switch(I.$$typeof){case t:case s:W=!0}}if(W)return W=I,ce=ce(W),I=ae===""?"."+Z(W,0):ae,P(ce)?(D="",I!=null&&(D=I.replace(Q,"$&/")+"/"),he(ce,V,D,"",function(ye){return ye})):ce!=null&&(z(ce)&&(ce=J(ce,D+(!ce.key||W&&W.key===ce.key?"":(""+ce.key).replace(Q,"$&/")+"/")+I)),V.push(ce)),1;if(W=0,ae=ae===""?".":ae+":",P(I))for(var X=0;X<I.length;X++){pe=I[X];var xe=ae+Z(pe,X);W+=he(pe,V,D,xe,ce)}else if(xe=y(I),typeof xe=="function")for(I=xe.call(I),X=0;!(pe=I.next()).done;)pe=pe.value,xe=ae+Z(pe,X++),W+=he(pe,V,D,xe,ce);else if(pe==="object")throw V=String(I),Error("Objects are not valid as a React child (found: "+(V==="[object Object]"?"object with keys {"+Object.keys(I).join(", ")+"}":V)+"). If you meant to render a collection of children, use an array instead.");return W}function se(I,V,D){if(I==null)return I;var ae=[],ce=0;return he(I,ae,"","",function(pe){return V.call(D,pe,ce++)}),ae}function te(I){if(I._status===-1){var V=I._result;V=V(),V.then(function(D){(I._status===0||I._status===-1)&&(I._status=1,I._result=D)},function(D){(I._status===0||I._status===-1)&&(I._status=2,I._result=D)}),I._status===-1&&(I._status=0,I._result=V)}if(I._status===1)return I._result.default;throw I._result}var ne={current:null},U={transition:null},M={ReactCurrentDispatcher:ne,ReactCurrentBatchConfig:U,ReactCurrentOwner:A};function H(){throw Error("act(...) is not supported in production builds of React.")}return Ke.Children={map:se,forEach:function(I,V,D){se(I,function(){V.apply(this,arguments)},D)},count:function(I){var V=0;return se(I,function(){V++}),V},toArray:function(I){return se(I,function(V){return V})||[]},only:function(I){if(!z(I))throw Error("React.Children.only expected to receive a single React element child.");return I}},Ke.Component=S,Ke.Fragment=n,Ke.Profiler=o,Ke.PureComponent=C,Ke.StrictMode=i,Ke.Suspense=f,Ke.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=M,Ke.act=H,Ke.cloneElement=function(I,V,D){if(I==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+I+".");var ae=b({},I.props),ce=I.key,pe=I.ref,W=I._owner;if(V!=null){if(V.ref!==void 0&&(pe=V.ref,W=A.current),V.key!==void 0&&(ce=""+V.key),I.type&&I.type.defaultProps)var X=I.type.defaultProps;for(xe in V)T.call(V,xe)&&!R.hasOwnProperty(xe)&&(ae[xe]=V[xe]===void 0&&X!==void 0?X[xe]:V[xe])}var xe=arguments.length-2;if(xe===1)ae.children=D;else if(1<xe){X=Array(xe);for(var ye=0;ye<xe;ye++)X[ye]=arguments[ye+2];ae.children=X}return{$$typeof:t,type:I.type,key:ce,ref:pe,props:ae,_owner:W}},Ke.createContext=function(I){return I={$$typeof:d,_currentValue:I,_currentValue2:I,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},I.Provider={$$typeof:l,_context:I},I.Consumer=I},Ke.createElement=$,Ke.createFactory=function(I){var V=$.bind(null,I);return V.type=I,V},Ke.createRef=function(){return{current:null}},Ke.forwardRef=function(I){return{$$typeof:u,render:I}},Ke.isValidElement=z,Ke.lazy=function(I){return{$$typeof:g,_payload:{_status:-1,_result:I},_init:te}},Ke.memo=function(I,V){return{$$typeof:p,type:I,compare:V===void 0?null:V}},Ke.startTransition=function(I){var V=U.transition;U.transition={};try{I()}finally{U.transition=V}},Ke.unstable_act=H,Ke.useCallback=function(I,V){return ne.current.useCallback(I,V)},Ke.useContext=function(I){return ne.current.useContext(I)},Ke.useDebugValue=function(){},Ke.useDeferredValue=function(I){return ne.current.useDeferredValue(I)},Ke.useEffect=function(I,V){return ne.current.useEffect(I,V)},Ke.useId=function(){return ne.current.useId()},Ke.useImperativeHandle=function(I,V,D){return ne.current.useImperativeHandle(I,V,D)},Ke.useInsertionEffect=function(I,V){return ne.current.useInsertionEffect(I,V)},Ke.useLayoutEffect=function(I,V){return ne.current.useLayoutEffect(I,V)},Ke.useMemo=function(I,V){return ne.current.useMemo(I,V)},Ke.useReducer=function(I,V,D){return ne.current.useReducer(I,V,D)},Ke.useRef=function(I){return ne.current.useRef(I)},Ke.useState=function(I){return ne.current.useState(I)},Ke.useSyncExternalStore=function(I,V,D){return ne.current.useSyncExternalStore(I,V,D)},Ke.useTransition=function(){return ne.current.useTransition()},Ke.version="18.3.1",Ke}var Mg;function Ic(){return Mg||(Mg=1,Hu.exports=$N()),Hu.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Og;function FN(){if(Og)return co;Og=1;var t=Ic(),s=Symbol.for("react.element"),n=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,o=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function d(u,f,p){var g,h={},y=null,j=null;p!==void 0&&(y=""+p),f.key!==void 0&&(y=""+f.key),f.ref!==void 0&&(j=f.ref);for(g in f)i.call(f,g)&&!l.hasOwnProperty(g)&&(h[g]=f[g]);if(u&&u.defaultProps)for(g in f=u.defaultProps,f)h[g]===void 0&&(h[g]=f[g]);return{$$typeof:s,type:u,key:y,ref:j,props:h,_owner:o.current}}return co.Fragment=n,co.jsx=d,co.jsxs=d,co}var Lg;function zN(){return Lg||(Lg=1,qu.exports=FN()),qu.exports}var e=zN(),Vl={},Wu={exports:{}},ys={},Ku={exports:{}},Gu={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $g;function BN(){return $g||($g=1,(function(t){function s(U,M){var H=U.length;U.push(M);e:for(;0<H;){var I=H-1>>>1,V=U[I];if(0<o(V,M))U[I]=M,U[H]=V,H=I;else break e}}function n(U){return U.length===0?null:U[0]}function i(U){if(U.length===0)return null;var M=U[0],H=U.pop();if(H!==M){U[0]=H;e:for(var I=0,V=U.length,D=V>>>1;I<D;){var ae=2*(I+1)-1,ce=U[ae],pe=ae+1,W=U[pe];if(0>o(ce,H))pe<V&&0>o(W,ce)?(U[I]=W,U[pe]=H,I=pe):(U[I]=ce,U[ae]=H,I=ae);else if(pe<V&&0>o(W,H))U[I]=W,U[pe]=H,I=pe;else break e}}return M}function o(U,M){var H=U.sortIndex-M.sortIndex;return H!==0?H:U.id-M.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;t.unstable_now=function(){return l.now()}}else{var d=Date,u=d.now();t.unstable_now=function(){return d.now()-u}}var f=[],p=[],g=1,h=null,y=3,j=!1,b=!1,w=!1,S=typeof setTimeout=="function"?setTimeout:null,k=typeof clearTimeout=="function"?clearTimeout:null,C=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function E(U){for(var M=n(p);M!==null;){if(M.callback===null)i(p);else if(M.startTime<=U)i(p),M.sortIndex=M.expirationTime,s(f,M);else break;M=n(p)}}function P(U){if(w=!1,E(U),!b)if(n(f)!==null)b=!0,te(T);else{var M=n(p);M!==null&&ne(P,M.startTime-U)}}function T(U,M){b=!1,w&&(w=!1,k($),$=-1),j=!0;var H=y;try{for(E(M),h=n(f);h!==null&&(!(h.expirationTime>M)||U&&!q());){var I=h.callback;if(typeof I=="function"){h.callback=null,y=h.priorityLevel;var V=I(h.expirationTime<=M);M=t.unstable_now(),typeof V=="function"?h.callback=V:h===n(f)&&i(f),E(M)}else i(f);h=n(f)}if(h!==null)var D=!0;else{var ae=n(p);ae!==null&&ne(P,ae.startTime-M),D=!1}return D}finally{h=null,y=H,j=!1}}var A=!1,R=null,$=-1,J=5,z=-1;function q(){return!(t.unstable_now()-z<J)}function Q(){if(R!==null){var U=t.unstable_now();z=U;var M=!0;try{M=R(!0,U)}finally{M?Z():(A=!1,R=null)}}else A=!1}var Z;if(typeof C=="function")Z=function(){C(Q)};else if(typeof MessageChannel<"u"){var he=new MessageChannel,se=he.port2;he.port1.onmessage=Q,Z=function(){se.postMessage(null)}}else Z=function(){S(Q,0)};function te(U){R=U,A||(A=!0,Z())}function ne(U,M){$=S(function(){U(t.unstable_now())},M)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(U){U.callback=null},t.unstable_continueExecution=function(){b||j||(b=!0,te(T))},t.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):J=0<U?Math.floor(1e3/U):5},t.unstable_getCurrentPriorityLevel=function(){return y},t.unstable_getFirstCallbackNode=function(){return n(f)},t.unstable_next=function(U){switch(y){case 1:case 2:case 3:var M=3;break;default:M=y}var H=y;y=M;try{return U()}finally{y=H}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(U,M){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var H=y;y=U;try{return M()}finally{y=H}},t.unstable_scheduleCallback=function(U,M,H){var I=t.unstable_now();switch(typeof H=="object"&&H!==null?(H=H.delay,H=typeof H=="number"&&0<H?I+H:I):H=I,U){case 1:var V=-1;break;case 2:V=250;break;case 5:V=1073741823;break;case 4:V=1e4;break;default:V=5e3}return V=H+V,U={id:g++,callback:M,priorityLevel:U,startTime:H,expirationTime:V,sortIndex:-1},H>I?(U.sortIndex=H,s(p,U),n(f)===null&&U===n(p)&&(w?(k($),$=-1):w=!0,ne(P,H-I))):(U.sortIndex=V,s(f,U),b||j||(b=!0,te(T))),U},t.unstable_shouldYield=q,t.unstable_wrapCallback=function(U){var M=y;return function(){var H=y;y=M;try{return U.apply(this,arguments)}finally{y=H}}}})(Gu)),Gu}var Fg;function UN(){return Fg||(Fg=1,Ku.exports=BN()),Ku.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zg;function VN(){if(zg)return ys;zg=1;var t=Ic(),s=UN();function n(r){for(var a="https://reactjs.org/docs/error-decoder.html?invariant="+r,c=1;c<arguments.length;c++)a+="&args[]="+encodeURIComponent(arguments[c]);return"Minified React error #"+r+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,o={};function l(r,a){d(r,a),d(r+"Capture",a)}function d(r,a){for(o[r]=a,r=0;r<a.length;r++)i.add(a[r])}var u=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),f=Object.prototype.hasOwnProperty,p=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,g={},h={};function y(r){return f.call(h,r)?!0:f.call(g,r)?!1:p.test(r)?h[r]=!0:(g[r]=!0,!1)}function j(r,a,c,m){if(c!==null&&c.type===0)return!1;switch(typeof a){case"function":case"symbol":return!0;case"boolean":return m?!1:c!==null?!c.acceptsBooleans:(r=r.toLowerCase().slice(0,5),r!=="data-"&&r!=="aria-");default:return!1}}function b(r,a,c,m){if(a===null||typeof a>"u"||j(r,a,c,m))return!0;if(m)return!1;if(c!==null)switch(c.type){case 3:return!a;case 4:return a===!1;case 5:return isNaN(a);case 6:return isNaN(a)||1>a}return!1}function w(r,a,c,m,x,N,_){this.acceptsBooleans=a===2||a===3||a===4,this.attributeName=m,this.attributeNamespace=x,this.mustUseProperty=c,this.propertyName=r,this.type=a,this.sanitizeURL=N,this.removeEmptyString=_}var S={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(r){S[r]=new w(r,0,!1,r,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(r){var a=r[0];S[a]=new w(a,1,!1,r[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(r){S[r]=new w(r,2,!1,r.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(r){S[r]=new w(r,2,!1,r,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(r){S[r]=new w(r,3,!1,r.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(r){S[r]=new w(r,3,!0,r,null,!1,!1)}),["capture","download"].forEach(function(r){S[r]=new w(r,4,!1,r,null,!1,!1)}),["cols","rows","size","span"].forEach(function(r){S[r]=new w(r,6,!1,r,null,!1,!1)}),["rowSpan","start"].forEach(function(r){S[r]=new w(r,5,!1,r.toLowerCase(),null,!1,!1)});var k=/[\-:]([a-z])/g;function C(r){return r[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(r){var a=r.replace(k,C);S[a]=new w(a,1,!1,r,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(r){var a=r.replace(k,C);S[a]=new w(a,1,!1,r,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(r){var a=r.replace(k,C);S[a]=new w(a,1,!1,r,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(r){S[r]=new w(r,1,!1,r.toLowerCase(),null,!1,!1)}),S.xlinkHref=new w("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(r){S[r]=new w(r,1,!1,r.toLowerCase(),null,!0,!0)});function E(r,a,c,m){var x=S.hasOwnProperty(a)?S[a]:null;(x!==null?x.type!==0:m||!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(b(a,c,x,m)&&(c=null),m||x===null?y(a)&&(c===null?r.removeAttribute(a):r.setAttribute(a,""+c)):x.mustUseProperty?r[x.propertyName]=c===null?x.type===3?!1:"":c:(a=x.attributeName,m=x.attributeNamespace,c===null?r.removeAttribute(a):(x=x.type,c=x===3||x===4&&c===!0?"":""+c,m?r.setAttributeNS(m,a,c):r.setAttribute(a,c))))}var P=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,T=Symbol.for("react.element"),A=Symbol.for("react.portal"),R=Symbol.for("react.fragment"),$=Symbol.for("react.strict_mode"),J=Symbol.for("react.profiler"),z=Symbol.for("react.provider"),q=Symbol.for("react.context"),Q=Symbol.for("react.forward_ref"),Z=Symbol.for("react.suspense"),he=Symbol.for("react.suspense_list"),se=Symbol.for("react.memo"),te=Symbol.for("react.lazy"),ne=Symbol.for("react.offscreen"),U=Symbol.iterator;function M(r){return r===null||typeof r!="object"?null:(r=U&&r[U]||r["@@iterator"],typeof r=="function"?r:null)}var H=Object.assign,I;function V(r){if(I===void 0)try{throw Error()}catch(c){var a=c.stack.trim().match(/\n( *(at )?)/);I=a&&a[1]||""}return`
`+I+r}var D=!1;function ae(r,a){if(!r||D)return"";D=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(a)if(a=function(){throw Error()},Object.defineProperty(a.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(a,[])}catch(Y){var m=Y}Reflect.construct(r,[],a)}else{try{a.call()}catch(Y){m=Y}r.call(a.prototype)}else{try{throw Error()}catch(Y){m=Y}r()}}catch(Y){if(Y&&m&&typeof Y.stack=="string"){for(var x=Y.stack.split(`
`),N=m.stack.split(`
`),_=x.length-1,L=N.length-1;1<=_&&0<=L&&x[_]!==N[L];)L--;for(;1<=_&&0<=L;_--,L--)if(x[_]!==N[L]){if(_!==1||L!==1)do if(_--,L--,0>L||x[_]!==N[L]){var F=`
`+x[_].replace(" at new "," at ");return r.displayName&&F.includes("<anonymous>")&&(F=F.replace("<anonymous>",r.displayName)),F}while(1<=_&&0<=L);break}}}finally{D=!1,Error.prepareStackTrace=c}return(r=r?r.displayName||r.name:"")?V(r):""}function ce(r){switch(r.tag){case 5:return V(r.type);case 16:return V("Lazy");case 13:return V("Suspense");case 19:return V("SuspenseList");case 0:case 2:case 15:return r=ae(r.type,!1),r;case 11:return r=ae(r.type.render,!1),r;case 1:return r=ae(r.type,!0),r;default:return""}}function pe(r){if(r==null)return null;if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case R:return"Fragment";case A:return"Portal";case J:return"Profiler";case $:return"StrictMode";case Z:return"Suspense";case he:return"SuspenseList"}if(typeof r=="object")switch(r.$$typeof){case q:return(r.displayName||"Context")+".Consumer";case z:return(r._context.displayName||"Context")+".Provider";case Q:var a=r.render;return r=r.displayName,r||(r=a.displayName||a.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case se:return a=r.displayName||null,a!==null?a:pe(r.type)||"Memo";case te:a=r._payload,r=r._init;try{return pe(r(a))}catch{}}return null}function W(r){var a=r.type;switch(r.tag){case 24:return"Cache";case 9:return(a.displayName||"Context")+".Consumer";case 10:return(a._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return r=a.render,r=r.displayName||r.name||"",a.displayName||(r!==""?"ForwardRef("+r+")":"ForwardRef");case 7:return"Fragment";case 5:return a;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return pe(a);case 8:return a===$?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof a=="function")return a.displayName||a.name||null;if(typeof a=="string")return a}return null}function X(r){switch(typeof r){case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function xe(r){var a=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function ye(r){var a=xe(r)?"checked":"value",c=Object.getOwnPropertyDescriptor(r.constructor.prototype,a),m=""+r[a];if(!r.hasOwnProperty(a)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var x=c.get,N=c.set;return Object.defineProperty(r,a,{configurable:!0,get:function(){return x.call(this)},set:function(_){m=""+_,N.call(this,_)}}),Object.defineProperty(r,a,{enumerable:c.enumerable}),{getValue:function(){return m},setValue:function(_){m=""+_},stopTracking:function(){r._valueTracker=null,delete r[a]}}}}function je(r){r._valueTracker||(r._valueTracker=ye(r))}function Ne(r){if(!r)return!1;var a=r._valueTracker;if(!a)return!0;var c=a.getValue(),m="";return r&&(m=xe(r)?r.checked?"true":"false":r.value),r=m,r!==c?(a.setValue(r),!0):!1}function Xe(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}function st(r,a){var c=a.checked;return H({},a,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:c??r._wrapperState.initialChecked})}function ms(r,a){var c=a.defaultValue==null?"":a.defaultValue,m=a.checked!=null?a.checked:a.defaultChecked;c=X(a.value!=null?a.value:c),r._wrapperState={initialChecked:m,initialValue:c,controlled:a.type==="checkbox"||a.type==="radio"?a.checked!=null:a.value!=null}}function Ss(r,a){a=a.checked,a!=null&&E(r,"checked",a,!1)}function qt(r,a){Ss(r,a);var c=X(a.value),m=a.type;if(c!=null)m==="number"?(c===0&&r.value===""||r.value!=c)&&(r.value=""+c):r.value!==""+c&&(r.value=""+c);else if(m==="submit"||m==="reset"){r.removeAttribute("value");return}a.hasOwnProperty("value")?Ht(r,a.type,c):a.hasOwnProperty("defaultValue")&&Ht(r,a.type,X(a.defaultValue)),a.checked==null&&a.defaultChecked!=null&&(r.defaultChecked=!!a.defaultChecked)}function Un(r,a,c){if(a.hasOwnProperty("value")||a.hasOwnProperty("defaultValue")){var m=a.type;if(!(m!=="submit"&&m!=="reset"||a.value!==void 0&&a.value!==null))return;a=""+r._wrapperState.initialValue,c||a===r.value||(r.value=a),r.defaultValue=a}c=r.name,c!==""&&(r.name=""),r.defaultChecked=!!r._wrapperState.initialChecked,c!==""&&(r.name=c)}function Ht(r,a,c){(a!=="number"||Xe(r.ownerDocument)!==r)&&(c==null?r.defaultValue=""+r._wrapperState.initialValue:r.defaultValue!==""+c&&(r.defaultValue=""+c))}var ut=Array.isArray;function Ae(r,a,c,m){if(r=r.options,a){a={};for(var x=0;x<c.length;x++)a["$"+c[x]]=!0;for(c=0;c<r.length;c++)x=a.hasOwnProperty("$"+r[c].value),r[c].selected!==x&&(r[c].selected=x),x&&m&&(r[c].defaultSelected=!0)}else{for(c=""+X(c),a=null,x=0;x<r.length;x++){if(r[x].value===c){r[x].selected=!0,m&&(r[x].defaultSelected=!0);return}a!==null||r[x].disabled||(a=r[x])}a!==null&&(a.selected=!0)}}function rt(r,a){if(a.dangerouslySetInnerHTML!=null)throw Error(n(91));return H({},a,{value:void 0,defaultValue:void 0,children:""+r._wrapperState.initialValue})}function ss(r,a){var c=a.value;if(c==null){if(c=a.children,a=a.defaultValue,c!=null){if(a!=null)throw Error(n(92));if(ut(c)){if(1<c.length)throw Error(n(93));c=c[0]}a=c}a==null&&(a=""),c=a}r._wrapperState={initialValue:X(c)}}function en(r,a){var c=X(a.value),m=X(a.defaultValue);c!=null&&(c=""+c,c!==r.value&&(r.value=c),a.defaultValue==null&&r.defaultValue!==c&&(r.defaultValue=c)),m!=null&&(r.defaultValue=""+m)}function Dr(r){var a=r.textContent;a===r._wrapperState.initialValue&&a!==""&&a!==null&&(r.value=a)}function Mr(r){switch(r){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function tn(r,a){return r==null||r==="http://www.w3.org/1999/xhtml"?Mr(a):r==="http://www.w3.org/2000/svg"&&a==="foreignObject"?"http://www.w3.org/1999/xhtml":r}var Or,lt=(function(r){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(a,c,m,x){MSApp.execUnsafeLocalFunction(function(){return r(a,c,m,x)})}:r})(function(r,a){if(r.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in r)r.innerHTML=a;else{for(Or=Or||document.createElement("div"),Or.innerHTML="<svg>"+a.valueOf().toString()+"</svg>",a=Or.firstChild;r.firstChild;)r.removeChild(r.firstChild);for(;a.firstChild;)r.appendChild(a.firstChild)}});function Qe(r,a){if(a){var c=r.firstChild;if(c&&c===r.lastChild&&c.nodeType===3){c.nodeValue=a;return}}r.textContent=a}var cr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},qs=["Webkit","ms","Moz","O"];Object.keys(cr).forEach(function(r){qs.forEach(function(a){a=a+r.charAt(0).toUpperCase()+r.substring(1),cr[a]=cr[r]})});function Ca(r,a,c){return a==null||typeof a=="boolean"||a===""?"":c||typeof a!="number"||a===0||cr.hasOwnProperty(r)&&cr[r]?(""+a).trim():a+"px"}function Hs(r,a){r=r.style;for(var c in a)if(a.hasOwnProperty(c)){var m=c.indexOf("--")===0,x=Ca(c,a[c],m);c==="float"&&(c="cssFloat"),m?r.setProperty(c,x):r[c]=x}}var Vn=H({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function sn(r,a){if(a){if(Vn[r]&&(a.children!=null||a.dangerouslySetInnerHTML!=null))throw Error(n(137,r));if(a.dangerouslySetInnerHTML!=null){if(a.children!=null)throw Error(n(60));if(typeof a.dangerouslySetInnerHTML!="object"||!("__html"in a.dangerouslySetInnerHTML))throw Error(n(61))}if(a.style!=null&&typeof a.style!="object")throw Error(n(62))}}function qn(r,a){if(r.indexOf("-")===-1)return typeof a.is=="string";switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Lr=null;function fs(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var Hn=null,dr=null,ue=null;function Te(r){if(r=Gi(r)){if(typeof Hn!="function")throw Error(n(280));var a=r.stateNode;a&&(a=nl(a),Hn(r.stateNode,r.type,a))}}function ee(r){dr?ue?ue.push(r):ue=[r]:dr=r}function Me(){if(dr){var r=dr,a=ue;if(ue=dr=null,Te(r),a)for(r=0;r<a.length;r++)Te(a[r])}}function Je(r,a){return r(a)}function yt(){}var rn=!1;function wt(r,a,c){if(rn)return r(a,c);rn=!0;try{return Je(r,a,c)}finally{rn=!1,(dr!==null||ue!==null)&&(yt(),Me())}}function Tt(r,a){var c=r.stateNode;if(c===null)return null;var m=nl(c);if(m===null)return null;c=m[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(m=!m.disabled)||(r=r.type,m=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!m;break e;default:r=!1}if(r)return null;if(c&&typeof c!="function")throw Error(n(231,a,typeof c));return c}var nn=!1;if(u)try{var Ft={};Object.defineProperty(Ft,"passive",{get:function(){nn=!0}}),window.addEventListener("test",Ft,Ft),window.removeEventListener("test",Ft,Ft)}catch{nn=!1}function ks(r,a,c,m,x,N,_,L,F){var Y=Array.prototype.slice.call(arguments,3);try{a.apply(c,Y)}catch(de){this.onError(de)}}var an=!1,As=null,Ti=!1,cd=null,Vb={onError:function(r){an=!0,As=r}};function qb(r,a,c,m,x,N,_,L,F){an=!1,As=null,ks.apply(Vb,arguments)}function Hb(r,a,c,m,x,N,_,L,F){if(qb.apply(this,arguments),an){if(an){var Y=As;an=!1,As=null}else throw Error(n(198));Ti||(Ti=!0,cd=Y)}}function Wn(r){var a=r,c=r;if(r.alternate)for(;a.return;)a=a.return;else{r=a;do a=r,(a.flags&4098)!==0&&(c=a.return),r=a.return;while(r)}return a.tag===3?c:null}function rh(r){if(r.tag===13){var a=r.memoizedState;if(a===null&&(r=r.alternate,r!==null&&(a=r.memoizedState)),a!==null)return a.dehydrated}return null}function nh(r){if(Wn(r)!==r)throw Error(n(188))}function Wb(r){var a=r.alternate;if(!a){if(a=Wn(r),a===null)throw Error(n(188));return a!==r?null:r}for(var c=r,m=a;;){var x=c.return;if(x===null)break;var N=x.alternate;if(N===null){if(m=x.return,m!==null){c=m;continue}break}if(x.child===N.child){for(N=x.child;N;){if(N===c)return nh(x),r;if(N===m)return nh(x),a;N=N.sibling}throw Error(n(188))}if(c.return!==m.return)c=x,m=N;else{for(var _=!1,L=x.child;L;){if(L===c){_=!0,c=x,m=N;break}if(L===m){_=!0,m=x,c=N;break}L=L.sibling}if(!_){for(L=N.child;L;){if(L===c){_=!0,c=N,m=x;break}if(L===m){_=!0,m=N,c=x;break}L=L.sibling}if(!_)throw Error(n(189))}}if(c.alternate!==m)throw Error(n(190))}if(c.tag!==3)throw Error(n(188));return c.stateNode.current===c?r:a}function ah(r){return r=Wb(r),r!==null?ih(r):null}function ih(r){if(r.tag===5||r.tag===6)return r;for(r=r.child;r!==null;){var a=ih(r);if(a!==null)return a;r=r.sibling}return null}var oh=s.unstable_scheduleCallback,lh=s.unstable_cancelCallback,Kb=s.unstable_shouldYield,Gb=s.unstable_requestPaint,gt=s.unstable_now,Jb=s.unstable_getCurrentPriorityLevel,dd=s.unstable_ImmediatePriority,ch=s.unstable_UserBlockingPriority,$o=s.unstable_NormalPriority,Yb=s.unstable_LowPriority,dh=s.unstable_IdlePriority,Fo=null,ur=null;function Qb(r){if(ur&&typeof ur.onCommitFiberRoot=="function")try{ur.onCommitFiberRoot(Fo,r,void 0,(r.current.flags&128)===128)}catch{}}var Ws=Math.clz32?Math.clz32:ej,Xb=Math.log,Zb=Math.LN2;function ej(r){return r>>>=0,r===0?32:31-(Xb(r)/Zb|0)|0}var zo=64,Bo=4194304;function Pi(r){switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return r&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return r}}function Uo(r,a){var c=r.pendingLanes;if(c===0)return 0;var m=0,x=r.suspendedLanes,N=r.pingedLanes,_=c&268435455;if(_!==0){var L=_&~x;L!==0?m=Pi(L):(N&=_,N!==0&&(m=Pi(N)))}else _=c&~x,_!==0?m=Pi(_):N!==0&&(m=Pi(N));if(m===0)return 0;if(a!==0&&a!==m&&(a&x)===0&&(x=m&-m,N=a&-a,x>=N||x===16&&(N&4194240)!==0))return a;if((m&4)!==0&&(m|=c&16),a=r.entangledLanes,a!==0)for(r=r.entanglements,a&=m;0<a;)c=31-Ws(a),x=1<<c,m|=r[c],a&=~x;return m}function tj(r,a){switch(r){case 1:case 2:case 4:return a+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function sj(r,a){for(var c=r.suspendedLanes,m=r.pingedLanes,x=r.expirationTimes,N=r.pendingLanes;0<N;){var _=31-Ws(N),L=1<<_,F=x[_];F===-1?((L&c)===0||(L&m)!==0)&&(x[_]=tj(L,a)):F<=a&&(r.expiredLanes|=L),N&=~L}}function ud(r){return r=r.pendingLanes&-1073741825,r!==0?r:r&1073741824?1073741824:0}function uh(){var r=zo;return zo<<=1,(zo&4194240)===0&&(zo=64),r}function md(r){for(var a=[],c=0;31>c;c++)a.push(r);return a}function Ii(r,a,c){r.pendingLanes|=a,a!==536870912&&(r.suspendedLanes=0,r.pingedLanes=0),r=r.eventTimes,a=31-Ws(a),r[a]=c}function rj(r,a){var c=r.pendingLanes&~a;r.pendingLanes=a,r.suspendedLanes=0,r.pingedLanes=0,r.expiredLanes&=a,r.mutableReadLanes&=a,r.entangledLanes&=a,a=r.entanglements;var m=r.eventTimes;for(r=r.expirationTimes;0<c;){var x=31-Ws(c),N=1<<x;a[x]=0,m[x]=-1,r[x]=-1,c&=~N}}function fd(r,a){var c=r.entangledLanes|=a;for(r=r.entanglements;c;){var m=31-Ws(c),x=1<<m;x&a|r[m]&a&&(r[m]|=a),c&=~x}}var tt=0;function mh(r){return r&=-r,1<r?4<r?(r&268435455)!==0?16:536870912:4:1}var fh,hd,hh,ph,gh,pd=!1,Vo=[],on=null,ln=null,cn=null,Ai=new Map,Ri=new Map,dn=[],nj="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function xh(r,a){switch(r){case"focusin":case"focusout":on=null;break;case"dragenter":case"dragleave":ln=null;break;case"mouseover":case"mouseout":cn=null;break;case"pointerover":case"pointerout":Ai.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ri.delete(a.pointerId)}}function Di(r,a,c,m,x,N){return r===null||r.nativeEvent!==N?(r={blockedOn:a,domEventName:c,eventSystemFlags:m,nativeEvent:N,targetContainers:[x]},a!==null&&(a=Gi(a),a!==null&&hd(a)),r):(r.eventSystemFlags|=m,a=r.targetContainers,x!==null&&a.indexOf(x)===-1&&a.push(x),r)}function aj(r,a,c,m,x){switch(a){case"focusin":return on=Di(on,r,a,c,m,x),!0;case"dragenter":return ln=Di(ln,r,a,c,m,x),!0;case"mouseover":return cn=Di(cn,r,a,c,m,x),!0;case"pointerover":var N=x.pointerId;return Ai.set(N,Di(Ai.get(N)||null,r,a,c,m,x)),!0;case"gotpointercapture":return N=x.pointerId,Ri.set(N,Di(Ri.get(N)||null,r,a,c,m,x)),!0}return!1}function vh(r){var a=Kn(r.target);if(a!==null){var c=Wn(a);if(c!==null){if(a=c.tag,a===13){if(a=rh(c),a!==null){r.blockedOn=a,gh(r.priority,function(){hh(c)});return}}else if(a===3&&c.stateNode.current.memoizedState.isDehydrated){r.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}r.blockedOn=null}function qo(r){if(r.blockedOn!==null)return!1;for(var a=r.targetContainers;0<a.length;){var c=xd(r.domEventName,r.eventSystemFlags,a[0],r.nativeEvent);if(c===null){c=r.nativeEvent;var m=new c.constructor(c.type,c);Lr=m,c.target.dispatchEvent(m),Lr=null}else return a=Gi(c),a!==null&&hd(a),r.blockedOn=c,!1;a.shift()}return!0}function yh(r,a,c){qo(r)&&c.delete(a)}function ij(){pd=!1,on!==null&&qo(on)&&(on=null),ln!==null&&qo(ln)&&(ln=null),cn!==null&&qo(cn)&&(cn=null),Ai.forEach(yh),Ri.forEach(yh)}function Mi(r,a){r.blockedOn===a&&(r.blockedOn=null,pd||(pd=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,ij)))}function Oi(r){function a(x){return Mi(x,r)}if(0<Vo.length){Mi(Vo[0],r);for(var c=1;c<Vo.length;c++){var m=Vo[c];m.blockedOn===r&&(m.blockedOn=null)}}for(on!==null&&Mi(on,r),ln!==null&&Mi(ln,r),cn!==null&&Mi(cn,r),Ai.forEach(a),Ri.forEach(a),c=0;c<dn.length;c++)m=dn[c],m.blockedOn===r&&(m.blockedOn=null);for(;0<dn.length&&(c=dn[0],c.blockedOn===null);)vh(c),c.blockedOn===null&&dn.shift()}var _a=P.ReactCurrentBatchConfig,Ho=!0;function oj(r,a,c,m){var x=tt,N=_a.transition;_a.transition=null;try{tt=1,gd(r,a,c,m)}finally{tt=x,_a.transition=N}}function lj(r,a,c,m){var x=tt,N=_a.transition;_a.transition=null;try{tt=4,gd(r,a,c,m)}finally{tt=x,_a.transition=N}}function gd(r,a,c,m){if(Ho){var x=xd(r,a,c,m);if(x===null)Dd(r,a,m,Wo,c),xh(r,m);else if(aj(x,r,a,c,m))m.stopPropagation();else if(xh(r,m),a&4&&-1<nj.indexOf(r)){for(;x!==null;){var N=Gi(x);if(N!==null&&fh(N),N=xd(r,a,c,m),N===null&&Dd(r,a,m,Wo,c),N===x)break;x=N}x!==null&&m.stopPropagation()}else Dd(r,a,m,null,c)}}var Wo=null;function xd(r,a,c,m){if(Wo=null,r=fs(m),r=Kn(r),r!==null)if(a=Wn(r),a===null)r=null;else if(c=a.tag,c===13){if(r=rh(a),r!==null)return r;r=null}else if(c===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;r=null}else a!==r&&(r=null);return Wo=r,null}function wh(r){switch(r){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Jb()){case dd:return 1;case ch:return 4;case $o:case Yb:return 16;case dh:return 536870912;default:return 16}default:return 16}}var un=null,vd=null,Ko=null;function bh(){if(Ko)return Ko;var r,a=vd,c=a.length,m,x="value"in un?un.value:un.textContent,N=x.length;for(r=0;r<c&&a[r]===x[r];r++);var _=c-r;for(m=1;m<=_&&a[c-m]===x[N-m];m++);return Ko=x.slice(r,1<m?1-m:void 0)}function Go(r){var a=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&a===13&&(r=13)):r=a,r===10&&(r=13),32<=r||r===13?r:0}function Jo(){return!0}function jh(){return!1}function Cs(r){function a(c,m,x,N,_){this._reactName=c,this._targetInst=x,this.type=m,this.nativeEvent=N,this.target=_,this.currentTarget=null;for(var L in r)r.hasOwnProperty(L)&&(c=r[L],this[L]=c?c(N):N[L]);return this.isDefaultPrevented=(N.defaultPrevented!=null?N.defaultPrevented:N.returnValue===!1)?Jo:jh,this.isPropagationStopped=jh,this}return H(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=Jo)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=Jo)},persist:function(){},isPersistent:Jo}),a}var Ea={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},yd=Cs(Ea),Li=H({},Ea,{view:0,detail:0}),cj=Cs(Li),wd,bd,$i,Yo=H({},Li,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Nd,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==$i&&($i&&r.type==="mousemove"?(wd=r.screenX-$i.screenX,bd=r.screenY-$i.screenY):bd=wd=0,$i=r),wd)},movementY:function(r){return"movementY"in r?r.movementY:bd}}),Nh=Cs(Yo),dj=H({},Yo,{dataTransfer:0}),uj=Cs(dj),mj=H({},Li,{relatedTarget:0}),jd=Cs(mj),fj=H({},Ea,{animationName:0,elapsedTime:0,pseudoElement:0}),hj=Cs(fj),pj=H({},Ea,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),gj=Cs(pj),xj=H({},Ea,{data:0}),Sh=Cs(xj),vj={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},yj={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},wj={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function bj(r){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(r):(r=wj[r])?!!a[r]:!1}function Nd(){return bj}var jj=H({},Li,{key:function(r){if(r.key){var a=vj[r.key]||r.key;if(a!=="Unidentified")return a}return r.type==="keypress"?(r=Go(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?yj[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Nd,charCode:function(r){return r.type==="keypress"?Go(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?Go(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),Nj=Cs(jj),Sj=H({},Yo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),kh=Cs(Sj),kj=H({},Li,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Nd}),Cj=Cs(kj),_j=H({},Ea,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ej=Cs(_j),Tj=H({},Yo,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),Pj=Cs(Tj),Ij=[9,13,27,32],Sd=u&&"CompositionEvent"in window,Fi=null;u&&"documentMode"in document&&(Fi=document.documentMode);var Aj=u&&"TextEvent"in window&&!Fi,Ch=u&&(!Sd||Fi&&8<Fi&&11>=Fi),_h=" ",Eh=!1;function Th(r,a){switch(r){case"keyup":return Ij.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ph(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var Ta=!1;function Rj(r,a){switch(r){case"compositionend":return Ph(a);case"keypress":return a.which!==32?null:(Eh=!0,_h);case"textInput":return r=a.data,r===_h&&Eh?null:r;default:return null}}function Dj(r,a){if(Ta)return r==="compositionend"||!Sd&&Th(r,a)?(r=bh(),Ko=vd=un=null,Ta=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return Ch&&a.locale!=="ko"?null:a.data;default:return null}}var Mj={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ih(r){var a=r&&r.nodeName&&r.nodeName.toLowerCase();return a==="input"?!!Mj[r.type]:a==="textarea"}function Ah(r,a,c,m){ee(m),a=tl(a,"onChange"),0<a.length&&(c=new yd("onChange","change",null,c,m),r.push({event:c,listeners:a}))}var zi=null,Bi=null;function Oj(r){Yh(r,0)}function Qo(r){var a=Da(r);if(Ne(a))return r}function Lj(r,a){if(r==="change")return a}var Rh=!1;if(u){var kd;if(u){var Cd="oninput"in document;if(!Cd){var Dh=document.createElement("div");Dh.setAttribute("oninput","return;"),Cd=typeof Dh.oninput=="function"}kd=Cd}else kd=!1;Rh=kd&&(!document.documentMode||9<document.documentMode)}function Mh(){zi&&(zi.detachEvent("onpropertychange",Oh),Bi=zi=null)}function Oh(r){if(r.propertyName==="value"&&Qo(Bi)){var a=[];Ah(a,Bi,r,fs(r)),wt(Oj,a)}}function $j(r,a,c){r==="focusin"?(Mh(),zi=a,Bi=c,zi.attachEvent("onpropertychange",Oh)):r==="focusout"&&Mh()}function Fj(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return Qo(Bi)}function zj(r,a){if(r==="click")return Qo(a)}function Bj(r,a){if(r==="input"||r==="change")return Qo(a)}function Uj(r,a){return r===a&&(r!==0||1/r===1/a)||r!==r&&a!==a}var Ks=typeof Object.is=="function"?Object.is:Uj;function Ui(r,a){if(Ks(r,a))return!0;if(typeof r!="object"||r===null||typeof a!="object"||a===null)return!1;var c=Object.keys(r),m=Object.keys(a);if(c.length!==m.length)return!1;for(m=0;m<c.length;m++){var x=c[m];if(!f.call(a,x)||!Ks(r[x],a[x]))return!1}return!0}function Lh(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function $h(r,a){var c=Lh(r);r=0;for(var m;c;){if(c.nodeType===3){if(m=r+c.textContent.length,r<=a&&m>=a)return{node:c,offset:a-r};r=m}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=Lh(c)}}function Fh(r,a){return r&&a?r===a?!0:r&&r.nodeType===3?!1:a&&a.nodeType===3?Fh(r,a.parentNode):"contains"in r?r.contains(a):r.compareDocumentPosition?!!(r.compareDocumentPosition(a)&16):!1:!1}function zh(){for(var r=window,a=Xe();a instanceof r.HTMLIFrameElement;){try{var c=typeof a.contentWindow.location.href=="string"}catch{c=!1}if(c)r=a.contentWindow;else break;a=Xe(r.document)}return a}function _d(r){var a=r&&r.nodeName&&r.nodeName.toLowerCase();return a&&(a==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||a==="textarea"||r.contentEditable==="true")}function Vj(r){var a=zh(),c=r.focusedElem,m=r.selectionRange;if(a!==c&&c&&c.ownerDocument&&Fh(c.ownerDocument.documentElement,c)){if(m!==null&&_d(c)){if(a=m.start,r=m.end,r===void 0&&(r=a),"selectionStart"in c)c.selectionStart=a,c.selectionEnd=Math.min(r,c.value.length);else if(r=(a=c.ownerDocument||document)&&a.defaultView||window,r.getSelection){r=r.getSelection();var x=c.textContent.length,N=Math.min(m.start,x);m=m.end===void 0?N:Math.min(m.end,x),!r.extend&&N>m&&(x=m,m=N,N=x),x=$h(c,N);var _=$h(c,m);x&&_&&(r.rangeCount!==1||r.anchorNode!==x.node||r.anchorOffset!==x.offset||r.focusNode!==_.node||r.focusOffset!==_.offset)&&(a=a.createRange(),a.setStart(x.node,x.offset),r.removeAllRanges(),N>m?(r.addRange(a),r.extend(_.node,_.offset)):(a.setEnd(_.node,_.offset),r.addRange(a)))}}for(a=[],r=c;r=r.parentNode;)r.nodeType===1&&a.push({element:r,left:r.scrollLeft,top:r.scrollTop});for(typeof c.focus=="function"&&c.focus(),c=0;c<a.length;c++)r=a[c],r.element.scrollLeft=r.left,r.element.scrollTop=r.top}}var qj=u&&"documentMode"in document&&11>=document.documentMode,Pa=null,Ed=null,Vi=null,Td=!1;function Bh(r,a,c){var m=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;Td||Pa==null||Pa!==Xe(m)||(m=Pa,"selectionStart"in m&&_d(m)?m={start:m.selectionStart,end:m.selectionEnd}:(m=(m.ownerDocument&&m.ownerDocument.defaultView||window).getSelection(),m={anchorNode:m.anchorNode,anchorOffset:m.anchorOffset,focusNode:m.focusNode,focusOffset:m.focusOffset}),Vi&&Ui(Vi,m)||(Vi=m,m=tl(Ed,"onSelect"),0<m.length&&(a=new yd("onSelect","select",null,a,c),r.push({event:a,listeners:m}),a.target=Pa)))}function Xo(r,a){var c={};return c[r.toLowerCase()]=a.toLowerCase(),c["Webkit"+r]="webkit"+a,c["Moz"+r]="moz"+a,c}var Ia={animationend:Xo("Animation","AnimationEnd"),animationiteration:Xo("Animation","AnimationIteration"),animationstart:Xo("Animation","AnimationStart"),transitionend:Xo("Transition","TransitionEnd")},Pd={},Uh={};u&&(Uh=document.createElement("div").style,"AnimationEvent"in window||(delete Ia.animationend.animation,delete Ia.animationiteration.animation,delete Ia.animationstart.animation),"TransitionEvent"in window||delete Ia.transitionend.transition);function Zo(r){if(Pd[r])return Pd[r];if(!Ia[r])return r;var a=Ia[r],c;for(c in a)if(a.hasOwnProperty(c)&&c in Uh)return Pd[r]=a[c];return r}var Vh=Zo("animationend"),qh=Zo("animationiteration"),Hh=Zo("animationstart"),Wh=Zo("transitionend"),Kh=new Map,Gh="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function mn(r,a){Kh.set(r,a),l(a,[r])}for(var Id=0;Id<Gh.length;Id++){var Ad=Gh[Id],Hj=Ad.toLowerCase(),Wj=Ad[0].toUpperCase()+Ad.slice(1);mn(Hj,"on"+Wj)}mn(Vh,"onAnimationEnd"),mn(qh,"onAnimationIteration"),mn(Hh,"onAnimationStart"),mn("dblclick","onDoubleClick"),mn("focusin","onFocus"),mn("focusout","onBlur"),mn(Wh,"onTransitionEnd"),d("onMouseEnter",["mouseout","mouseover"]),d("onMouseLeave",["mouseout","mouseover"]),d("onPointerEnter",["pointerout","pointerover"]),d("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var qi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Kj=new Set("cancel close invalid load scroll toggle".split(" ").concat(qi));function Jh(r,a,c){var m=r.type||"unknown-event";r.currentTarget=c,Hb(m,a,void 0,r),r.currentTarget=null}function Yh(r,a){a=(a&4)!==0;for(var c=0;c<r.length;c++){var m=r[c],x=m.event;m=m.listeners;e:{var N=void 0;if(a)for(var _=m.length-1;0<=_;_--){var L=m[_],F=L.instance,Y=L.currentTarget;if(L=L.listener,F!==N&&x.isPropagationStopped())break e;Jh(x,L,Y),N=F}else for(_=0;_<m.length;_++){if(L=m[_],F=L.instance,Y=L.currentTarget,L=L.listener,F!==N&&x.isPropagationStopped())break e;Jh(x,L,Y),N=F}}}if(Ti)throw r=cd,Ti=!1,cd=null,r}function it(r,a){var c=a[zd];c===void 0&&(c=a[zd]=new Set);var m=r+"__bubble";c.has(m)||(Qh(a,r,2,!1),c.add(m))}function Rd(r,a,c){var m=0;a&&(m|=4),Qh(c,r,m,a)}var el="_reactListening"+Math.random().toString(36).slice(2);function Hi(r){if(!r[el]){r[el]=!0,i.forEach(function(c){c!=="selectionchange"&&(Kj.has(c)||Rd(c,!1,r),Rd(c,!0,r))});var a=r.nodeType===9?r:r.ownerDocument;a===null||a[el]||(a[el]=!0,Rd("selectionchange",!1,a))}}function Qh(r,a,c,m){switch(wh(a)){case 1:var x=oj;break;case 4:x=lj;break;default:x=gd}c=x.bind(null,a,c,r),x=void 0,!nn||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(x=!0),m?x!==void 0?r.addEventListener(a,c,{capture:!0,passive:x}):r.addEventListener(a,c,!0):x!==void 0?r.addEventListener(a,c,{passive:x}):r.addEventListener(a,c,!1)}function Dd(r,a,c,m,x){var N=m;if((a&1)===0&&(a&2)===0&&m!==null)e:for(;;){if(m===null)return;var _=m.tag;if(_===3||_===4){var L=m.stateNode.containerInfo;if(L===x||L.nodeType===8&&L.parentNode===x)break;if(_===4)for(_=m.return;_!==null;){var F=_.tag;if((F===3||F===4)&&(F=_.stateNode.containerInfo,F===x||F.nodeType===8&&F.parentNode===x))return;_=_.return}for(;L!==null;){if(_=Kn(L),_===null)return;if(F=_.tag,F===5||F===6){m=N=_;continue e}L=L.parentNode}}m=m.return}wt(function(){var Y=N,de=fs(c),me=[];e:{var oe=Kh.get(r);if(oe!==void 0){var we=yd,ke=r;switch(r){case"keypress":if(Go(c)===0)break e;case"keydown":case"keyup":we=Nj;break;case"focusin":ke="focus",we=jd;break;case"focusout":ke="blur",we=jd;break;case"beforeblur":case"afterblur":we=jd;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":we=Nh;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":we=uj;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":we=Cj;break;case Vh:case qh:case Hh:we=hj;break;case Wh:we=Ej;break;case"scroll":we=cj;break;case"wheel":we=Pj;break;case"copy":case"cut":case"paste":we=gj;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":we=kh}var Pe=(a&4)!==0,xt=!Pe&&r==="scroll",K=Pe?oe!==null?oe+"Capture":null:oe;Pe=[];for(var B=Y,G;B!==null;){G=B;var fe=G.stateNode;if(G.tag===5&&fe!==null&&(G=fe,K!==null&&(fe=Tt(B,K),fe!=null&&Pe.push(Wi(B,fe,G)))),xt)break;B=B.return}0<Pe.length&&(oe=new we(oe,ke,null,c,de),me.push({event:oe,listeners:Pe}))}}if((a&7)===0){e:{if(oe=r==="mouseover"||r==="pointerover",we=r==="mouseout"||r==="pointerout",oe&&c!==Lr&&(ke=c.relatedTarget||c.fromElement)&&(Kn(ke)||ke[$r]))break e;if((we||oe)&&(oe=de.window===de?de:(oe=de.ownerDocument)?oe.defaultView||oe.parentWindow:window,we?(ke=c.relatedTarget||c.toElement,we=Y,ke=ke?Kn(ke):null,ke!==null&&(xt=Wn(ke),ke!==xt||ke.tag!==5&&ke.tag!==6)&&(ke=null)):(we=null,ke=Y),we!==ke)){if(Pe=Nh,fe="onMouseLeave",K="onMouseEnter",B="mouse",(r==="pointerout"||r==="pointerover")&&(Pe=kh,fe="onPointerLeave",K="onPointerEnter",B="pointer"),xt=we==null?oe:Da(we),G=ke==null?oe:Da(ke),oe=new Pe(fe,B+"leave",we,c,de),oe.target=xt,oe.relatedTarget=G,fe=null,Kn(de)===Y&&(Pe=new Pe(K,B+"enter",ke,c,de),Pe.target=G,Pe.relatedTarget=xt,fe=Pe),xt=fe,we&&ke)t:{for(Pe=we,K=ke,B=0,G=Pe;G;G=Aa(G))B++;for(G=0,fe=K;fe;fe=Aa(fe))G++;for(;0<B-G;)Pe=Aa(Pe),B--;for(;0<G-B;)K=Aa(K),G--;for(;B--;){if(Pe===K||K!==null&&Pe===K.alternate)break t;Pe=Aa(Pe),K=Aa(K)}Pe=null}else Pe=null;we!==null&&Xh(me,oe,we,Pe,!1),ke!==null&&xt!==null&&Xh(me,xt,ke,Pe,!0)}}e:{if(oe=Y?Da(Y):window,we=oe.nodeName&&oe.nodeName.toLowerCase(),we==="select"||we==="input"&&oe.type==="file")var Re=Lj;else if(Ih(oe))if(Rh)Re=Bj;else{Re=Fj;var Fe=$j}else(we=oe.nodeName)&&we.toLowerCase()==="input"&&(oe.type==="checkbox"||oe.type==="radio")&&(Re=zj);if(Re&&(Re=Re(r,Y))){Ah(me,Re,c,de);break e}Fe&&Fe(r,oe,Y),r==="focusout"&&(Fe=oe._wrapperState)&&Fe.controlled&&oe.type==="number"&&Ht(oe,"number",oe.value)}switch(Fe=Y?Da(Y):window,r){case"focusin":(Ih(Fe)||Fe.contentEditable==="true")&&(Pa=Fe,Ed=Y,Vi=null);break;case"focusout":Vi=Ed=Pa=null;break;case"mousedown":Td=!0;break;case"contextmenu":case"mouseup":case"dragend":Td=!1,Bh(me,c,de);break;case"selectionchange":if(qj)break;case"keydown":case"keyup":Bh(me,c,de)}var ze;if(Sd)e:{switch(r){case"compositionstart":var Be="onCompositionStart";break e;case"compositionend":Be="onCompositionEnd";break e;case"compositionupdate":Be="onCompositionUpdate";break e}Be=void 0}else Ta?Th(r,c)&&(Be="onCompositionEnd"):r==="keydown"&&c.keyCode===229&&(Be="onCompositionStart");Be&&(Ch&&c.locale!=="ko"&&(Ta||Be!=="onCompositionStart"?Be==="onCompositionEnd"&&Ta&&(ze=bh()):(un=de,vd="value"in un?un.value:un.textContent,Ta=!0)),Fe=tl(Y,Be),0<Fe.length&&(Be=new Sh(Be,r,null,c,de),me.push({event:Be,listeners:Fe}),ze?Be.data=ze:(ze=Ph(c),ze!==null&&(Be.data=ze)))),(ze=Aj?Rj(r,c):Dj(r,c))&&(Y=tl(Y,"onBeforeInput"),0<Y.length&&(de=new Sh("onBeforeInput","beforeinput",null,c,de),me.push({event:de,listeners:Y}),de.data=ze))}Yh(me,a)})}function Wi(r,a,c){return{instance:r,listener:a,currentTarget:c}}function tl(r,a){for(var c=a+"Capture",m=[];r!==null;){var x=r,N=x.stateNode;x.tag===5&&N!==null&&(x=N,N=Tt(r,c),N!=null&&m.unshift(Wi(r,N,x)),N=Tt(r,a),N!=null&&m.push(Wi(r,N,x))),r=r.return}return m}function Aa(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5);return r||null}function Xh(r,a,c,m,x){for(var N=a._reactName,_=[];c!==null&&c!==m;){var L=c,F=L.alternate,Y=L.stateNode;if(F!==null&&F===m)break;L.tag===5&&Y!==null&&(L=Y,x?(F=Tt(c,N),F!=null&&_.unshift(Wi(c,F,L))):x||(F=Tt(c,N),F!=null&&_.push(Wi(c,F,L)))),c=c.return}_.length!==0&&r.push({event:a,listeners:_})}var Gj=/\r\n?/g,Jj=/\u0000|\uFFFD/g;function Zh(r){return(typeof r=="string"?r:""+r).replace(Gj,`
`).replace(Jj,"")}function sl(r,a,c){if(a=Zh(a),Zh(r)!==a&&c)throw Error(n(425))}function rl(){}var Md=null,Od=null;function Ld(r,a){return r==="textarea"||r==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var $d=typeof setTimeout=="function"?setTimeout:void 0,Yj=typeof clearTimeout=="function"?clearTimeout:void 0,ep=typeof Promise=="function"?Promise:void 0,Qj=typeof queueMicrotask=="function"?queueMicrotask:typeof ep<"u"?function(r){return ep.resolve(null).then(r).catch(Xj)}:$d;function Xj(r){setTimeout(function(){throw r})}function Fd(r,a){var c=a,m=0;do{var x=c.nextSibling;if(r.removeChild(c),x&&x.nodeType===8)if(c=x.data,c==="/$"){if(m===0){r.removeChild(x),Oi(a);return}m--}else c!=="$"&&c!=="$?"&&c!=="$!"||m++;c=x}while(c);Oi(a)}function fn(r){for(;r!=null;r=r.nextSibling){var a=r.nodeType;if(a===1||a===3)break;if(a===8){if(a=r.data,a==="$"||a==="$!"||a==="$?")break;if(a==="/$")return null}}return r}function tp(r){r=r.previousSibling;for(var a=0;r;){if(r.nodeType===8){var c=r.data;if(c==="$"||c==="$!"||c==="$?"){if(a===0)return r;a--}else c==="/$"&&a++}r=r.previousSibling}return null}var Ra=Math.random().toString(36).slice(2),mr="__reactFiber$"+Ra,Ki="__reactProps$"+Ra,$r="__reactContainer$"+Ra,zd="__reactEvents$"+Ra,Zj="__reactListeners$"+Ra,eN="__reactHandles$"+Ra;function Kn(r){var a=r[mr];if(a)return a;for(var c=r.parentNode;c;){if(a=c[$r]||c[mr]){if(c=a.alternate,a.child!==null||c!==null&&c.child!==null)for(r=tp(r);r!==null;){if(c=r[mr])return c;r=tp(r)}return a}r=c,c=r.parentNode}return null}function Gi(r){return r=r[mr]||r[$r],!r||r.tag!==5&&r.tag!==6&&r.tag!==13&&r.tag!==3?null:r}function Da(r){if(r.tag===5||r.tag===6)return r.stateNode;throw Error(n(33))}function nl(r){return r[Ki]||null}var Bd=[],Ma=-1;function hn(r){return{current:r}}function ot(r){0>Ma||(r.current=Bd[Ma],Bd[Ma]=null,Ma--)}function nt(r,a){Ma++,Bd[Ma]=r.current,r.current=a}var pn={},Wt=hn(pn),hs=hn(!1),Gn=pn;function Oa(r,a){var c=r.type.contextTypes;if(!c)return pn;var m=r.stateNode;if(m&&m.__reactInternalMemoizedUnmaskedChildContext===a)return m.__reactInternalMemoizedMaskedChildContext;var x={},N;for(N in c)x[N]=a[N];return m&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=a,r.__reactInternalMemoizedMaskedChildContext=x),x}function ps(r){return r=r.childContextTypes,r!=null}function al(){ot(hs),ot(Wt)}function sp(r,a,c){if(Wt.current!==pn)throw Error(n(168));nt(Wt,a),nt(hs,c)}function rp(r,a,c){var m=r.stateNode;if(a=a.childContextTypes,typeof m.getChildContext!="function")return c;m=m.getChildContext();for(var x in m)if(!(x in a))throw Error(n(108,W(r)||"Unknown",x));return H({},c,m)}function il(r){return r=(r=r.stateNode)&&r.__reactInternalMemoizedMergedChildContext||pn,Gn=Wt.current,nt(Wt,r),nt(hs,hs.current),!0}function np(r,a,c){var m=r.stateNode;if(!m)throw Error(n(169));c?(r=rp(r,a,Gn),m.__reactInternalMemoizedMergedChildContext=r,ot(hs),ot(Wt),nt(Wt,r)):ot(hs),nt(hs,c)}var Fr=null,ol=!1,Ud=!1;function ap(r){Fr===null?Fr=[r]:Fr.push(r)}function tN(r){ol=!0,ap(r)}function gn(){if(!Ud&&Fr!==null){Ud=!0;var r=0,a=tt;try{var c=Fr;for(tt=1;r<c.length;r++){var m=c[r];do m=m(!0);while(m!==null)}Fr=null,ol=!1}catch(x){throw Fr!==null&&(Fr=Fr.slice(r+1)),oh(dd,gn),x}finally{tt=a,Ud=!1}}return null}var La=[],$a=0,ll=null,cl=0,Rs=[],Ds=0,Jn=null,zr=1,Br="";function Yn(r,a){La[$a++]=cl,La[$a++]=ll,ll=r,cl=a}function ip(r,a,c){Rs[Ds++]=zr,Rs[Ds++]=Br,Rs[Ds++]=Jn,Jn=r;var m=zr;r=Br;var x=32-Ws(m)-1;m&=~(1<<x),c+=1;var N=32-Ws(a)+x;if(30<N){var _=x-x%5;N=(m&(1<<_)-1).toString(32),m>>=_,x-=_,zr=1<<32-Ws(a)+x|c<<x|m,Br=N+r}else zr=1<<N|c<<x|m,Br=r}function Vd(r){r.return!==null&&(Yn(r,1),ip(r,1,0))}function qd(r){for(;r===ll;)ll=La[--$a],La[$a]=null,cl=La[--$a],La[$a]=null;for(;r===Jn;)Jn=Rs[--Ds],Rs[Ds]=null,Br=Rs[--Ds],Rs[Ds]=null,zr=Rs[--Ds],Rs[Ds]=null}var _s=null,Es=null,ct=!1,Gs=null;function op(r,a){var c=$s(5,null,null,0);c.elementType="DELETED",c.stateNode=a,c.return=r,a=r.deletions,a===null?(r.deletions=[c],r.flags|=16):a.push(c)}function lp(r,a){switch(r.tag){case 5:var c=r.type;return a=a.nodeType!==1||c.toLowerCase()!==a.nodeName.toLowerCase()?null:a,a!==null?(r.stateNode=a,_s=r,Es=fn(a.firstChild),!0):!1;case 6:return a=r.pendingProps===""||a.nodeType!==3?null:a,a!==null?(r.stateNode=a,_s=r,Es=null,!0):!1;case 13:return a=a.nodeType!==8?null:a,a!==null?(c=Jn!==null?{id:zr,overflow:Br}:null,r.memoizedState={dehydrated:a,treeContext:c,retryLane:1073741824},c=$s(18,null,null,0),c.stateNode=a,c.return=r,r.child=c,_s=r,Es=null,!0):!1;default:return!1}}function Hd(r){return(r.mode&1)!==0&&(r.flags&128)===0}function Wd(r){if(ct){var a=Es;if(a){var c=a;if(!lp(r,a)){if(Hd(r))throw Error(n(418));a=fn(c.nextSibling);var m=_s;a&&lp(r,a)?op(m,c):(r.flags=r.flags&-4097|2,ct=!1,_s=r)}}else{if(Hd(r))throw Error(n(418));r.flags=r.flags&-4097|2,ct=!1,_s=r}}}function cp(r){for(r=r.return;r!==null&&r.tag!==5&&r.tag!==3&&r.tag!==13;)r=r.return;_s=r}function dl(r){if(r!==_s)return!1;if(!ct)return cp(r),ct=!0,!1;var a;if((a=r.tag!==3)&&!(a=r.tag!==5)&&(a=r.type,a=a!=="head"&&a!=="body"&&!Ld(r.type,r.memoizedProps)),a&&(a=Es)){if(Hd(r))throw dp(),Error(n(418));for(;a;)op(r,a),a=fn(a.nextSibling)}if(cp(r),r.tag===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(n(317));e:{for(r=r.nextSibling,a=0;r;){if(r.nodeType===8){var c=r.data;if(c==="/$"){if(a===0){Es=fn(r.nextSibling);break e}a--}else c!=="$"&&c!=="$!"&&c!=="$?"||a++}r=r.nextSibling}Es=null}}else Es=_s?fn(r.stateNode.nextSibling):null;return!0}function dp(){for(var r=Es;r;)r=fn(r.nextSibling)}function Fa(){Es=_s=null,ct=!1}function Kd(r){Gs===null?Gs=[r]:Gs.push(r)}var sN=P.ReactCurrentBatchConfig;function Ji(r,a,c){if(r=c.ref,r!==null&&typeof r!="function"&&typeof r!="object"){if(c._owner){if(c=c._owner,c){if(c.tag!==1)throw Error(n(309));var m=c.stateNode}if(!m)throw Error(n(147,r));var x=m,N=""+r;return a!==null&&a.ref!==null&&typeof a.ref=="function"&&a.ref._stringRef===N?a.ref:(a=function(_){var L=x.refs;_===null?delete L[N]:L[N]=_},a._stringRef=N,a)}if(typeof r!="string")throw Error(n(284));if(!c._owner)throw Error(n(290,r))}return r}function ul(r,a){throw r=Object.prototype.toString.call(a),Error(n(31,r==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":r))}function up(r){var a=r._init;return a(r._payload)}function mp(r){function a(K,B){if(r){var G=K.deletions;G===null?(K.deletions=[B],K.flags|=16):G.push(B)}}function c(K,B){if(!r)return null;for(;B!==null;)a(K,B),B=B.sibling;return null}function m(K,B){for(K=new Map;B!==null;)B.key!==null?K.set(B.key,B):K.set(B.index,B),B=B.sibling;return K}function x(K,B){return K=Sn(K,B),K.index=0,K.sibling=null,K}function N(K,B,G){return K.index=G,r?(G=K.alternate,G!==null?(G=G.index,G<B?(K.flags|=2,B):G):(K.flags|=2,B)):(K.flags|=1048576,B)}function _(K){return r&&K.alternate===null&&(K.flags|=2),K}function L(K,B,G,fe){return B===null||B.tag!==6?(B=$u(G,K.mode,fe),B.return=K,B):(B=x(B,G),B.return=K,B)}function F(K,B,G,fe){var Re=G.type;return Re===R?de(K,B,G.props.children,fe,G.key):B!==null&&(B.elementType===Re||typeof Re=="object"&&Re!==null&&Re.$$typeof===te&&up(Re)===B.type)?(fe=x(B,G.props),fe.ref=Ji(K,B,G),fe.return=K,fe):(fe=Ml(G.type,G.key,G.props,null,K.mode,fe),fe.ref=Ji(K,B,G),fe.return=K,fe)}function Y(K,B,G,fe){return B===null||B.tag!==4||B.stateNode.containerInfo!==G.containerInfo||B.stateNode.implementation!==G.implementation?(B=Fu(G,K.mode,fe),B.return=K,B):(B=x(B,G.children||[]),B.return=K,B)}function de(K,B,G,fe,Re){return B===null||B.tag!==7?(B=na(G,K.mode,fe,Re),B.return=K,B):(B=x(B,G),B.return=K,B)}function me(K,B,G){if(typeof B=="string"&&B!==""||typeof B=="number")return B=$u(""+B,K.mode,G),B.return=K,B;if(typeof B=="object"&&B!==null){switch(B.$$typeof){case T:return G=Ml(B.type,B.key,B.props,null,K.mode,G),G.ref=Ji(K,null,B),G.return=K,G;case A:return B=Fu(B,K.mode,G),B.return=K,B;case te:var fe=B._init;return me(K,fe(B._payload),G)}if(ut(B)||M(B))return B=na(B,K.mode,G,null),B.return=K,B;ul(K,B)}return null}function oe(K,B,G,fe){var Re=B!==null?B.key:null;if(typeof G=="string"&&G!==""||typeof G=="number")return Re!==null?null:L(K,B,""+G,fe);if(typeof G=="object"&&G!==null){switch(G.$$typeof){case T:return G.key===Re?F(K,B,G,fe):null;case A:return G.key===Re?Y(K,B,G,fe):null;case te:return Re=G._init,oe(K,B,Re(G._payload),fe)}if(ut(G)||M(G))return Re!==null?null:de(K,B,G,fe,null);ul(K,G)}return null}function we(K,B,G,fe,Re){if(typeof fe=="string"&&fe!==""||typeof fe=="number")return K=K.get(G)||null,L(B,K,""+fe,Re);if(typeof fe=="object"&&fe!==null){switch(fe.$$typeof){case T:return K=K.get(fe.key===null?G:fe.key)||null,F(B,K,fe,Re);case A:return K=K.get(fe.key===null?G:fe.key)||null,Y(B,K,fe,Re);case te:var Fe=fe._init;return we(K,B,G,Fe(fe._payload),Re)}if(ut(fe)||M(fe))return K=K.get(G)||null,de(B,K,fe,Re,null);ul(B,fe)}return null}function ke(K,B,G,fe){for(var Re=null,Fe=null,ze=B,Be=B=0,At=null;ze!==null&&Be<G.length;Be++){ze.index>Be?(At=ze,ze=null):At=ze.sibling;var et=oe(K,ze,G[Be],fe);if(et===null){ze===null&&(ze=At);break}r&&ze&&et.alternate===null&&a(K,ze),B=N(et,B,Be),Fe===null?Re=et:Fe.sibling=et,Fe=et,ze=At}if(Be===G.length)return c(K,ze),ct&&Yn(K,Be),Re;if(ze===null){for(;Be<G.length;Be++)ze=me(K,G[Be],fe),ze!==null&&(B=N(ze,B,Be),Fe===null?Re=ze:Fe.sibling=ze,Fe=ze);return ct&&Yn(K,Be),Re}for(ze=m(K,ze);Be<G.length;Be++)At=we(ze,K,Be,G[Be],fe),At!==null&&(r&&At.alternate!==null&&ze.delete(At.key===null?Be:At.key),B=N(At,B,Be),Fe===null?Re=At:Fe.sibling=At,Fe=At);return r&&ze.forEach(function(kn){return a(K,kn)}),ct&&Yn(K,Be),Re}function Pe(K,B,G,fe){var Re=M(G);if(typeof Re!="function")throw Error(n(150));if(G=Re.call(G),G==null)throw Error(n(151));for(var Fe=Re=null,ze=B,Be=B=0,At=null,et=G.next();ze!==null&&!et.done;Be++,et=G.next()){ze.index>Be?(At=ze,ze=null):At=ze.sibling;var kn=oe(K,ze,et.value,fe);if(kn===null){ze===null&&(ze=At);break}r&&ze&&kn.alternate===null&&a(K,ze),B=N(kn,B,Be),Fe===null?Re=kn:Fe.sibling=kn,Fe=kn,ze=At}if(et.done)return c(K,ze),ct&&Yn(K,Be),Re;if(ze===null){for(;!et.done;Be++,et=G.next())et=me(K,et.value,fe),et!==null&&(B=N(et,B,Be),Fe===null?Re=et:Fe.sibling=et,Fe=et);return ct&&Yn(K,Be),Re}for(ze=m(K,ze);!et.done;Be++,et=G.next())et=we(ze,K,Be,et.value,fe),et!==null&&(r&&et.alternate!==null&&ze.delete(et.key===null?Be:et.key),B=N(et,B,Be),Fe===null?Re=et:Fe.sibling=et,Fe=et);return r&&ze.forEach(function(MN){return a(K,MN)}),ct&&Yn(K,Be),Re}function xt(K,B,G,fe){if(typeof G=="object"&&G!==null&&G.type===R&&G.key===null&&(G=G.props.children),typeof G=="object"&&G!==null){switch(G.$$typeof){case T:e:{for(var Re=G.key,Fe=B;Fe!==null;){if(Fe.key===Re){if(Re=G.type,Re===R){if(Fe.tag===7){c(K,Fe.sibling),B=x(Fe,G.props.children),B.return=K,K=B;break e}}else if(Fe.elementType===Re||typeof Re=="object"&&Re!==null&&Re.$$typeof===te&&up(Re)===Fe.type){c(K,Fe.sibling),B=x(Fe,G.props),B.ref=Ji(K,Fe,G),B.return=K,K=B;break e}c(K,Fe);break}else a(K,Fe);Fe=Fe.sibling}G.type===R?(B=na(G.props.children,K.mode,fe,G.key),B.return=K,K=B):(fe=Ml(G.type,G.key,G.props,null,K.mode,fe),fe.ref=Ji(K,B,G),fe.return=K,K=fe)}return _(K);case A:e:{for(Fe=G.key;B!==null;){if(B.key===Fe)if(B.tag===4&&B.stateNode.containerInfo===G.containerInfo&&B.stateNode.implementation===G.implementation){c(K,B.sibling),B=x(B,G.children||[]),B.return=K,K=B;break e}else{c(K,B);break}else a(K,B);B=B.sibling}B=Fu(G,K.mode,fe),B.return=K,K=B}return _(K);case te:return Fe=G._init,xt(K,B,Fe(G._payload),fe)}if(ut(G))return ke(K,B,G,fe);if(M(G))return Pe(K,B,G,fe);ul(K,G)}return typeof G=="string"&&G!==""||typeof G=="number"?(G=""+G,B!==null&&B.tag===6?(c(K,B.sibling),B=x(B,G),B.return=K,K=B):(c(K,B),B=$u(G,K.mode,fe),B.return=K,K=B),_(K)):c(K,B)}return xt}var za=mp(!0),fp=mp(!1),ml=hn(null),fl=null,Ba=null,Gd=null;function Jd(){Gd=Ba=fl=null}function Yd(r){var a=ml.current;ot(ml),r._currentValue=a}function Qd(r,a,c){for(;r!==null;){var m=r.alternate;if((r.childLanes&a)!==a?(r.childLanes|=a,m!==null&&(m.childLanes|=a)):m!==null&&(m.childLanes&a)!==a&&(m.childLanes|=a),r===c)break;r=r.return}}function Ua(r,a){fl=r,Gd=Ba=null,r=r.dependencies,r!==null&&r.firstContext!==null&&((r.lanes&a)!==0&&(gs=!0),r.firstContext=null)}function Ms(r){var a=r._currentValue;if(Gd!==r)if(r={context:r,memoizedValue:a,next:null},Ba===null){if(fl===null)throw Error(n(308));Ba=r,fl.dependencies={lanes:0,firstContext:r}}else Ba=Ba.next=r;return a}var Qn=null;function Xd(r){Qn===null?Qn=[r]:Qn.push(r)}function hp(r,a,c,m){var x=a.interleaved;return x===null?(c.next=c,Xd(a)):(c.next=x.next,x.next=c),a.interleaved=c,Ur(r,m)}function Ur(r,a){r.lanes|=a;var c=r.alternate;for(c!==null&&(c.lanes|=a),c=r,r=r.return;r!==null;)r.childLanes|=a,c=r.alternate,c!==null&&(c.childLanes|=a),c=r,r=r.return;return c.tag===3?c.stateNode:null}var xn=!1;function Zd(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function pp(r,a){r=r.updateQueue,a.updateQueue===r&&(a.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,effects:r.effects})}function Vr(r,a){return{eventTime:r,lane:a,tag:0,payload:null,callback:null,next:null}}function vn(r,a,c){var m=r.updateQueue;if(m===null)return null;if(m=m.shared,(Ze&2)!==0){var x=m.pending;return x===null?a.next=a:(a.next=x.next,x.next=a),m.pending=a,Ur(r,c)}return x=m.interleaved,x===null?(a.next=a,Xd(m)):(a.next=x.next,x.next=a),m.interleaved=a,Ur(r,c)}function hl(r,a,c){if(a=a.updateQueue,a!==null&&(a=a.shared,(c&4194240)!==0)){var m=a.lanes;m&=r.pendingLanes,c|=m,a.lanes=c,fd(r,c)}}function gp(r,a){var c=r.updateQueue,m=r.alternate;if(m!==null&&(m=m.updateQueue,c===m)){var x=null,N=null;if(c=c.firstBaseUpdate,c!==null){do{var _={eventTime:c.eventTime,lane:c.lane,tag:c.tag,payload:c.payload,callback:c.callback,next:null};N===null?x=N=_:N=N.next=_,c=c.next}while(c!==null);N===null?x=N=a:N=N.next=a}else x=N=a;c={baseState:m.baseState,firstBaseUpdate:x,lastBaseUpdate:N,shared:m.shared,effects:m.effects},r.updateQueue=c;return}r=c.lastBaseUpdate,r===null?c.firstBaseUpdate=a:r.next=a,c.lastBaseUpdate=a}function pl(r,a,c,m){var x=r.updateQueue;xn=!1;var N=x.firstBaseUpdate,_=x.lastBaseUpdate,L=x.shared.pending;if(L!==null){x.shared.pending=null;var F=L,Y=F.next;F.next=null,_===null?N=Y:_.next=Y,_=F;var de=r.alternate;de!==null&&(de=de.updateQueue,L=de.lastBaseUpdate,L!==_&&(L===null?de.firstBaseUpdate=Y:L.next=Y,de.lastBaseUpdate=F))}if(N!==null){var me=x.baseState;_=0,de=Y=F=null,L=N;do{var oe=L.lane,we=L.eventTime;if((m&oe)===oe){de!==null&&(de=de.next={eventTime:we,lane:0,tag:L.tag,payload:L.payload,callback:L.callback,next:null});e:{var ke=r,Pe=L;switch(oe=a,we=c,Pe.tag){case 1:if(ke=Pe.payload,typeof ke=="function"){me=ke.call(we,me,oe);break e}me=ke;break e;case 3:ke.flags=ke.flags&-65537|128;case 0:if(ke=Pe.payload,oe=typeof ke=="function"?ke.call(we,me,oe):ke,oe==null)break e;me=H({},me,oe);break e;case 2:xn=!0}}L.callback!==null&&L.lane!==0&&(r.flags|=64,oe=x.effects,oe===null?x.effects=[L]:oe.push(L))}else we={eventTime:we,lane:oe,tag:L.tag,payload:L.payload,callback:L.callback,next:null},de===null?(Y=de=we,F=me):de=de.next=we,_|=oe;if(L=L.next,L===null){if(L=x.shared.pending,L===null)break;oe=L,L=oe.next,oe.next=null,x.lastBaseUpdate=oe,x.shared.pending=null}}while(!0);if(de===null&&(F=me),x.baseState=F,x.firstBaseUpdate=Y,x.lastBaseUpdate=de,a=x.shared.interleaved,a!==null){x=a;do _|=x.lane,x=x.next;while(x!==a)}else N===null&&(x.shared.lanes=0);ea|=_,r.lanes=_,r.memoizedState=me}}function xp(r,a,c){if(r=a.effects,a.effects=null,r!==null)for(a=0;a<r.length;a++){var m=r[a],x=m.callback;if(x!==null){if(m.callback=null,m=c,typeof x!="function")throw Error(n(191,x));x.call(m)}}}var Yi={},fr=hn(Yi),Qi=hn(Yi),Xi=hn(Yi);function Xn(r){if(r===Yi)throw Error(n(174));return r}function eu(r,a){switch(nt(Xi,a),nt(Qi,r),nt(fr,Yi),r=a.nodeType,r){case 9:case 11:a=(a=a.documentElement)?a.namespaceURI:tn(null,"");break;default:r=r===8?a.parentNode:a,a=r.namespaceURI||null,r=r.tagName,a=tn(a,r)}ot(fr),nt(fr,a)}function Va(){ot(fr),ot(Qi),ot(Xi)}function vp(r){Xn(Xi.current);var a=Xn(fr.current),c=tn(a,r.type);a!==c&&(nt(Qi,r),nt(fr,c))}function tu(r){Qi.current===r&&(ot(fr),ot(Qi))}var mt=hn(0);function gl(r){for(var a=r;a!==null;){if(a.tag===13){var c=a.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||c.data==="$?"||c.data==="$!"))return a}else if(a.tag===19&&a.memoizedProps.revealOrder!==void 0){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===r)break;for(;a.sibling===null;){if(a.return===null||a.return===r)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var su=[];function ru(){for(var r=0;r<su.length;r++)su[r]._workInProgressVersionPrimary=null;su.length=0}var xl=P.ReactCurrentDispatcher,nu=P.ReactCurrentBatchConfig,Zn=0,ft=null,St=null,Pt=null,vl=!1,Zi=!1,eo=0,rN=0;function Kt(){throw Error(n(321))}function au(r,a){if(a===null)return!1;for(var c=0;c<a.length&&c<r.length;c++)if(!Ks(r[c],a[c]))return!1;return!0}function iu(r,a,c,m,x,N){if(Zn=N,ft=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,xl.current=r===null||r.memoizedState===null?oN:lN,r=c(m,x),Zi){N=0;do{if(Zi=!1,eo=0,25<=N)throw Error(n(301));N+=1,Pt=St=null,a.updateQueue=null,xl.current=cN,r=c(m,x)}while(Zi)}if(xl.current=bl,a=St!==null&&St.next!==null,Zn=0,Pt=St=ft=null,vl=!1,a)throw Error(n(300));return r}function ou(){var r=eo!==0;return eo=0,r}function hr(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Pt===null?ft.memoizedState=Pt=r:Pt=Pt.next=r,Pt}function Os(){if(St===null){var r=ft.alternate;r=r!==null?r.memoizedState:null}else r=St.next;var a=Pt===null?ft.memoizedState:Pt.next;if(a!==null)Pt=a,St=r;else{if(r===null)throw Error(n(310));St=r,r={memoizedState:St.memoizedState,baseState:St.baseState,baseQueue:St.baseQueue,queue:St.queue,next:null},Pt===null?ft.memoizedState=Pt=r:Pt=Pt.next=r}return Pt}function to(r,a){return typeof a=="function"?a(r):a}function lu(r){var a=Os(),c=a.queue;if(c===null)throw Error(n(311));c.lastRenderedReducer=r;var m=St,x=m.baseQueue,N=c.pending;if(N!==null){if(x!==null){var _=x.next;x.next=N.next,N.next=_}m.baseQueue=x=N,c.pending=null}if(x!==null){N=x.next,m=m.baseState;var L=_=null,F=null,Y=N;do{var de=Y.lane;if((Zn&de)===de)F!==null&&(F=F.next={lane:0,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null}),m=Y.hasEagerState?Y.eagerState:r(m,Y.action);else{var me={lane:de,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null};F===null?(L=F=me,_=m):F=F.next=me,ft.lanes|=de,ea|=de}Y=Y.next}while(Y!==null&&Y!==N);F===null?_=m:F.next=L,Ks(m,a.memoizedState)||(gs=!0),a.memoizedState=m,a.baseState=_,a.baseQueue=F,c.lastRenderedState=m}if(r=c.interleaved,r!==null){x=r;do N=x.lane,ft.lanes|=N,ea|=N,x=x.next;while(x!==r)}else x===null&&(c.lanes=0);return[a.memoizedState,c.dispatch]}function cu(r){var a=Os(),c=a.queue;if(c===null)throw Error(n(311));c.lastRenderedReducer=r;var m=c.dispatch,x=c.pending,N=a.memoizedState;if(x!==null){c.pending=null;var _=x=x.next;do N=r(N,_.action),_=_.next;while(_!==x);Ks(N,a.memoizedState)||(gs=!0),a.memoizedState=N,a.baseQueue===null&&(a.baseState=N),c.lastRenderedState=N}return[N,m]}function yp(){}function wp(r,a){var c=ft,m=Os(),x=a(),N=!Ks(m.memoizedState,x);if(N&&(m.memoizedState=x,gs=!0),m=m.queue,du(Np.bind(null,c,m,r),[r]),m.getSnapshot!==a||N||Pt!==null&&Pt.memoizedState.tag&1){if(c.flags|=2048,so(9,jp.bind(null,c,m,x,a),void 0,null),It===null)throw Error(n(349));(Zn&30)!==0||bp(c,a,x)}return x}function bp(r,a,c){r.flags|=16384,r={getSnapshot:a,value:c},a=ft.updateQueue,a===null?(a={lastEffect:null,stores:null},ft.updateQueue=a,a.stores=[r]):(c=a.stores,c===null?a.stores=[r]:c.push(r))}function jp(r,a,c,m){a.value=c,a.getSnapshot=m,Sp(a)&&kp(r)}function Np(r,a,c){return c(function(){Sp(a)&&kp(r)})}function Sp(r){var a=r.getSnapshot;r=r.value;try{var c=a();return!Ks(r,c)}catch{return!0}}function kp(r){var a=Ur(r,1);a!==null&&Xs(a,r,1,-1)}function Cp(r){var a=hr();return typeof r=="function"&&(r=r()),a.memoizedState=a.baseState=r,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:to,lastRenderedState:r},a.queue=r,r=r.dispatch=iN.bind(null,ft,r),[a.memoizedState,r]}function so(r,a,c,m){return r={tag:r,create:a,destroy:c,deps:m,next:null},a=ft.updateQueue,a===null?(a={lastEffect:null,stores:null},ft.updateQueue=a,a.lastEffect=r.next=r):(c=a.lastEffect,c===null?a.lastEffect=r.next=r:(m=c.next,c.next=r,r.next=m,a.lastEffect=r)),r}function _p(){return Os().memoizedState}function yl(r,a,c,m){var x=hr();ft.flags|=r,x.memoizedState=so(1|a,c,void 0,m===void 0?null:m)}function wl(r,a,c,m){var x=Os();m=m===void 0?null:m;var N=void 0;if(St!==null){var _=St.memoizedState;if(N=_.destroy,m!==null&&au(m,_.deps)){x.memoizedState=so(a,c,N,m);return}}ft.flags|=r,x.memoizedState=so(1|a,c,N,m)}function Ep(r,a){return yl(8390656,8,r,a)}function du(r,a){return wl(2048,8,r,a)}function Tp(r,a){return wl(4,2,r,a)}function Pp(r,a){return wl(4,4,r,a)}function Ip(r,a){if(typeof a=="function")return r=r(),a(r),function(){a(null)};if(a!=null)return r=r(),a.current=r,function(){a.current=null}}function Ap(r,a,c){return c=c!=null?c.concat([r]):null,wl(4,4,Ip.bind(null,a,r),c)}function uu(){}function Rp(r,a){var c=Os();a=a===void 0?null:a;var m=c.memoizedState;return m!==null&&a!==null&&au(a,m[1])?m[0]:(c.memoizedState=[r,a],r)}function Dp(r,a){var c=Os();a=a===void 0?null:a;var m=c.memoizedState;return m!==null&&a!==null&&au(a,m[1])?m[0]:(r=r(),c.memoizedState=[r,a],r)}function Mp(r,a,c){return(Zn&21)===0?(r.baseState&&(r.baseState=!1,gs=!0),r.memoizedState=c):(Ks(c,a)||(c=uh(),ft.lanes|=c,ea|=c,r.baseState=!0),a)}function nN(r,a){var c=tt;tt=c!==0&&4>c?c:4,r(!0);var m=nu.transition;nu.transition={};try{r(!1),a()}finally{tt=c,nu.transition=m}}function Op(){return Os().memoizedState}function aN(r,a,c){var m=jn(r);if(c={lane:m,action:c,hasEagerState:!1,eagerState:null,next:null},Lp(r))$p(a,c);else if(c=hp(r,a,c,m),c!==null){var x=ns();Xs(c,r,m,x),Fp(c,a,m)}}function iN(r,a,c){var m=jn(r),x={lane:m,action:c,hasEagerState:!1,eagerState:null,next:null};if(Lp(r))$p(a,x);else{var N=r.alternate;if(r.lanes===0&&(N===null||N.lanes===0)&&(N=a.lastRenderedReducer,N!==null))try{var _=a.lastRenderedState,L=N(_,c);if(x.hasEagerState=!0,x.eagerState=L,Ks(L,_)){var F=a.interleaved;F===null?(x.next=x,Xd(a)):(x.next=F.next,F.next=x),a.interleaved=x;return}}catch{}finally{}c=hp(r,a,x,m),c!==null&&(x=ns(),Xs(c,r,m,x),Fp(c,a,m))}}function Lp(r){var a=r.alternate;return r===ft||a!==null&&a===ft}function $p(r,a){Zi=vl=!0;var c=r.pending;c===null?a.next=a:(a.next=c.next,c.next=a),r.pending=a}function Fp(r,a,c){if((c&4194240)!==0){var m=a.lanes;m&=r.pendingLanes,c|=m,a.lanes=c,fd(r,c)}}var bl={readContext:Ms,useCallback:Kt,useContext:Kt,useEffect:Kt,useImperativeHandle:Kt,useInsertionEffect:Kt,useLayoutEffect:Kt,useMemo:Kt,useReducer:Kt,useRef:Kt,useState:Kt,useDebugValue:Kt,useDeferredValue:Kt,useTransition:Kt,useMutableSource:Kt,useSyncExternalStore:Kt,useId:Kt,unstable_isNewReconciler:!1},oN={readContext:Ms,useCallback:function(r,a){return hr().memoizedState=[r,a===void 0?null:a],r},useContext:Ms,useEffect:Ep,useImperativeHandle:function(r,a,c){return c=c!=null?c.concat([r]):null,yl(4194308,4,Ip.bind(null,a,r),c)},useLayoutEffect:function(r,a){return yl(4194308,4,r,a)},useInsertionEffect:function(r,a){return yl(4,2,r,a)},useMemo:function(r,a){var c=hr();return a=a===void 0?null:a,r=r(),c.memoizedState=[r,a],r},useReducer:function(r,a,c){var m=hr();return a=c!==void 0?c(a):a,m.memoizedState=m.baseState=a,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:a},m.queue=r,r=r.dispatch=aN.bind(null,ft,r),[m.memoizedState,r]},useRef:function(r){var a=hr();return r={current:r},a.memoizedState=r},useState:Cp,useDebugValue:uu,useDeferredValue:function(r){return hr().memoizedState=r},useTransition:function(){var r=Cp(!1),a=r[0];return r=nN.bind(null,r[1]),hr().memoizedState=r,[a,r]},useMutableSource:function(){},useSyncExternalStore:function(r,a,c){var m=ft,x=hr();if(ct){if(c===void 0)throw Error(n(407));c=c()}else{if(c=a(),It===null)throw Error(n(349));(Zn&30)!==0||bp(m,a,c)}x.memoizedState=c;var N={value:c,getSnapshot:a};return x.queue=N,Ep(Np.bind(null,m,N,r),[r]),m.flags|=2048,so(9,jp.bind(null,m,N,c,a),void 0,null),c},useId:function(){var r=hr(),a=It.identifierPrefix;if(ct){var c=Br,m=zr;c=(m&~(1<<32-Ws(m)-1)).toString(32)+c,a=":"+a+"R"+c,c=eo++,0<c&&(a+="H"+c.toString(32)),a+=":"}else c=rN++,a=":"+a+"r"+c.toString(32)+":";return r.memoizedState=a},unstable_isNewReconciler:!1},lN={readContext:Ms,useCallback:Rp,useContext:Ms,useEffect:du,useImperativeHandle:Ap,useInsertionEffect:Tp,useLayoutEffect:Pp,useMemo:Dp,useReducer:lu,useRef:_p,useState:function(){return lu(to)},useDebugValue:uu,useDeferredValue:function(r){var a=Os();return Mp(a,St.memoizedState,r)},useTransition:function(){var r=lu(to)[0],a=Os().memoizedState;return[r,a]},useMutableSource:yp,useSyncExternalStore:wp,useId:Op,unstable_isNewReconciler:!1},cN={readContext:Ms,useCallback:Rp,useContext:Ms,useEffect:du,useImperativeHandle:Ap,useInsertionEffect:Tp,useLayoutEffect:Pp,useMemo:Dp,useReducer:cu,useRef:_p,useState:function(){return cu(to)},useDebugValue:uu,useDeferredValue:function(r){var a=Os();return St===null?a.memoizedState=r:Mp(a,St.memoizedState,r)},useTransition:function(){var r=cu(to)[0],a=Os().memoizedState;return[r,a]},useMutableSource:yp,useSyncExternalStore:wp,useId:Op,unstable_isNewReconciler:!1};function Js(r,a){if(r&&r.defaultProps){a=H({},a),r=r.defaultProps;for(var c in r)a[c]===void 0&&(a[c]=r[c]);return a}return a}function mu(r,a,c,m){a=r.memoizedState,c=c(m,a),c=c==null?a:H({},a,c),r.memoizedState=c,r.lanes===0&&(r.updateQueue.baseState=c)}var jl={isMounted:function(r){return(r=r._reactInternals)?Wn(r)===r:!1},enqueueSetState:function(r,a,c){r=r._reactInternals;var m=ns(),x=jn(r),N=Vr(m,x);N.payload=a,c!=null&&(N.callback=c),a=vn(r,N,x),a!==null&&(Xs(a,r,x,m),hl(a,r,x))},enqueueReplaceState:function(r,a,c){r=r._reactInternals;var m=ns(),x=jn(r),N=Vr(m,x);N.tag=1,N.payload=a,c!=null&&(N.callback=c),a=vn(r,N,x),a!==null&&(Xs(a,r,x,m),hl(a,r,x))},enqueueForceUpdate:function(r,a){r=r._reactInternals;var c=ns(),m=jn(r),x=Vr(c,m);x.tag=2,a!=null&&(x.callback=a),a=vn(r,x,m),a!==null&&(Xs(a,r,m,c),hl(a,r,m))}};function zp(r,a,c,m,x,N,_){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(m,N,_):a.prototype&&a.prototype.isPureReactComponent?!Ui(c,m)||!Ui(x,N):!0}function Bp(r,a,c){var m=!1,x=pn,N=a.contextType;return typeof N=="object"&&N!==null?N=Ms(N):(x=ps(a)?Gn:Wt.current,m=a.contextTypes,N=(m=m!=null)?Oa(r,x):pn),a=new a(c,N),r.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,a.updater=jl,r.stateNode=a,a._reactInternals=r,m&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=x,r.__reactInternalMemoizedMaskedChildContext=N),a}function Up(r,a,c,m){r=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(c,m),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(c,m),a.state!==r&&jl.enqueueReplaceState(a,a.state,null)}function fu(r,a,c,m){var x=r.stateNode;x.props=c,x.state=r.memoizedState,x.refs={},Zd(r);var N=a.contextType;typeof N=="object"&&N!==null?x.context=Ms(N):(N=ps(a)?Gn:Wt.current,x.context=Oa(r,N)),x.state=r.memoizedState,N=a.getDerivedStateFromProps,typeof N=="function"&&(mu(r,a,N,c),x.state=r.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof x.getSnapshotBeforeUpdate=="function"||typeof x.UNSAFE_componentWillMount!="function"&&typeof x.componentWillMount!="function"||(a=x.state,typeof x.componentWillMount=="function"&&x.componentWillMount(),typeof x.UNSAFE_componentWillMount=="function"&&x.UNSAFE_componentWillMount(),a!==x.state&&jl.enqueueReplaceState(x,x.state,null),pl(r,c,x,m),x.state=r.memoizedState),typeof x.componentDidMount=="function"&&(r.flags|=4194308)}function qa(r,a){try{var c="",m=a;do c+=ce(m),m=m.return;while(m);var x=c}catch(N){x=`
Error generating stack: `+N.message+`
`+N.stack}return{value:r,source:a,stack:x,digest:null}}function hu(r,a,c){return{value:r,source:null,stack:c??null,digest:a??null}}function pu(r,a){try{console.error(a.value)}catch(c){setTimeout(function(){throw c})}}var dN=typeof WeakMap=="function"?WeakMap:Map;function Vp(r,a,c){c=Vr(-1,c),c.tag=3,c.payload={element:null};var m=a.value;return c.callback=function(){Tl||(Tl=!0,Pu=m),pu(r,a)},c}function qp(r,a,c){c=Vr(-1,c),c.tag=3;var m=r.type.getDerivedStateFromError;if(typeof m=="function"){var x=a.value;c.payload=function(){return m(x)},c.callback=function(){pu(r,a)}}var N=r.stateNode;return N!==null&&typeof N.componentDidCatch=="function"&&(c.callback=function(){pu(r,a),typeof m!="function"&&(wn===null?wn=new Set([this]):wn.add(this));var _=a.stack;this.componentDidCatch(a.value,{componentStack:_!==null?_:""})}),c}function Hp(r,a,c){var m=r.pingCache;if(m===null){m=r.pingCache=new dN;var x=new Set;m.set(a,x)}else x=m.get(a),x===void 0&&(x=new Set,m.set(a,x));x.has(c)||(x.add(c),r=SN.bind(null,r,a,c),a.then(r,r))}function Wp(r){do{var a;if((a=r.tag===13)&&(a=r.memoizedState,a=a!==null?a.dehydrated!==null:!0),a)return r;r=r.return}while(r!==null);return null}function Kp(r,a,c,m,x){return(r.mode&1)===0?(r===a?r.flags|=65536:(r.flags|=128,c.flags|=131072,c.flags&=-52805,c.tag===1&&(c.alternate===null?c.tag=17:(a=Vr(-1,1),a.tag=2,vn(c,a,1))),c.lanes|=1),r):(r.flags|=65536,r.lanes=x,r)}var uN=P.ReactCurrentOwner,gs=!1;function rs(r,a,c,m){a.child=r===null?fp(a,null,c,m):za(a,r.child,c,m)}function Gp(r,a,c,m,x){c=c.render;var N=a.ref;return Ua(a,x),m=iu(r,a,c,m,N,x),c=ou(),r!==null&&!gs?(a.updateQueue=r.updateQueue,a.flags&=-2053,r.lanes&=~x,qr(r,a,x)):(ct&&c&&Vd(a),a.flags|=1,rs(r,a,m,x),a.child)}function Jp(r,a,c,m,x){if(r===null){var N=c.type;return typeof N=="function"&&!Lu(N)&&N.defaultProps===void 0&&c.compare===null&&c.defaultProps===void 0?(a.tag=15,a.type=N,Yp(r,a,N,m,x)):(r=Ml(c.type,null,m,a,a.mode,x),r.ref=a.ref,r.return=a,a.child=r)}if(N=r.child,(r.lanes&x)===0){var _=N.memoizedProps;if(c=c.compare,c=c!==null?c:Ui,c(_,m)&&r.ref===a.ref)return qr(r,a,x)}return a.flags|=1,r=Sn(N,m),r.ref=a.ref,r.return=a,a.child=r}function Yp(r,a,c,m,x){if(r!==null){var N=r.memoizedProps;if(Ui(N,m)&&r.ref===a.ref)if(gs=!1,a.pendingProps=m=N,(r.lanes&x)!==0)(r.flags&131072)!==0&&(gs=!0);else return a.lanes=r.lanes,qr(r,a,x)}return gu(r,a,c,m,x)}function Qp(r,a,c){var m=a.pendingProps,x=m.children,N=r!==null?r.memoizedState:null;if(m.mode==="hidden")if((a.mode&1)===0)a.memoizedState={baseLanes:0,cachePool:null,transitions:null},nt(Wa,Ts),Ts|=c;else{if((c&1073741824)===0)return r=N!==null?N.baseLanes|c:c,a.lanes=a.childLanes=1073741824,a.memoizedState={baseLanes:r,cachePool:null,transitions:null},a.updateQueue=null,nt(Wa,Ts),Ts|=r,null;a.memoizedState={baseLanes:0,cachePool:null,transitions:null},m=N!==null?N.baseLanes:c,nt(Wa,Ts),Ts|=m}else N!==null?(m=N.baseLanes|c,a.memoizedState=null):m=c,nt(Wa,Ts),Ts|=m;return rs(r,a,x,c),a.child}function Xp(r,a){var c=a.ref;(r===null&&c!==null||r!==null&&r.ref!==c)&&(a.flags|=512,a.flags|=2097152)}function gu(r,a,c,m,x){var N=ps(c)?Gn:Wt.current;return N=Oa(a,N),Ua(a,x),c=iu(r,a,c,m,N,x),m=ou(),r!==null&&!gs?(a.updateQueue=r.updateQueue,a.flags&=-2053,r.lanes&=~x,qr(r,a,x)):(ct&&m&&Vd(a),a.flags|=1,rs(r,a,c,x),a.child)}function Zp(r,a,c,m,x){if(ps(c)){var N=!0;il(a)}else N=!1;if(Ua(a,x),a.stateNode===null)Sl(r,a),Bp(a,c,m),fu(a,c,m,x),m=!0;else if(r===null){var _=a.stateNode,L=a.memoizedProps;_.props=L;var F=_.context,Y=c.contextType;typeof Y=="object"&&Y!==null?Y=Ms(Y):(Y=ps(c)?Gn:Wt.current,Y=Oa(a,Y));var de=c.getDerivedStateFromProps,me=typeof de=="function"||typeof _.getSnapshotBeforeUpdate=="function";me||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(L!==m||F!==Y)&&Up(a,_,m,Y),xn=!1;var oe=a.memoizedState;_.state=oe,pl(a,m,_,x),F=a.memoizedState,L!==m||oe!==F||hs.current||xn?(typeof de=="function"&&(mu(a,c,de,m),F=a.memoizedState),(L=xn||zp(a,c,L,m,oe,F,Y))?(me||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount()),typeof _.componentDidMount=="function"&&(a.flags|=4194308)):(typeof _.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=m,a.memoizedState=F),_.props=m,_.state=F,_.context=Y,m=L):(typeof _.componentDidMount=="function"&&(a.flags|=4194308),m=!1)}else{_=a.stateNode,pp(r,a),L=a.memoizedProps,Y=a.type===a.elementType?L:Js(a.type,L),_.props=Y,me=a.pendingProps,oe=_.context,F=c.contextType,typeof F=="object"&&F!==null?F=Ms(F):(F=ps(c)?Gn:Wt.current,F=Oa(a,F));var we=c.getDerivedStateFromProps;(de=typeof we=="function"||typeof _.getSnapshotBeforeUpdate=="function")||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(L!==me||oe!==F)&&Up(a,_,m,F),xn=!1,oe=a.memoizedState,_.state=oe,pl(a,m,_,x);var ke=a.memoizedState;L!==me||oe!==ke||hs.current||xn?(typeof we=="function"&&(mu(a,c,we,m),ke=a.memoizedState),(Y=xn||zp(a,c,Y,m,oe,ke,F)||!1)?(de||typeof _.UNSAFE_componentWillUpdate!="function"&&typeof _.componentWillUpdate!="function"||(typeof _.componentWillUpdate=="function"&&_.componentWillUpdate(m,ke,F),typeof _.UNSAFE_componentWillUpdate=="function"&&_.UNSAFE_componentWillUpdate(m,ke,F)),typeof _.componentDidUpdate=="function"&&(a.flags|=4),typeof _.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof _.componentDidUpdate!="function"||L===r.memoizedProps&&oe===r.memoizedState||(a.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||L===r.memoizedProps&&oe===r.memoizedState||(a.flags|=1024),a.memoizedProps=m,a.memoizedState=ke),_.props=m,_.state=ke,_.context=F,m=Y):(typeof _.componentDidUpdate!="function"||L===r.memoizedProps&&oe===r.memoizedState||(a.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||L===r.memoizedProps&&oe===r.memoizedState||(a.flags|=1024),m=!1)}return xu(r,a,c,m,N,x)}function xu(r,a,c,m,x,N){Xp(r,a);var _=(a.flags&128)!==0;if(!m&&!_)return x&&np(a,c,!1),qr(r,a,N);m=a.stateNode,uN.current=a;var L=_&&typeof c.getDerivedStateFromError!="function"?null:m.render();return a.flags|=1,r!==null&&_?(a.child=za(a,r.child,null,N),a.child=za(a,null,L,N)):rs(r,a,L,N),a.memoizedState=m.state,x&&np(a,c,!0),a.child}function eg(r){var a=r.stateNode;a.pendingContext?sp(r,a.pendingContext,a.pendingContext!==a.context):a.context&&sp(r,a.context,!1),eu(r,a.containerInfo)}function tg(r,a,c,m,x){return Fa(),Kd(x),a.flags|=256,rs(r,a,c,m),a.child}var vu={dehydrated:null,treeContext:null,retryLane:0};function yu(r){return{baseLanes:r,cachePool:null,transitions:null}}function sg(r,a,c){var m=a.pendingProps,x=mt.current,N=!1,_=(a.flags&128)!==0,L;if((L=_)||(L=r!==null&&r.memoizedState===null?!1:(x&2)!==0),L?(N=!0,a.flags&=-129):(r===null||r.memoizedState!==null)&&(x|=1),nt(mt,x&1),r===null)return Wd(a),r=a.memoizedState,r!==null&&(r=r.dehydrated,r!==null)?((a.mode&1)===0?a.lanes=1:r.data==="$!"?a.lanes=8:a.lanes=1073741824,null):(_=m.children,r=m.fallback,N?(m=a.mode,N=a.child,_={mode:"hidden",children:_},(m&1)===0&&N!==null?(N.childLanes=0,N.pendingProps=_):N=Ol(_,m,0,null),r=na(r,m,c,null),N.return=a,r.return=a,N.sibling=r,a.child=N,a.child.memoizedState=yu(c),a.memoizedState=vu,r):wu(a,_));if(x=r.memoizedState,x!==null&&(L=x.dehydrated,L!==null))return mN(r,a,_,m,L,x,c);if(N){N=m.fallback,_=a.mode,x=r.child,L=x.sibling;var F={mode:"hidden",children:m.children};return(_&1)===0&&a.child!==x?(m=a.child,m.childLanes=0,m.pendingProps=F,a.deletions=null):(m=Sn(x,F),m.subtreeFlags=x.subtreeFlags&14680064),L!==null?N=Sn(L,N):(N=na(N,_,c,null),N.flags|=2),N.return=a,m.return=a,m.sibling=N,a.child=m,m=N,N=a.child,_=r.child.memoizedState,_=_===null?yu(c):{baseLanes:_.baseLanes|c,cachePool:null,transitions:_.transitions},N.memoizedState=_,N.childLanes=r.childLanes&~c,a.memoizedState=vu,m}return N=r.child,r=N.sibling,m=Sn(N,{mode:"visible",children:m.children}),(a.mode&1)===0&&(m.lanes=c),m.return=a,m.sibling=null,r!==null&&(c=a.deletions,c===null?(a.deletions=[r],a.flags|=16):c.push(r)),a.child=m,a.memoizedState=null,m}function wu(r,a){return a=Ol({mode:"visible",children:a},r.mode,0,null),a.return=r,r.child=a}function Nl(r,a,c,m){return m!==null&&Kd(m),za(a,r.child,null,c),r=wu(a,a.pendingProps.children),r.flags|=2,a.memoizedState=null,r}function mN(r,a,c,m,x,N,_){if(c)return a.flags&256?(a.flags&=-257,m=hu(Error(n(422))),Nl(r,a,_,m)):a.memoizedState!==null?(a.child=r.child,a.flags|=128,null):(N=m.fallback,x=a.mode,m=Ol({mode:"visible",children:m.children},x,0,null),N=na(N,x,_,null),N.flags|=2,m.return=a,N.return=a,m.sibling=N,a.child=m,(a.mode&1)!==0&&za(a,r.child,null,_),a.child.memoizedState=yu(_),a.memoizedState=vu,N);if((a.mode&1)===0)return Nl(r,a,_,null);if(x.data==="$!"){if(m=x.nextSibling&&x.nextSibling.dataset,m)var L=m.dgst;return m=L,N=Error(n(419)),m=hu(N,m,void 0),Nl(r,a,_,m)}if(L=(_&r.childLanes)!==0,gs||L){if(m=It,m!==null){switch(_&-_){case 4:x=2;break;case 16:x=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:x=32;break;case 536870912:x=268435456;break;default:x=0}x=(x&(m.suspendedLanes|_))!==0?0:x,x!==0&&x!==N.retryLane&&(N.retryLane=x,Ur(r,x),Xs(m,r,x,-1))}return Ou(),m=hu(Error(n(421))),Nl(r,a,_,m)}return x.data==="$?"?(a.flags|=128,a.child=r.child,a=kN.bind(null,r),x._reactRetry=a,null):(r=N.treeContext,Es=fn(x.nextSibling),_s=a,ct=!0,Gs=null,r!==null&&(Rs[Ds++]=zr,Rs[Ds++]=Br,Rs[Ds++]=Jn,zr=r.id,Br=r.overflow,Jn=a),a=wu(a,m.children),a.flags|=4096,a)}function rg(r,a,c){r.lanes|=a;var m=r.alternate;m!==null&&(m.lanes|=a),Qd(r.return,a,c)}function bu(r,a,c,m,x){var N=r.memoizedState;N===null?r.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:m,tail:c,tailMode:x}:(N.isBackwards=a,N.rendering=null,N.renderingStartTime=0,N.last=m,N.tail=c,N.tailMode=x)}function ng(r,a,c){var m=a.pendingProps,x=m.revealOrder,N=m.tail;if(rs(r,a,m.children,c),m=mt.current,(m&2)!==0)m=m&1|2,a.flags|=128;else{if(r!==null&&(r.flags&128)!==0)e:for(r=a.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&rg(r,c,a);else if(r.tag===19)rg(r,c,a);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===a)break e;for(;r.sibling===null;){if(r.return===null||r.return===a)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}m&=1}if(nt(mt,m),(a.mode&1)===0)a.memoizedState=null;else switch(x){case"forwards":for(c=a.child,x=null;c!==null;)r=c.alternate,r!==null&&gl(r)===null&&(x=c),c=c.sibling;c=x,c===null?(x=a.child,a.child=null):(x=c.sibling,c.sibling=null),bu(a,!1,x,c,N);break;case"backwards":for(c=null,x=a.child,a.child=null;x!==null;){if(r=x.alternate,r!==null&&gl(r)===null){a.child=x;break}r=x.sibling,x.sibling=c,c=x,x=r}bu(a,!0,c,null,N);break;case"together":bu(a,!1,null,null,void 0);break;default:a.memoizedState=null}return a.child}function Sl(r,a){(a.mode&1)===0&&r!==null&&(r.alternate=null,a.alternate=null,a.flags|=2)}function qr(r,a,c){if(r!==null&&(a.dependencies=r.dependencies),ea|=a.lanes,(c&a.childLanes)===0)return null;if(r!==null&&a.child!==r.child)throw Error(n(153));if(a.child!==null){for(r=a.child,c=Sn(r,r.pendingProps),a.child=c,c.return=a;r.sibling!==null;)r=r.sibling,c=c.sibling=Sn(r,r.pendingProps),c.return=a;c.sibling=null}return a.child}function fN(r,a,c){switch(a.tag){case 3:eg(a),Fa();break;case 5:vp(a);break;case 1:ps(a.type)&&il(a);break;case 4:eu(a,a.stateNode.containerInfo);break;case 10:var m=a.type._context,x=a.memoizedProps.value;nt(ml,m._currentValue),m._currentValue=x;break;case 13:if(m=a.memoizedState,m!==null)return m.dehydrated!==null?(nt(mt,mt.current&1),a.flags|=128,null):(c&a.child.childLanes)!==0?sg(r,a,c):(nt(mt,mt.current&1),r=qr(r,a,c),r!==null?r.sibling:null);nt(mt,mt.current&1);break;case 19:if(m=(c&a.childLanes)!==0,(r.flags&128)!==0){if(m)return ng(r,a,c);a.flags|=128}if(x=a.memoizedState,x!==null&&(x.rendering=null,x.tail=null,x.lastEffect=null),nt(mt,mt.current),m)break;return null;case 22:case 23:return a.lanes=0,Qp(r,a,c)}return qr(r,a,c)}var ag,ju,ig,og;ag=function(r,a){for(var c=a.child;c!==null;){if(c.tag===5||c.tag===6)r.appendChild(c.stateNode);else if(c.tag!==4&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===a)break;for(;c.sibling===null;){if(c.return===null||c.return===a)return;c=c.return}c.sibling.return=c.return,c=c.sibling}},ju=function(){},ig=function(r,a,c,m){var x=r.memoizedProps;if(x!==m){r=a.stateNode,Xn(fr.current);var N=null;switch(c){case"input":x=st(r,x),m=st(r,m),N=[];break;case"select":x=H({},x,{value:void 0}),m=H({},m,{value:void 0}),N=[];break;case"textarea":x=rt(r,x),m=rt(r,m),N=[];break;default:typeof x.onClick!="function"&&typeof m.onClick=="function"&&(r.onclick=rl)}sn(c,m);var _;c=null;for(Y in x)if(!m.hasOwnProperty(Y)&&x.hasOwnProperty(Y)&&x[Y]!=null)if(Y==="style"){var L=x[Y];for(_ in L)L.hasOwnProperty(_)&&(c||(c={}),c[_]="")}else Y!=="dangerouslySetInnerHTML"&&Y!=="children"&&Y!=="suppressContentEditableWarning"&&Y!=="suppressHydrationWarning"&&Y!=="autoFocus"&&(o.hasOwnProperty(Y)?N||(N=[]):(N=N||[]).push(Y,null));for(Y in m){var F=m[Y];if(L=x?.[Y],m.hasOwnProperty(Y)&&F!==L&&(F!=null||L!=null))if(Y==="style")if(L){for(_ in L)!L.hasOwnProperty(_)||F&&F.hasOwnProperty(_)||(c||(c={}),c[_]="");for(_ in F)F.hasOwnProperty(_)&&L[_]!==F[_]&&(c||(c={}),c[_]=F[_])}else c||(N||(N=[]),N.push(Y,c)),c=F;else Y==="dangerouslySetInnerHTML"?(F=F?F.__html:void 0,L=L?L.__html:void 0,F!=null&&L!==F&&(N=N||[]).push(Y,F)):Y==="children"?typeof F!="string"&&typeof F!="number"||(N=N||[]).push(Y,""+F):Y!=="suppressContentEditableWarning"&&Y!=="suppressHydrationWarning"&&(o.hasOwnProperty(Y)?(F!=null&&Y==="onScroll"&&it("scroll",r),N||L===F||(N=[])):(N=N||[]).push(Y,F))}c&&(N=N||[]).push("style",c);var Y=N;(a.updateQueue=Y)&&(a.flags|=4)}},og=function(r,a,c,m){c!==m&&(a.flags|=4)};function ro(r,a){if(!ct)switch(r.tailMode){case"hidden":a=r.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?r.tail=null:c.sibling=null;break;case"collapsed":c=r.tail;for(var m=null;c!==null;)c.alternate!==null&&(m=c),c=c.sibling;m===null?a||r.tail===null?r.tail=null:r.tail.sibling=null:m.sibling=null}}function Gt(r){var a=r.alternate!==null&&r.alternate.child===r.child,c=0,m=0;if(a)for(var x=r.child;x!==null;)c|=x.lanes|x.childLanes,m|=x.subtreeFlags&14680064,m|=x.flags&14680064,x.return=r,x=x.sibling;else for(x=r.child;x!==null;)c|=x.lanes|x.childLanes,m|=x.subtreeFlags,m|=x.flags,x.return=r,x=x.sibling;return r.subtreeFlags|=m,r.childLanes=c,a}function hN(r,a,c){var m=a.pendingProps;switch(qd(a),a.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Gt(a),null;case 1:return ps(a.type)&&al(),Gt(a),null;case 3:return m=a.stateNode,Va(),ot(hs),ot(Wt),ru(),m.pendingContext&&(m.context=m.pendingContext,m.pendingContext=null),(r===null||r.child===null)&&(dl(a)?a.flags|=4:r===null||r.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,Gs!==null&&(Ru(Gs),Gs=null))),ju(r,a),Gt(a),null;case 5:tu(a);var x=Xn(Xi.current);if(c=a.type,r!==null&&a.stateNode!=null)ig(r,a,c,m,x),r.ref!==a.ref&&(a.flags|=512,a.flags|=2097152);else{if(!m){if(a.stateNode===null)throw Error(n(166));return Gt(a),null}if(r=Xn(fr.current),dl(a)){m=a.stateNode,c=a.type;var N=a.memoizedProps;switch(m[mr]=a,m[Ki]=N,r=(a.mode&1)!==0,c){case"dialog":it("cancel",m),it("close",m);break;case"iframe":case"object":case"embed":it("load",m);break;case"video":case"audio":for(x=0;x<qi.length;x++)it(qi[x],m);break;case"source":it("error",m);break;case"img":case"image":case"link":it("error",m),it("load",m);break;case"details":it("toggle",m);break;case"input":ms(m,N),it("invalid",m);break;case"select":m._wrapperState={wasMultiple:!!N.multiple},it("invalid",m);break;case"textarea":ss(m,N),it("invalid",m)}sn(c,N),x=null;for(var _ in N)if(N.hasOwnProperty(_)){var L=N[_];_==="children"?typeof L=="string"?m.textContent!==L&&(N.suppressHydrationWarning!==!0&&sl(m.textContent,L,r),x=["children",L]):typeof L=="number"&&m.textContent!==""+L&&(N.suppressHydrationWarning!==!0&&sl(m.textContent,L,r),x=["children",""+L]):o.hasOwnProperty(_)&&L!=null&&_==="onScroll"&&it("scroll",m)}switch(c){case"input":je(m),Un(m,N,!0);break;case"textarea":je(m),Dr(m);break;case"select":case"option":break;default:typeof N.onClick=="function"&&(m.onclick=rl)}m=x,a.updateQueue=m,m!==null&&(a.flags|=4)}else{_=x.nodeType===9?x:x.ownerDocument,r==="http://www.w3.org/1999/xhtml"&&(r=Mr(c)),r==="http://www.w3.org/1999/xhtml"?c==="script"?(r=_.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild)):typeof m.is=="string"?r=_.createElement(c,{is:m.is}):(r=_.createElement(c),c==="select"&&(_=r,m.multiple?_.multiple=!0:m.size&&(_.size=m.size))):r=_.createElementNS(r,c),r[mr]=a,r[Ki]=m,ag(r,a,!1,!1),a.stateNode=r;e:{switch(_=qn(c,m),c){case"dialog":it("cancel",r),it("close",r),x=m;break;case"iframe":case"object":case"embed":it("load",r),x=m;break;case"video":case"audio":for(x=0;x<qi.length;x++)it(qi[x],r);x=m;break;case"source":it("error",r),x=m;break;case"img":case"image":case"link":it("error",r),it("load",r),x=m;break;case"details":it("toggle",r),x=m;break;case"input":ms(r,m),x=st(r,m),it("invalid",r);break;case"option":x=m;break;case"select":r._wrapperState={wasMultiple:!!m.multiple},x=H({},m,{value:void 0}),it("invalid",r);break;case"textarea":ss(r,m),x=rt(r,m),it("invalid",r);break;default:x=m}sn(c,x),L=x;for(N in L)if(L.hasOwnProperty(N)){var F=L[N];N==="style"?Hs(r,F):N==="dangerouslySetInnerHTML"?(F=F?F.__html:void 0,F!=null&&lt(r,F)):N==="children"?typeof F=="string"?(c!=="textarea"||F!=="")&&Qe(r,F):typeof F=="number"&&Qe(r,""+F):N!=="suppressContentEditableWarning"&&N!=="suppressHydrationWarning"&&N!=="autoFocus"&&(o.hasOwnProperty(N)?F!=null&&N==="onScroll"&&it("scroll",r):F!=null&&E(r,N,F,_))}switch(c){case"input":je(r),Un(r,m,!1);break;case"textarea":je(r),Dr(r);break;case"option":m.value!=null&&r.setAttribute("value",""+X(m.value));break;case"select":r.multiple=!!m.multiple,N=m.value,N!=null?Ae(r,!!m.multiple,N,!1):m.defaultValue!=null&&Ae(r,!!m.multiple,m.defaultValue,!0);break;default:typeof x.onClick=="function"&&(r.onclick=rl)}switch(c){case"button":case"input":case"select":case"textarea":m=!!m.autoFocus;break e;case"img":m=!0;break e;default:m=!1}}m&&(a.flags|=4)}a.ref!==null&&(a.flags|=512,a.flags|=2097152)}return Gt(a),null;case 6:if(r&&a.stateNode!=null)og(r,a,r.memoizedProps,m);else{if(typeof m!="string"&&a.stateNode===null)throw Error(n(166));if(c=Xn(Xi.current),Xn(fr.current),dl(a)){if(m=a.stateNode,c=a.memoizedProps,m[mr]=a,(N=m.nodeValue!==c)&&(r=_s,r!==null))switch(r.tag){case 3:sl(m.nodeValue,c,(r.mode&1)!==0);break;case 5:r.memoizedProps.suppressHydrationWarning!==!0&&sl(m.nodeValue,c,(r.mode&1)!==0)}N&&(a.flags|=4)}else m=(c.nodeType===9?c:c.ownerDocument).createTextNode(m),m[mr]=a,a.stateNode=m}return Gt(a),null;case 13:if(ot(mt),m=a.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(ct&&Es!==null&&(a.mode&1)!==0&&(a.flags&128)===0)dp(),Fa(),a.flags|=98560,N=!1;else if(N=dl(a),m!==null&&m.dehydrated!==null){if(r===null){if(!N)throw Error(n(318));if(N=a.memoizedState,N=N!==null?N.dehydrated:null,!N)throw Error(n(317));N[mr]=a}else Fa(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;Gt(a),N=!1}else Gs!==null&&(Ru(Gs),Gs=null),N=!0;if(!N)return a.flags&65536?a:null}return(a.flags&128)!==0?(a.lanes=c,a):(m=m!==null,m!==(r!==null&&r.memoizedState!==null)&&m&&(a.child.flags|=8192,(a.mode&1)!==0&&(r===null||(mt.current&1)!==0?kt===0&&(kt=3):Ou())),a.updateQueue!==null&&(a.flags|=4),Gt(a),null);case 4:return Va(),ju(r,a),r===null&&Hi(a.stateNode.containerInfo),Gt(a),null;case 10:return Yd(a.type._context),Gt(a),null;case 17:return ps(a.type)&&al(),Gt(a),null;case 19:if(ot(mt),N=a.memoizedState,N===null)return Gt(a),null;if(m=(a.flags&128)!==0,_=N.rendering,_===null)if(m)ro(N,!1);else{if(kt!==0||r!==null&&(r.flags&128)!==0)for(r=a.child;r!==null;){if(_=gl(r),_!==null){for(a.flags|=128,ro(N,!1),m=_.updateQueue,m!==null&&(a.updateQueue=m,a.flags|=4),a.subtreeFlags=0,m=c,c=a.child;c!==null;)N=c,r=m,N.flags&=14680066,_=N.alternate,_===null?(N.childLanes=0,N.lanes=r,N.child=null,N.subtreeFlags=0,N.memoizedProps=null,N.memoizedState=null,N.updateQueue=null,N.dependencies=null,N.stateNode=null):(N.childLanes=_.childLanes,N.lanes=_.lanes,N.child=_.child,N.subtreeFlags=0,N.deletions=null,N.memoizedProps=_.memoizedProps,N.memoizedState=_.memoizedState,N.updateQueue=_.updateQueue,N.type=_.type,r=_.dependencies,N.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),c=c.sibling;return nt(mt,mt.current&1|2),a.child}r=r.sibling}N.tail!==null&&gt()>Ka&&(a.flags|=128,m=!0,ro(N,!1),a.lanes=4194304)}else{if(!m)if(r=gl(_),r!==null){if(a.flags|=128,m=!0,c=r.updateQueue,c!==null&&(a.updateQueue=c,a.flags|=4),ro(N,!0),N.tail===null&&N.tailMode==="hidden"&&!_.alternate&&!ct)return Gt(a),null}else 2*gt()-N.renderingStartTime>Ka&&c!==1073741824&&(a.flags|=128,m=!0,ro(N,!1),a.lanes=4194304);N.isBackwards?(_.sibling=a.child,a.child=_):(c=N.last,c!==null?c.sibling=_:a.child=_,N.last=_)}return N.tail!==null?(a=N.tail,N.rendering=a,N.tail=a.sibling,N.renderingStartTime=gt(),a.sibling=null,c=mt.current,nt(mt,m?c&1|2:c&1),a):(Gt(a),null);case 22:case 23:return Mu(),m=a.memoizedState!==null,r!==null&&r.memoizedState!==null!==m&&(a.flags|=8192),m&&(a.mode&1)!==0?(Ts&1073741824)!==0&&(Gt(a),a.subtreeFlags&6&&(a.flags|=8192)):Gt(a),null;case 24:return null;case 25:return null}throw Error(n(156,a.tag))}function pN(r,a){switch(qd(a),a.tag){case 1:return ps(a.type)&&al(),r=a.flags,r&65536?(a.flags=r&-65537|128,a):null;case 3:return Va(),ot(hs),ot(Wt),ru(),r=a.flags,(r&65536)!==0&&(r&128)===0?(a.flags=r&-65537|128,a):null;case 5:return tu(a),null;case 13:if(ot(mt),r=a.memoizedState,r!==null&&r.dehydrated!==null){if(a.alternate===null)throw Error(n(340));Fa()}return r=a.flags,r&65536?(a.flags=r&-65537|128,a):null;case 19:return ot(mt),null;case 4:return Va(),null;case 10:return Yd(a.type._context),null;case 22:case 23:return Mu(),null;case 24:return null;default:return null}}var kl=!1,Jt=!1,gN=typeof WeakSet=="function"?WeakSet:Set,Se=null;function Ha(r,a){var c=r.ref;if(c!==null)if(typeof c=="function")try{c(null)}catch(m){pt(r,a,m)}else c.current=null}function Nu(r,a,c){try{c()}catch(m){pt(r,a,m)}}var lg=!1;function xN(r,a){if(Md=Ho,r=zh(),_d(r)){if("selectionStart"in r)var c={start:r.selectionStart,end:r.selectionEnd};else e:{c=(c=r.ownerDocument)&&c.defaultView||window;var m=c.getSelection&&c.getSelection();if(m&&m.rangeCount!==0){c=m.anchorNode;var x=m.anchorOffset,N=m.focusNode;m=m.focusOffset;try{c.nodeType,N.nodeType}catch{c=null;break e}var _=0,L=-1,F=-1,Y=0,de=0,me=r,oe=null;t:for(;;){for(var we;me!==c||x!==0&&me.nodeType!==3||(L=_+x),me!==N||m!==0&&me.nodeType!==3||(F=_+m),me.nodeType===3&&(_+=me.nodeValue.length),(we=me.firstChild)!==null;)oe=me,me=we;for(;;){if(me===r)break t;if(oe===c&&++Y===x&&(L=_),oe===N&&++de===m&&(F=_),(we=me.nextSibling)!==null)break;me=oe,oe=me.parentNode}me=we}c=L===-1||F===-1?null:{start:L,end:F}}else c=null}c=c||{start:0,end:0}}else c=null;for(Od={focusedElem:r,selectionRange:c},Ho=!1,Se=a;Se!==null;)if(a=Se,r=a.child,(a.subtreeFlags&1028)!==0&&r!==null)r.return=a,Se=r;else for(;Se!==null;){a=Se;try{var ke=a.alternate;if((a.flags&1024)!==0)switch(a.tag){case 0:case 11:case 15:break;case 1:if(ke!==null){var Pe=ke.memoizedProps,xt=ke.memoizedState,K=a.stateNode,B=K.getSnapshotBeforeUpdate(a.elementType===a.type?Pe:Js(a.type,Pe),xt);K.__reactInternalSnapshotBeforeUpdate=B}break;case 3:var G=a.stateNode.containerInfo;G.nodeType===1?G.textContent="":G.nodeType===9&&G.documentElement&&G.removeChild(G.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(fe){pt(a,a.return,fe)}if(r=a.sibling,r!==null){r.return=a.return,Se=r;break}Se=a.return}return ke=lg,lg=!1,ke}function no(r,a,c){var m=a.updateQueue;if(m=m!==null?m.lastEffect:null,m!==null){var x=m=m.next;do{if((x.tag&r)===r){var N=x.destroy;x.destroy=void 0,N!==void 0&&Nu(a,c,N)}x=x.next}while(x!==m)}}function Cl(r,a){if(a=a.updateQueue,a=a!==null?a.lastEffect:null,a!==null){var c=a=a.next;do{if((c.tag&r)===r){var m=c.create;c.destroy=m()}c=c.next}while(c!==a)}}function Su(r){var a=r.ref;if(a!==null){var c=r.stateNode;switch(r.tag){case 5:r=c;break;default:r=c}typeof a=="function"?a(r):a.current=r}}function cg(r){var a=r.alternate;a!==null&&(r.alternate=null,cg(a)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(a=r.stateNode,a!==null&&(delete a[mr],delete a[Ki],delete a[zd],delete a[Zj],delete a[eN])),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}function dg(r){return r.tag===5||r.tag===3||r.tag===4}function ug(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||dg(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function ku(r,a,c){var m=r.tag;if(m===5||m===6)r=r.stateNode,a?c.nodeType===8?c.parentNode.insertBefore(r,a):c.insertBefore(r,a):(c.nodeType===8?(a=c.parentNode,a.insertBefore(r,c)):(a=c,a.appendChild(r)),c=c._reactRootContainer,c!=null||a.onclick!==null||(a.onclick=rl));else if(m!==4&&(r=r.child,r!==null))for(ku(r,a,c),r=r.sibling;r!==null;)ku(r,a,c),r=r.sibling}function Cu(r,a,c){var m=r.tag;if(m===5||m===6)r=r.stateNode,a?c.insertBefore(r,a):c.appendChild(r);else if(m!==4&&(r=r.child,r!==null))for(Cu(r,a,c),r=r.sibling;r!==null;)Cu(r,a,c),r=r.sibling}var zt=null,Ys=!1;function yn(r,a,c){for(c=c.child;c!==null;)mg(r,a,c),c=c.sibling}function mg(r,a,c){if(ur&&typeof ur.onCommitFiberUnmount=="function")try{ur.onCommitFiberUnmount(Fo,c)}catch{}switch(c.tag){case 5:Jt||Ha(c,a);case 6:var m=zt,x=Ys;zt=null,yn(r,a,c),zt=m,Ys=x,zt!==null&&(Ys?(r=zt,c=c.stateNode,r.nodeType===8?r.parentNode.removeChild(c):r.removeChild(c)):zt.removeChild(c.stateNode));break;case 18:zt!==null&&(Ys?(r=zt,c=c.stateNode,r.nodeType===8?Fd(r.parentNode,c):r.nodeType===1&&Fd(r,c),Oi(r)):Fd(zt,c.stateNode));break;case 4:m=zt,x=Ys,zt=c.stateNode.containerInfo,Ys=!0,yn(r,a,c),zt=m,Ys=x;break;case 0:case 11:case 14:case 15:if(!Jt&&(m=c.updateQueue,m!==null&&(m=m.lastEffect,m!==null))){x=m=m.next;do{var N=x,_=N.destroy;N=N.tag,_!==void 0&&((N&2)!==0||(N&4)!==0)&&Nu(c,a,_),x=x.next}while(x!==m)}yn(r,a,c);break;case 1:if(!Jt&&(Ha(c,a),m=c.stateNode,typeof m.componentWillUnmount=="function"))try{m.props=c.memoizedProps,m.state=c.memoizedState,m.componentWillUnmount()}catch(L){pt(c,a,L)}yn(r,a,c);break;case 21:yn(r,a,c);break;case 22:c.mode&1?(Jt=(m=Jt)||c.memoizedState!==null,yn(r,a,c),Jt=m):yn(r,a,c);break;default:yn(r,a,c)}}function fg(r){var a=r.updateQueue;if(a!==null){r.updateQueue=null;var c=r.stateNode;c===null&&(c=r.stateNode=new gN),a.forEach(function(m){var x=CN.bind(null,r,m);c.has(m)||(c.add(m),m.then(x,x))})}}function Qs(r,a){var c=a.deletions;if(c!==null)for(var m=0;m<c.length;m++){var x=c[m];try{var N=r,_=a,L=_;e:for(;L!==null;){switch(L.tag){case 5:zt=L.stateNode,Ys=!1;break e;case 3:zt=L.stateNode.containerInfo,Ys=!0;break e;case 4:zt=L.stateNode.containerInfo,Ys=!0;break e}L=L.return}if(zt===null)throw Error(n(160));mg(N,_,x),zt=null,Ys=!1;var F=x.alternate;F!==null&&(F.return=null),x.return=null}catch(Y){pt(x,a,Y)}}if(a.subtreeFlags&12854)for(a=a.child;a!==null;)hg(a,r),a=a.sibling}function hg(r,a){var c=r.alternate,m=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:if(Qs(a,r),pr(r),m&4){try{no(3,r,r.return),Cl(3,r)}catch(Pe){pt(r,r.return,Pe)}try{no(5,r,r.return)}catch(Pe){pt(r,r.return,Pe)}}break;case 1:Qs(a,r),pr(r),m&512&&c!==null&&Ha(c,c.return);break;case 5:if(Qs(a,r),pr(r),m&512&&c!==null&&Ha(c,c.return),r.flags&32){var x=r.stateNode;try{Qe(x,"")}catch(Pe){pt(r,r.return,Pe)}}if(m&4&&(x=r.stateNode,x!=null)){var N=r.memoizedProps,_=c!==null?c.memoizedProps:N,L=r.type,F=r.updateQueue;if(r.updateQueue=null,F!==null)try{L==="input"&&N.type==="radio"&&N.name!=null&&Ss(x,N),qn(L,_);var Y=qn(L,N);for(_=0;_<F.length;_+=2){var de=F[_],me=F[_+1];de==="style"?Hs(x,me):de==="dangerouslySetInnerHTML"?lt(x,me):de==="children"?Qe(x,me):E(x,de,me,Y)}switch(L){case"input":qt(x,N);break;case"textarea":en(x,N);break;case"select":var oe=x._wrapperState.wasMultiple;x._wrapperState.wasMultiple=!!N.multiple;var we=N.value;we!=null?Ae(x,!!N.multiple,we,!1):oe!==!!N.multiple&&(N.defaultValue!=null?Ae(x,!!N.multiple,N.defaultValue,!0):Ae(x,!!N.multiple,N.multiple?[]:"",!1))}x[Ki]=N}catch(Pe){pt(r,r.return,Pe)}}break;case 6:if(Qs(a,r),pr(r),m&4){if(r.stateNode===null)throw Error(n(162));x=r.stateNode,N=r.memoizedProps;try{x.nodeValue=N}catch(Pe){pt(r,r.return,Pe)}}break;case 3:if(Qs(a,r),pr(r),m&4&&c!==null&&c.memoizedState.isDehydrated)try{Oi(a.containerInfo)}catch(Pe){pt(r,r.return,Pe)}break;case 4:Qs(a,r),pr(r);break;case 13:Qs(a,r),pr(r),x=r.child,x.flags&8192&&(N=x.memoizedState!==null,x.stateNode.isHidden=N,!N||x.alternate!==null&&x.alternate.memoizedState!==null||(Tu=gt())),m&4&&fg(r);break;case 22:if(de=c!==null&&c.memoizedState!==null,r.mode&1?(Jt=(Y=Jt)||de,Qs(a,r),Jt=Y):Qs(a,r),pr(r),m&8192){if(Y=r.memoizedState!==null,(r.stateNode.isHidden=Y)&&!de&&(r.mode&1)!==0)for(Se=r,de=r.child;de!==null;){for(me=Se=de;Se!==null;){switch(oe=Se,we=oe.child,oe.tag){case 0:case 11:case 14:case 15:no(4,oe,oe.return);break;case 1:Ha(oe,oe.return);var ke=oe.stateNode;if(typeof ke.componentWillUnmount=="function"){m=oe,c=oe.return;try{a=m,ke.props=a.memoizedProps,ke.state=a.memoizedState,ke.componentWillUnmount()}catch(Pe){pt(m,c,Pe)}}break;case 5:Ha(oe,oe.return);break;case 22:if(oe.memoizedState!==null){xg(me);continue}}we!==null?(we.return=oe,Se=we):xg(me)}de=de.sibling}e:for(de=null,me=r;;){if(me.tag===5){if(de===null){de=me;try{x=me.stateNode,Y?(N=x.style,typeof N.setProperty=="function"?N.setProperty("display","none","important"):N.display="none"):(L=me.stateNode,F=me.memoizedProps.style,_=F!=null&&F.hasOwnProperty("display")?F.display:null,L.style.display=Ca("display",_))}catch(Pe){pt(r,r.return,Pe)}}}else if(me.tag===6){if(de===null)try{me.stateNode.nodeValue=Y?"":me.memoizedProps}catch(Pe){pt(r,r.return,Pe)}}else if((me.tag!==22&&me.tag!==23||me.memoizedState===null||me===r)&&me.child!==null){me.child.return=me,me=me.child;continue}if(me===r)break e;for(;me.sibling===null;){if(me.return===null||me.return===r)break e;de===me&&(de=null),me=me.return}de===me&&(de=null),me.sibling.return=me.return,me=me.sibling}}break;case 19:Qs(a,r),pr(r),m&4&&fg(r);break;case 21:break;default:Qs(a,r),pr(r)}}function pr(r){var a=r.flags;if(a&2){try{e:{for(var c=r.return;c!==null;){if(dg(c)){var m=c;break e}c=c.return}throw Error(n(160))}switch(m.tag){case 5:var x=m.stateNode;m.flags&32&&(Qe(x,""),m.flags&=-33);var N=ug(r);Cu(r,N,x);break;case 3:case 4:var _=m.stateNode.containerInfo,L=ug(r);ku(r,L,_);break;default:throw Error(n(161))}}catch(F){pt(r,r.return,F)}r.flags&=-3}a&4096&&(r.flags&=-4097)}function vN(r,a,c){Se=r,pg(r)}function pg(r,a,c){for(var m=(r.mode&1)!==0;Se!==null;){var x=Se,N=x.child;if(x.tag===22&&m){var _=x.memoizedState!==null||kl;if(!_){var L=x.alternate,F=L!==null&&L.memoizedState!==null||Jt;L=kl;var Y=Jt;if(kl=_,(Jt=F)&&!Y)for(Se=x;Se!==null;)_=Se,F=_.child,_.tag===22&&_.memoizedState!==null?vg(x):F!==null?(F.return=_,Se=F):vg(x);for(;N!==null;)Se=N,pg(N),N=N.sibling;Se=x,kl=L,Jt=Y}gg(r)}else(x.subtreeFlags&8772)!==0&&N!==null?(N.return=x,Se=N):gg(r)}}function gg(r){for(;Se!==null;){var a=Se;if((a.flags&8772)!==0){var c=a.alternate;try{if((a.flags&8772)!==0)switch(a.tag){case 0:case 11:case 15:Jt||Cl(5,a);break;case 1:var m=a.stateNode;if(a.flags&4&&!Jt)if(c===null)m.componentDidMount();else{var x=a.elementType===a.type?c.memoizedProps:Js(a.type,c.memoizedProps);m.componentDidUpdate(x,c.memoizedState,m.__reactInternalSnapshotBeforeUpdate)}var N=a.updateQueue;N!==null&&xp(a,N,m);break;case 3:var _=a.updateQueue;if(_!==null){if(c=null,a.child!==null)switch(a.child.tag){case 5:c=a.child.stateNode;break;case 1:c=a.child.stateNode}xp(a,_,c)}break;case 5:var L=a.stateNode;if(c===null&&a.flags&4){c=L;var F=a.memoizedProps;switch(a.type){case"button":case"input":case"select":case"textarea":F.autoFocus&&c.focus();break;case"img":F.src&&(c.src=F.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(a.memoizedState===null){var Y=a.alternate;if(Y!==null){var de=Y.memoizedState;if(de!==null){var me=de.dehydrated;me!==null&&Oi(me)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}Jt||a.flags&512&&Su(a)}catch(oe){pt(a,a.return,oe)}}if(a===r){Se=null;break}if(c=a.sibling,c!==null){c.return=a.return,Se=c;break}Se=a.return}}function xg(r){for(;Se!==null;){var a=Se;if(a===r){Se=null;break}var c=a.sibling;if(c!==null){c.return=a.return,Se=c;break}Se=a.return}}function vg(r){for(;Se!==null;){var a=Se;try{switch(a.tag){case 0:case 11:case 15:var c=a.return;try{Cl(4,a)}catch(F){pt(a,c,F)}break;case 1:var m=a.stateNode;if(typeof m.componentDidMount=="function"){var x=a.return;try{m.componentDidMount()}catch(F){pt(a,x,F)}}var N=a.return;try{Su(a)}catch(F){pt(a,N,F)}break;case 5:var _=a.return;try{Su(a)}catch(F){pt(a,_,F)}}}catch(F){pt(a,a.return,F)}if(a===r){Se=null;break}var L=a.sibling;if(L!==null){L.return=a.return,Se=L;break}Se=a.return}}var yN=Math.ceil,_l=P.ReactCurrentDispatcher,_u=P.ReactCurrentOwner,Ls=P.ReactCurrentBatchConfig,Ze=0,It=null,bt=null,Bt=0,Ts=0,Wa=hn(0),kt=0,ao=null,ea=0,El=0,Eu=0,io=null,xs=null,Tu=0,Ka=1/0,Hr=null,Tl=!1,Pu=null,wn=null,Pl=!1,bn=null,Il=0,oo=0,Iu=null,Al=-1,Rl=0;function ns(){return(Ze&6)!==0?gt():Al!==-1?Al:Al=gt()}function jn(r){return(r.mode&1)===0?1:(Ze&2)!==0&&Bt!==0?Bt&-Bt:sN.transition!==null?(Rl===0&&(Rl=uh()),Rl):(r=tt,r!==0||(r=window.event,r=r===void 0?16:wh(r.type)),r)}function Xs(r,a,c,m){if(50<oo)throw oo=0,Iu=null,Error(n(185));Ii(r,c,m),((Ze&2)===0||r!==It)&&(r===It&&((Ze&2)===0&&(El|=c),kt===4&&Nn(r,Bt)),vs(r,m),c===1&&Ze===0&&(a.mode&1)===0&&(Ka=gt()+500,ol&&gn()))}function vs(r,a){var c=r.callbackNode;sj(r,a);var m=Uo(r,r===It?Bt:0);if(m===0)c!==null&&lh(c),r.callbackNode=null,r.callbackPriority=0;else if(a=m&-m,r.callbackPriority!==a){if(c!=null&&lh(c),a===1)r.tag===0?tN(wg.bind(null,r)):ap(wg.bind(null,r)),Qj(function(){(Ze&6)===0&&gn()}),c=null;else{switch(mh(m)){case 1:c=dd;break;case 4:c=ch;break;case 16:c=$o;break;case 536870912:c=dh;break;default:c=$o}c=Eg(c,yg.bind(null,r))}r.callbackPriority=a,r.callbackNode=c}}function yg(r,a){if(Al=-1,Rl=0,(Ze&6)!==0)throw Error(n(327));var c=r.callbackNode;if(Ga()&&r.callbackNode!==c)return null;var m=Uo(r,r===It?Bt:0);if(m===0)return null;if((m&30)!==0||(m&r.expiredLanes)!==0||a)a=Dl(r,m);else{a=m;var x=Ze;Ze|=2;var N=jg();(It!==r||Bt!==a)&&(Hr=null,Ka=gt()+500,sa(r,a));do try{jN();break}catch(L){bg(r,L)}while(!0);Jd(),_l.current=N,Ze=x,bt!==null?a=0:(It=null,Bt=0,a=kt)}if(a!==0){if(a===2&&(x=ud(r),x!==0&&(m=x,a=Au(r,x))),a===1)throw c=ao,sa(r,0),Nn(r,m),vs(r,gt()),c;if(a===6)Nn(r,m);else{if(x=r.current.alternate,(m&30)===0&&!wN(x)&&(a=Dl(r,m),a===2&&(N=ud(r),N!==0&&(m=N,a=Au(r,N))),a===1))throw c=ao,sa(r,0),Nn(r,m),vs(r,gt()),c;switch(r.finishedWork=x,r.finishedLanes=m,a){case 0:case 1:throw Error(n(345));case 2:ra(r,xs,Hr);break;case 3:if(Nn(r,m),(m&130023424)===m&&(a=Tu+500-gt(),10<a)){if(Uo(r,0)!==0)break;if(x=r.suspendedLanes,(x&m)!==m){ns(),r.pingedLanes|=r.suspendedLanes&x;break}r.timeoutHandle=$d(ra.bind(null,r,xs,Hr),a);break}ra(r,xs,Hr);break;case 4:if(Nn(r,m),(m&4194240)===m)break;for(a=r.eventTimes,x=-1;0<m;){var _=31-Ws(m);N=1<<_,_=a[_],_>x&&(x=_),m&=~N}if(m=x,m=gt()-m,m=(120>m?120:480>m?480:1080>m?1080:1920>m?1920:3e3>m?3e3:4320>m?4320:1960*yN(m/1960))-m,10<m){r.timeoutHandle=$d(ra.bind(null,r,xs,Hr),m);break}ra(r,xs,Hr);break;case 5:ra(r,xs,Hr);break;default:throw Error(n(329))}}}return vs(r,gt()),r.callbackNode===c?yg.bind(null,r):null}function Au(r,a){var c=io;return r.current.memoizedState.isDehydrated&&(sa(r,a).flags|=256),r=Dl(r,a),r!==2&&(a=xs,xs=c,a!==null&&Ru(a)),r}function Ru(r){xs===null?xs=r:xs.push.apply(xs,r)}function wN(r){for(var a=r;;){if(a.flags&16384){var c=a.updateQueue;if(c!==null&&(c=c.stores,c!==null))for(var m=0;m<c.length;m++){var x=c[m],N=x.getSnapshot;x=x.value;try{if(!Ks(N(),x))return!1}catch{return!1}}}if(c=a.child,a.subtreeFlags&16384&&c!==null)c.return=a,a=c;else{if(a===r)break;for(;a.sibling===null;){if(a.return===null||a.return===r)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function Nn(r,a){for(a&=~Eu,a&=~El,r.suspendedLanes|=a,r.pingedLanes&=~a,r=r.expirationTimes;0<a;){var c=31-Ws(a),m=1<<c;r[c]=-1,a&=~m}}function wg(r){if((Ze&6)!==0)throw Error(n(327));Ga();var a=Uo(r,0);if((a&1)===0)return vs(r,gt()),null;var c=Dl(r,a);if(r.tag!==0&&c===2){var m=ud(r);m!==0&&(a=m,c=Au(r,m))}if(c===1)throw c=ao,sa(r,0),Nn(r,a),vs(r,gt()),c;if(c===6)throw Error(n(345));return r.finishedWork=r.current.alternate,r.finishedLanes=a,ra(r,xs,Hr),vs(r,gt()),null}function Du(r,a){var c=Ze;Ze|=1;try{return r(a)}finally{Ze=c,Ze===0&&(Ka=gt()+500,ol&&gn())}}function ta(r){bn!==null&&bn.tag===0&&(Ze&6)===0&&Ga();var a=Ze;Ze|=1;var c=Ls.transition,m=tt;try{if(Ls.transition=null,tt=1,r)return r()}finally{tt=m,Ls.transition=c,Ze=a,(Ze&6)===0&&gn()}}function Mu(){Ts=Wa.current,ot(Wa)}function sa(r,a){r.finishedWork=null,r.finishedLanes=0;var c=r.timeoutHandle;if(c!==-1&&(r.timeoutHandle=-1,Yj(c)),bt!==null)for(c=bt.return;c!==null;){var m=c;switch(qd(m),m.tag){case 1:m=m.type.childContextTypes,m!=null&&al();break;case 3:Va(),ot(hs),ot(Wt),ru();break;case 5:tu(m);break;case 4:Va();break;case 13:ot(mt);break;case 19:ot(mt);break;case 10:Yd(m.type._context);break;case 22:case 23:Mu()}c=c.return}if(It=r,bt=r=Sn(r.current,null),Bt=Ts=a,kt=0,ao=null,Eu=El=ea=0,xs=io=null,Qn!==null){for(a=0;a<Qn.length;a++)if(c=Qn[a],m=c.interleaved,m!==null){c.interleaved=null;var x=m.next,N=c.pending;if(N!==null){var _=N.next;N.next=x,m.next=_}c.pending=m}Qn=null}return r}function bg(r,a){do{var c=bt;try{if(Jd(),xl.current=bl,vl){for(var m=ft.memoizedState;m!==null;){var x=m.queue;x!==null&&(x.pending=null),m=m.next}vl=!1}if(Zn=0,Pt=St=ft=null,Zi=!1,eo=0,_u.current=null,c===null||c.return===null){kt=1,ao=a,bt=null;break}e:{var N=r,_=c.return,L=c,F=a;if(a=Bt,L.flags|=32768,F!==null&&typeof F=="object"&&typeof F.then=="function"){var Y=F,de=L,me=de.tag;if((de.mode&1)===0&&(me===0||me===11||me===15)){var oe=de.alternate;oe?(de.updateQueue=oe.updateQueue,de.memoizedState=oe.memoizedState,de.lanes=oe.lanes):(de.updateQueue=null,de.memoizedState=null)}var we=Wp(_);if(we!==null){we.flags&=-257,Kp(we,_,L,N,a),we.mode&1&&Hp(N,Y,a),a=we,F=Y;var ke=a.updateQueue;if(ke===null){var Pe=new Set;Pe.add(F),a.updateQueue=Pe}else ke.add(F);break e}else{if((a&1)===0){Hp(N,Y,a),Ou();break e}F=Error(n(426))}}else if(ct&&L.mode&1){var xt=Wp(_);if(xt!==null){(xt.flags&65536)===0&&(xt.flags|=256),Kp(xt,_,L,N,a),Kd(qa(F,L));break e}}N=F=qa(F,L),kt!==4&&(kt=2),io===null?io=[N]:io.push(N),N=_;do{switch(N.tag){case 3:N.flags|=65536,a&=-a,N.lanes|=a;var K=Vp(N,F,a);gp(N,K);break e;case 1:L=F;var B=N.type,G=N.stateNode;if((N.flags&128)===0&&(typeof B.getDerivedStateFromError=="function"||G!==null&&typeof G.componentDidCatch=="function"&&(wn===null||!wn.has(G)))){N.flags|=65536,a&=-a,N.lanes|=a;var fe=qp(N,L,a);gp(N,fe);break e}}N=N.return}while(N!==null)}Sg(c)}catch(Re){a=Re,bt===c&&c!==null&&(bt=c=c.return);continue}break}while(!0)}function jg(){var r=_l.current;return _l.current=bl,r===null?bl:r}function Ou(){(kt===0||kt===3||kt===2)&&(kt=4),It===null||(ea&268435455)===0&&(El&268435455)===0||Nn(It,Bt)}function Dl(r,a){var c=Ze;Ze|=2;var m=jg();(It!==r||Bt!==a)&&(Hr=null,sa(r,a));do try{bN();break}catch(x){bg(r,x)}while(!0);if(Jd(),Ze=c,_l.current=m,bt!==null)throw Error(n(261));return It=null,Bt=0,kt}function bN(){for(;bt!==null;)Ng(bt)}function jN(){for(;bt!==null&&!Kb();)Ng(bt)}function Ng(r){var a=_g(r.alternate,r,Ts);r.memoizedProps=r.pendingProps,a===null?Sg(r):bt=a,_u.current=null}function Sg(r){var a=r;do{var c=a.alternate;if(r=a.return,(a.flags&32768)===0){if(c=hN(c,a,Ts),c!==null){bt=c;return}}else{if(c=pN(c,a),c!==null){c.flags&=32767,bt=c;return}if(r!==null)r.flags|=32768,r.subtreeFlags=0,r.deletions=null;else{kt=6,bt=null;return}}if(a=a.sibling,a!==null){bt=a;return}bt=a=r}while(a!==null);kt===0&&(kt=5)}function ra(r,a,c){var m=tt,x=Ls.transition;try{Ls.transition=null,tt=1,NN(r,a,c,m)}finally{Ls.transition=x,tt=m}return null}function NN(r,a,c,m){do Ga();while(bn!==null);if((Ze&6)!==0)throw Error(n(327));c=r.finishedWork;var x=r.finishedLanes;if(c===null)return null;if(r.finishedWork=null,r.finishedLanes=0,c===r.current)throw Error(n(177));r.callbackNode=null,r.callbackPriority=0;var N=c.lanes|c.childLanes;if(rj(r,N),r===It&&(bt=It=null,Bt=0),(c.subtreeFlags&2064)===0&&(c.flags&2064)===0||Pl||(Pl=!0,Eg($o,function(){return Ga(),null})),N=(c.flags&15990)!==0,(c.subtreeFlags&15990)!==0||N){N=Ls.transition,Ls.transition=null;var _=tt;tt=1;var L=Ze;Ze|=4,_u.current=null,xN(r,c),hg(c,r),Vj(Od),Ho=!!Md,Od=Md=null,r.current=c,vN(c),Gb(),Ze=L,tt=_,Ls.transition=N}else r.current=c;if(Pl&&(Pl=!1,bn=r,Il=x),N=r.pendingLanes,N===0&&(wn=null),Qb(c.stateNode),vs(r,gt()),a!==null)for(m=r.onRecoverableError,c=0;c<a.length;c++)x=a[c],m(x.value,{componentStack:x.stack,digest:x.digest});if(Tl)throw Tl=!1,r=Pu,Pu=null,r;return(Il&1)!==0&&r.tag!==0&&Ga(),N=r.pendingLanes,(N&1)!==0?r===Iu?oo++:(oo=0,Iu=r):oo=0,gn(),null}function Ga(){if(bn!==null){var r=mh(Il),a=Ls.transition,c=tt;try{if(Ls.transition=null,tt=16>r?16:r,bn===null)var m=!1;else{if(r=bn,bn=null,Il=0,(Ze&6)!==0)throw Error(n(331));var x=Ze;for(Ze|=4,Se=r.current;Se!==null;){var N=Se,_=N.child;if((Se.flags&16)!==0){var L=N.deletions;if(L!==null){for(var F=0;F<L.length;F++){var Y=L[F];for(Se=Y;Se!==null;){var de=Se;switch(de.tag){case 0:case 11:case 15:no(8,de,N)}var me=de.child;if(me!==null)me.return=de,Se=me;else for(;Se!==null;){de=Se;var oe=de.sibling,we=de.return;if(cg(de),de===Y){Se=null;break}if(oe!==null){oe.return=we,Se=oe;break}Se=we}}}var ke=N.alternate;if(ke!==null){var Pe=ke.child;if(Pe!==null){ke.child=null;do{var xt=Pe.sibling;Pe.sibling=null,Pe=xt}while(Pe!==null)}}Se=N}}if((N.subtreeFlags&2064)!==0&&_!==null)_.return=N,Se=_;else e:for(;Se!==null;){if(N=Se,(N.flags&2048)!==0)switch(N.tag){case 0:case 11:case 15:no(9,N,N.return)}var K=N.sibling;if(K!==null){K.return=N.return,Se=K;break e}Se=N.return}}var B=r.current;for(Se=B;Se!==null;){_=Se;var G=_.child;if((_.subtreeFlags&2064)!==0&&G!==null)G.return=_,Se=G;else e:for(_=B;Se!==null;){if(L=Se,(L.flags&2048)!==0)try{switch(L.tag){case 0:case 11:case 15:Cl(9,L)}}catch(Re){pt(L,L.return,Re)}if(L===_){Se=null;break e}var fe=L.sibling;if(fe!==null){fe.return=L.return,Se=fe;break e}Se=L.return}}if(Ze=x,gn(),ur&&typeof ur.onPostCommitFiberRoot=="function")try{ur.onPostCommitFiberRoot(Fo,r)}catch{}m=!0}return m}finally{tt=c,Ls.transition=a}}return!1}function kg(r,a,c){a=qa(c,a),a=Vp(r,a,1),r=vn(r,a,1),a=ns(),r!==null&&(Ii(r,1,a),vs(r,a))}function pt(r,a,c){if(r.tag===3)kg(r,r,c);else for(;a!==null;){if(a.tag===3){kg(a,r,c);break}else if(a.tag===1){var m=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof m.componentDidCatch=="function"&&(wn===null||!wn.has(m))){r=qa(c,r),r=qp(a,r,1),a=vn(a,r,1),r=ns(),a!==null&&(Ii(a,1,r),vs(a,r));break}}a=a.return}}function SN(r,a,c){var m=r.pingCache;m!==null&&m.delete(a),a=ns(),r.pingedLanes|=r.suspendedLanes&c,It===r&&(Bt&c)===c&&(kt===4||kt===3&&(Bt&130023424)===Bt&&500>gt()-Tu?sa(r,0):Eu|=c),vs(r,a)}function Cg(r,a){a===0&&((r.mode&1)===0?a=1:(a=Bo,Bo<<=1,(Bo&130023424)===0&&(Bo=4194304)));var c=ns();r=Ur(r,a),r!==null&&(Ii(r,a,c),vs(r,c))}function kN(r){var a=r.memoizedState,c=0;a!==null&&(c=a.retryLane),Cg(r,c)}function CN(r,a){var c=0;switch(r.tag){case 13:var m=r.stateNode,x=r.memoizedState;x!==null&&(c=x.retryLane);break;case 19:m=r.stateNode;break;default:throw Error(n(314))}m!==null&&m.delete(a),Cg(r,c)}var _g;_g=function(r,a,c){if(r!==null)if(r.memoizedProps!==a.pendingProps||hs.current)gs=!0;else{if((r.lanes&c)===0&&(a.flags&128)===0)return gs=!1,fN(r,a,c);gs=(r.flags&131072)!==0}else gs=!1,ct&&(a.flags&1048576)!==0&&ip(a,cl,a.index);switch(a.lanes=0,a.tag){case 2:var m=a.type;Sl(r,a),r=a.pendingProps;var x=Oa(a,Wt.current);Ua(a,c),x=iu(null,a,m,r,x,c);var N=ou();return a.flags|=1,typeof x=="object"&&x!==null&&typeof x.render=="function"&&x.$$typeof===void 0?(a.tag=1,a.memoizedState=null,a.updateQueue=null,ps(m)?(N=!0,il(a)):N=!1,a.memoizedState=x.state!==null&&x.state!==void 0?x.state:null,Zd(a),x.updater=jl,a.stateNode=x,x._reactInternals=a,fu(a,m,r,c),a=xu(null,a,m,!0,N,c)):(a.tag=0,ct&&N&&Vd(a),rs(null,a,x,c),a=a.child),a;case 16:m=a.elementType;e:{switch(Sl(r,a),r=a.pendingProps,x=m._init,m=x(m._payload),a.type=m,x=a.tag=EN(m),r=Js(m,r),x){case 0:a=gu(null,a,m,r,c);break e;case 1:a=Zp(null,a,m,r,c);break e;case 11:a=Gp(null,a,m,r,c);break e;case 14:a=Jp(null,a,m,Js(m.type,r),c);break e}throw Error(n(306,m,""))}return a;case 0:return m=a.type,x=a.pendingProps,x=a.elementType===m?x:Js(m,x),gu(r,a,m,x,c);case 1:return m=a.type,x=a.pendingProps,x=a.elementType===m?x:Js(m,x),Zp(r,a,m,x,c);case 3:e:{if(eg(a),r===null)throw Error(n(387));m=a.pendingProps,N=a.memoizedState,x=N.element,pp(r,a),pl(a,m,null,c);var _=a.memoizedState;if(m=_.element,N.isDehydrated)if(N={element:m,isDehydrated:!1,cache:_.cache,pendingSuspenseBoundaries:_.pendingSuspenseBoundaries,transitions:_.transitions},a.updateQueue.baseState=N,a.memoizedState=N,a.flags&256){x=qa(Error(n(423)),a),a=tg(r,a,m,c,x);break e}else if(m!==x){x=qa(Error(n(424)),a),a=tg(r,a,m,c,x);break e}else for(Es=fn(a.stateNode.containerInfo.firstChild),_s=a,ct=!0,Gs=null,c=fp(a,null,m,c),a.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling;else{if(Fa(),m===x){a=qr(r,a,c);break e}rs(r,a,m,c)}a=a.child}return a;case 5:return vp(a),r===null&&Wd(a),m=a.type,x=a.pendingProps,N=r!==null?r.memoizedProps:null,_=x.children,Ld(m,x)?_=null:N!==null&&Ld(m,N)&&(a.flags|=32),Xp(r,a),rs(r,a,_,c),a.child;case 6:return r===null&&Wd(a),null;case 13:return sg(r,a,c);case 4:return eu(a,a.stateNode.containerInfo),m=a.pendingProps,r===null?a.child=za(a,null,m,c):rs(r,a,m,c),a.child;case 11:return m=a.type,x=a.pendingProps,x=a.elementType===m?x:Js(m,x),Gp(r,a,m,x,c);case 7:return rs(r,a,a.pendingProps,c),a.child;case 8:return rs(r,a,a.pendingProps.children,c),a.child;case 12:return rs(r,a,a.pendingProps.children,c),a.child;case 10:e:{if(m=a.type._context,x=a.pendingProps,N=a.memoizedProps,_=x.value,nt(ml,m._currentValue),m._currentValue=_,N!==null)if(Ks(N.value,_)){if(N.children===x.children&&!hs.current){a=qr(r,a,c);break e}}else for(N=a.child,N!==null&&(N.return=a);N!==null;){var L=N.dependencies;if(L!==null){_=N.child;for(var F=L.firstContext;F!==null;){if(F.context===m){if(N.tag===1){F=Vr(-1,c&-c),F.tag=2;var Y=N.updateQueue;if(Y!==null){Y=Y.shared;var de=Y.pending;de===null?F.next=F:(F.next=de.next,de.next=F),Y.pending=F}}N.lanes|=c,F=N.alternate,F!==null&&(F.lanes|=c),Qd(N.return,c,a),L.lanes|=c;break}F=F.next}}else if(N.tag===10)_=N.type===a.type?null:N.child;else if(N.tag===18){if(_=N.return,_===null)throw Error(n(341));_.lanes|=c,L=_.alternate,L!==null&&(L.lanes|=c),Qd(_,c,a),_=N.sibling}else _=N.child;if(_!==null)_.return=N;else for(_=N;_!==null;){if(_===a){_=null;break}if(N=_.sibling,N!==null){N.return=_.return,_=N;break}_=_.return}N=_}rs(r,a,x.children,c),a=a.child}return a;case 9:return x=a.type,m=a.pendingProps.children,Ua(a,c),x=Ms(x),m=m(x),a.flags|=1,rs(r,a,m,c),a.child;case 14:return m=a.type,x=Js(m,a.pendingProps),x=Js(m.type,x),Jp(r,a,m,x,c);case 15:return Yp(r,a,a.type,a.pendingProps,c);case 17:return m=a.type,x=a.pendingProps,x=a.elementType===m?x:Js(m,x),Sl(r,a),a.tag=1,ps(m)?(r=!0,il(a)):r=!1,Ua(a,c),Bp(a,m,x),fu(a,m,x,c),xu(null,a,m,!0,r,c);case 19:return ng(r,a,c);case 22:return Qp(r,a,c)}throw Error(n(156,a.tag))};function Eg(r,a){return oh(r,a)}function _N(r,a,c,m){this.tag=r,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=m,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function $s(r,a,c,m){return new _N(r,a,c,m)}function Lu(r){return r=r.prototype,!(!r||!r.isReactComponent)}function EN(r){if(typeof r=="function")return Lu(r)?1:0;if(r!=null){if(r=r.$$typeof,r===Q)return 11;if(r===se)return 14}return 2}function Sn(r,a){var c=r.alternate;return c===null?(c=$s(r.tag,a,r.key,r.mode),c.elementType=r.elementType,c.type=r.type,c.stateNode=r.stateNode,c.alternate=r,r.alternate=c):(c.pendingProps=a,c.type=r.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=r.flags&14680064,c.childLanes=r.childLanes,c.lanes=r.lanes,c.child=r.child,c.memoizedProps=r.memoizedProps,c.memoizedState=r.memoizedState,c.updateQueue=r.updateQueue,a=r.dependencies,c.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},c.sibling=r.sibling,c.index=r.index,c.ref=r.ref,c}function Ml(r,a,c,m,x,N){var _=2;if(m=r,typeof r=="function")Lu(r)&&(_=1);else if(typeof r=="string")_=5;else e:switch(r){case R:return na(c.children,x,N,a);case $:_=8,x|=8;break;case J:return r=$s(12,c,a,x|2),r.elementType=J,r.lanes=N,r;case Z:return r=$s(13,c,a,x),r.elementType=Z,r.lanes=N,r;case he:return r=$s(19,c,a,x),r.elementType=he,r.lanes=N,r;case ne:return Ol(c,x,N,a);default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case z:_=10;break e;case q:_=9;break e;case Q:_=11;break e;case se:_=14;break e;case te:_=16,m=null;break e}throw Error(n(130,r==null?r:typeof r,""))}return a=$s(_,c,a,x),a.elementType=r,a.type=m,a.lanes=N,a}function na(r,a,c,m){return r=$s(7,r,m,a),r.lanes=c,r}function Ol(r,a,c,m){return r=$s(22,r,m,a),r.elementType=ne,r.lanes=c,r.stateNode={isHidden:!1},r}function $u(r,a,c){return r=$s(6,r,null,a),r.lanes=c,r}function Fu(r,a,c){return a=$s(4,r.children!==null?r.children:[],r.key,a),a.lanes=c,a.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},a}function TN(r,a,c,m,x){this.tag=a,this.containerInfo=r,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=md(0),this.expirationTimes=md(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=md(0),this.identifierPrefix=m,this.onRecoverableError=x,this.mutableSourceEagerHydrationData=null}function zu(r,a,c,m,x,N,_,L,F){return r=new TN(r,a,c,L,F),a===1?(a=1,N===!0&&(a|=8)):a=0,N=$s(3,null,null,a),r.current=N,N.stateNode=r,N.memoizedState={element:m,isDehydrated:c,cache:null,transitions:null,pendingSuspenseBoundaries:null},Zd(N),r}function PN(r,a,c){var m=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:A,key:m==null?null:""+m,children:r,containerInfo:a,implementation:c}}function Tg(r){if(!r)return pn;r=r._reactInternals;e:{if(Wn(r)!==r||r.tag!==1)throw Error(n(170));var a=r;do{switch(a.tag){case 3:a=a.stateNode.context;break e;case 1:if(ps(a.type)){a=a.stateNode.__reactInternalMemoizedMergedChildContext;break e}}a=a.return}while(a!==null);throw Error(n(171))}if(r.tag===1){var c=r.type;if(ps(c))return rp(r,c,a)}return a}function Pg(r,a,c,m,x,N,_,L,F){return r=zu(c,m,!0,r,x,N,_,L,F),r.context=Tg(null),c=r.current,m=ns(),x=jn(c),N=Vr(m,x),N.callback=a??null,vn(c,N,x),r.current.lanes=x,Ii(r,x,m),vs(r,m),r}function Ll(r,a,c,m){var x=a.current,N=ns(),_=jn(x);return c=Tg(c),a.context===null?a.context=c:a.pendingContext=c,a=Vr(N,_),a.payload={element:r},m=m===void 0?null:m,m!==null&&(a.callback=m),r=vn(x,a,_),r!==null&&(Xs(r,x,_,N),hl(r,x,_)),_}function $l(r){if(r=r.current,!r.child)return null;switch(r.child.tag){case 5:return r.child.stateNode;default:return r.child.stateNode}}function Ig(r,a){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var c=r.retryLane;r.retryLane=c!==0&&c<a?c:a}}function Bu(r,a){Ig(r,a),(r=r.alternate)&&Ig(r,a)}function IN(){return null}var Ag=typeof reportError=="function"?reportError:function(r){console.error(r)};function Uu(r){this._internalRoot=r}Fl.prototype.render=Uu.prototype.render=function(r){var a=this._internalRoot;if(a===null)throw Error(n(409));Ll(r,a,null,null)},Fl.prototype.unmount=Uu.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var a=r.containerInfo;ta(function(){Ll(null,r,null,null)}),a[$r]=null}};function Fl(r){this._internalRoot=r}Fl.prototype.unstable_scheduleHydration=function(r){if(r){var a=ph();r={blockedOn:null,target:r,priority:a};for(var c=0;c<dn.length&&a!==0&&a<dn[c].priority;c++);dn.splice(c,0,r),c===0&&vh(r)}};function Vu(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function zl(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11&&(r.nodeType!==8||r.nodeValue!==" react-mount-point-unstable "))}function Rg(){}function AN(r,a,c,m,x){if(x){if(typeof m=="function"){var N=m;m=function(){var Y=$l(_);N.call(Y)}}var _=Pg(a,m,r,0,null,!1,!1,"",Rg);return r._reactRootContainer=_,r[$r]=_.current,Hi(r.nodeType===8?r.parentNode:r),ta(),_}for(;x=r.lastChild;)r.removeChild(x);if(typeof m=="function"){var L=m;m=function(){var Y=$l(F);L.call(Y)}}var F=zu(r,0,!1,null,null,!1,!1,"",Rg);return r._reactRootContainer=F,r[$r]=F.current,Hi(r.nodeType===8?r.parentNode:r),ta(function(){Ll(a,F,c,m)}),F}function Bl(r,a,c,m,x){var N=c._reactRootContainer;if(N){var _=N;if(typeof x=="function"){var L=x;x=function(){var F=$l(_);L.call(F)}}Ll(a,_,r,x)}else _=AN(c,a,r,x,m);return $l(_)}fh=function(r){switch(r.tag){case 3:var a=r.stateNode;if(a.current.memoizedState.isDehydrated){var c=Pi(a.pendingLanes);c!==0&&(fd(a,c|1),vs(a,gt()),(Ze&6)===0&&(Ka=gt()+500,gn()))}break;case 13:ta(function(){var m=Ur(r,1);if(m!==null){var x=ns();Xs(m,r,1,x)}}),Bu(r,1)}},hd=function(r){if(r.tag===13){var a=Ur(r,134217728);if(a!==null){var c=ns();Xs(a,r,134217728,c)}Bu(r,134217728)}},hh=function(r){if(r.tag===13){var a=jn(r),c=Ur(r,a);if(c!==null){var m=ns();Xs(c,r,a,m)}Bu(r,a)}},ph=function(){return tt},gh=function(r,a){var c=tt;try{return tt=r,a()}finally{tt=c}},Hn=function(r,a,c){switch(a){case"input":if(qt(r,c),a=c.name,c.type==="radio"&&a!=null){for(c=r;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll("input[name="+JSON.stringify(""+a)+'][type="radio"]'),a=0;a<c.length;a++){var m=c[a];if(m!==r&&m.form===r.form){var x=nl(m);if(!x)throw Error(n(90));Ne(m),qt(m,x)}}}break;case"textarea":en(r,c);break;case"select":a=c.value,a!=null&&Ae(r,!!c.multiple,a,!1)}},Je=Du,yt=ta;var RN={usingClientEntryPoint:!1,Events:[Gi,Da,nl,ee,Me,Du]},lo={findFiberByHostInstance:Kn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},DN={bundleType:lo.bundleType,version:lo.version,rendererPackageName:lo.rendererPackageName,rendererConfig:lo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:P.ReactCurrentDispatcher,findHostInstanceByFiber:function(r){return r=ah(r),r===null?null:r.stateNode},findFiberByHostInstance:lo.findFiberByHostInstance||IN,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ul=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ul.isDisabled&&Ul.supportsFiber)try{Fo=Ul.inject(DN),ur=Ul}catch{}}return ys.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=RN,ys.createPortal=function(r,a){var c=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Vu(a))throw Error(n(200));return PN(r,a,null,c)},ys.createRoot=function(r,a){if(!Vu(r))throw Error(n(299));var c=!1,m="",x=Ag;return a!=null&&(a.unstable_strictMode===!0&&(c=!0),a.identifierPrefix!==void 0&&(m=a.identifierPrefix),a.onRecoverableError!==void 0&&(x=a.onRecoverableError)),a=zu(r,1,!1,null,null,c,!1,m,x),r[$r]=a.current,Hi(r.nodeType===8?r.parentNode:r),new Uu(a)},ys.findDOMNode=function(r){if(r==null)return null;if(r.nodeType===1)return r;var a=r._reactInternals;if(a===void 0)throw typeof r.render=="function"?Error(n(188)):(r=Object.keys(r).join(","),Error(n(268,r)));return r=ah(a),r=r===null?null:r.stateNode,r},ys.flushSync=function(r){return ta(r)},ys.hydrate=function(r,a,c){if(!zl(a))throw Error(n(200));return Bl(null,r,a,!0,c)},ys.hydrateRoot=function(r,a,c){if(!Vu(r))throw Error(n(405));var m=c!=null&&c.hydratedSources||null,x=!1,N="",_=Ag;if(c!=null&&(c.unstable_strictMode===!0&&(x=!0),c.identifierPrefix!==void 0&&(N=c.identifierPrefix),c.onRecoverableError!==void 0&&(_=c.onRecoverableError)),a=Pg(a,null,r,1,c??null,x,!1,N,_),r[$r]=a.current,Hi(r),m)for(r=0;r<m.length;r++)c=m[r],x=c._getVersion,x=x(c._source),a.mutableSourceEagerHydrationData==null?a.mutableSourceEagerHydrationData=[c,x]:a.mutableSourceEagerHydrationData.push(c,x);return new Fl(a)},ys.render=function(r,a,c){if(!zl(a))throw Error(n(200));return Bl(null,r,a,!1,c)},ys.unmountComponentAtNode=function(r){if(!zl(r))throw Error(n(40));return r._reactRootContainer?(ta(function(){Bl(null,null,r,!1,function(){r._reactRootContainer=null,r[$r]=null})}),!0):!1},ys.unstable_batchedUpdates=Du,ys.unstable_renderSubtreeIntoContainer=function(r,a,c,m){if(!zl(c))throw Error(n(200));if(r==null||r._reactInternals===void 0)throw Error(n(38));return Bl(r,a,c,!1,m)},ys.version="18.3.1-next-f1338f8080-20240426",ys}var Bg;function pv(){if(Bg)return Wu.exports;Bg=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(s){console.error(s)}}return t(),Wu.exports=VN(),Wu.exports}var Ug;function qN(){if(Ug)return Vl;Ug=1;var t=pv();return Vl.createRoot=t.createRoot,Vl.hydrateRoot=t.hydrateRoot,Vl}var HN=qN();const WN="modulepreload",KN=function(t){return"/"+t},Vg={},Sr=function(s,n,i){let o=Promise.resolve();if(n&&n.length>0){let d=function(p){return Promise.all(p.map(g=>Promise.resolve(g).then(h=>({status:"fulfilled",value:h}),h=>({status:"rejected",reason:h}))))};document.getElementsByTagName("link");const u=document.querySelector("meta[property=csp-nonce]"),f=u?.nonce||u?.getAttribute("nonce");o=d(n.map(p=>{if(p=KN(p),p in Vg)return;Vg[p]=!0;const g=p.endsWith(".css"),h=g?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${p}"]${h}`))return;const y=document.createElement("link");if(y.rel=g?"stylesheet":WN,g||(y.as="script"),y.crossOrigin="",y.href=p,f&&y.setAttribute("nonce",f),document.head.appendChild(y),g)return new Promise((j,b)=>{y.addEventListener("load",j),y.addEventListener("error",()=>b(new Error(`Unable to preload CSS for ${p}`)))})}))}function l(d){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=d,window.dispatchEvent(u),!u.defaultPrevented)throw d}return o.then(d=>{for(const u of d||[])u.status==="rejected"&&l(u.reason);return s().catch(l)})};var v=Ic();const le=tf(v),gv=ON({__proto__:null,default:le},[v]);function qg(t,s){if(typeof t=="function")return t(s);t!=null&&(t.current=s)}function Ac(...t){return s=>{let n=!1;const i=t.map(o=>{const l=qg(o,s);return!n&&typeof l=="function"&&(n=!0),l});if(n)return()=>{for(let o=0;o<i.length;o++){const l=i[o];typeof l=="function"?l():qg(t[o],null)}}}}function Ye(...t){return v.useCallback(Ac(...t),t)}function ha(t){const s=GN(t),n=v.forwardRef((i,o)=>{const{children:l,...d}=i,u=v.Children.toArray(l),f=u.find(YN);if(f){const p=f.props.children,g=u.map(h=>h===f?v.Children.count(p)>1?v.Children.only(null):v.isValidElement(p)?p.props.children:null:h);return e.jsx(s,{...d,ref:o,children:v.isValidElement(p)?v.cloneElement(p,void 0,g):null})}return e.jsx(s,{...d,ref:o,children:l})});return n.displayName=`${t}.Slot`,n}var xv=ha("Slot");function GN(t){const s=v.forwardRef((n,i)=>{const{children:o,...l}=n;if(v.isValidElement(o)){const d=XN(o),u=QN(l,o.props);return o.type!==v.Fragment&&(u.ref=i?Ac(i,d):d),v.cloneElement(o,u)}return v.Children.count(o)>1?v.Children.only(null):null});return s.displayName=`${t}.SlotClone`,s}var JN=Symbol("radix.slottable");function YN(t){return v.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===JN}function QN(t,s){const n={...s};for(const i in s){const o=t[i],l=s[i];/^on[A-Z]/.test(i)?o&&l?n[i]=(...u)=>{const f=l(...u);return o(...u),f}:o&&(n[i]=o):i==="style"?n[i]={...o,...l}:i==="className"&&(n[i]=[o,l].filter(Boolean).join(" "))}return{...t,...n}}function XN(t){let s=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,n=s&&"isReactWarning"in s&&s.isReactWarning;return n?t.ref:(s=Object.getOwnPropertyDescriptor(t,"ref")?.get,n=s&&"isReactWarning"in s&&s.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function vv(t){var s,n,i="";if(typeof t=="string"||typeof t=="number")i+=t;else if(typeof t=="object")if(Array.isArray(t)){var o=t.length;for(s=0;s<o;s++)t[s]&&(n=vv(t[s]))&&(i&&(i+=" "),i+=n)}else for(n in t)t[n]&&(i&&(i+=" "),i+=n);return i}function sf(){for(var t,s,n=0,i="",o=arguments.length;n<o;n++)(t=arguments[n])&&(s=vv(t))&&(i&&(i+=" "),i+=s);return i}const Hg=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,Wg=sf,rf=(t,s)=>n=>{var i;if(s?.variants==null)return Wg(t,n?.class,n?.className);const{variants:o,defaultVariants:l}=s,d=Object.keys(o).map(p=>{const g=n?.[p],h=l?.[p];if(g===null)return null;const y=Hg(g)||Hg(h);return o[p][y]}),u=n&&Object.entries(n).reduce((p,g)=>{let[h,y]=g;return y===void 0||(p[h]=y),p},{}),f=s==null||(i=s.compoundVariants)===null||i===void 0?void 0:i.reduce((p,g)=>{let{class:h,className:y,...j}=g;return Object.entries(j).every(b=>{let[w,S]=b;return Array.isArray(S)?S.includes({...l,...u}[w]):{...l,...u}[w]===S})?[...p,h,y]:p},[]);return Wg(t,d,f,n?.class,n?.className)},nf="-",ZN=t=>{const s=t1(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:i}=t;return{getClassGroupId:d=>{const u=d.split(nf);return u[0]===""&&u.length!==1&&u.shift(),yv(u,s)||e1(d)},getConflictingClassGroupIds:(d,u)=>{const f=n[d]||[];return u&&i[d]?[...f,...i[d]]:f}}},yv=(t,s)=>{if(t.length===0)return s.classGroupId;const n=t[0],i=s.nextPart.get(n),o=i?yv(t.slice(1),i):void 0;if(o)return o;if(s.validators.length===0)return;const l=t.join(nf);return s.validators.find(({validator:d})=>d(l))?.classGroupId},Kg=/^\[(.+)\]$/,e1=t=>{if(Kg.test(t)){const s=Kg.exec(t)[1],n=s?.substring(0,s.indexOf(":"));if(n)return"arbitrary.."+n}},t1=t=>{const{theme:s,classGroups:n}=t,i={nextPart:new Map,validators:[]};for(const o in n)wm(n[o],i,o,s);return i},wm=(t,s,n,i)=>{t.forEach(o=>{if(typeof o=="string"){const l=o===""?s:Gg(s,o);l.classGroupId=n;return}if(typeof o=="function"){if(s1(o)){wm(o(i),s,n,i);return}s.validators.push({validator:o,classGroupId:n});return}Object.entries(o).forEach(([l,d])=>{wm(d,Gg(s,l),n,i)})})},Gg=(t,s)=>{let n=t;return s.split(nf).forEach(i=>{n.nextPart.has(i)||n.nextPart.set(i,{nextPart:new Map,validators:[]}),n=n.nextPart.get(i)}),n},s1=t=>t.isThemeGetter,r1=t=>{if(t<1)return{get:()=>{},set:()=>{}};let s=0,n=new Map,i=new Map;const o=(l,d)=>{n.set(l,d),s++,s>t&&(s=0,i=n,n=new Map)};return{get(l){let d=n.get(l);if(d!==void 0)return d;if((d=i.get(l))!==void 0)return o(l,d),d},set(l,d){n.has(l)?n.set(l,d):o(l,d)}}},bm="!",jm=":",n1=jm.length,a1=t=>{const{prefix:s,experimentalParseClassName:n}=t;let i=o=>{const l=[];let d=0,u=0,f=0,p;for(let b=0;b<o.length;b++){let w=o[b];if(d===0&&u===0){if(w===jm){l.push(o.slice(f,b)),f=b+n1;continue}if(w==="/"){p=b;continue}}w==="["?d++:w==="]"?d--:w==="("?u++:w===")"&&u--}const g=l.length===0?o:o.substring(f),h=i1(g),y=h!==g,j=p&&p>f?p-f:void 0;return{modifiers:l,hasImportantModifier:y,baseClassName:h,maybePostfixModifierPosition:j}};if(s){const o=s+jm,l=i;i=d=>d.startsWith(o)?l(d.substring(o.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:d,maybePostfixModifierPosition:void 0}}if(n){const o=i;i=l=>n({className:l,parseClassName:o})}return i},i1=t=>t.endsWith(bm)?t.substring(0,t.length-1):t.startsWith(bm)?t.substring(1):t,o1=t=>{const s=Object.fromEntries(t.orderSensitiveModifiers.map(i=>[i,!0]));return i=>{if(i.length<=1)return i;const o=[];let l=[];return i.forEach(d=>{d[0]==="["||s[d]?(o.push(...l.sort(),d),l=[]):l.push(d)}),o.push(...l.sort()),o}},l1=t=>({cache:r1(t.cacheSize),parseClassName:a1(t),sortModifiers:o1(t),...ZN(t)}),c1=/\s+/,d1=(t,s)=>{const{parseClassName:n,getClassGroupId:i,getConflictingClassGroupIds:o,sortModifiers:l}=s,d=[],u=t.trim().split(c1);let f="";for(let p=u.length-1;p>=0;p-=1){const g=u[p],{isExternal:h,modifiers:y,hasImportantModifier:j,baseClassName:b,maybePostfixModifierPosition:w}=n(g);if(h){f=g+(f.length>0?" "+f:f);continue}let S=!!w,k=i(S?b.substring(0,w):b);if(!k){if(!S){f=g+(f.length>0?" "+f:f);continue}if(k=i(b),!k){f=g+(f.length>0?" "+f:f);continue}S=!1}const C=l(y).join(":"),E=j?C+bm:C,P=E+k;if(d.includes(P))continue;d.push(P);const T=o(k,S);for(let A=0;A<T.length;++A){const R=T[A];d.push(E+R)}f=g+(f.length>0?" "+f:f)}return f};function u1(){let t=0,s,n,i="";for(;t<arguments.length;)(s=arguments[t++])&&(n=wv(s))&&(i&&(i+=" "),i+=n);return i}const wv=t=>{if(typeof t=="string")return t;let s,n="";for(let i=0;i<t.length;i++)t[i]&&(s=wv(t[i]))&&(n&&(n+=" "),n+=s);return n};function m1(t,...s){let n,i,o,l=d;function d(f){const p=s.reduce((g,h)=>h(g),t());return n=l1(p),i=n.cache.get,o=n.cache.set,l=u,u(f)}function u(f){const p=i(f);if(p)return p;const g=d1(f,n);return o(f,g),g}return function(){return l(u1.apply(null,arguments))}}const Ct=t=>{const s=n=>n[t]||[];return s.isThemeGetter=!0,s},bv=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,jv=/^\((?:(\w[\w-]*):)?(.+)\)$/i,f1=/^\d+\/\d+$/,h1=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,p1=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,g1=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,x1=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,v1=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Ja=t=>f1.test(t),We=t=>!!t&&!Number.isNaN(Number(t)),Cn=t=>!!t&&Number.isInteger(Number(t)),Ju=t=>t.endsWith("%")&&We(t.slice(0,-1)),Wr=t=>h1.test(t),y1=()=>!0,w1=t=>p1.test(t)&&!g1.test(t),Nv=()=>!1,b1=t=>x1.test(t),j1=t=>v1.test(t),N1=t=>!Ce(t)&&!_e(t),S1=t=>bi(t,Cv,Nv),Ce=t=>bv.test(t),aa=t=>bi(t,_v,w1),Yu=t=>bi(t,T1,We),Jg=t=>bi(t,Sv,Nv),k1=t=>bi(t,kv,j1),ql=t=>bi(t,Ev,b1),_e=t=>jv.test(t),uo=t=>ji(t,_v),C1=t=>ji(t,P1),Yg=t=>ji(t,Sv),_1=t=>ji(t,Cv),E1=t=>ji(t,kv),Hl=t=>ji(t,Ev,!0),bi=(t,s,n)=>{const i=bv.exec(t);return i?i[1]?s(i[1]):n(i[2]):!1},ji=(t,s,n=!1)=>{const i=jv.exec(t);return i?i[1]?s(i[1]):n:!1},Sv=t=>t==="position"||t==="percentage",kv=t=>t==="image"||t==="url",Cv=t=>t==="length"||t==="size"||t==="bg-size",_v=t=>t==="length",T1=t=>t==="number",P1=t=>t==="family-name",Ev=t=>t==="shadow",I1=()=>{const t=Ct("color"),s=Ct("font"),n=Ct("text"),i=Ct("font-weight"),o=Ct("tracking"),l=Ct("leading"),d=Ct("breakpoint"),u=Ct("container"),f=Ct("spacing"),p=Ct("radius"),g=Ct("shadow"),h=Ct("inset-shadow"),y=Ct("text-shadow"),j=Ct("drop-shadow"),b=Ct("blur"),w=Ct("perspective"),S=Ct("aspect"),k=Ct("ease"),C=Ct("animate"),E=()=>["auto","avoid","all","avoid-page","page","left","right","column"],P=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],T=()=>[...P(),_e,Ce],A=()=>["auto","hidden","clip","visible","scroll"],R=()=>["auto","contain","none"],$=()=>[_e,Ce,f],J=()=>[Ja,"full","auto",...$()],z=()=>[Cn,"none","subgrid",_e,Ce],q=()=>["auto",{span:["full",Cn,_e,Ce]},Cn,_e,Ce],Q=()=>[Cn,"auto",_e,Ce],Z=()=>["auto","min","max","fr",_e,Ce],he=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],se=()=>["start","end","center","stretch","center-safe","end-safe"],te=()=>["auto",...$()],ne=()=>[Ja,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...$()],U=()=>[t,_e,Ce],M=()=>[...P(),Yg,Jg,{position:[_e,Ce]}],H=()=>["no-repeat",{repeat:["","x","y","space","round"]}],I=()=>["auto","cover","contain",_1,S1,{size:[_e,Ce]}],V=()=>[Ju,uo,aa],D=()=>["","none","full",p,_e,Ce],ae=()=>["",We,uo,aa],ce=()=>["solid","dashed","dotted","double"],pe=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],W=()=>[We,Ju,Yg,Jg],X=()=>["","none",b,_e,Ce],xe=()=>["none",We,_e,Ce],ye=()=>["none",We,_e,Ce],je=()=>[We,_e,Ce],Ne=()=>[Ja,"full",...$()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[Wr],breakpoint:[Wr],color:[y1],container:[Wr],"drop-shadow":[Wr],ease:["in","out","in-out"],font:[N1],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[Wr],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[Wr],shadow:[Wr],spacing:["px",We],text:[Wr],"text-shadow":[Wr],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",Ja,Ce,_e,S]}],container:["container"],columns:[{columns:[We,Ce,_e,u]}],"break-after":[{"break-after":E()}],"break-before":[{"break-before":E()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:T()}],overflow:[{overflow:A()}],"overflow-x":[{"overflow-x":A()}],"overflow-y":[{"overflow-y":A()}],overscroll:[{overscroll:R()}],"overscroll-x":[{"overscroll-x":R()}],"overscroll-y":[{"overscroll-y":R()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:J()}],"inset-x":[{"inset-x":J()}],"inset-y":[{"inset-y":J()}],start:[{start:J()}],end:[{end:J()}],top:[{top:J()}],right:[{right:J()}],bottom:[{bottom:J()}],left:[{left:J()}],visibility:["visible","invisible","collapse"],z:[{z:[Cn,"auto",_e,Ce]}],basis:[{basis:[Ja,"full","auto",u,...$()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[We,Ja,"auto","initial","none",Ce]}],grow:[{grow:["",We,_e,Ce]}],shrink:[{shrink:["",We,_e,Ce]}],order:[{order:[Cn,"first","last","none",_e,Ce]}],"grid-cols":[{"grid-cols":z()}],"col-start-end":[{col:q()}],"col-start":[{"col-start":Q()}],"col-end":[{"col-end":Q()}],"grid-rows":[{"grid-rows":z()}],"row-start-end":[{row:q()}],"row-start":[{"row-start":Q()}],"row-end":[{"row-end":Q()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":Z()}],"auto-rows":[{"auto-rows":Z()}],gap:[{gap:$()}],"gap-x":[{"gap-x":$()}],"gap-y":[{"gap-y":$()}],"justify-content":[{justify:[...he(),"normal"]}],"justify-items":[{"justify-items":[...se(),"normal"]}],"justify-self":[{"justify-self":["auto",...se()]}],"align-content":[{content:["normal",...he()]}],"align-items":[{items:[...se(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...se(),{baseline:["","last"]}]}],"place-content":[{"place-content":he()}],"place-items":[{"place-items":[...se(),"baseline"]}],"place-self":[{"place-self":["auto",...se()]}],p:[{p:$()}],px:[{px:$()}],py:[{py:$()}],ps:[{ps:$()}],pe:[{pe:$()}],pt:[{pt:$()}],pr:[{pr:$()}],pb:[{pb:$()}],pl:[{pl:$()}],m:[{m:te()}],mx:[{mx:te()}],my:[{my:te()}],ms:[{ms:te()}],me:[{me:te()}],mt:[{mt:te()}],mr:[{mr:te()}],mb:[{mb:te()}],ml:[{ml:te()}],"space-x":[{"space-x":$()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":$()}],"space-y-reverse":["space-y-reverse"],size:[{size:ne()}],w:[{w:[u,"screen",...ne()]}],"min-w":[{"min-w":[u,"screen","none",...ne()]}],"max-w":[{"max-w":[u,"screen","none","prose",{screen:[d]},...ne()]}],h:[{h:["screen","lh",...ne()]}],"min-h":[{"min-h":["screen","lh","none",...ne()]}],"max-h":[{"max-h":["screen","lh",...ne()]}],"font-size":[{text:["base",n,uo,aa]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[i,_e,Yu]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",Ju,Ce]}],"font-family":[{font:[C1,Ce,s]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[o,_e,Ce]}],"line-clamp":[{"line-clamp":[We,"none",_e,Yu]}],leading:[{leading:[l,...$()]}],"list-image":[{"list-image":["none",_e,Ce]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",_e,Ce]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:U()}],"text-color":[{text:U()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...ce(),"wavy"]}],"text-decoration-thickness":[{decoration:[We,"from-font","auto",_e,aa]}],"text-decoration-color":[{decoration:U()}],"underline-offset":[{"underline-offset":[We,"auto",_e,Ce]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:$()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",_e,Ce]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",_e,Ce]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:M()}],"bg-repeat":[{bg:H()}],"bg-size":[{bg:I()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},Cn,_e,Ce],radial:["",_e,Ce],conic:[Cn,_e,Ce]},E1,k1]}],"bg-color":[{bg:U()}],"gradient-from-pos":[{from:V()}],"gradient-via-pos":[{via:V()}],"gradient-to-pos":[{to:V()}],"gradient-from":[{from:U()}],"gradient-via":[{via:U()}],"gradient-to":[{to:U()}],rounded:[{rounded:D()}],"rounded-s":[{"rounded-s":D()}],"rounded-e":[{"rounded-e":D()}],"rounded-t":[{"rounded-t":D()}],"rounded-r":[{"rounded-r":D()}],"rounded-b":[{"rounded-b":D()}],"rounded-l":[{"rounded-l":D()}],"rounded-ss":[{"rounded-ss":D()}],"rounded-se":[{"rounded-se":D()}],"rounded-ee":[{"rounded-ee":D()}],"rounded-es":[{"rounded-es":D()}],"rounded-tl":[{"rounded-tl":D()}],"rounded-tr":[{"rounded-tr":D()}],"rounded-br":[{"rounded-br":D()}],"rounded-bl":[{"rounded-bl":D()}],"border-w":[{border:ae()}],"border-w-x":[{"border-x":ae()}],"border-w-y":[{"border-y":ae()}],"border-w-s":[{"border-s":ae()}],"border-w-e":[{"border-e":ae()}],"border-w-t":[{"border-t":ae()}],"border-w-r":[{"border-r":ae()}],"border-w-b":[{"border-b":ae()}],"border-w-l":[{"border-l":ae()}],"divide-x":[{"divide-x":ae()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":ae()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...ce(),"hidden","none"]}],"divide-style":[{divide:[...ce(),"hidden","none"]}],"border-color":[{border:U()}],"border-color-x":[{"border-x":U()}],"border-color-y":[{"border-y":U()}],"border-color-s":[{"border-s":U()}],"border-color-e":[{"border-e":U()}],"border-color-t":[{"border-t":U()}],"border-color-r":[{"border-r":U()}],"border-color-b":[{"border-b":U()}],"border-color-l":[{"border-l":U()}],"divide-color":[{divide:U()}],"outline-style":[{outline:[...ce(),"none","hidden"]}],"outline-offset":[{"outline-offset":[We,_e,Ce]}],"outline-w":[{outline:["",We,uo,aa]}],"outline-color":[{outline:U()}],shadow:[{shadow:["","none",g,Hl,ql]}],"shadow-color":[{shadow:U()}],"inset-shadow":[{"inset-shadow":["none",h,Hl,ql]}],"inset-shadow-color":[{"inset-shadow":U()}],"ring-w":[{ring:ae()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:U()}],"ring-offset-w":[{"ring-offset":[We,aa]}],"ring-offset-color":[{"ring-offset":U()}],"inset-ring-w":[{"inset-ring":ae()}],"inset-ring-color":[{"inset-ring":U()}],"text-shadow":[{"text-shadow":["none",y,Hl,ql]}],"text-shadow-color":[{"text-shadow":U()}],opacity:[{opacity:[We,_e,Ce]}],"mix-blend":[{"mix-blend":[...pe(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":pe()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[We]}],"mask-image-linear-from-pos":[{"mask-linear-from":W()}],"mask-image-linear-to-pos":[{"mask-linear-to":W()}],"mask-image-linear-from-color":[{"mask-linear-from":U()}],"mask-image-linear-to-color":[{"mask-linear-to":U()}],"mask-image-t-from-pos":[{"mask-t-from":W()}],"mask-image-t-to-pos":[{"mask-t-to":W()}],"mask-image-t-from-color":[{"mask-t-from":U()}],"mask-image-t-to-color":[{"mask-t-to":U()}],"mask-image-r-from-pos":[{"mask-r-from":W()}],"mask-image-r-to-pos":[{"mask-r-to":W()}],"mask-image-r-from-color":[{"mask-r-from":U()}],"mask-image-r-to-color":[{"mask-r-to":U()}],"mask-image-b-from-pos":[{"mask-b-from":W()}],"mask-image-b-to-pos":[{"mask-b-to":W()}],"mask-image-b-from-color":[{"mask-b-from":U()}],"mask-image-b-to-color":[{"mask-b-to":U()}],"mask-image-l-from-pos":[{"mask-l-from":W()}],"mask-image-l-to-pos":[{"mask-l-to":W()}],"mask-image-l-from-color":[{"mask-l-from":U()}],"mask-image-l-to-color":[{"mask-l-to":U()}],"mask-image-x-from-pos":[{"mask-x-from":W()}],"mask-image-x-to-pos":[{"mask-x-to":W()}],"mask-image-x-from-color":[{"mask-x-from":U()}],"mask-image-x-to-color":[{"mask-x-to":U()}],"mask-image-y-from-pos":[{"mask-y-from":W()}],"mask-image-y-to-pos":[{"mask-y-to":W()}],"mask-image-y-from-color":[{"mask-y-from":U()}],"mask-image-y-to-color":[{"mask-y-to":U()}],"mask-image-radial":[{"mask-radial":[_e,Ce]}],"mask-image-radial-from-pos":[{"mask-radial-from":W()}],"mask-image-radial-to-pos":[{"mask-radial-to":W()}],"mask-image-radial-from-color":[{"mask-radial-from":U()}],"mask-image-radial-to-color":[{"mask-radial-to":U()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":P()}],"mask-image-conic-pos":[{"mask-conic":[We]}],"mask-image-conic-from-pos":[{"mask-conic-from":W()}],"mask-image-conic-to-pos":[{"mask-conic-to":W()}],"mask-image-conic-from-color":[{"mask-conic-from":U()}],"mask-image-conic-to-color":[{"mask-conic-to":U()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:M()}],"mask-repeat":[{mask:H()}],"mask-size":[{mask:I()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",_e,Ce]}],filter:[{filter:["","none",_e,Ce]}],blur:[{blur:X()}],brightness:[{brightness:[We,_e,Ce]}],contrast:[{contrast:[We,_e,Ce]}],"drop-shadow":[{"drop-shadow":["","none",j,Hl,ql]}],"drop-shadow-color":[{"drop-shadow":U()}],grayscale:[{grayscale:["",We,_e,Ce]}],"hue-rotate":[{"hue-rotate":[We,_e,Ce]}],invert:[{invert:["",We,_e,Ce]}],saturate:[{saturate:[We,_e,Ce]}],sepia:[{sepia:["",We,_e,Ce]}],"backdrop-filter":[{"backdrop-filter":["","none",_e,Ce]}],"backdrop-blur":[{"backdrop-blur":X()}],"backdrop-brightness":[{"backdrop-brightness":[We,_e,Ce]}],"backdrop-contrast":[{"backdrop-contrast":[We,_e,Ce]}],"backdrop-grayscale":[{"backdrop-grayscale":["",We,_e,Ce]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[We,_e,Ce]}],"backdrop-invert":[{"backdrop-invert":["",We,_e,Ce]}],"backdrop-opacity":[{"backdrop-opacity":[We,_e,Ce]}],"backdrop-saturate":[{"backdrop-saturate":[We,_e,Ce]}],"backdrop-sepia":[{"backdrop-sepia":["",We,_e,Ce]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":$()}],"border-spacing-x":[{"border-spacing-x":$()}],"border-spacing-y":[{"border-spacing-y":$()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",_e,Ce]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[We,"initial",_e,Ce]}],ease:[{ease:["linear","initial",k,_e,Ce]}],delay:[{delay:[We,_e,Ce]}],animate:[{animate:["none",C,_e,Ce]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[w,_e,Ce]}],"perspective-origin":[{"perspective-origin":T()}],rotate:[{rotate:xe()}],"rotate-x":[{"rotate-x":xe()}],"rotate-y":[{"rotate-y":xe()}],"rotate-z":[{"rotate-z":xe()}],scale:[{scale:ye()}],"scale-x":[{"scale-x":ye()}],"scale-y":[{"scale-y":ye()}],"scale-z":[{"scale-z":ye()}],"scale-3d":["scale-3d"],skew:[{skew:je()}],"skew-x":[{"skew-x":je()}],"skew-y":[{"skew-y":je()}],transform:[{transform:[_e,Ce,"","none","gpu","cpu"]}],"transform-origin":[{origin:T()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:Ne()}],"translate-x":[{"translate-x":Ne()}],"translate-y":[{"translate-y":Ne()}],"translate-z":[{"translate-z":Ne()}],"translate-none":["translate-none"],accent:[{accent:U()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:U()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",_e,Ce]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":$()}],"scroll-mx":[{"scroll-mx":$()}],"scroll-my":[{"scroll-my":$()}],"scroll-ms":[{"scroll-ms":$()}],"scroll-me":[{"scroll-me":$()}],"scroll-mt":[{"scroll-mt":$()}],"scroll-mr":[{"scroll-mr":$()}],"scroll-mb":[{"scroll-mb":$()}],"scroll-ml":[{"scroll-ml":$()}],"scroll-p":[{"scroll-p":$()}],"scroll-px":[{"scroll-px":$()}],"scroll-py":[{"scroll-py":$()}],"scroll-ps":[{"scroll-ps":$()}],"scroll-pe":[{"scroll-pe":$()}],"scroll-pt":[{"scroll-pt":$()}],"scroll-pr":[{"scroll-pr":$()}],"scroll-pb":[{"scroll-pb":$()}],"scroll-pl":[{"scroll-pl":$()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",_e,Ce]}],fill:[{fill:["none",...U()]}],"stroke-w":[{stroke:[We,uo,aa,Yu]}],stroke:[{stroke:["none",...U()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},Tv=m1(I1);function Ve(...t){return Tv(sf(t))}const A1=rf("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background text-foreground hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9 rounded-md"}},defaultVariants:{variant:"default",size:"default"}}),O=v.forwardRef(({className:t,variant:s,size:n,asChild:i=!1,...o},l)=>{const d=i?xv:"button";return e.jsx(d,{"data-slot":"button",className:Ve(A1({variant:s,size:n,className:t})),ref:l,...o})});O.displayName="Button";const R1=rf("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}}),Ee=v.forwardRef(({className:t,variant:s,asChild:n=!1,...i},o)=>{const l=n?xv:"span";return e.jsx(l,{ref:o,"data-slot":"badge",className:Ve(R1({variant:s}),t),...i})});Ee.displayName="Badge";/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D1=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),M1=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(s,n,i)=>i?i.toUpperCase():n.toLowerCase()),Qg=t=>{const s=M1(t);return s.charAt(0).toUpperCase()+s.slice(1)},Pv=(...t)=>t.filter((s,n,i)=>!!s&&s.trim()!==""&&i.indexOf(s)===n).join(" ").trim();/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var O1={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L1=v.forwardRef(({color:t="currentColor",size:s=24,strokeWidth:n=2,absoluteStrokeWidth:i,className:o="",children:l,iconNode:d,...u},f)=>v.createElement("svg",{ref:f,...O1,width:s,height:s,stroke:t,strokeWidth:i?Number(n)*24/Number(s):n,className:Pv("lucide",o),...u},[...d.map(([p,g])=>v.createElement(p,g)),...Array.isArray(l)?l:[l]]));/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ve=(t,s)=>{const n=v.forwardRef(({className:i,...o},l)=>v.createElement(L1,{ref:l,iconNode:s,className:Pv(`lucide-${D1(Qg(t))}`,`lucide-${t}`,i),...o}));return n.displayName=Qg(t),n};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $1=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],Iv=ve("arrow-left",$1);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F1=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],uc=ve("arrow-right",F1);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z1=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],pa=ve("award",z1);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B1=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],Av=ve("bell",B1);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U1=[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]],$n=ve("building-2",U1);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V1=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]],ui=ve("building",V1);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q1=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],ba=ve("calendar",q1);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H1=[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],jo=ve("camera",H1);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W1=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],mc=ve("chart-column",W1);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K1=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Rv=ve("check",K1);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G1=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Rc=ve("chevron-down",G1);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J1=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],ls=ve("chevron-left",J1);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y1=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],ho=ve("chevron-right",Y1);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q1=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],Dv=ve("chevron-up",Q1);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X1=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],zs=ve("circle-alert",X1);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z1=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],He=ve("circle-check-big",Z1);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eS=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],An=ve("circle-x",eS);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tS=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],Lt=ve("clock",tS);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sS=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],rS=ve("copy",sS);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nS=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],af=ve("credit-card",nS);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aS=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],Jr=ve("database",aS);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iS=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],ga=ve("dollar-sign",iS);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oS=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]],lS=ve("ellipsis-vertical",oS);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cS=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],dS=ve("external-link",cS);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uS=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],hi=ve("eye-off",uS);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mS=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Ut=ve("eye",mS);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fS=[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]],Nm=ve("facebook",fS);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hS=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],er=ve("file-text",hS);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pS=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],Sm=ve("funnel",pS);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gS=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],fc=ve("globe",gS);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xS=[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]],vS=ve("graduation-cap",xS);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yS=[["path",{d:"m11 17 2 2a1 1 0 1 0 3-3",key:"efffak"}],["path",{d:"m14 14 2.5 2.5a1 1 0 1 0 3-3l-3.88-3.88a3 3 0 0 0-4.24 0l-.88.88a1 1 0 1 1-3-3l2.81-2.81a5.79 5.79 0 0 1 7.06-.87l.47.28a2 2 0 0 0 1.42.25L21 4",key:"9pr0kb"}],["path",{d:"m21 3 1 11h-2",key:"1tisrp"}],["path",{d:"M3 3 2 14l6.5 6.5a1 1 0 1 0 3-3",key:"1uvwmv"}],["path",{d:"M3 4h8",key:"1ep09j"}]],Xg=ve("handshake",yS);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wS=[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]],bS=ve("hard-drive",wS);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jS=[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]],vo=ve("heart",jS);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NS=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],of=ve("info",NS);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SS=[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]],km=ve("instagram",SS);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kS=[["path",{d:"M11 20A7 7 0 0 1 9.8 6.1C15.5 5 17 4.48 19 2c1 2 2 4.18 2 8 0 5.5-4.78 10-10 10Z",key:"nnexq3"}],["path",{d:"M2 21c0-3 1.85-5.36 5.08-6C9.5 14.52 12 13 13 12",key:"mt58a7"}]],nr=ve("leaf",kS);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CS=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],_S=ve("lightbulb",CS);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ES=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],Cm=ve("lock",ES);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TS=[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]],Zg=ve("log-in",TS);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PS=[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]],ex=ve("log-out",PS);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IS=[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]],pi=ve("mail",IS);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AS=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],Vt=ve("map-pin",AS);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RS=[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]],Rn=ve("message-circle",RS);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DS=[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]],js=ve("message-square",DS);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MS=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],Nt=ve("package",MS);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OS=[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]],Mv=ve("pen-line",OS);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LS=[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]],Cr=ve("phone",LS);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $S=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],fa=ve("plus",$S);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FS=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],rr=ve("refresh-cw",FS);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zS=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Dt=ve("save",zS);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BS=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]],Ov=ve("search",BS);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const US=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],Lv=ve("send",US);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VS=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],qS=ve("settings",VS);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HS=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],dt=ve("shield",HS);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WS=[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]],lf=ve("shopping-cart",WS);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KS=[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]],GS=ve("smartphone",KS);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JS=[["path",{d:"M7 20h10",key:"e6iznv"}],["path",{d:"M10 20c5.5-2.5.8-6.4 3-10",key:"161w41"}],["path",{d:"M9.5 9.4c1.1.8 1.8 2.2 2.3 3.7-2 .4-3.5.4-4.8-.3-1.2-.6-2.3-1.9-3-4.2 2.8-.5 4.4 0 5.5.8z",key:"9gtqwd"}],["path",{d:"M14.1 6a7 7 0 0 0-1.1 4c1.9-.1 3.3-.6 4.3-1.4 1-1 1.6-2.3 1.7-4.6-2.7.1-4 1-4.9 2z",key:"bkxnd2"}]],Io=ve("sprout",JS);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YS=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],ht=ve("square-pen",YS);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QS=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],Yr=ve("star",QS);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XS=[["path",{d:"m2 7 4.41-4.41A2 2 0 0 1 7.83 2h8.34a2 2 0 0 1 1.42.59L22 7",key:"ztvudi"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["path",{d:"M15 22v-4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4",key:"2ebpfo"}],["path",{d:"M2 7h20",key:"1fcdvo"}],["path",{d:"M22 7v3a2 2 0 0 1-2 2a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 16 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 12 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 8 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 4 12a2 2 0 0 1-2-2V7",key:"6c3vgh"}]],_r=ve("store",XS);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZS=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],ek=ve("target",ZS);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tk=[["path",{d:"M17 14V2",key:"8ymqnk"}],["path",{d:"M9 18.12 10 14H4.17a2 2 0 0 1-1.92-2.56l2.33-8A2 2 0 0 1 6.5 2H20a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-2.76a2 2 0 0 0-1.79 1.11L12 22a3.13 3.13 0 0 1-3-3.88Z",key:"m61m77"}]],sk=ve("thumbs-down",tk);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rk=[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z",key:"emmmcr"}]],nk=ve("thumbs-up",rk);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ak=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],Tr=ve("trash-2",ak);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ik=[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]],hc=ve("trending-down",ik);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ok=[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]],cf=ve("trending-up",ok);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lk=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],as=ve("triangle-alert",lk);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ck=[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]],ja=ve("truck",ck);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dk=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]],uk=ve("upload",dk);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mk=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],tx=ve("user-plus",mk);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fk=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],$t=ve("user",fk);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hk=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]],No=ve("users",hk);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pk=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],cs=ve("x",pk);function Et(...t){return Tv(sf(t))}const pc={farmer:{key:"farmer",label:"Farmer",shortLabel:"Farmer",icon:Io,description:"Grows and harvests agricultural products",color:"text-white dark:text-white",bgColor:"bg-green-600 dark:bg-green-600",borderColor:"border-green-600 dark:border-green-600"},trader:{key:"trader",label:"Trader",shortLabel:"Trader",icon:ja,description:"Distributes and trades agricultural products",color:"text-white dark:text-white",bgColor:"bg-orange-600 dark:bg-orange-600",borderColor:"border-orange-600 dark:border-orange-600"},buyer:{key:"buyer",label:"Buyer",shortLabel:"Buyer",icon:lf,description:"Purchases agricultural products for business or personal use",color:"text-blue-700 dark:text-blue-400",bgColor:"bg-blue-50 dark:bg-blue-900/20",borderColor:"border-blue-200 dark:border-blue-800"},admin:{key:"admin",label:"Admin",shortLabel:"Admin",icon:dt,description:"AgriLink platform administrator",color:"text-gray-700 dark:text-gray-300",bgColor:"bg-gray-50 dark:bg-gray-900/20",borderColor:"border-gray-200 dark:border-gray-800"}},gk={individual:{key:"individual",label:"Individual Account",shortLabel:"Individual",description:"Personal account perfect for small-scale farmers and individual sellers. No business license required - just verify your identity with Myanmar ID/NRC."},business:{key:"business",label:"Business Account",shortLabel:"Business",description:"For formal businesses, cooperatives, and companies. Requires business registration and provides enhanced credibility for larger operations."}},So={unverified:{key:"unverified",label:"Unverified",shortLabel:"Unverified",icon:zs,description:"Basic account - verification not started",color:"text-red-600 dark:text-red-400",bgColor:"bg-red-50 dark:bg-red-900/20",borderColor:"border-red-200 dark:border-red-800",level:0,requirements:["Account registration","Email verification"],accountTypes:["individual","business"]},"phone-verified":{key:"phone-verified",label:"Phone Verified",shortLabel:"Phone Verified",icon:Cr,description:"Phone verified - ID verification still needed",color:"text-yellow-600 dark:text-yellow-400",bgColor:"bg-yellow-50 dark:bg-yellow-900/20",borderColor:"border-yellow-200 dark:border-yellow-800",level:.3,requirements:["Phone number verification","SMS confirmation"],accountTypes:["individual","business"]},"under-review":{key:"under-review",label:"Under Review",shortLabel:"Under Review",icon:Lt,description:"Documents submitted, awaiting verification",color:"text-blue-600 dark:text-blue-400",bgColor:"bg-blue-50 dark:bg-blue-900/20",borderColor:"border-blue-200 dark:border-blue-800",level:.5,requirements:["Documents uploaded","Awaiting admin review"],accountTypes:["individual","business"]},"id-verified":{key:"id-verified",label:"Verified",shortLabel:"Verified",icon:He,description:"Individual verification complete - trusted member",color:"text-green-600 dark:text-green-400",bgColor:"bg-green-50 dark:bg-green-900/20",borderColor:"border-green-200 dark:border-green-800",level:1,requirements:["Valid Myanmar ID/NRC","Identity verification"],accountTypes:["individual"]},"business-verified":{key:"business-verified",label:"Business Verified",shortLabel:"Business ✓",icon:pa,description:"Business registration and ID verified - formal business",color:"text-primary dark:text-primary-foreground",bgColor:"bg-primary/10 dark:bg-primary/20",borderColor:"border-primary/30 dark:border-primary/40",level:2,requirements:["Valid Myanmar ID/NRC","Business registration","Business license"],accountTypes:["business"]}},xk={"organic-certified":{label:"Organic Certified",icon:nr,color:"text-green-600",bgColor:"bg-green-50",borderColor:"border-green-200"},"export-ready":{label:"Export Quality",icon:pa,color:"text-blue-600",bgColor:"bg-blue-50",borderColor:"border-blue-200"},"local-champion":{label:"Local Champion",icon:Vt,color:"text-purple-600",bgColor:"bg-purple-50",borderColor:"border-purple-200"},sustainable:{label:"Sustainable Practices",icon:Io,color:"text-emerald-600",bgColor:"bg-emerald-50",borderColor:"border-emerald-200"}};function $v({verificationLevel:t="unverified",size:s="xs",className:n}){if(!(t==="id-verified"||t==="business-verified"))return null;const o=So[t],l={xs:"text-xs px-1.5 py-0.5",sm:"text-xs px-2 py-1"},d={xs:"w-3 h-3",sm:"w-3 h-3"};return e.jsxs(Ee,{variant:"outline",className:Et(l[s],o.color,o.bgColor,o.borderColor,"font-medium flex items-center gap-1 ml-1",n),children:[e.jsx(o.icon,{className:d[s]}),o.shortLabel]})}function vk({verificationLevel:t="unverified",size:s="xs",className:n}){const i=So[t]||So.unverified,o={xs:"text-xs px-1.5 py-0.5",sm:"text-xs px-2 py-1"},l={xs:"w-3 h-3",sm:"w-3 h-3"};return e.jsxs(Ee,{variant:"outline",className:Et(o[s],i.color,i.bgColor,i.borderColor,"font-medium flex items-center gap-1 ml-1",n),children:[e.jsx(i.icon,{className:l[s]}),i.shortLabel]})}function Ni({userType:t,accountType:s,verificationLevel:n="unverified",specialties:i=[],size:o="md",showDescription:l=!1,className:d}){const u=pc[t]||pc.farmer,f=So[n]||So.unverified,p=s?gk[s]:null,g={sm:"text-xs px-2 py-1",md:"text-sm px-3 py-1.5",lg:"text-base px-4 py-2"},h={sm:"w-3 h-3",md:"w-4 h-4",lg:"w-5 h-5"},y=()=>o==="sm"?u.shortLabel:u.label,b=t==="farmer"?{className:Et(g[o],"font-medium flex items-center gap-1 bg-green-600 text-white border-green-600"),style:{backgroundColor:"#16a34a",color:"#ffffff",borderColor:"#16a34a"}}:t==="trader"?{className:Et(g[o],"font-medium flex items-center gap-1 bg-orange-600 text-white border-orange-600"),style:{backgroundColor:"#ea580c",color:"#ffffff",borderColor:"#ea580c"}}:{className:Et(g[o],t==="buyer"&&Et(u.color,u.bgColor,u.borderColor),t==="admin"&&Et(u.color,u.bgColor,u.borderColor),"font-medium flex items-center gap-1"),style:void 0},w=e.jsxs(Ee,{variant:"default",className:b.className,style:b.style,children:[s==="business"?e.jsx($n,{className:Et(h[o],t==="farmer"||t==="trader"?"text-white":u.color)}):e.jsx($t,{className:Et(h[o],t==="farmer"||t==="trader"?"text-white":u.color)}),y()]});return e.jsxs("div",{className:Et("flex flex-wrap items-center gap-2",d),children:[w,e.jsx(vk,{verificationLevel:n,size:o==="lg"?"sm":"xs"}),i.map(S=>{const k=xk[S];return k?e.jsxs(Ee,{variant:"outline",className:Et(g[o],k.color,k.bgColor,k.borderColor,"font-medium flex items-center gap-1.5"),children:[e.jsx(k.icon,{className:h[o]}),o!=="lg"?"★":k.label]},S):null}),l&&o!=="sm"&&e.jsxs("div",{className:"text-xs text-muted-foreground max-w-xs",children:[u.description,p&&e.jsxs("span",{className:"block mt-1",children:["Account Type: ",p.description]}),n!=="unverified"&&e.jsx("span",{className:"block mt-1",children:f.description})]})]})}function Fv({userType:t,accountType:s,size:n="sm",className:i}){const o=pc[t]||pc.farmer,l={sm:"text-xs px-2 py-1",md:"text-sm px-3 py-1.5",lg:"text-base px-4 py-2"},d={sm:"w-3 h-3",md:"w-4 h-4",lg:"w-5 h-5"},u=()=>n==="sm"?o.shortLabel:o.label,p=t==="farmer"?{className:Et(l[n],"font-medium flex items-center gap-1 bg-green-600 text-white border-green-600"),style:{backgroundColor:"#16a34a",color:"#ffffff",borderColor:"#16a34a"}}:t==="trader"?{className:Et(l[n],"font-medium flex items-center gap-1 bg-orange-600 text-white border-orange-600"),style:{backgroundColor:"#ea580c",color:"#ffffff",borderColor:"#ea580c"}}:{className:Et(l[n],t==="buyer"&&Et(o.color,o.bgColor,o.borderColor),t==="admin"&&Et(o.color,o.bgColor,o.borderColor),"font-medium flex items-center gap-1"),style:void 0};return e.jsxs(Ee,{variant:"default",className:Et(p.className,i),style:p.style,children:[s==="business"?e.jsx($n,{className:Et(d[n],t==="farmer"||t==="trader"?"text-white":o.color)}):e.jsx($t,{className:Et(d[n],t==="farmer"||t==="trader"?"text-white":o.color)}),u()]})}function Qr(t){return t.verificationStatus==="under_review"||t.verificationSubmitted&&t.verificationStatus!=="verified"?"under-review":t.accountType==="business"&&t.verified&&t.businessVerified?"business-verified":t.verified?"id-verified":t.phoneVerified?"phone-verified":"unverified"}function gi(t){return t.accountType||"individual"}function re({className:t,...s}){return e.jsx("div",{"data-slot":"card",className:Ve("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border",t),...s})}function Ie({className:t,...s}){return e.jsx("div",{"data-slot":"card-header",className:Ve("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 pt-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",t),...s})}function Oe({className:t,...s}){return e.jsx("h4",{"data-slot":"card-title",className:Ve("leading-none",t),...s})}function ts({className:t,...s}){return e.jsx("p",{"data-slot":"card-description",className:Ve("text-muted-foreground",t),...s})}function ie({className:t,...s}){return e.jsx("div",{"data-slot":"card-content",className:Ve("px-6 [&:last-child]:pb-6",t),...s})}function zv({className:t,...s}){return e.jsx("div",{"data-slot":"card-footer",className:Ve("flex items-center px-6 pb-6 [.border-t]:pt-6",t),...s})}const yk="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODgiIGhlaWdodD0iODgiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgc3Ryb2tlPSIjMDAwIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBvcGFjaXR5PSIuMyIgZmlsbD0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIzLjciPjxyZWN0IHg9IjE2IiB5PSIxNiIgd2lkdGg9IjU2IiBoZWlnaHQ9IjU2IiByeD0iNiIvPjxwYXRoIGQ9Im0xNiA1OCAxNi0xOCAzMiAzMiIvPjxjaXJjbGUgY3g9IjUzIiBjeT0iMzUiIHI9IjciLz48L3N2Zz4KCg==";function ko(t){const[s,n]=v.useState(!1),i=()=>{n(!0)},{src:o,alt:l,style:d,className:u,...f}=t;return s?e.jsx("div",{className:`inline-block bg-gray-100 text-center align-middle ${u??""}`,style:d,children:e.jsx("div",{className:"flex items-center justify-center w-full h-full",children:e.jsx("img",{src:yk,alt:"Error loading image",...f,"data-original-url":o})})}):e.jsx("img",{src:o,alt:l,className:u,style:d,...f,onError:i})}function Dc(t){if(!t)return"Recently";if(!t.includes("T")&&!t.includes("-"))return t;try{const s=new Date(t);return isNaN(s.getTime())?"Recently":`${["January","February","March","April","May","June","July","August","September","October","November","December"][s.getMonth()]} ${s.getFullYear()}`}catch(s){return console.warn("Failed to parse date:",t,s),"Recently"}}function xi(t){if(!t)return"Recently";try{let s;if(t.includes("T")||t.includes("Z"))s=new Date(t);else if(t.includes("-"))s=new Date(t+"T00:00:00");else return t;if(isNaN(s.getTime()))return"Recently";const n=new Date,i=n.getTime()-s.getTime();if(i<-6e4)return"Recently";if(i<0)return"Just now";const o=Math.floor(i/1e3),l=Math.floor(i/(1e3*60)),d=Math.floor(i/(1e3*60*60)),u=Math.floor(i/(1e3*60*60*24));if(o<30)return"Just now";if(l<1)return"Just now";if(l<60)return`${l} minute${l===1?"":"s"} ago`;if(d<24)return`${d} hour${d===1?"":"s"} ago`;if(u<30)return`${u} day${u===1?"":"s"} ago`;{const f=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],p=s.getDate(),g=f[s.getMonth()],h=s.getFullYear(),y=n.getFullYear();return h===y?`${g} ${p}`:`${g} ${p}, ${h}`}}catch(s){return console.warn("Failed to parse date for relative time:",t,s),"Recently"}}function wk(t,s,n){try{const i=localStorage.getItem("agriconnect-myanmar-current-user");if(i&&s===t){const d=JSON.parse(i);return{name:d.businessName||d.name||"Unknown Seller",location:d.location||"Location not set",lastUpdated:n?xi(n):"Recently"}}const l=JSON.parse(localStorage.getItem("agriconnect-myanmar-users")||"[]").find(d=>d.id===t);if(l)return{name:l.businessName||l.name||"Unknown Seller",location:l.location||"Location not set",lastUpdated:n?xi(n):"Recently"}}catch(i){console.error("Error fetching seller info:",i)}return null}function bk({product:t,onChat:s,onViewDetails:n,onViewStorefront:i,onDelete:o,onSaveProduct:l,onMakeOffer:d,currentUserId:u,currentUserType:f,sellerVerified:p=!1,sellerVerificationStatus:g,adminMode:h=!1,savedProductIds:y=[]}){const j=u&&t.sellerId===u,b=y.includes(t.id),w=()=>t.price||0,S=()=>{l&&u&&!j&&l(t.id,w())},k=wk(t.sellerId,u,t.lastUpdated),C=k?.name||t.sellerName,E=k?.location||t.location,P=k?.lastUpdated||xi(t.lastUpdated);return e.jsxs(re,{className:"hover:shadow-lg transition-shadow",children:[e.jsxs(ie,{className:"p-4",children:[e.jsxs("div",{className:"relative mb-3",children:[e.jsx(ko,{src:t.images?.[0]||t.image,alt:t.name,className:"w-full aspect-[4/3] object-cover rounded-lg cursor-pointer",onClick:()=>n(t.id)}),t.images&&t.images.length>1&&e.jsx("div",{className:"absolute bottom-2 left-2 flex gap-1",children:t.images.slice(0,3).map((T,A)=>e.jsxs("div",{className:"relative",children:[e.jsx(ko,{src:T,alt:`${t.name} - ${A+1}`,className:"w-6 h-6 object-cover rounded border border-white/70 cursor-pointer hover:border-white transition-all shadow-sm",onClick:R=>{R.stopPropagation(),n(t.id)}}),A===2&&t.images&&t.images.length>3&&e.jsx("div",{className:"absolute inset-0 bg-black/60 rounded flex items-center justify-center",children:e.jsxs("span",{className:"text-white text-xs font-bold",children:["+",t.images.length-3]})})]},A))}),e.jsx("div",{className:"absolute top-2 right-2",children:e.jsx(Fv,{userType:t.sellerType,accountType:g?.accountType||"individual",size:"sm"})}),h&&o&&e.jsx(O,{variant:"destructive",size:"sm",className:"absolute top-2 left-2 h-8 w-8 p-0 z-10",onClick:T=>{T.stopPropagation(),window.confirm(`Delete "${t.name}"?`)&&o(t.id)},children:e.jsx(Tr,{className:"w-4 h-4"})}),!j&&l&&u&&e.jsx(O,{variant:"ghost",size:"sm",className:"absolute top-2 left-2 h-8 w-8 p-0 z-10 bg-white/90 hover:bg-white shadow-sm",onClick:T=>{T.stopPropagation(),S()},children:e.jsx(vo,{className:`w-4 h-4 ${b?"fill-red-500 text-red-500":"text-gray-600 hover:text-red-500"}`})})]}),e.jsx("h3",{className:"font-medium mb-2",children:t.name}),e.jsx("div",{className:"flex items-center gap-2 mb-2",children:t.price&&t.price>0?e.jsxs(e.Fragment,{children:[e.jsxs("span",{className:"text-xl font-semibold",children:[t.price.toLocaleString()," MMK"]}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:["per ",t.unit]})]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-xl font-semibold",children:"Contact"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"for price"})]})}),e.jsxs("div",{className:"flex items-center gap-1 text-sm text-muted-foreground mb-2",children:[e.jsx(Vt,{className:"w-4 h-4"}),e.jsx("span",{children:E})]}),e.jsxs("div",{className:"text-sm text-muted-foreground mb-3",children:[e.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[e.jsx(_r,{className:"w-3 h-3"}),e.jsx("button",{className:"text-primary hover:underline",onClick:()=>i(t.sellerId),children:C}),e.jsx($v,{verificationLevel:g?g.level===2?"business-verified":g.level===1?"id-verified":g.trustLevel==="under-review"?"under-review":"unverified":"unverified",size:"xs"})]}),e.jsxs("p",{children:["Updated: ",P]}),t.availableQuantity&&e.jsxs("div",{className:"flex items-center gap-1 mt-2 text-primary",children:[e.jsx(Nt,{className:"w-3 h-3"}),e.jsx("span",{className:"text-xs font-medium",children:t.availableQuantity})]})]})]}),e.jsxs(zv,{className:"p-4 pt-0 flex gap-2",children:[e.jsx(O,{size:"sm",className:`h-9 ${j?"w-full":"flex-1"}`,onClick:()=>n(t.id),children:"View Details"}),!j&&e.jsxs(e.Fragment,{children:[e.jsxs(O,{variant:"outline",size:"sm",className:"flex-1 h-9",onClick:()=>s(t.id),children:[e.jsx(Rn,{className:"w-4 h-4 mr-2"}),"Chat"]}),f==="buyer"&&d&&e.jsxs(O,{size:"sm",className:"flex-1 h-9 bg-green-600 hover:bg-green-700",onClick:()=>d(t),children:[e.jsx(ga,{className:"w-4 h-4 mr-2"}),"Make Offer"]})]})]})]})}function Ue({className:t,type:s,...n}){return e.jsx("input",{type:s,"data-slot":"input",className:Ve("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border px-3 py-1 text-base bg-input-background transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",t),...n})}var Ao=pv();const Bv=tf(Ao);function _m(t,[s,n]){return Math.min(n,Math.max(s,t))}function be(t,s,{checkForDefaultPrevented:n=!0}={}){return function(o){if(t?.(o),n===!1||!o.defaultPrevented)return s?.(o)}}function jk(t,s){const n=v.createContext(s),i=l=>{const{children:d,...u}=l,f=v.useMemo(()=>u,Object.values(u));return e.jsx(n.Provider,{value:f,children:d})};i.displayName=t+"Provider";function o(l){const d=v.useContext(n);if(d)return d;if(s!==void 0)return s;throw new Error(`\`${l}\` must be used within \`${t}\``)}return[i,o]}function Ns(t,s=[]){let n=[];function i(l,d){const u=v.createContext(d),f=n.length;n=[...n,d];const p=h=>{const{scope:y,children:j,...b}=h,w=y?.[t]?.[f]||u,S=v.useMemo(()=>b,Object.values(b));return e.jsx(w.Provider,{value:S,children:j})};p.displayName=l+"Provider";function g(h,y){const j=y?.[t]?.[f]||u,b=v.useContext(j);if(b)return b;if(d!==void 0)return d;throw new Error(`\`${h}\` must be used within \`${l}\``)}return[p,g]}const o=()=>{const l=n.map(d=>v.createContext(d));return function(u){const f=u?.[t]||l;return v.useMemo(()=>({[`__scope${t}`]:{...u,[t]:f}}),[u,f])}};return o.scopeName=t,[i,Nk(o,...s)]}function Nk(...t){const s=t[0];if(t.length===1)return s;const n=()=>{const i=t.map(o=>({useScope:o(),scopeName:o.scopeName}));return function(l){const d=i.reduce((u,{useScope:f,scopeName:p})=>{const h=f(l)[`__scope${p}`];return{...u,...h}},{});return v.useMemo(()=>({[`__scope${s.scopeName}`]:d}),[d])}};return n.scopeName=s.scopeName,n}function Mc(t){const s=t+"CollectionProvider",[n,i]=Ns(s),[o,l]=n(s,{collectionRef:{current:null},itemMap:new Map}),d=w=>{const{scope:S,children:k}=w,C=le.useRef(null),E=le.useRef(new Map).current;return e.jsx(o,{scope:S,itemMap:E,collectionRef:C,children:k})};d.displayName=s;const u=t+"CollectionSlot",f=ha(u),p=le.forwardRef((w,S)=>{const{scope:k,children:C}=w,E=l(u,k),P=Ye(S,E.collectionRef);return e.jsx(f,{ref:P,children:C})});p.displayName=u;const g=t+"CollectionItemSlot",h="data-radix-collection-item",y=ha(g),j=le.forwardRef((w,S)=>{const{scope:k,children:C,...E}=w,P=le.useRef(null),T=Ye(S,P),A=l(g,k);return le.useEffect(()=>(A.itemMap.set(P,{ref:P,...E}),()=>void A.itemMap.delete(P))),e.jsx(y,{[h]:"",ref:T,children:C})});j.displayName=g;function b(w){const S=l(t+"CollectionConsumer",w);return le.useCallback(()=>{const C=S.collectionRef.current;if(!C)return[];const E=Array.from(C.querySelectorAll(`[${h}]`));return Array.from(S.itemMap.values()).sort((A,R)=>E.indexOf(A.ref.current)-E.indexOf(R.ref.current))},[S.collectionRef,S.itemMap])}return[{Provider:d,Slot:p,ItemSlot:j},b,i]}var Sk=v.createContext(void 0);function Si(t){const s=v.useContext(Sk);return t||s||"ltr"}var kk=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Le=kk.reduce((t,s)=>{const n=ha(`Primitive.${s}`),i=v.forwardRef((o,l)=>{const{asChild:d,...u}=o,f=d?n:s;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),e.jsx(f,{...u,ref:l})});return i.displayName=`Primitive.${s}`,{...t,[s]:i}},{});function Uv(t,s){t&&Ao.flushSync(()=>t.dispatchEvent(s))}function Ot(t){const s=v.useRef(t);return v.useEffect(()=>{s.current=t}),v.useMemo(()=>(...n)=>s.current?.(...n),[])}function Ck(t,s=globalThis?.document){const n=Ot(t);v.useEffect(()=>{const i=o=>{o.key==="Escape"&&n(o)};return s.addEventListener("keydown",i,{capture:!0}),()=>s.removeEventListener("keydown",i,{capture:!0})},[n,s])}var _k="DismissableLayer",Em="dismissableLayer.update",Ek="dismissableLayer.pointerDownOutside",Tk="dismissableLayer.focusOutside",sx,Vv=v.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Oc=v.forwardRef((t,s)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:l,onInteractOutside:d,onDismiss:u,...f}=t,p=v.useContext(Vv),[g,h]=v.useState(null),y=g?.ownerDocument??globalThis?.document,[,j]=v.useState({}),b=Ye(s,R=>h(R)),w=Array.from(p.layers),[S]=[...p.layersWithOutsidePointerEventsDisabled].slice(-1),k=w.indexOf(S),C=g?w.indexOf(g):-1,E=p.layersWithOutsidePointerEventsDisabled.size>0,P=C>=k,T=Ak(R=>{const $=R.target,J=[...p.branches].some(z=>z.contains($));!P||J||(o?.(R),d?.(R),R.defaultPrevented||u?.())},y),A=Rk(R=>{const $=R.target;[...p.branches].some(z=>z.contains($))||(l?.(R),d?.(R),R.defaultPrevented||u?.())},y);return Ck(R=>{C===p.layers.size-1&&(i?.(R),!R.defaultPrevented&&u&&(R.preventDefault(),u()))},y),v.useEffect(()=>{if(g)return n&&(p.layersWithOutsidePointerEventsDisabled.size===0&&(sx=y.body.style.pointerEvents,y.body.style.pointerEvents="none"),p.layersWithOutsidePointerEventsDisabled.add(g)),p.layers.add(g),rx(),()=>{n&&p.layersWithOutsidePointerEventsDisabled.size===1&&(y.body.style.pointerEvents=sx)}},[g,y,n,p]),v.useEffect(()=>()=>{g&&(p.layers.delete(g),p.layersWithOutsidePointerEventsDisabled.delete(g),rx())},[g,p]),v.useEffect(()=>{const R=()=>j({});return document.addEventListener(Em,R),()=>document.removeEventListener(Em,R)},[]),e.jsx(Le.div,{...f,ref:b,style:{pointerEvents:E?P?"auto":"none":void 0,...t.style},onFocusCapture:be(t.onFocusCapture,A.onFocusCapture),onBlurCapture:be(t.onBlurCapture,A.onBlurCapture),onPointerDownCapture:be(t.onPointerDownCapture,T.onPointerDownCapture)})});Oc.displayName=_k;var Pk="DismissableLayerBranch",Ik=v.forwardRef((t,s)=>{const n=v.useContext(Vv),i=v.useRef(null),o=Ye(s,i);return v.useEffect(()=>{const l=i.current;if(l)return n.branches.add(l),()=>{n.branches.delete(l)}},[n.branches]),e.jsx(Le.div,{...t,ref:o})});Ik.displayName=Pk;function Ak(t,s=globalThis?.document){const n=Ot(t),i=v.useRef(!1),o=v.useRef(()=>{});return v.useEffect(()=>{const l=u=>{if(u.target&&!i.current){let f=function(){qv(Ek,n,p,{discrete:!0})};const p={originalEvent:u};u.pointerType==="touch"?(s.removeEventListener("click",o.current),o.current=f,s.addEventListener("click",o.current,{once:!0})):f()}else s.removeEventListener("click",o.current);i.current=!1},d=window.setTimeout(()=>{s.addEventListener("pointerdown",l)},0);return()=>{window.clearTimeout(d),s.removeEventListener("pointerdown",l),s.removeEventListener("click",o.current)}},[s,n]),{onPointerDownCapture:()=>i.current=!0}}function Rk(t,s=globalThis?.document){const n=Ot(t),i=v.useRef(!1);return v.useEffect(()=>{const o=l=>{l.target&&!i.current&&qv(Tk,n,{originalEvent:l},{discrete:!1})};return s.addEventListener("focusin",o),()=>s.removeEventListener("focusin",o)},[s,n]),{onFocusCapture:()=>i.current=!0,onBlurCapture:()=>i.current=!1}}function rx(){const t=new CustomEvent(Em);document.dispatchEvent(t)}function qv(t,s,n,{discrete:i}){const o=n.originalEvent.target,l=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});s&&o.addEventListener(t,s,{once:!0}),i?Uv(o,l):o.dispatchEvent(l)}var Qu=0;function df(){v.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??nx()),document.body.insertAdjacentElement("beforeend",t[1]??nx()),Qu++,()=>{Qu===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(s=>s.remove()),Qu--}},[])}function nx(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var Xu="focusScope.autoFocusOnMount",Zu="focusScope.autoFocusOnUnmount",ax={bubbles:!1,cancelable:!0},Dk="FocusScope",Lc=v.forwardRef((t,s)=>{const{loop:n=!1,trapped:i=!1,onMountAutoFocus:o,onUnmountAutoFocus:l,...d}=t,[u,f]=v.useState(null),p=Ot(o),g=Ot(l),h=v.useRef(null),y=Ye(s,w=>f(w)),j=v.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;v.useEffect(()=>{if(i){let w=function(E){if(j.paused||!u)return;const P=E.target;u.contains(P)?h.current=P:Tn(h.current,{select:!0})},S=function(E){if(j.paused||!u)return;const P=E.relatedTarget;P!==null&&(u.contains(P)||Tn(h.current,{select:!0}))},k=function(E){if(document.activeElement===document.body)for(const T of E)T.removedNodes.length>0&&Tn(u)};document.addEventListener("focusin",w),document.addEventListener("focusout",S);const C=new MutationObserver(k);return u&&C.observe(u,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",w),document.removeEventListener("focusout",S),C.disconnect()}}},[i,u,j.paused]),v.useEffect(()=>{if(u){ox.add(j);const w=document.activeElement;if(!u.contains(w)){const k=new CustomEvent(Xu,ax);u.addEventListener(Xu,p),u.dispatchEvent(k),k.defaultPrevented||(Mk(zk(Hv(u)),{select:!0}),document.activeElement===w&&Tn(u))}return()=>{u.removeEventListener(Xu,p),setTimeout(()=>{const k=new CustomEvent(Zu,ax);u.addEventListener(Zu,g),u.dispatchEvent(k),k.defaultPrevented||Tn(w??document.body,{select:!0}),u.removeEventListener(Zu,g),ox.remove(j)},0)}}},[u,p,g,j]);const b=v.useCallback(w=>{if(!n&&!i||j.paused)return;const S=w.key==="Tab"&&!w.altKey&&!w.ctrlKey&&!w.metaKey,k=document.activeElement;if(S&&k){const C=w.currentTarget,[E,P]=Ok(C);E&&P?!w.shiftKey&&k===P?(w.preventDefault(),n&&Tn(E,{select:!0})):w.shiftKey&&k===E&&(w.preventDefault(),n&&Tn(P,{select:!0})):k===C&&w.preventDefault()}},[n,i,j.paused]);return e.jsx(Le.div,{tabIndex:-1,...d,ref:y,onKeyDown:b})});Lc.displayName=Dk;function Mk(t,{select:s=!1}={}){const n=document.activeElement;for(const i of t)if(Tn(i,{select:s}),document.activeElement!==n)return}function Ok(t){const s=Hv(t),n=ix(s,t),i=ix(s.reverse(),t);return[n,i]}function Hv(t){const s=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:i=>{const o=i.tagName==="INPUT"&&i.type==="hidden";return i.disabled||i.hidden||o?NodeFilter.FILTER_SKIP:i.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)s.push(n.currentNode);return s}function ix(t,s){for(const n of t)if(!Lk(n,{upTo:s}))return n}function Lk(t,{upTo:s}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(s!==void 0&&t===s)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function $k(t){return t instanceof HTMLInputElement&&"select"in t}function Tn(t,{select:s=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&$k(t)&&s&&t.select()}}var ox=Fk();function Fk(){let t=[];return{add(s){const n=t[0];s!==n&&n?.pause(),t=lx(t,s),t.unshift(s)},remove(s){t=lx(t,s),t[0]?.resume()}}}function lx(t,s){const n=[...t],i=n.indexOf(s);return i!==-1&&n.splice(i,1),n}function zk(t){return t.filter(s=>s.tagName!=="A")}var vt=globalThis?.document?v.useLayoutEffect:()=>{},Bk=gv[" useId ".trim().toString()]||(()=>{}),Uk=0;function Bs(t){const[s,n]=v.useState(Bk());return vt(()=>{n(i=>i??String(Uk++))},[t]),t||(s?`radix-${s}`:"")}const Vk=["top","right","bottom","left"],On=Math.min,Ps=Math.max,gc=Math.round,Wl=Math.floor,Er=t=>({x:t,y:t}),qk={left:"right",right:"left",bottom:"top",top:"bottom"},Hk={start:"end",end:"start"};function Tm(t,s,n){return Ps(t,On(s,n))}function Xr(t,s){return typeof t=="function"?t(s):t}function Zr(t){return t.split("-")[0]}function ki(t){return t.split("-")[1]}function uf(t){return t==="x"?"y":"x"}function mf(t){return t==="y"?"height":"width"}const Wk=new Set(["top","bottom"]);function kr(t){return Wk.has(Zr(t))?"y":"x"}function ff(t){return uf(kr(t))}function Kk(t,s,n){n===void 0&&(n=!1);const i=ki(t),o=ff(t),l=mf(o);let d=o==="x"?i===(n?"end":"start")?"right":"left":i==="start"?"bottom":"top";return s.reference[l]>s.floating[l]&&(d=xc(d)),[d,xc(d)]}function Gk(t){const s=xc(t);return[Pm(t),s,Pm(s)]}function Pm(t){return t.replace(/start|end/g,s=>Hk[s])}const cx=["left","right"],dx=["right","left"],Jk=["top","bottom"],Yk=["bottom","top"];function Qk(t,s,n){switch(t){case"top":case"bottom":return n?s?dx:cx:s?cx:dx;case"left":case"right":return s?Jk:Yk;default:return[]}}function Xk(t,s,n,i){const o=ki(t);let l=Qk(Zr(t),n==="start",i);return o&&(l=l.map(d=>d+"-"+o),s&&(l=l.concat(l.map(Pm)))),l}function xc(t){return t.replace(/left|right|bottom|top/g,s=>qk[s])}function Zk(t){return{top:0,right:0,bottom:0,left:0,...t}}function Wv(t){return typeof t!="number"?Zk(t):{top:t,right:t,bottom:t,left:t}}function vc(t){const{x:s,y:n,width:i,height:o}=t;return{width:i,height:o,top:n,left:s,right:s+i,bottom:n+o,x:s,y:n}}function ux(t,s,n){let{reference:i,floating:o}=t;const l=kr(s),d=ff(s),u=mf(d),f=Zr(s),p=l==="y",g=i.x+i.width/2-o.width/2,h=i.y+i.height/2-o.height/2,y=i[u]/2-o[u]/2;let j;switch(f){case"top":j={x:g,y:i.y-o.height};break;case"bottom":j={x:g,y:i.y+i.height};break;case"right":j={x:i.x+i.width,y:h};break;case"left":j={x:i.x-o.width,y:h};break;default:j={x:i.x,y:i.y}}switch(ki(s)){case"start":j[d]-=y*(n&&p?-1:1);break;case"end":j[d]+=y*(n&&p?-1:1);break}return j}const e2=async(t,s,n)=>{const{placement:i="bottom",strategy:o="absolute",middleware:l=[],platform:d}=n,u=l.filter(Boolean),f=await(d.isRTL==null?void 0:d.isRTL(s));let p=await d.getElementRects({reference:t,floating:s,strategy:o}),{x:g,y:h}=ux(p,i,f),y=i,j={},b=0;for(let w=0;w<u.length;w++){const{name:S,fn:k}=u[w],{x:C,y:E,data:P,reset:T}=await k({x:g,y:h,initialPlacement:i,placement:y,strategy:o,middlewareData:j,rects:p,platform:d,elements:{reference:t,floating:s}});g=C??g,h=E??h,j={...j,[S]:{...j[S],...P}},T&&b<=50&&(b++,typeof T=="object"&&(T.placement&&(y=T.placement),T.rects&&(p=T.rects===!0?await d.getElementRects({reference:t,floating:s,strategy:o}):T.rects),{x:g,y:h}=ux(p,y,f)),w=-1)}return{x:g,y:h,placement:y,strategy:o,middlewareData:j}};async function Co(t,s){var n;s===void 0&&(s={});const{x:i,y:o,platform:l,rects:d,elements:u,strategy:f}=t,{boundary:p="clippingAncestors",rootBoundary:g="viewport",elementContext:h="floating",altBoundary:y=!1,padding:j=0}=Xr(s,t),b=Wv(j),S=u[y?h==="floating"?"reference":"floating":h],k=vc(await l.getClippingRect({element:(n=await(l.isElement==null?void 0:l.isElement(S)))==null||n?S:S.contextElement||await(l.getDocumentElement==null?void 0:l.getDocumentElement(u.floating)),boundary:p,rootBoundary:g,strategy:f})),C=h==="floating"?{x:i,y:o,width:d.floating.width,height:d.floating.height}:d.reference,E=await(l.getOffsetParent==null?void 0:l.getOffsetParent(u.floating)),P=await(l.isElement==null?void 0:l.isElement(E))?await(l.getScale==null?void 0:l.getScale(E))||{x:1,y:1}:{x:1,y:1},T=vc(l.convertOffsetParentRelativeRectToViewportRelativeRect?await l.convertOffsetParentRelativeRectToViewportRelativeRect({elements:u,rect:C,offsetParent:E,strategy:f}):C);return{top:(k.top-T.top+b.top)/P.y,bottom:(T.bottom-k.bottom+b.bottom)/P.y,left:(k.left-T.left+b.left)/P.x,right:(T.right-k.right+b.right)/P.x}}const t2=t=>({name:"arrow",options:t,async fn(s){const{x:n,y:i,placement:o,rects:l,platform:d,elements:u,middlewareData:f}=s,{element:p,padding:g=0}=Xr(t,s)||{};if(p==null)return{};const h=Wv(g),y={x:n,y:i},j=ff(o),b=mf(j),w=await d.getDimensions(p),S=j==="y",k=S?"top":"left",C=S?"bottom":"right",E=S?"clientHeight":"clientWidth",P=l.reference[b]+l.reference[j]-y[j]-l.floating[b],T=y[j]-l.reference[j],A=await(d.getOffsetParent==null?void 0:d.getOffsetParent(p));let R=A?A[E]:0;(!R||!await(d.isElement==null?void 0:d.isElement(A)))&&(R=u.floating[E]||l.floating[b]);const $=P/2-T/2,J=R/2-w[b]/2-1,z=On(h[k],J),q=On(h[C],J),Q=z,Z=R-w[b]-q,he=R/2-w[b]/2+$,se=Tm(Q,he,Z),te=!f.arrow&&ki(o)!=null&&he!==se&&l.reference[b]/2-(he<Q?z:q)-w[b]/2<0,ne=te?he<Q?he-Q:he-Z:0;return{[j]:y[j]+ne,data:{[j]:se,centerOffset:he-se-ne,...te&&{alignmentOffset:ne}},reset:te}}}),s2=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(s){var n,i;const{placement:o,middlewareData:l,rects:d,initialPlacement:u,platform:f,elements:p}=s,{mainAxis:g=!0,crossAxis:h=!0,fallbackPlacements:y,fallbackStrategy:j="bestFit",fallbackAxisSideDirection:b="none",flipAlignment:w=!0,...S}=Xr(t,s);if((n=l.arrow)!=null&&n.alignmentOffset)return{};const k=Zr(o),C=kr(u),E=Zr(u)===u,P=await(f.isRTL==null?void 0:f.isRTL(p.floating)),T=y||(E||!w?[xc(u)]:Gk(u)),A=b!=="none";!y&&A&&T.push(...Xk(u,w,b,P));const R=[u,...T],$=await Co(s,S),J=[];let z=((i=l.flip)==null?void 0:i.overflows)||[];if(g&&J.push($[k]),h){const he=Kk(o,d,P);J.push($[he[0]],$[he[1]])}if(z=[...z,{placement:o,overflows:J}],!J.every(he=>he<=0)){var q,Q;const he=(((q=l.flip)==null?void 0:q.index)||0)+1,se=R[he];if(se&&(!(h==="alignment"?C!==kr(se):!1)||z.every(U=>kr(U.placement)===C?U.overflows[0]>0:!0)))return{data:{index:he,overflows:z},reset:{placement:se}};let te=(Q=z.filter(ne=>ne.overflows[0]<=0).sort((ne,U)=>ne.overflows[1]-U.overflows[1])[0])==null?void 0:Q.placement;if(!te)switch(j){case"bestFit":{var Z;const ne=(Z=z.filter(U=>{if(A){const M=kr(U.placement);return M===C||M==="y"}return!0}).map(U=>[U.placement,U.overflows.filter(M=>M>0).reduce((M,H)=>M+H,0)]).sort((U,M)=>U[1]-M[1])[0])==null?void 0:Z[0];ne&&(te=ne);break}case"initialPlacement":te=u;break}if(o!==te)return{reset:{placement:te}}}return{}}}};function mx(t,s){return{top:t.top-s.height,right:t.right-s.width,bottom:t.bottom-s.height,left:t.left-s.width}}function fx(t){return Vk.some(s=>t[s]>=0)}const r2=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(s){const{rects:n}=s,{strategy:i="referenceHidden",...o}=Xr(t,s);switch(i){case"referenceHidden":{const l=await Co(s,{...o,elementContext:"reference"}),d=mx(l,n.reference);return{data:{referenceHiddenOffsets:d,referenceHidden:fx(d)}}}case"escaped":{const l=await Co(s,{...o,altBoundary:!0}),d=mx(l,n.floating);return{data:{escapedOffsets:d,escaped:fx(d)}}}default:return{}}}}},Kv=new Set(["left","top"]);async function n2(t,s){const{placement:n,platform:i,elements:o}=t,l=await(i.isRTL==null?void 0:i.isRTL(o.floating)),d=Zr(n),u=ki(n),f=kr(n)==="y",p=Kv.has(d)?-1:1,g=l&&f?-1:1,h=Xr(s,t);let{mainAxis:y,crossAxis:j,alignmentAxis:b}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return u&&typeof b=="number"&&(j=u==="end"?b*-1:b),f?{x:j*g,y:y*p}:{x:y*p,y:j*g}}const a2=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(s){var n,i;const{x:o,y:l,placement:d,middlewareData:u}=s,f=await n2(s,t);return d===((n=u.offset)==null?void 0:n.placement)&&(i=u.arrow)!=null&&i.alignmentOffset?{}:{x:o+f.x,y:l+f.y,data:{...f,placement:d}}}}},i2=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(s){const{x:n,y:i,placement:o}=s,{mainAxis:l=!0,crossAxis:d=!1,limiter:u={fn:S=>{let{x:k,y:C}=S;return{x:k,y:C}}},...f}=Xr(t,s),p={x:n,y:i},g=await Co(s,f),h=kr(Zr(o)),y=uf(h);let j=p[y],b=p[h];if(l){const S=y==="y"?"top":"left",k=y==="y"?"bottom":"right",C=j+g[S],E=j-g[k];j=Tm(C,j,E)}if(d){const S=h==="y"?"top":"left",k=h==="y"?"bottom":"right",C=b+g[S],E=b-g[k];b=Tm(C,b,E)}const w=u.fn({...s,[y]:j,[h]:b});return{...w,data:{x:w.x-n,y:w.y-i,enabled:{[y]:l,[h]:d}}}}}},o2=function(t){return t===void 0&&(t={}),{options:t,fn(s){const{x:n,y:i,placement:o,rects:l,middlewareData:d}=s,{offset:u=0,mainAxis:f=!0,crossAxis:p=!0}=Xr(t,s),g={x:n,y:i},h=kr(o),y=uf(h);let j=g[y],b=g[h];const w=Xr(u,s),S=typeof w=="number"?{mainAxis:w,crossAxis:0}:{mainAxis:0,crossAxis:0,...w};if(f){const E=y==="y"?"height":"width",P=l.reference[y]-l.floating[E]+S.mainAxis,T=l.reference[y]+l.reference[E]-S.mainAxis;j<P?j=P:j>T&&(j=T)}if(p){var k,C;const E=y==="y"?"width":"height",P=Kv.has(Zr(o)),T=l.reference[h]-l.floating[E]+(P&&((k=d.offset)==null?void 0:k[h])||0)+(P?0:S.crossAxis),A=l.reference[h]+l.reference[E]+(P?0:((C=d.offset)==null?void 0:C[h])||0)-(P?S.crossAxis:0);b<T?b=T:b>A&&(b=A)}return{[y]:j,[h]:b}}}},l2=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(s){var n,i;const{placement:o,rects:l,platform:d,elements:u}=s,{apply:f=()=>{},...p}=Xr(t,s),g=await Co(s,p),h=Zr(o),y=ki(o),j=kr(o)==="y",{width:b,height:w}=l.floating;let S,k;h==="top"||h==="bottom"?(S=h,k=y===(await(d.isRTL==null?void 0:d.isRTL(u.floating))?"start":"end")?"left":"right"):(k=h,S=y==="end"?"top":"bottom");const C=w-g.top-g.bottom,E=b-g.left-g.right,P=On(w-g[S],C),T=On(b-g[k],E),A=!s.middlewareData.shift;let R=P,$=T;if((n=s.middlewareData.shift)!=null&&n.enabled.x&&($=E),(i=s.middlewareData.shift)!=null&&i.enabled.y&&(R=C),A&&!y){const z=Ps(g.left,0),q=Ps(g.right,0),Q=Ps(g.top,0),Z=Ps(g.bottom,0);j?$=b-2*(z!==0||q!==0?z+q:Ps(g.left,g.right)):R=w-2*(Q!==0||Z!==0?Q+Z:Ps(g.top,g.bottom))}await f({...s,availableWidth:$,availableHeight:R});const J=await d.getDimensions(u.floating);return b!==J.width||w!==J.height?{reset:{rects:!0}}:{}}}};function $c(){return typeof window<"u"}function Ci(t){return Gv(t)?(t.nodeName||"").toLowerCase():"#document"}function Is(t){var s;return(t==null||(s=t.ownerDocument)==null?void 0:s.defaultView)||window}function Ar(t){var s;return(s=(Gv(t)?t.ownerDocument:t.document)||window.document)==null?void 0:s.documentElement}function Gv(t){return $c()?t instanceof Node||t instanceof Is(t).Node:!1}function ar(t){return $c()?t instanceof Element||t instanceof Is(t).Element:!1}function Pr(t){return $c()?t instanceof HTMLElement||t instanceof Is(t).HTMLElement:!1}function hx(t){return!$c()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof Is(t).ShadowRoot}const c2=new Set(["inline","contents"]);function Ro(t){const{overflow:s,overflowX:n,overflowY:i,display:o}=ir(t);return/auto|scroll|overlay|hidden|clip/.test(s+i+n)&&!c2.has(o)}const d2=new Set(["table","td","th"]);function u2(t){return d2.has(Ci(t))}const m2=[":popover-open",":modal"];function Fc(t){return m2.some(s=>{try{return t.matches(s)}catch{return!1}})}const f2=["transform","translate","scale","rotate","perspective"],h2=["transform","translate","scale","rotate","perspective","filter"],p2=["paint","layout","strict","content"];function hf(t){const s=pf(),n=ar(t)?ir(t):t;return f2.some(i=>n[i]?n[i]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!s&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!s&&(n.filter?n.filter!=="none":!1)||h2.some(i=>(n.willChange||"").includes(i))||p2.some(i=>(n.contain||"").includes(i))}function g2(t){let s=Ln(t);for(;Pr(s)&&!vi(s);){if(hf(s))return s;if(Fc(s))return null;s=Ln(s)}return null}function pf(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const x2=new Set(["html","body","#document"]);function vi(t){return x2.has(Ci(t))}function ir(t){return Is(t).getComputedStyle(t)}function zc(t){return ar(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function Ln(t){if(Ci(t)==="html")return t;const s=t.assignedSlot||t.parentNode||hx(t)&&t.host||Ar(t);return hx(s)?s.host:s}function Jv(t){const s=Ln(t);return vi(s)?t.ownerDocument?t.ownerDocument.body:t.body:Pr(s)&&Ro(s)?s:Jv(s)}function _o(t,s,n){var i;s===void 0&&(s=[]),n===void 0&&(n=!0);const o=Jv(t),l=o===((i=t.ownerDocument)==null?void 0:i.body),d=Is(o);if(l){const u=Im(d);return s.concat(d,d.visualViewport||[],Ro(o)?o:[],u&&n?_o(u):[])}return s.concat(o,_o(o,[],n))}function Im(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function Yv(t){const s=ir(t);let n=parseFloat(s.width)||0,i=parseFloat(s.height)||0;const o=Pr(t),l=o?t.offsetWidth:n,d=o?t.offsetHeight:i,u=gc(n)!==l||gc(i)!==d;return u&&(n=l,i=d),{width:n,height:i,$:u}}function gf(t){return ar(t)?t:t.contextElement}function mi(t){const s=gf(t);if(!Pr(s))return Er(1);const n=s.getBoundingClientRect(),{width:i,height:o,$:l}=Yv(s);let d=(l?gc(n.width):n.width)/i,u=(l?gc(n.height):n.height)/o;return(!d||!Number.isFinite(d))&&(d=1),(!u||!Number.isFinite(u))&&(u=1),{x:d,y:u}}const v2=Er(0);function Qv(t){const s=Is(t);return!pf()||!s.visualViewport?v2:{x:s.visualViewport.offsetLeft,y:s.visualViewport.offsetTop}}function y2(t,s,n){return s===void 0&&(s=!1),!n||s&&n!==Is(t)?!1:s}function xa(t,s,n,i){s===void 0&&(s=!1),n===void 0&&(n=!1);const o=t.getBoundingClientRect(),l=gf(t);let d=Er(1);s&&(i?ar(i)&&(d=mi(i)):d=mi(t));const u=y2(l,n,i)?Qv(l):Er(0);let f=(o.left+u.x)/d.x,p=(o.top+u.y)/d.y,g=o.width/d.x,h=o.height/d.y;if(l){const y=Is(l),j=i&&ar(i)?Is(i):i;let b=y,w=Im(b);for(;w&&i&&j!==b;){const S=mi(w),k=w.getBoundingClientRect(),C=ir(w),E=k.left+(w.clientLeft+parseFloat(C.paddingLeft))*S.x,P=k.top+(w.clientTop+parseFloat(C.paddingTop))*S.y;f*=S.x,p*=S.y,g*=S.x,h*=S.y,f+=E,p+=P,b=Is(w),w=Im(b)}}return vc({width:g,height:h,x:f,y:p})}function Bc(t,s){const n=zc(t).scrollLeft;return s?s.left+n:xa(Ar(t)).left+n}function Xv(t,s){const n=t.getBoundingClientRect(),i=n.left+s.scrollLeft-Bc(t,n),o=n.top+s.scrollTop;return{x:i,y:o}}function w2(t){let{elements:s,rect:n,offsetParent:i,strategy:o}=t;const l=o==="fixed",d=Ar(i),u=s?Fc(s.floating):!1;if(i===d||u&&l)return n;let f={scrollLeft:0,scrollTop:0},p=Er(1);const g=Er(0),h=Pr(i);if((h||!h&&!l)&&((Ci(i)!=="body"||Ro(d))&&(f=zc(i)),Pr(i))){const j=xa(i);p=mi(i),g.x=j.x+i.clientLeft,g.y=j.y+i.clientTop}const y=d&&!h&&!l?Xv(d,f):Er(0);return{width:n.width*p.x,height:n.height*p.y,x:n.x*p.x-f.scrollLeft*p.x+g.x+y.x,y:n.y*p.y-f.scrollTop*p.y+g.y+y.y}}function b2(t){return Array.from(t.getClientRects())}function j2(t){const s=Ar(t),n=zc(t),i=t.ownerDocument.body,o=Ps(s.scrollWidth,s.clientWidth,i.scrollWidth,i.clientWidth),l=Ps(s.scrollHeight,s.clientHeight,i.scrollHeight,i.clientHeight);let d=-n.scrollLeft+Bc(t);const u=-n.scrollTop;return ir(i).direction==="rtl"&&(d+=Ps(s.clientWidth,i.clientWidth)-o),{width:o,height:l,x:d,y:u}}const px=25;function N2(t,s){const n=Is(t),i=Ar(t),o=n.visualViewport;let l=i.clientWidth,d=i.clientHeight,u=0,f=0;if(o){l=o.width,d=o.height;const g=pf();(!g||g&&s==="fixed")&&(u=o.offsetLeft,f=o.offsetTop)}const p=Bc(i);if(p<=0){const g=i.ownerDocument,h=g.body,y=getComputedStyle(h),j=g.compatMode==="CSS1Compat"&&parseFloat(y.marginLeft)+parseFloat(y.marginRight)||0,b=Math.abs(i.clientWidth-h.clientWidth-j);b<=px&&(l-=b)}else p<=px&&(l+=p);return{width:l,height:d,x:u,y:f}}const S2=new Set(["absolute","fixed"]);function k2(t,s){const n=xa(t,!0,s==="fixed"),i=n.top+t.clientTop,o=n.left+t.clientLeft,l=Pr(t)?mi(t):Er(1),d=t.clientWidth*l.x,u=t.clientHeight*l.y,f=o*l.x,p=i*l.y;return{width:d,height:u,x:f,y:p}}function gx(t,s,n){let i;if(s==="viewport")i=N2(t,n);else if(s==="document")i=j2(Ar(t));else if(ar(s))i=k2(s,n);else{const o=Qv(t);i={x:s.x-o.x,y:s.y-o.y,width:s.width,height:s.height}}return vc(i)}function Zv(t,s){const n=Ln(t);return n===s||!ar(n)||vi(n)?!1:ir(n).position==="fixed"||Zv(n,s)}function C2(t,s){const n=s.get(t);if(n)return n;let i=_o(t,[],!1).filter(u=>ar(u)&&Ci(u)!=="body"),o=null;const l=ir(t).position==="fixed";let d=l?Ln(t):t;for(;ar(d)&&!vi(d);){const u=ir(d),f=hf(d);!f&&u.position==="fixed"&&(o=null),(l?!f&&!o:!f&&u.position==="static"&&!!o&&S2.has(o.position)||Ro(d)&&!f&&Zv(t,d))?i=i.filter(g=>g!==d):o=u,d=Ln(d)}return s.set(t,i),i}function _2(t){let{element:s,boundary:n,rootBoundary:i,strategy:o}=t;const d=[...n==="clippingAncestors"?Fc(s)?[]:C2(s,this._c):[].concat(n),i],u=d[0],f=d.reduce((p,g)=>{const h=gx(s,g,o);return p.top=Ps(h.top,p.top),p.right=On(h.right,p.right),p.bottom=On(h.bottom,p.bottom),p.left=Ps(h.left,p.left),p},gx(s,u,o));return{width:f.right-f.left,height:f.bottom-f.top,x:f.left,y:f.top}}function E2(t){const{width:s,height:n}=Yv(t);return{width:s,height:n}}function T2(t,s,n){const i=Pr(s),o=Ar(s),l=n==="fixed",d=xa(t,!0,l,s);let u={scrollLeft:0,scrollTop:0};const f=Er(0);function p(){f.x=Bc(o)}if(i||!i&&!l)if((Ci(s)!=="body"||Ro(o))&&(u=zc(s)),i){const j=xa(s,!0,l,s);f.x=j.x+s.clientLeft,f.y=j.y+s.clientTop}else o&&p();l&&!i&&o&&p();const g=o&&!i&&!l?Xv(o,u):Er(0),h=d.left+u.scrollLeft-f.x-g.x,y=d.top+u.scrollTop-f.y-g.y;return{x:h,y,width:d.width,height:d.height}}function em(t){return ir(t).position==="static"}function xx(t,s){if(!Pr(t)||ir(t).position==="fixed")return null;if(s)return s(t);let n=t.offsetParent;return Ar(t)===n&&(n=n.ownerDocument.body),n}function ey(t,s){const n=Is(t);if(Fc(t))return n;if(!Pr(t)){let o=Ln(t);for(;o&&!vi(o);){if(ar(o)&&!em(o))return o;o=Ln(o)}return n}let i=xx(t,s);for(;i&&u2(i)&&em(i);)i=xx(i,s);return i&&vi(i)&&em(i)&&!hf(i)?n:i||g2(t)||n}const P2=async function(t){const s=this.getOffsetParent||ey,n=this.getDimensions,i=await n(t.floating);return{reference:T2(t.reference,await s(t.floating),t.strategy),floating:{x:0,y:0,width:i.width,height:i.height}}};function I2(t){return ir(t).direction==="rtl"}const A2={convertOffsetParentRelativeRectToViewportRelativeRect:w2,getDocumentElement:Ar,getClippingRect:_2,getOffsetParent:ey,getElementRects:P2,getClientRects:b2,getDimensions:E2,getScale:mi,isElement:ar,isRTL:I2};function ty(t,s){return t.x===s.x&&t.y===s.y&&t.width===s.width&&t.height===s.height}function R2(t,s){let n=null,i;const o=Ar(t);function l(){var u;clearTimeout(i),(u=n)==null||u.disconnect(),n=null}function d(u,f){u===void 0&&(u=!1),f===void 0&&(f=1),l();const p=t.getBoundingClientRect(),{left:g,top:h,width:y,height:j}=p;if(u||s(),!y||!j)return;const b=Wl(h),w=Wl(o.clientWidth-(g+y)),S=Wl(o.clientHeight-(h+j)),k=Wl(g),E={rootMargin:-b+"px "+-w+"px "+-S+"px "+-k+"px",threshold:Ps(0,On(1,f))||1};let P=!0;function T(A){const R=A[0].intersectionRatio;if(R!==f){if(!P)return d();R?d(!1,R):i=setTimeout(()=>{d(!1,1e-7)},1e3)}R===1&&!ty(p,t.getBoundingClientRect())&&d(),P=!1}try{n=new IntersectionObserver(T,{...E,root:o.ownerDocument})}catch{n=new IntersectionObserver(T,E)}n.observe(t)}return d(!0),l}function D2(t,s,n,i){i===void 0&&(i={});const{ancestorScroll:o=!0,ancestorResize:l=!0,elementResize:d=typeof ResizeObserver=="function",layoutShift:u=typeof IntersectionObserver=="function",animationFrame:f=!1}=i,p=gf(t),g=o||l?[...p?_o(p):[],..._o(s)]:[];g.forEach(k=>{o&&k.addEventListener("scroll",n,{passive:!0}),l&&k.addEventListener("resize",n)});const h=p&&u?R2(p,n):null;let y=-1,j=null;d&&(j=new ResizeObserver(k=>{let[C]=k;C&&C.target===p&&j&&(j.unobserve(s),cancelAnimationFrame(y),y=requestAnimationFrame(()=>{var E;(E=j)==null||E.observe(s)})),n()}),p&&!f&&j.observe(p),j.observe(s));let b,w=f?xa(t):null;f&&S();function S(){const k=xa(t);w&&!ty(w,k)&&n(),w=k,b=requestAnimationFrame(S)}return n(),()=>{var k;g.forEach(C=>{o&&C.removeEventListener("scroll",n),l&&C.removeEventListener("resize",n)}),h?.(),(k=j)==null||k.disconnect(),j=null,f&&cancelAnimationFrame(b)}}const M2=a2,O2=i2,L2=s2,$2=l2,F2=r2,vx=t2,z2=o2,B2=(t,s,n)=>{const i=new Map,o={platform:A2,...n},l={...o.platform,_c:i};return e2(t,s,{...o,platform:l})};var U2=typeof document<"u",V2=function(){},oc=U2?v.useLayoutEffect:V2;function yc(t,s){if(t===s)return!0;if(typeof t!=typeof s)return!1;if(typeof t=="function"&&t.toString()===s.toString())return!0;let n,i,o;if(t&&s&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==s.length)return!1;for(i=n;i--!==0;)if(!yc(t[i],s[i]))return!1;return!0}if(o=Object.keys(t),n=o.length,n!==Object.keys(s).length)return!1;for(i=n;i--!==0;)if(!{}.hasOwnProperty.call(s,o[i]))return!1;for(i=n;i--!==0;){const l=o[i];if(!(l==="_owner"&&t.$$typeof)&&!yc(t[l],s[l]))return!1}return!0}return t!==t&&s!==s}function sy(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function yx(t,s){const n=sy(t);return Math.round(s*n)/n}function tm(t){const s=v.useRef(t);return oc(()=>{s.current=t}),s}function q2(t){t===void 0&&(t={});const{placement:s="bottom",strategy:n="absolute",middleware:i=[],platform:o,elements:{reference:l,floating:d}={},transform:u=!0,whileElementsMounted:f,open:p}=t,[g,h]=v.useState({x:0,y:0,strategy:n,placement:s,middlewareData:{},isPositioned:!1}),[y,j]=v.useState(i);yc(y,i)||j(i);const[b,w]=v.useState(null),[S,k]=v.useState(null),C=v.useCallback(U=>{U!==A.current&&(A.current=U,w(U))},[]),E=v.useCallback(U=>{U!==R.current&&(R.current=U,k(U))},[]),P=l||b,T=d||S,A=v.useRef(null),R=v.useRef(null),$=v.useRef(g),J=f!=null,z=tm(f),q=tm(o),Q=tm(p),Z=v.useCallback(()=>{if(!A.current||!R.current)return;const U={placement:s,strategy:n,middleware:y};q.current&&(U.platform=q.current),B2(A.current,R.current,U).then(M=>{const H={...M,isPositioned:Q.current!==!1};he.current&&!yc($.current,H)&&($.current=H,Ao.flushSync(()=>{h(H)}))})},[y,s,n,q,Q]);oc(()=>{p===!1&&$.current.isPositioned&&($.current.isPositioned=!1,h(U=>({...U,isPositioned:!1})))},[p]);const he=v.useRef(!1);oc(()=>(he.current=!0,()=>{he.current=!1}),[]),oc(()=>{if(P&&(A.current=P),T&&(R.current=T),P&&T){if(z.current)return z.current(P,T,Z);Z()}},[P,T,Z,z,J]);const se=v.useMemo(()=>({reference:A,floating:R,setReference:C,setFloating:E}),[C,E]),te=v.useMemo(()=>({reference:P,floating:T}),[P,T]),ne=v.useMemo(()=>{const U={position:n,left:0,top:0};if(!te.floating)return U;const M=yx(te.floating,g.x),H=yx(te.floating,g.y);return u?{...U,transform:"translate("+M+"px, "+H+"px)",...sy(te.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:M,top:H}},[n,u,te.floating,g.x,g.y]);return v.useMemo(()=>({...g,update:Z,refs:se,elements:te,floatingStyles:ne}),[g,Z,se,te,ne])}const H2=t=>{function s(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:i,padding:o}=typeof t=="function"?t(n):t;return i&&s(i)?i.current!=null?vx({element:i.current,padding:o}).fn(n):{}:i?vx({element:i,padding:o}).fn(n):{}}}},W2=(t,s)=>({...M2(t),options:[t,s]}),K2=(t,s)=>({...O2(t),options:[t,s]}),G2=(t,s)=>({...z2(t),options:[t,s]}),J2=(t,s)=>({...L2(t),options:[t,s]}),Y2=(t,s)=>({...$2(t),options:[t,s]}),Q2=(t,s)=>({...F2(t),options:[t,s]}),X2=(t,s)=>({...H2(t),options:[t,s]});var Z2="Arrow",ry=v.forwardRef((t,s)=>{const{children:n,width:i=10,height:o=5,...l}=t;return e.jsx(Le.svg,{...l,ref:s,width:i,height:o,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:e.jsx("polygon",{points:"0,0 30,0 15,10"})})});ry.displayName=Z2;var eC=ry;function ny(t){const[s,n]=v.useState(void 0);return vt(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const i=new ResizeObserver(o=>{if(!Array.isArray(o)||!o.length)return;const l=o[0];let d,u;if("borderBoxSize"in l){const f=l.borderBoxSize,p=Array.isArray(f)?f[0]:f;d=p.inlineSize,u=p.blockSize}else d=t.offsetWidth,u=t.offsetHeight;n({width:d,height:u})});return i.observe(t,{box:"border-box"}),()=>i.unobserve(t)}else n(void 0)},[t]),s}var xf="Popper",[ay,Uc]=Ns(xf),[tC,iy]=ay(xf),oy=t=>{const{__scopePopper:s,children:n}=t,[i,o]=v.useState(null);return e.jsx(tC,{scope:s,anchor:i,onAnchorChange:o,children:n})};oy.displayName=xf;var ly="PopperAnchor",cy=v.forwardRef((t,s)=>{const{__scopePopper:n,virtualRef:i,...o}=t,l=iy(ly,n),d=v.useRef(null),u=Ye(s,d),f=v.useRef(null);return v.useEffect(()=>{const p=f.current;f.current=i?.current||d.current,p!==f.current&&l.onAnchorChange(f.current)}),i?null:e.jsx(Le.div,{...o,ref:u})});cy.displayName=ly;var vf="PopperContent",[sC,rC]=ay(vf),dy=v.forwardRef((t,s)=>{const{__scopePopper:n,side:i="bottom",sideOffset:o=0,align:l="center",alignOffset:d=0,arrowPadding:u=0,avoidCollisions:f=!0,collisionBoundary:p=[],collisionPadding:g=0,sticky:h="partial",hideWhenDetached:y=!1,updatePositionStrategy:j="optimized",onPlaced:b,...w}=t,S=iy(vf,n),[k,C]=v.useState(null),E=Ye(s,W=>C(W)),[P,T]=v.useState(null),A=ny(P),R=A?.width??0,$=A?.height??0,J=i+(l!=="center"?"-"+l:""),z=typeof g=="number"?g:{top:0,right:0,bottom:0,left:0,...g},q=Array.isArray(p)?p:[p],Q=q.length>0,Z={padding:z,boundary:q.filter(aC),altBoundary:Q},{refs:he,floatingStyles:se,placement:te,isPositioned:ne,middlewareData:U}=q2({strategy:"fixed",placement:J,whileElementsMounted:(...W)=>D2(...W,{animationFrame:j==="always"}),elements:{reference:S.anchor},middleware:[W2({mainAxis:o+$,alignmentAxis:d}),f&&K2({mainAxis:!0,crossAxis:!1,limiter:h==="partial"?G2():void 0,...Z}),f&&J2({...Z}),Y2({...Z,apply:({elements:W,rects:X,availableWidth:xe,availableHeight:ye})=>{const{width:je,height:Ne}=X.reference,Xe=W.floating.style;Xe.setProperty("--radix-popper-available-width",`${xe}px`),Xe.setProperty("--radix-popper-available-height",`${ye}px`),Xe.setProperty("--radix-popper-anchor-width",`${je}px`),Xe.setProperty("--radix-popper-anchor-height",`${Ne}px`)}}),P&&X2({element:P,padding:u}),iC({arrowWidth:R,arrowHeight:$}),y&&Q2({strategy:"referenceHidden",...Z})]}),[M,H]=fy(te),I=Ot(b);vt(()=>{ne&&I?.()},[ne,I]);const V=U.arrow?.x,D=U.arrow?.y,ae=U.arrow?.centerOffset!==0,[ce,pe]=v.useState();return vt(()=>{k&&pe(window.getComputedStyle(k).zIndex)},[k]),e.jsx("div",{ref:he.setFloating,"data-radix-popper-content-wrapper":"",style:{...se,transform:ne?se.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:ce,"--radix-popper-transform-origin":[U.transformOrigin?.x,U.transformOrigin?.y].join(" "),...U.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:e.jsx(sC,{scope:n,placedSide:M,onArrowChange:T,arrowX:V,arrowY:D,shouldHideArrow:ae,children:e.jsx(Le.div,{"data-side":M,"data-align":H,...w,ref:E,style:{...w.style,animation:ne?void 0:"none"}})})})});dy.displayName=vf;var uy="PopperArrow",nC={top:"bottom",right:"left",bottom:"top",left:"right"},my=v.forwardRef(function(s,n){const{__scopePopper:i,...o}=s,l=rC(uy,i),d=nC[l.placedSide];return e.jsx("span",{ref:l.onArrowChange,style:{position:"absolute",left:l.arrowX,top:l.arrowY,[d]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[l.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[l.placedSide],visibility:l.shouldHideArrow?"hidden":void 0},children:e.jsx(eC,{...o,ref:n,style:{...o.style,display:"block"}})})});my.displayName=uy;function aC(t){return t!==null}var iC=t=>({name:"transformOrigin",options:t,fn(s){const{placement:n,rects:i,middlewareData:o}=s,d=o.arrow?.centerOffset!==0,u=d?0:t.arrowWidth,f=d?0:t.arrowHeight,[p,g]=fy(n),h={start:"0%",center:"50%",end:"100%"}[g],y=(o.arrow?.x??0)+u/2,j=(o.arrow?.y??0)+f/2;let b="",w="";return p==="bottom"?(b=d?h:`${y}px`,w=`${-f}px`):p==="top"?(b=d?h:`${y}px`,w=`${i.floating.height+f}px`):p==="right"?(b=`${-f}px`,w=d?h:`${j}px`):p==="left"&&(b=`${i.floating.width+f}px`,w=d?h:`${j}px`),{data:{x:b,y:w}}}});function fy(t){const[s,n="center"]=t.split("-");return[s,n]}var hy=oy,py=cy,gy=dy,xy=my,oC="Portal",Vc=v.forwardRef((t,s)=>{const{container:n,...i}=t,[o,l]=v.useState(!1);vt(()=>l(!0),[]);const d=n||o&&globalThis?.document?.body;return d?Bv.createPortal(e.jsx(Le.div,{...i,ref:s}),d):null});Vc.displayName=oC;var lC=gv[" useInsertionEffect ".trim().toString()]||vt;function Ir({prop:t,defaultProp:s,onChange:n=()=>{},caller:i}){const[o,l,d]=cC({defaultProp:s,onChange:n}),u=t!==void 0,f=u?t:o;{const g=v.useRef(t!==void 0);v.useEffect(()=>{const h=g.current;h!==u&&console.warn(`${i} is changing from ${h?"controlled":"uncontrolled"} to ${u?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),g.current=u},[u,i])}const p=v.useCallback(g=>{if(u){const h=dC(g)?g(t):g;h!==t&&d.current?.(h)}else l(g)},[u,t,l,d]);return[f,p]}function cC({defaultProp:t,onChange:s}){const[n,i]=v.useState(t),o=v.useRef(n),l=v.useRef(s);return lC(()=>{l.current=s},[s]),v.useEffect(()=>{o.current!==n&&(l.current?.(n),o.current=n)},[n,o]),[n,i,l]}function dC(t){return typeof t=="function"}function vy(t){const s=v.useRef({value:t,previous:t});return v.useMemo(()=>(s.current.value!==t&&(s.current.previous=s.current.value,s.current.value=t),s.current.previous),[t])}var yy=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),uC="VisuallyHidden",mC=v.forwardRef((t,s)=>e.jsx(Le.span,{...t,ref:s,style:{...yy,...t.style}}));mC.displayName=uC;var fC=function(t){if(typeof document>"u")return null;var s=Array.isArray(t)?t[0]:t;return s.ownerDocument.body},Ya=new WeakMap,Kl=new WeakMap,Gl={},sm=0,wy=function(t){return t&&(t.host||wy(t.parentNode))},hC=function(t,s){return s.map(function(n){if(t.contains(n))return n;var i=wy(n);return i&&t.contains(i)?i:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},pC=function(t,s,n,i){var o=hC(s,Array.isArray(t)?t:[t]);Gl[n]||(Gl[n]=new WeakMap);var l=Gl[n],d=[],u=new Set,f=new Set(o),p=function(h){!h||u.has(h)||(u.add(h),p(h.parentNode))};o.forEach(p);var g=function(h){!h||f.has(h)||Array.prototype.forEach.call(h.children,function(y){if(u.has(y))g(y);else try{var j=y.getAttribute(i),b=j!==null&&j!=="false",w=(Ya.get(y)||0)+1,S=(l.get(y)||0)+1;Ya.set(y,w),l.set(y,S),d.push(y),w===1&&b&&Kl.set(y,!0),S===1&&y.setAttribute(n,"true"),b||y.setAttribute(i,"true")}catch(k){console.error("aria-hidden: cannot operate on ",y,k)}})};return g(s),u.clear(),sm++,function(){d.forEach(function(h){var y=Ya.get(h)-1,j=l.get(h)-1;Ya.set(h,y),l.set(h,j),y||(Kl.has(h)||h.removeAttribute(i),Kl.delete(h)),j||h.removeAttribute(n)}),sm--,sm||(Ya=new WeakMap,Ya=new WeakMap,Kl=new WeakMap,Gl={})}},yf=function(t,s,n){n===void 0&&(n="data-aria-hidden");var i=Array.from(Array.isArray(t)?t:[t]),o=fC(t);return o?(i.push.apply(i,Array.from(o.querySelectorAll("[aria-live], script"))),pC(i,o,n,"aria-hidden")):function(){return null}},br=function(){return br=Object.assign||function(s){for(var n,i=1,o=arguments.length;i<o;i++){n=arguments[i];for(var l in n)Object.prototype.hasOwnProperty.call(n,l)&&(s[l]=n[l])}return s},br.apply(this,arguments)};function by(t,s){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&s.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(t);o<i.length;o++)s.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(t,i[o])&&(n[i[o]]=t[i[o]]);return n}function gC(t,s,n){if(n||arguments.length===2)for(var i=0,o=s.length,l;i<o;i++)(l||!(i in s))&&(l||(l=Array.prototype.slice.call(s,0,i)),l[i]=s[i]);return t.concat(l||Array.prototype.slice.call(s))}var lc="right-scroll-bar-position",cc="width-before-scroll-bar",xC="with-scroll-bars-hidden",vC="--removed-body-scroll-bar-size";function rm(t,s){return typeof t=="function"?t(s):t&&(t.current=s),t}function yC(t,s){var n=v.useState(function(){return{value:t,callback:s,facade:{get current(){return n.value},set current(i){var o=n.value;o!==i&&(n.value=i,n.callback(i,o))}}}})[0];return n.callback=s,n.facade}var wC=typeof window<"u"?v.useLayoutEffect:v.useEffect,wx=new WeakMap;function bC(t,s){var n=yC(null,function(i){return t.forEach(function(o){return rm(o,i)})});return wC(function(){var i=wx.get(n);if(i){var o=new Set(i),l=new Set(t),d=n.current;o.forEach(function(u){l.has(u)||rm(u,null)}),l.forEach(function(u){o.has(u)||rm(u,d)})}wx.set(n,t)},[t]),n}function jC(t){return t}function NC(t,s){s===void 0&&(s=jC);var n=[],i=!1,o={read:function(){if(i)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(l){var d=s(l,i);return n.push(d),function(){n=n.filter(function(u){return u!==d})}},assignSyncMedium:function(l){for(i=!0;n.length;){var d=n;n=[],d.forEach(l)}n={push:function(u){return l(u)},filter:function(){return n}}},assignMedium:function(l){i=!0;var d=[];if(n.length){var u=n;n=[],u.forEach(l),d=n}var f=function(){var g=d;d=[],g.forEach(l)},p=function(){return Promise.resolve().then(f)};p(),n={push:function(g){d.push(g),p()},filter:function(g){return d=d.filter(g),n}}}};return o}function SC(t){t===void 0&&(t={});var s=NC(null);return s.options=br({async:!0,ssr:!1},t),s}var jy=function(t){var s=t.sideCar,n=by(t,["sideCar"]);if(!s)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var i=s.read();if(!i)throw new Error("Sidecar medium not found");return v.createElement(i,br({},n))};jy.isSideCarExport=!0;function kC(t,s){return t.useMedium(s),jy}var Ny=SC(),nm=function(){},qc=v.forwardRef(function(t,s){var n=v.useRef(null),i=v.useState({onScrollCapture:nm,onWheelCapture:nm,onTouchMoveCapture:nm}),o=i[0],l=i[1],d=t.forwardProps,u=t.children,f=t.className,p=t.removeScrollBar,g=t.enabled,h=t.shards,y=t.sideCar,j=t.noRelative,b=t.noIsolation,w=t.inert,S=t.allowPinchZoom,k=t.as,C=k===void 0?"div":k,E=t.gapMode,P=by(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),T=y,A=bC([n,s]),R=br(br({},P),o);return v.createElement(v.Fragment,null,g&&v.createElement(T,{sideCar:Ny,removeScrollBar:p,shards:h,noRelative:j,noIsolation:b,inert:w,setCallbacks:l,allowPinchZoom:!!S,lockRef:n,gapMode:E}),d?v.cloneElement(v.Children.only(u),br(br({},R),{ref:A})):v.createElement(C,br({},R,{className:f,ref:A}),u))});qc.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};qc.classNames={fullWidth:cc,zeroRight:lc};var CC=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function _C(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var s=CC();return s&&t.setAttribute("nonce",s),t}function EC(t,s){t.styleSheet?t.styleSheet.cssText=s:t.appendChild(document.createTextNode(s))}function TC(t){var s=document.head||document.getElementsByTagName("head")[0];s.appendChild(t)}var PC=function(){var t=0,s=null;return{add:function(n){t==0&&(s=_C())&&(EC(s,n),TC(s)),t++},remove:function(){t--,!t&&s&&(s.parentNode&&s.parentNode.removeChild(s),s=null)}}},IC=function(){var t=PC();return function(s,n){v.useEffect(function(){return t.add(s),function(){t.remove()}},[s&&n])}},Sy=function(){var t=IC(),s=function(n){var i=n.styles,o=n.dynamic;return t(i,o),null};return s},AC={left:0,top:0,right:0,gap:0},am=function(t){return parseInt(t||"",10)||0},RC=function(t){var s=window.getComputedStyle(document.body),n=s[t==="padding"?"paddingLeft":"marginLeft"],i=s[t==="padding"?"paddingTop":"marginTop"],o=s[t==="padding"?"paddingRight":"marginRight"];return[am(n),am(i),am(o)]},DC=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return AC;var s=RC(t),n=document.documentElement.clientWidth,i=window.innerWidth;return{left:s[0],top:s[1],right:s[2],gap:Math.max(0,i-n+s[2]-s[0])}},MC=Sy(),fi="data-scroll-locked",OC=function(t,s,n,i){var o=t.left,l=t.top,d=t.right,u=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(xC,` {
   overflow: hidden `).concat(i,`;
   padding-right: `).concat(u,"px ").concat(i,`;
  }
  body[`).concat(fi,`] {
    overflow: hidden `).concat(i,`;
    overscroll-behavior: contain;
    `).concat([s&&"position: relative ".concat(i,";"),n==="margin"&&`
    padding-left: `.concat(o,`px;
    padding-top: `).concat(l,`px;
    padding-right: `).concat(d,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(u,"px ").concat(i,`;
    `),n==="padding"&&"padding-right: ".concat(u,"px ").concat(i,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(lc,` {
    right: `).concat(u,"px ").concat(i,`;
  }
  
  .`).concat(cc,` {
    margin-right: `).concat(u,"px ").concat(i,`;
  }
  
  .`).concat(lc," .").concat(lc,` {
    right: 0 `).concat(i,`;
  }
  
  .`).concat(cc," .").concat(cc,` {
    margin-right: 0 `).concat(i,`;
  }
  
  body[`).concat(fi,`] {
    `).concat(vC,": ").concat(u,`px;
  }
`)},bx=function(){var t=parseInt(document.body.getAttribute(fi)||"0",10);return isFinite(t)?t:0},LC=function(){v.useEffect(function(){return document.body.setAttribute(fi,(bx()+1).toString()),function(){var t=bx()-1;t<=0?document.body.removeAttribute(fi):document.body.setAttribute(fi,t.toString())}},[])},$C=function(t){var s=t.noRelative,n=t.noImportant,i=t.gapMode,o=i===void 0?"margin":i;LC();var l=v.useMemo(function(){return DC(o)},[o]);return v.createElement(MC,{styles:OC(l,!s,o,n?"":"!important")})},Am=!1;if(typeof window<"u")try{var Jl=Object.defineProperty({},"passive",{get:function(){return Am=!0,!0}});window.addEventListener("test",Jl,Jl),window.removeEventListener("test",Jl,Jl)}catch{Am=!1}var Qa=Am?{passive:!1}:!1,FC=function(t){return t.tagName==="TEXTAREA"},ky=function(t,s){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[s]!=="hidden"&&!(n.overflowY===n.overflowX&&!FC(t)&&n[s]==="visible")},zC=function(t){return ky(t,"overflowY")},BC=function(t){return ky(t,"overflowX")},jx=function(t,s){var n=s.ownerDocument,i=s;do{typeof ShadowRoot<"u"&&i instanceof ShadowRoot&&(i=i.host);var o=Cy(t,i);if(o){var l=_y(t,i),d=l[1],u=l[2];if(d>u)return!0}i=i.parentNode}while(i&&i!==n.body);return!1},UC=function(t){var s=t.scrollTop,n=t.scrollHeight,i=t.clientHeight;return[s,n,i]},VC=function(t){var s=t.scrollLeft,n=t.scrollWidth,i=t.clientWidth;return[s,n,i]},Cy=function(t,s){return t==="v"?zC(s):BC(s)},_y=function(t,s){return t==="v"?UC(s):VC(s)},qC=function(t,s){return t==="h"&&s==="rtl"?-1:1},HC=function(t,s,n,i,o){var l=qC(t,window.getComputedStyle(s).direction),d=l*i,u=n.target,f=s.contains(u),p=!1,g=d>0,h=0,y=0;do{if(!u)break;var j=_y(t,u),b=j[0],w=j[1],S=j[2],k=w-S-l*b;(b||k)&&Cy(t,u)&&(h+=k,y+=b);var C=u.parentNode;u=C&&C.nodeType===Node.DOCUMENT_FRAGMENT_NODE?C.host:C}while(!f&&u!==document.body||f&&(s.contains(u)||s===u));return(g&&Math.abs(h)<1||!g&&Math.abs(y)<1)&&(p=!0),p},Yl=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},Nx=function(t){return[t.deltaX,t.deltaY]},Sx=function(t){return t&&"current"in t?t.current:t},WC=function(t,s){return t[0]===s[0]&&t[1]===s[1]},KC=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},GC=0,Xa=[];function JC(t){var s=v.useRef([]),n=v.useRef([0,0]),i=v.useRef(),o=v.useState(GC++)[0],l=v.useState(Sy)[0],d=v.useRef(t);v.useEffect(function(){d.current=t},[t]),v.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(o));var w=gC([t.lockRef.current],(t.shards||[]).map(Sx),!0).filter(Boolean);return w.forEach(function(S){return S.classList.add("allow-interactivity-".concat(o))}),function(){document.body.classList.remove("block-interactivity-".concat(o)),w.forEach(function(S){return S.classList.remove("allow-interactivity-".concat(o))})}}},[t.inert,t.lockRef.current,t.shards]);var u=v.useCallback(function(w,S){if("touches"in w&&w.touches.length===2||w.type==="wheel"&&w.ctrlKey)return!d.current.allowPinchZoom;var k=Yl(w),C=n.current,E="deltaX"in w?w.deltaX:C[0]-k[0],P="deltaY"in w?w.deltaY:C[1]-k[1],T,A=w.target,R=Math.abs(E)>Math.abs(P)?"h":"v";if("touches"in w&&R==="h"&&A.type==="range")return!1;var $=jx(R,A);if(!$)return!0;if($?T=R:(T=R==="v"?"h":"v",$=jx(R,A)),!$)return!1;if(!i.current&&"changedTouches"in w&&(E||P)&&(i.current=T),!T)return!0;var J=i.current||T;return HC(J,S,w,J==="h"?E:P)},[]),f=v.useCallback(function(w){var S=w;if(!(!Xa.length||Xa[Xa.length-1]!==l)){var k="deltaY"in S?Nx(S):Yl(S),C=s.current.filter(function(T){return T.name===S.type&&(T.target===S.target||S.target===T.shadowParent)&&WC(T.delta,k)})[0];if(C&&C.should){S.cancelable&&S.preventDefault();return}if(!C){var E=(d.current.shards||[]).map(Sx).filter(Boolean).filter(function(T){return T.contains(S.target)}),P=E.length>0?u(S,E[0]):!d.current.noIsolation;P&&S.cancelable&&S.preventDefault()}}},[]),p=v.useCallback(function(w,S,k,C){var E={name:w,delta:S,target:k,should:C,shadowParent:YC(k)};s.current.push(E),setTimeout(function(){s.current=s.current.filter(function(P){return P!==E})},1)},[]),g=v.useCallback(function(w){n.current=Yl(w),i.current=void 0},[]),h=v.useCallback(function(w){p(w.type,Nx(w),w.target,u(w,t.lockRef.current))},[]),y=v.useCallback(function(w){p(w.type,Yl(w),w.target,u(w,t.lockRef.current))},[]);v.useEffect(function(){return Xa.push(l),t.setCallbacks({onScrollCapture:h,onWheelCapture:h,onTouchMoveCapture:y}),document.addEventListener("wheel",f,Qa),document.addEventListener("touchmove",f,Qa),document.addEventListener("touchstart",g,Qa),function(){Xa=Xa.filter(function(w){return w!==l}),document.removeEventListener("wheel",f,Qa),document.removeEventListener("touchmove",f,Qa),document.removeEventListener("touchstart",g,Qa)}},[]);var j=t.removeScrollBar,b=t.inert;return v.createElement(v.Fragment,null,b?v.createElement(l,{styles:KC(o)}):null,j?v.createElement($C,{noRelative:t.noRelative,gapMode:t.gapMode}):null)}function YC(t){for(var s=null;t!==null;)t instanceof ShadowRoot&&(s=t.host,t=t.host),t=t.parentNode;return s}const QC=kC(Ny,JC);var Hc=v.forwardRef(function(t,s){return v.createElement(qc,br({},t,{ref:s,sideCar:QC}))});Hc.classNames=qc.classNames;var XC=[" ","Enter","ArrowUp","ArrowDown"],ZC=[" ","Enter"],va="Select",[Wc,Kc,e_]=Mc(va),[_i]=Ns(va,[e_,Uc]),Gc=Uc(),[t_,Fn]=_i(va),[s_,r_]=_i(va),Ey=t=>{const{__scopeSelect:s,children:n,open:i,defaultOpen:o,onOpenChange:l,value:d,defaultValue:u,onValueChange:f,dir:p,name:g,autoComplete:h,disabled:y,required:j,form:b}=t,w=Gc(s),[S,k]=v.useState(null),[C,E]=v.useState(null),[P,T]=v.useState(!1),A=Si(p),[R,$]=Ir({prop:i,defaultProp:o??!1,onChange:l,caller:va}),[J,z]=Ir({prop:d,defaultProp:u,onChange:f,caller:va}),q=v.useRef(null),Q=S?b||!!S.closest("form"):!0,[Z,he]=v.useState(new Set),se=Array.from(Z).map(te=>te.props.value).join(";");return e.jsx(hy,{...w,children:e.jsxs(t_,{required:j,scope:s,trigger:S,onTriggerChange:k,valueNode:C,onValueNodeChange:E,valueNodeHasChildren:P,onValueNodeHasChildrenChange:T,contentId:Bs(),value:J,onValueChange:z,open:R,onOpenChange:$,dir:A,triggerPointerDownPosRef:q,disabled:y,children:[e.jsx(Wc.Provider,{scope:s,children:e.jsx(s_,{scope:t.__scopeSelect,onNativeOptionAdd:v.useCallback(te=>{he(ne=>new Set(ne).add(te))},[]),onNativeOptionRemove:v.useCallback(te=>{he(ne=>{const U=new Set(ne);return U.delete(te),U})},[]),children:n})}),Q?e.jsxs(Yy,{"aria-hidden":!0,required:j,tabIndex:-1,name:g,autoComplete:h,value:J,onChange:te=>z(te.target.value),disabled:y,form:b,children:[J===void 0?e.jsx("option",{value:""}):null,Array.from(Z)]},se):null]})})};Ey.displayName=va;var Ty="SelectTrigger",Py=v.forwardRef((t,s)=>{const{__scopeSelect:n,disabled:i=!1,...o}=t,l=Gc(n),d=Fn(Ty,n),u=d.disabled||i,f=Ye(s,d.onTriggerChange),p=Kc(n),g=v.useRef("touch"),[h,y,j]=Xy(w=>{const S=p().filter(E=>!E.disabled),k=S.find(E=>E.value===d.value),C=Zy(S,w,k);C!==void 0&&d.onValueChange(C.value)}),b=w=>{u||(d.onOpenChange(!0),j()),w&&(d.triggerPointerDownPosRef.current={x:Math.round(w.pageX),y:Math.round(w.pageY)})};return e.jsx(py,{asChild:!0,...l,children:e.jsx(Le.button,{type:"button",role:"combobox","aria-controls":d.contentId,"aria-expanded":d.open,"aria-required":d.required,"aria-autocomplete":"none",dir:d.dir,"data-state":d.open?"open":"closed",disabled:u,"data-disabled":u?"":void 0,"data-placeholder":Qy(d.value)?"":void 0,...o,ref:f,onClick:be(o.onClick,w=>{w.currentTarget.focus(),g.current!=="mouse"&&b(w)}),onPointerDown:be(o.onPointerDown,w=>{g.current=w.pointerType;const S=w.target;S.hasPointerCapture(w.pointerId)&&S.releasePointerCapture(w.pointerId),w.button===0&&w.ctrlKey===!1&&w.pointerType==="mouse"&&(b(w),w.preventDefault())}),onKeyDown:be(o.onKeyDown,w=>{const S=h.current!=="";!(w.ctrlKey||w.altKey||w.metaKey)&&w.key.length===1&&y(w.key),!(S&&w.key===" ")&&XC.includes(w.key)&&(b(),w.preventDefault())})})})});Py.displayName=Ty;var Iy="SelectValue",Ay=v.forwardRef((t,s)=>{const{__scopeSelect:n,className:i,style:o,children:l,placeholder:d="",...u}=t,f=Fn(Iy,n),{onValueNodeHasChildrenChange:p}=f,g=l!==void 0,h=Ye(s,f.onValueNodeChange);return vt(()=>{p(g)},[p,g]),e.jsx(Le.span,{...u,ref:h,style:{pointerEvents:"none"},children:Qy(f.value)?e.jsx(e.Fragment,{children:d}):l})});Ay.displayName=Iy;var n_="SelectIcon",Ry=v.forwardRef((t,s)=>{const{__scopeSelect:n,children:i,...o}=t;return e.jsx(Le.span,{"aria-hidden":!0,...o,ref:s,children:i||"▼"})});Ry.displayName=n_;var a_="SelectPortal",Dy=t=>e.jsx(Vc,{asChild:!0,...t});Dy.displayName=a_;var ya="SelectContent",My=v.forwardRef((t,s)=>{const n=Fn(ya,t.__scopeSelect),[i,o]=v.useState();if(vt(()=>{o(new DocumentFragment)},[]),!n.open){const l=i;return l?Ao.createPortal(e.jsx(Oy,{scope:t.__scopeSelect,children:e.jsx(Wc.Slot,{scope:t.__scopeSelect,children:e.jsx("div",{children:t.children})})}),l):null}return e.jsx(Ly,{...t,ref:s})});My.displayName=ya;var Zs=10,[Oy,zn]=_i(ya),i_="SelectContentImpl",o_=ha("SelectContent.RemoveScroll"),Ly=v.forwardRef((t,s)=>{const{__scopeSelect:n,position:i="item-aligned",onCloseAutoFocus:o,onEscapeKeyDown:l,onPointerDownOutside:d,side:u,sideOffset:f,align:p,alignOffset:g,arrowPadding:h,collisionBoundary:y,collisionPadding:j,sticky:b,hideWhenDetached:w,avoidCollisions:S,...k}=t,C=Fn(ya,n),[E,P]=v.useState(null),[T,A]=v.useState(null),R=Ye(s,W=>P(W)),[$,J]=v.useState(null),[z,q]=v.useState(null),Q=Kc(n),[Z,he]=v.useState(!1),se=v.useRef(!1);v.useEffect(()=>{if(E)return yf(E)},[E]),df();const te=v.useCallback(W=>{const[X,...xe]=Q().map(Ne=>Ne.ref.current),[ye]=xe.slice(-1),je=document.activeElement;for(const Ne of W)if(Ne===je||(Ne?.scrollIntoView({block:"nearest"}),Ne===X&&T&&(T.scrollTop=0),Ne===ye&&T&&(T.scrollTop=T.scrollHeight),Ne?.focus(),document.activeElement!==je))return},[Q,T]),ne=v.useCallback(()=>te([$,E]),[te,$,E]);v.useEffect(()=>{Z&&ne()},[Z,ne]);const{onOpenChange:U,triggerPointerDownPosRef:M}=C;v.useEffect(()=>{if(E){let W={x:0,y:0};const X=ye=>{W={x:Math.abs(Math.round(ye.pageX)-(M.current?.x??0)),y:Math.abs(Math.round(ye.pageY)-(M.current?.y??0))}},xe=ye=>{W.x<=10&&W.y<=10?ye.preventDefault():E.contains(ye.target)||U(!1),document.removeEventListener("pointermove",X),M.current=null};return M.current!==null&&(document.addEventListener("pointermove",X),document.addEventListener("pointerup",xe,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",X),document.removeEventListener("pointerup",xe,{capture:!0})}}},[E,U,M]),v.useEffect(()=>{const W=()=>U(!1);return window.addEventListener("blur",W),window.addEventListener("resize",W),()=>{window.removeEventListener("blur",W),window.removeEventListener("resize",W)}},[U]);const[H,I]=Xy(W=>{const X=Q().filter(je=>!je.disabled),xe=X.find(je=>je.ref.current===document.activeElement),ye=Zy(X,W,xe);ye&&setTimeout(()=>ye.ref.current.focus())}),V=v.useCallback((W,X,xe)=>{const ye=!se.current&&!xe;(C.value!==void 0&&C.value===X||ye)&&(J(W),ye&&(se.current=!0))},[C.value]),D=v.useCallback(()=>E?.focus(),[E]),ae=v.useCallback((W,X,xe)=>{const ye=!se.current&&!xe;(C.value!==void 0&&C.value===X||ye)&&q(W)},[C.value]),ce=i==="popper"?Rm:$y,pe=ce===Rm?{side:u,sideOffset:f,align:p,alignOffset:g,arrowPadding:h,collisionBoundary:y,collisionPadding:j,sticky:b,hideWhenDetached:w,avoidCollisions:S}:{};return e.jsx(Oy,{scope:n,content:E,viewport:T,onViewportChange:A,itemRefCallback:V,selectedItem:$,onItemLeave:D,itemTextRefCallback:ae,focusSelectedItem:ne,selectedItemText:z,position:i,isPositioned:Z,searchRef:H,children:e.jsx(Hc,{as:o_,allowPinchZoom:!0,children:e.jsx(Lc,{asChild:!0,trapped:C.open,onMountAutoFocus:W=>{W.preventDefault()},onUnmountAutoFocus:be(o,W=>{C.trigger?.focus({preventScroll:!0}),W.preventDefault()}),children:e.jsx(Oc,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:l,onPointerDownOutside:d,onFocusOutside:W=>W.preventDefault(),onDismiss:()=>C.onOpenChange(!1),children:e.jsx(ce,{role:"listbox",id:C.contentId,"data-state":C.open?"open":"closed",dir:C.dir,onContextMenu:W=>W.preventDefault(),...k,...pe,onPlaced:()=>he(!0),ref:R,style:{display:"flex",flexDirection:"column",outline:"none",...k.style},onKeyDown:be(k.onKeyDown,W=>{const X=W.ctrlKey||W.altKey||W.metaKey;if(W.key==="Tab"&&W.preventDefault(),!X&&W.key.length===1&&I(W.key),["ArrowUp","ArrowDown","Home","End"].includes(W.key)){let ye=Q().filter(je=>!je.disabled).map(je=>je.ref.current);if(["ArrowUp","End"].includes(W.key)&&(ye=ye.slice().reverse()),["ArrowUp","ArrowDown"].includes(W.key)){const je=W.target,Ne=ye.indexOf(je);ye=ye.slice(Ne+1)}setTimeout(()=>te(ye)),W.preventDefault()}})})})})})})});Ly.displayName=i_;var l_="SelectItemAlignedPosition",$y=v.forwardRef((t,s)=>{const{__scopeSelect:n,onPlaced:i,...o}=t,l=Fn(ya,n),d=zn(ya,n),[u,f]=v.useState(null),[p,g]=v.useState(null),h=Ye(s,R=>g(R)),y=Kc(n),j=v.useRef(!1),b=v.useRef(!0),{viewport:w,selectedItem:S,selectedItemText:k,focusSelectedItem:C}=d,E=v.useCallback(()=>{if(l.trigger&&l.valueNode&&u&&p&&w&&S&&k){const R=l.trigger.getBoundingClientRect(),$=p.getBoundingClientRect(),J=l.valueNode.getBoundingClientRect(),z=k.getBoundingClientRect();if(l.dir!=="rtl"){const je=z.left-$.left,Ne=J.left-je,Xe=R.left-Ne,st=R.width+Xe,ms=Math.max(st,$.width),Ss=window.innerWidth-Zs,qt=_m(Ne,[Zs,Math.max(Zs,Ss-ms)]);u.style.minWidth=st+"px",u.style.left=qt+"px"}else{const je=$.right-z.right,Ne=window.innerWidth-J.right-je,Xe=window.innerWidth-R.right-Ne,st=R.width+Xe,ms=Math.max(st,$.width),Ss=window.innerWidth-Zs,qt=_m(Ne,[Zs,Math.max(Zs,Ss-ms)]);u.style.minWidth=st+"px",u.style.right=qt+"px"}const q=y(),Q=window.innerHeight-Zs*2,Z=w.scrollHeight,he=window.getComputedStyle(p),se=parseInt(he.borderTopWidth,10),te=parseInt(he.paddingTop,10),ne=parseInt(he.borderBottomWidth,10),U=parseInt(he.paddingBottom,10),M=se+te+Z+U+ne,H=Math.min(S.offsetHeight*5,M),I=window.getComputedStyle(w),V=parseInt(I.paddingTop,10),D=parseInt(I.paddingBottom,10),ae=R.top+R.height/2-Zs,ce=Q-ae,pe=S.offsetHeight/2,W=S.offsetTop+pe,X=se+te+W,xe=M-X;if(X<=ae){const je=q.length>0&&S===q[q.length-1].ref.current;u.style.bottom="0px";const Ne=p.clientHeight-w.offsetTop-w.offsetHeight,Xe=Math.max(ce,pe+(je?D:0)+Ne+ne),st=X+Xe;u.style.height=st+"px"}else{const je=q.length>0&&S===q[0].ref.current;u.style.top="0px";const Xe=Math.max(ae,se+w.offsetTop+(je?V:0)+pe)+xe;u.style.height=Xe+"px",w.scrollTop=X-ae+w.offsetTop}u.style.margin=`${Zs}px 0`,u.style.minHeight=H+"px",u.style.maxHeight=Q+"px",i?.(),requestAnimationFrame(()=>j.current=!0)}},[y,l.trigger,l.valueNode,u,p,w,S,k,l.dir,i]);vt(()=>E(),[E]);const[P,T]=v.useState();vt(()=>{p&&T(window.getComputedStyle(p).zIndex)},[p]);const A=v.useCallback(R=>{R&&b.current===!0&&(E(),C?.(),b.current=!1)},[E,C]);return e.jsx(d_,{scope:n,contentWrapper:u,shouldExpandOnScrollRef:j,onScrollButtonChange:A,children:e.jsx("div",{ref:f,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:P},children:e.jsx(Le.div,{...o,ref:h,style:{boxSizing:"border-box",maxHeight:"100%",...o.style}})})})});$y.displayName=l_;var c_="SelectPopperPosition",Rm=v.forwardRef((t,s)=>{const{__scopeSelect:n,align:i="start",collisionPadding:o=Zs,...l}=t,d=Gc(n);return e.jsx(gy,{...d,...l,ref:s,align:i,collisionPadding:o,style:{boxSizing:"border-box",...l.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});Rm.displayName=c_;var[d_,wf]=_i(ya,{}),Dm="SelectViewport",Fy=v.forwardRef((t,s)=>{const{__scopeSelect:n,nonce:i,...o}=t,l=zn(Dm,n),d=wf(Dm,n),u=Ye(s,l.onViewportChange),f=v.useRef(0);return e.jsxs(e.Fragment,{children:[e.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:i}),e.jsx(Wc.Slot,{scope:n,children:e.jsx(Le.div,{"data-radix-select-viewport":"",role:"presentation",...o,ref:u,style:{position:"relative",flex:1,overflow:"hidden auto",...o.style},onScroll:be(o.onScroll,p=>{const g=p.currentTarget,{contentWrapper:h,shouldExpandOnScrollRef:y}=d;if(y?.current&&h){const j=Math.abs(f.current-g.scrollTop);if(j>0){const b=window.innerHeight-Zs*2,w=parseFloat(h.style.minHeight),S=parseFloat(h.style.height),k=Math.max(w,S);if(k<b){const C=k+j,E=Math.min(b,C),P=C-E;h.style.height=E+"px",h.style.bottom==="0px"&&(g.scrollTop=P>0?P:0,h.style.justifyContent="flex-end")}}}f.current=g.scrollTop})})})]})});Fy.displayName=Dm;var zy="SelectGroup",[u_,m_]=_i(zy),f_=v.forwardRef((t,s)=>{const{__scopeSelect:n,...i}=t,o=Bs();return e.jsx(u_,{scope:n,id:o,children:e.jsx(Le.div,{role:"group","aria-labelledby":o,...i,ref:s})})});f_.displayName=zy;var By="SelectLabel",h_=v.forwardRef((t,s)=>{const{__scopeSelect:n,...i}=t,o=m_(By,n);return e.jsx(Le.div,{id:o.id,...i,ref:s})});h_.displayName=By;var wc="SelectItem",[p_,Uy]=_i(wc),Vy=v.forwardRef((t,s)=>{const{__scopeSelect:n,value:i,disabled:o=!1,textValue:l,...d}=t,u=Fn(wc,n),f=zn(wc,n),p=u.value===i,[g,h]=v.useState(l??""),[y,j]=v.useState(!1),b=Ye(s,C=>f.itemRefCallback?.(C,i,o)),w=Bs(),S=v.useRef("touch"),k=()=>{o||(u.onValueChange(i),u.onOpenChange(!1))};if(i==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return e.jsx(p_,{scope:n,value:i,disabled:o,textId:w,isSelected:p,onItemTextChange:v.useCallback(C=>{h(E=>E||(C?.textContent??"").trim())},[]),children:e.jsx(Wc.ItemSlot,{scope:n,value:i,disabled:o,textValue:g,children:e.jsx(Le.div,{role:"option","aria-labelledby":w,"data-highlighted":y?"":void 0,"aria-selected":p&&y,"data-state":p?"checked":"unchecked","aria-disabled":o||void 0,"data-disabled":o?"":void 0,tabIndex:o?void 0:-1,...d,ref:b,onFocus:be(d.onFocus,()=>j(!0)),onBlur:be(d.onBlur,()=>j(!1)),onClick:be(d.onClick,()=>{S.current!=="mouse"&&k()}),onPointerUp:be(d.onPointerUp,()=>{S.current==="mouse"&&k()}),onPointerDown:be(d.onPointerDown,C=>{S.current=C.pointerType}),onPointerMove:be(d.onPointerMove,C=>{S.current=C.pointerType,o?f.onItemLeave?.():S.current==="mouse"&&C.currentTarget.focus({preventScroll:!0})}),onPointerLeave:be(d.onPointerLeave,C=>{C.currentTarget===document.activeElement&&f.onItemLeave?.()}),onKeyDown:be(d.onKeyDown,C=>{f.searchRef?.current!==""&&C.key===" "||(ZC.includes(C.key)&&k(),C.key===" "&&C.preventDefault())})})})})});Vy.displayName=wc;var po="SelectItemText",qy=v.forwardRef((t,s)=>{const{__scopeSelect:n,className:i,style:o,...l}=t,d=Fn(po,n),u=zn(po,n),f=Uy(po,n),p=r_(po,n),[g,h]=v.useState(null),y=Ye(s,k=>h(k),f.onItemTextChange,k=>u.itemTextRefCallback?.(k,f.value,f.disabled)),j=g?.textContent,b=v.useMemo(()=>e.jsx("option",{value:f.value,disabled:f.disabled,children:j},f.value),[f.disabled,f.value,j]),{onNativeOptionAdd:w,onNativeOptionRemove:S}=p;return vt(()=>(w(b),()=>S(b)),[w,S,b]),e.jsxs(e.Fragment,{children:[e.jsx(Le.span,{id:f.textId,...l,ref:y}),f.isSelected&&d.valueNode&&!d.valueNodeHasChildren?Ao.createPortal(l.children,d.valueNode):null]})});qy.displayName=po;var Hy="SelectItemIndicator",Wy=v.forwardRef((t,s)=>{const{__scopeSelect:n,...i}=t;return Uy(Hy,n).isSelected?e.jsx(Le.span,{"aria-hidden":!0,...i,ref:s}):null});Wy.displayName=Hy;var Mm="SelectScrollUpButton",Ky=v.forwardRef((t,s)=>{const n=zn(Mm,t.__scopeSelect),i=wf(Mm,t.__scopeSelect),[o,l]=v.useState(!1),d=Ye(s,i.onScrollButtonChange);return vt(()=>{if(n.viewport&&n.isPositioned){let u=function(){const p=f.scrollTop>0;l(p)};const f=n.viewport;return u(),f.addEventListener("scroll",u),()=>f.removeEventListener("scroll",u)}},[n.viewport,n.isPositioned]),o?e.jsx(Jy,{...t,ref:d,onAutoScroll:()=>{const{viewport:u,selectedItem:f}=n;u&&f&&(u.scrollTop=u.scrollTop-f.offsetHeight)}}):null});Ky.displayName=Mm;var Om="SelectScrollDownButton",Gy=v.forwardRef((t,s)=>{const n=zn(Om,t.__scopeSelect),i=wf(Om,t.__scopeSelect),[o,l]=v.useState(!1),d=Ye(s,i.onScrollButtonChange);return vt(()=>{if(n.viewport&&n.isPositioned){let u=function(){const p=f.scrollHeight-f.clientHeight,g=Math.ceil(f.scrollTop)<p;l(g)};const f=n.viewport;return u(),f.addEventListener("scroll",u),()=>f.removeEventListener("scroll",u)}},[n.viewport,n.isPositioned]),o?e.jsx(Jy,{...t,ref:d,onAutoScroll:()=>{const{viewport:u,selectedItem:f}=n;u&&f&&(u.scrollTop=u.scrollTop+f.offsetHeight)}}):null});Gy.displayName=Om;var Jy=v.forwardRef((t,s)=>{const{__scopeSelect:n,onAutoScroll:i,...o}=t,l=zn("SelectScrollButton",n),d=v.useRef(null),u=Kc(n),f=v.useCallback(()=>{d.current!==null&&(window.clearInterval(d.current),d.current=null)},[]);return v.useEffect(()=>()=>f(),[f]),vt(()=>{u().find(g=>g.ref.current===document.activeElement)?.ref.current?.scrollIntoView({block:"nearest"})},[u]),e.jsx(Le.div,{"aria-hidden":!0,...o,ref:s,style:{flexShrink:0,...o.style},onPointerDown:be(o.onPointerDown,()=>{d.current===null&&(d.current=window.setInterval(i,50))}),onPointerMove:be(o.onPointerMove,()=>{l.onItemLeave?.(),d.current===null&&(d.current=window.setInterval(i,50))}),onPointerLeave:be(o.onPointerLeave,()=>{f()})})}),g_="SelectSeparator",x_=v.forwardRef((t,s)=>{const{__scopeSelect:n,...i}=t;return e.jsx(Le.div,{"aria-hidden":!0,...i,ref:s})});x_.displayName=g_;var Lm="SelectArrow",v_=v.forwardRef((t,s)=>{const{__scopeSelect:n,...i}=t,o=Gc(n),l=Fn(Lm,n),d=zn(Lm,n);return l.open&&d.position==="popper"?e.jsx(xy,{...o,...i,ref:s}):null});v_.displayName=Lm;var y_="SelectBubbleInput",Yy=v.forwardRef(({__scopeSelect:t,value:s,...n},i)=>{const o=v.useRef(null),l=Ye(i,o),d=vy(s);return v.useEffect(()=>{const u=o.current;if(!u)return;const f=window.HTMLSelectElement.prototype,g=Object.getOwnPropertyDescriptor(f,"value").set;if(d!==s&&g){const h=new Event("change",{bubbles:!0});g.call(u,s),u.dispatchEvent(h)}},[d,s]),e.jsx(Le.select,{...n,style:{...yy,...n.style},ref:l,defaultValue:s})});Yy.displayName=y_;function Qy(t){return t===""||t===void 0}function Xy(t){const s=Ot(t),n=v.useRef(""),i=v.useRef(0),o=v.useCallback(d=>{const u=n.current+d;s(u),(function f(p){n.current=p,window.clearTimeout(i.current),p!==""&&(i.current=window.setTimeout(()=>f(""),1e3))})(u)},[s]),l=v.useCallback(()=>{n.current="",window.clearTimeout(i.current)},[]);return v.useEffect(()=>()=>window.clearTimeout(i.current),[]),[n,o,l]}function Zy(t,s,n){const o=s.length>1&&Array.from(s).every(p=>p===s[0])?s[0]:s,l=n?t.indexOf(n):-1;let d=w_(t,Math.max(l,0));o.length===1&&(d=d.filter(p=>p!==n));const f=d.find(p=>p.textValue.toLowerCase().startsWith(o.toLowerCase()));return f!==n?f:void 0}function w_(t,s){return t.map((n,i)=>t[(s+i)%t.length])}var b_=Ey,j_=Py,N_=Ay,S_=Ry,k_=Dy,C_=My,__=Fy,E_=Vy,T_=qy,P_=Wy,I_=Ky,A_=Gy;function Yt({...t}){return e.jsx(b_,{"data-slot":"select",...t})}function Qt({...t}){return e.jsx(N_,{"data-slot":"select-value",...t})}function Xt({className:t,size:s="default",children:n,...i}){return e.jsxs(j_,{"data-slot":"select-trigger","data-size":s,className:Ve("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-full items-center justify-between gap-2 rounded-md border bg-input-background px-3 py-2 text-sm whitespace-nowrap transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...i,children:[n,e.jsx(S_,{asChild:!0,children:e.jsx(Rc,{className:"size-4 opacity-50"})})]})}function Zt({className:t,children:s,position:n="popper",...i}){return e.jsx(k_,{children:e.jsxs(C_,{"data-slot":"select-content",className:Ve("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:n,...i,children:[e.jsx(R_,{}),e.jsx(__,{className:Ve("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:s}),e.jsx(D_,{})]})})}function De({className:t,children:s,...n}){return e.jsxs(E_,{"data-slot":"select-item",className:Ve("hover:bg-[rgba(164,131,91,0.15)] hover:text-foreground focus:bg-[rgba(164,131,91,0.2)] focus:text-foreground data-[highlighted]:bg-[rgba(164,131,91,0.2)] data-[highlighted]:text-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2 transition-colors duration-150",t),...n,children:[e.jsx("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:e.jsx(P_,{children:e.jsx(Rv,{className:"size-4"})})}),e.jsx(T_,{children:s})]})}function R_({className:t,...s}){return e.jsx(I_,{"data-slot":"select-scroll-up-button",className:Ve("flex cursor-default items-center justify-center py-1",t),...s,children:e.jsx(Dv,{className:"size-4"})})}function D_({className:t,...s}){return e.jsx(A_,{"data-slot":"select-scroll-down-button",className:Ve("flex cursor-default items-center justify-center py-1",t),...s,children:e.jsx(Rc,{className:"size-4"})})}const jr={yangon:{name:"Yangon Region",cities:["Yangon","Thanlyin","Mingalardon","Insein","Hmawbi","Hlegu","Taikkyi"]},mandalay:{name:"Mandalay Region",cities:["Mandalay","Meiktila","Pyinoolwin","Kyaukse","Nyaung-U","Myingyan","Yamethin"]},naypyidaw:{name:"Naypyidaw Union Territory",cities:["Naypyidaw","Pyinmana","Lewe","Tatkon"]},ayeyarwady:{name:"Ayeyarwady Region",cities:["Pathein","Myaungmya","Bogalay","Pyapon","Labutta","Hinthada","Maubin"]},bago:{name:"Bago Region",cities:["Bago","Pyay","Taungoo","Thegon","Nyaunglebin","Kawa","Waw"]},magway:{name:"Magway Region",cities:["Magway","Pakokku","Minbu","Chauk","Yenangyaung","Thayet","Aunglan"]},sagaing:{name:"Sagaing Region",cities:["Sagaing","Monywa","Shwebo","Kale","Katha","Mawlaik","Ye-U"]},tanintharyi:{name:"Tanintharyi Region",cities:["Dawei","Myeik","Kawthaung","Bokpyin","Thayetchaung"]},mon:{name:"Mon State",cities:["Mawlamyine","Thaton","Mudon","Ye","Kyaikto","Paung","Chaungzon"]},kayin:{name:"Kayin State",cities:["Hpa-an","Kawkareik","Myawaddy","Kyainseikgyi","Thandaunggyi"]},kayah:{name:"Kayah State",cities:["Loikaw","Demoso","Hpruso","Bawlakhe"]},shan:{name:"Shan State",cities:["Taunggyi","Lashio","Kengtung","Hsipaw","Nyaungshwe","Kalaw","Pinlaung","Muse"]},chin:{name:"Chin State",cities:["Hakha","Falam","Tedim","Tonzang","Mindat"]},rakhine:{name:"Rakhine State",cities:["Sittwe","Kyaukpyu","Mrauk-U","Thandwe","Maungdaw","Buthidaung"]},kachin:{name:"Kachin State",cities:["Myitkyina","Bhamo","Putao","Mohnyin","Injangyang"]}};function M_(t){for(const[s,n]of Object.entries(jr))if(n.cities.includes(t))return s;return null}function O_({filters:t,onFiltersChange:s,activeFiltersCount:n}){const[i,o]=v.useState(!1),l=(f,p)=>{s(f==="region"?{...t,[f]:p,city:""}:{...t,[f]:p})},d=()=>{s({search:"",category:"",location:"",region:"",city:"",sellerType:"",verifiedStatus:"",priceRange:"",sortBy:"newest"})},u=()=>!t.region||t.region==="all"?[]:jr[t.region]?.cities||[];return e.jsx("div",{className:"bg-primary/5 border border-primary/10 rounded-xl p-4 mb-6 shadow-sm",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Ov,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground w-4 h-4"}),e.jsx(Ue,{placeholder:"Search products, categories, or locations...",value:t.search,onChange:f=>l("search",f.target.value),className:"pl-10 h-11 bg-background border-primary/20"})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3",children:[e.jsxs(Yt,{value:t.category||"all",onValueChange:f=>l("category",f==="all"?"":f),children:[e.jsx(Xt,{className:"h-11 bg-background border-primary/20",children:e.jsx(Qt,{placeholder:"All Categories"})}),e.jsxs(Zt,{position:"popper",side:"bottom",align:"start",sideOffset:4,children:[e.jsx(De,{value:"all",children:"All Categories"}),e.jsx(De,{value:"rice",children:"Rice & Grains"}),e.jsx(De,{value:"pulses",children:"Pulses & Beans"}),e.jsx(De,{value:"oilseeds",children:"Oilseeds"}),e.jsx(De,{value:"vegetables",children:"Vegetables"}),e.jsx(De,{value:"fruits",children:"Fruits"}),e.jsx(De,{value:"spices",children:"Spices & Herbs"}),e.jsx(De,{value:"traditional",children:"Traditional Crops"})]})]}),e.jsxs(Yt,{value:t.region||"all",onValueChange:f=>l("region",f==="all"?"":f),children:[e.jsx(Xt,{className:"h-11 bg-background border-primary/20",children:e.jsx(Qt,{placeholder:"All Regions"})}),e.jsxs(Zt,{className:"max-h-64 overflow-y-auto",position:"popper",side:"bottom",align:"start",sideOffset:4,children:[e.jsx(De,{value:"all",children:"All Regions"}),Object.entries(jr).map(([f,p])=>e.jsx(De,{value:f,children:p.name},f))]})]}),e.jsxs(Yt,{value:t.city||"all",onValueChange:f=>l("city",f==="all"?"":f),disabled:!t.region||t.region==="all",children:[e.jsx(Xt,{className:"h-11 bg-background border-primary/20",children:e.jsx(Qt,{placeholder:t.region?"All Cities":"Select Region First"})}),e.jsxs(Zt,{className:"max-h-64 overflow-y-auto",position:"popper",side:"bottom",align:"start",sideOffset:4,children:[e.jsx(De,{value:"all",children:"All Cities"}),u().map(f=>e.jsx(De,{value:f,children:f},f))]})]}),e.jsxs(Yt,{value:t.sortBy,onValueChange:f=>l("sortBy",f),children:[e.jsx(Xt,{className:"h-11 bg-background border-primary/20",children:e.jsx(Qt,{placeholder:"Sort By"})}),e.jsxs(Zt,{position:"popper",side:"bottom",align:"start",sideOffset:4,children:[e.jsx(De,{value:"newest",children:"Newest First"}),e.jsx(De,{value:"price-low",children:"Price: Low to High"}),e.jsx(De,{value:"price-high",children:"Price: High to Low"}),e.jsx(De,{value:"location",children:"By Location"})]})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(O,{variant:"ghost",size:"sm",onClick:()=>o(!i),className:"text-muted-foreground hover:text-foreground",children:[e.jsx(Sm,{className:"w-4 h-4 mr-2"}),"Advanced Filters",i?e.jsx(Dv,{className:"w-4 h-4 ml-2"}):e.jsx(Rc,{className:"w-4 h-4 ml-2"})]}),n>0&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(Ee,{variant:"secondary",className:"text-xs",children:[n," filter",n!==1?"s":""," active"]}),e.jsxs(O,{variant:"outline",size:"sm",onClick:d,className:"h-8 px-3",children:[e.jsx(cs,{className:"w-3 h-3 mr-1"}),"Clear"]})]})]}),i&&e.jsx("div",{className:"space-y-3 pt-3 border-t border-border/50",children:e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3",children:[e.jsxs(Yt,{value:t.sellerType||"all",onValueChange:f=>l("sellerType",f==="all"?"":f),children:[e.jsx(Xt,{className:"h-10 bg-background border-primary/20",children:e.jsx(Qt,{placeholder:"All Sellers"})}),e.jsxs(Zt,{position:"popper",side:"bottom",align:"start",sideOffset:4,children:[e.jsx(De,{value:"all",children:"All Sellers"}),e.jsx(De,{value:"farmer",children:"Farmers"}),e.jsx(De,{value:"trader",children:"Traders"})]})]}),e.jsxs(Yt,{value:t.verifiedStatus||"all",onValueChange:f=>l("verifiedStatus",f==="all"?"":f),children:[e.jsx(Xt,{className:"h-10 bg-background border-primary/20",children:e.jsx(Qt,{placeholder:"Any Verification"})}),e.jsxs(Zt,{position:"popper",side:"bottom",align:"start",sideOffset:4,children:[e.jsx(De,{value:"all",children:"Any Verification"}),e.jsx(De,{value:"verified",children:"Verified Sellers"}),e.jsx(De,{value:"business-verified",children:"Business Verified"}),e.jsx(De,{value:"unverified",children:"Unverified"})]})]}),e.jsxs(Yt,{value:t.priceRange||"all",onValueChange:f=>l("priceRange",f==="all"?"":f),children:[e.jsx(Xt,{className:"h-10 bg-background border-primary/20",children:e.jsx(Qt,{placeholder:"Any Price Range"})}),e.jsxs(Zt,{position:"popper",side:"bottom",align:"start",sideOffset:4,children:[e.jsx(De,{value:"all",children:"Any Price Range"}),e.jsx(De,{value:"0-50000",children:"Under 50,000 MMK"}),e.jsx(De,{value:"50000-100000",children:"50K - 100K MMK"}),e.jsx(De,{value:"100000-200000",children:"100K - 200K MMK"}),e.jsx(De,{value:"200000+",children:"200K+ MMK"})]})]})]})})]})})}function L_({productName:t,priceData:s,unit:n,onBack:i,isOwnProduct:o}){const[l,d]=v.useState("all"),[u,f]=v.useState("all"),p=Array.from(new Set(s.map(y=>y.location))).sort(),h=[...s.filter(y=>{const j=l==="all"||y.location===l,b=u==="all"||y.sellerType===u;return j&&b})].sort((y,j)=>y.price-j.price);return e.jsxs("div",{className:"space-y-6",children:[i&&e.jsx(ls,{className:"w-5 h-5 cursor-pointer text-muted-foreground hover:text-foreground transition-colors",onClick:i}),e.jsx("div",{className:"bg-gradient-to-r from-primary/5 to-primary/10 rounded-lg p-6 border",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-primary mb-2",children:o?"Market Price Analysis":"Price Comparison"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("h2",{className:"text-xl font-semibold",children:t}),e.jsxs(Ee,{variant:"secondary",className:"text-sm",children:["Per ",n]})]}),e.jsx("p",{className:"text-muted-foreground mt-1",children:o?`See how your pricing compares to ${s.length} other sellers`:`Compare prices from ${s.length} sellers across Myanmar`})]}),h.length>0&&e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Price range"}),e.jsxs("p",{className:"text-lg font-semibold",children:[h[0]?.price?.toLocaleString()," - ",h[h.length-1]?.price?.toLocaleString()," MMK"]})]})]})}),e.jsxs(re,{children:[e.jsxs(Ie,{children:[e.jsxs(Oe,{className:"flex items-center justify-between",children:[e.jsx("span",{children:o?"Market Competitors":"Available Sellers"}),e.jsxs(Ee,{variant:"outline",children:[h.length," of ",s.length," listings"]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 pt-4 border-t",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Sm,{className:"w-4 h-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"Filter by:"})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsxs(Yt,{value:l,onValueChange:d,children:[e.jsx(Xt,{className:"w-full sm:w-48",children:e.jsx(Qt,{placeholder:"All regions"})}),e.jsxs(Zt,{children:[e.jsx(De,{value:"all",children:"All Regions"}),p.map(y=>e.jsx(De,{value:y,children:y},y))]})]}),e.jsxs(Yt,{value:u,onValueChange:f,children:[e.jsx(Xt,{className:"w-full sm:w-40",children:e.jsx(Qt,{placeholder:"All types"})}),e.jsxs(Zt,{children:[e.jsx(De,{value:"all",children:"All Types"}),e.jsx(De,{value:"farmer",children:"Farmers"}),e.jsx(De,{value:"trader",children:"Traders"})]})]})]})]})]}),e.jsxs(ie,{children:[e.jsx("div",{className:"space-y-3",children:h.length===0?e.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[e.jsx(Sm,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"No sellers found matching your filters."}),e.jsx("p",{className:"text-sm mt-1",children:"Try adjusting your selection above."})]}):h.map((y,j)=>e.jsxs("div",{className:`p-4 rounded-lg border transition-colors hover:bg-muted/30 ${j===0?"bg-green-50 border-green-200":"bg-card"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ee,{variant:y.sellerType==="farmer"?"default":"secondary",className:"capitalize",children:y.sellerType}),e.jsx("h3",{className:"font-medium",children:y.sellerName}),j===0&&e.jsx(Ee,{variant:"outline",className:"text-green-600 bg-green-50 border-green-200",children:"Lowest Price"})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-2xl font-semibold text-primary",children:[y.price.toLocaleString()," MMK"]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["per ",n]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Vt,{className:"w-4 h-4 text-muted-foreground"}),e.jsx("span",{children:y.location})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx(Ee,{variant:"outline",className:"text-xs",children:y.quantity})}),e.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[e.jsx(Lt,{className:"w-4 h-4"}),e.jsxs("span",{children:["Updated ",y.lastUpdated]})]})]})]},y.id))}),h.length>0&&e.jsxs("div",{className:"mt-6 p-4 bg-muted/30 rounded-lg",children:[e.jsx("h4",{className:"font-medium mb-2",children:o?"Understanding Market Pricing":"How to Compare"}),e.jsx("div",{className:"text-sm text-muted-foreground space-y-1",children:o?e.jsxs(e.Fragment,{children:[e.jsxs("p",{children:["• ",e.jsx("strong",{children:"Market Position:"})," See where your prices stand against competitors"]}),e.jsxs("p",{children:["• ",e.jsx("strong",{children:"Pricing Strategy:"})," Consider adjusting based on quality and service"]}),e.jsxs("p",{children:["• ",e.jsx("strong",{children:"Location Advantage:"})," Your local market may support different pricing"]}),e.jsxs("p",{children:["• ",e.jsx("strong",{children:"Value Proposition:"})," Highlight your unique selling points"]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("p",{children:["• ",e.jsx("strong",{children:"Farmers:"})," Usually offer lower prices, direct from source"]}),e.jsxs("p",{children:["• ",e.jsx("strong",{children:"Traders:"})," May have higher prices but offer bulk quantities"]}),e.jsxs("p",{children:["• ",e.jsx("strong",{children:"Location:"})," Consider transport costs and delivery options"]}),e.jsxs("p",{children:["• ",e.jsx("strong",{children:"Quantity:"})," Check if available amount meets your needs"]})]})})]})]})]})]})}function $_(t,s){return v.useReducer((n,i)=>s[n][i]??n,t)}var ds=t=>{const{present:s,children:n}=t,i=F_(s),o=typeof n=="function"?n({present:i.isPresent}):v.Children.only(n),l=Ye(i.ref,z_(o));return typeof n=="function"||i.isPresent?v.cloneElement(o,{ref:l}):null};ds.displayName="Presence";function F_(t){const[s,n]=v.useState(),i=v.useRef(null),o=v.useRef(t),l=v.useRef("none"),d=t?"mounted":"unmounted",[u,f]=$_(d,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return v.useEffect(()=>{const p=Ql(i.current);l.current=u==="mounted"?p:"none"},[u]),vt(()=>{const p=i.current,g=o.current;if(g!==t){const y=l.current,j=Ql(p);t?f("MOUNT"):j==="none"||p?.display==="none"?f("UNMOUNT"):f(g&&y!==j?"ANIMATION_OUT":"UNMOUNT"),o.current=t}},[t,f]),vt(()=>{if(s){let p;const g=s.ownerDocument.defaultView??window,h=j=>{const w=Ql(i.current).includes(CSS.escape(j.animationName));if(j.target===s&&w&&(f("ANIMATION_END"),!o.current)){const S=s.style.animationFillMode;s.style.animationFillMode="forwards",p=g.setTimeout(()=>{s.style.animationFillMode==="forwards"&&(s.style.animationFillMode=S)})}},y=j=>{j.target===s&&(l.current=Ql(i.current))};return s.addEventListener("animationstart",y),s.addEventListener("animationcancel",h),s.addEventListener("animationend",h),()=>{g.clearTimeout(p),s.removeEventListener("animationstart",y),s.removeEventListener("animationcancel",h),s.removeEventListener("animationend",h)}}else f("ANIMATION_END")},[s,f]),{isPresent:["mounted","unmountSuspended"].includes(u),ref:v.useCallback(p=>{i.current=p?getComputedStyle(p):null,n(p)},[])}}function Ql(t){return t?.animationName||"none"}function z_(t){let s=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,n=s&&"isReactWarning"in s&&s.isReactWarning;return n?t.ref:(s=Object.getOwnPropertyDescriptor(t,"ref")?.get,n=s&&"isReactWarning"in s&&s.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function B_(t,s){return v.useReducer((n,i)=>s[n][i]??n,t)}var bf="ScrollArea",[e0]=Ns(bf),[U_,Vs]=e0(bf),t0=v.forwardRef((t,s)=>{const{__scopeScrollArea:n,type:i="hover",dir:o,scrollHideDelay:l=600,...d}=t,[u,f]=v.useState(null),[p,g]=v.useState(null),[h,y]=v.useState(null),[j,b]=v.useState(null),[w,S]=v.useState(null),[k,C]=v.useState(0),[E,P]=v.useState(0),[T,A]=v.useState(!1),[R,$]=v.useState(!1),J=Ye(s,q=>f(q)),z=Si(o);return e.jsx(U_,{scope:n,type:i,dir:z,scrollHideDelay:l,scrollArea:u,viewport:p,onViewportChange:g,content:h,onContentChange:y,scrollbarX:j,onScrollbarXChange:b,scrollbarXEnabled:T,onScrollbarXEnabledChange:A,scrollbarY:w,onScrollbarYChange:S,scrollbarYEnabled:R,onScrollbarYEnabledChange:$,onCornerWidthChange:C,onCornerHeightChange:P,children:e.jsx(Le.div,{dir:z,...d,ref:J,style:{position:"relative","--radix-scroll-area-corner-width":k+"px","--radix-scroll-area-corner-height":E+"px",...t.style}})})});t0.displayName=bf;var s0="ScrollAreaViewport",r0=v.forwardRef((t,s)=>{const{__scopeScrollArea:n,children:i,nonce:o,...l}=t,d=Vs(s0,n),u=v.useRef(null),f=Ye(s,u,d.onViewportChange);return e.jsxs(e.Fragment,{children:[e.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:o}),e.jsx(Le.div,{"data-radix-scroll-area-viewport":"",...l,ref:f,style:{overflowX:d.scrollbarXEnabled?"scroll":"hidden",overflowY:d.scrollbarYEnabled?"scroll":"hidden",...t.style},children:e.jsx("div",{ref:d.onContentChange,style:{minWidth:"100%",display:"table"},children:i})})]})});r0.displayName=s0;var Rr="ScrollAreaScrollbar",n0=v.forwardRef((t,s)=>{const{forceMount:n,...i}=t,o=Vs(Rr,t.__scopeScrollArea),{onScrollbarXEnabledChange:l,onScrollbarYEnabledChange:d}=o,u=t.orientation==="horizontal";return v.useEffect(()=>(u?l(!0):d(!0),()=>{u?l(!1):d(!1)}),[u,l,d]),o.type==="hover"?e.jsx(V_,{...i,ref:s,forceMount:n}):o.type==="scroll"?e.jsx(q_,{...i,ref:s,forceMount:n}):o.type==="auto"?e.jsx(a0,{...i,ref:s,forceMount:n}):o.type==="always"?e.jsx(jf,{...i,ref:s}):null});n0.displayName=Rr;var V_=v.forwardRef((t,s)=>{const{forceMount:n,...i}=t,o=Vs(Rr,t.__scopeScrollArea),[l,d]=v.useState(!1);return v.useEffect(()=>{const u=o.scrollArea;let f=0;if(u){const p=()=>{window.clearTimeout(f),d(!0)},g=()=>{f=window.setTimeout(()=>d(!1),o.scrollHideDelay)};return u.addEventListener("pointerenter",p),u.addEventListener("pointerleave",g),()=>{window.clearTimeout(f),u.removeEventListener("pointerenter",p),u.removeEventListener("pointerleave",g)}}},[o.scrollArea,o.scrollHideDelay]),e.jsx(ds,{present:n||l,children:e.jsx(a0,{"data-state":l?"visible":"hidden",...i,ref:s})})}),q_=v.forwardRef((t,s)=>{const{forceMount:n,...i}=t,o=Vs(Rr,t.__scopeScrollArea),l=t.orientation==="horizontal",d=Yc(()=>f("SCROLL_END"),100),[u,f]=B_("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return v.useEffect(()=>{if(u==="idle"){const p=window.setTimeout(()=>f("HIDE"),o.scrollHideDelay);return()=>window.clearTimeout(p)}},[u,o.scrollHideDelay,f]),v.useEffect(()=>{const p=o.viewport,g=l?"scrollLeft":"scrollTop";if(p){let h=p[g];const y=()=>{const j=p[g];h!==j&&(f("SCROLL"),d()),h=j};return p.addEventListener("scroll",y),()=>p.removeEventListener("scroll",y)}},[o.viewport,l,f,d]),e.jsx(ds,{present:n||u!=="hidden",children:e.jsx(jf,{"data-state":u==="hidden"?"hidden":"visible",...i,ref:s,onPointerEnter:be(t.onPointerEnter,()=>f("POINTER_ENTER")),onPointerLeave:be(t.onPointerLeave,()=>f("POINTER_LEAVE"))})})}),a0=v.forwardRef((t,s)=>{const n=Vs(Rr,t.__scopeScrollArea),{forceMount:i,...o}=t,[l,d]=v.useState(!1),u=t.orientation==="horizontal",f=Yc(()=>{if(n.viewport){const p=n.viewport.offsetWidth<n.viewport.scrollWidth,g=n.viewport.offsetHeight<n.viewport.scrollHeight;d(u?p:g)}},10);return yi(n.viewport,f),yi(n.content,f),e.jsx(ds,{present:i||l,children:e.jsx(jf,{"data-state":l?"visible":"hidden",...o,ref:s})})}),jf=v.forwardRef((t,s)=>{const{orientation:n="vertical",...i}=t,o=Vs(Rr,t.__scopeScrollArea),l=v.useRef(null),d=v.useRef(0),[u,f]=v.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),p=d0(u.viewport,u.content),g={...i,sizes:u,onSizesChange:f,hasThumb:p>0&&p<1,onThumbChange:y=>l.current=y,onThumbPointerUp:()=>d.current=0,onThumbPointerDown:y=>d.current=y};function h(y,j){return Y_(y,d.current,u,j)}return n==="horizontal"?e.jsx(H_,{...g,ref:s,onThumbPositionChange:()=>{if(o.viewport&&l.current){const y=o.viewport.scrollLeft,j=kx(y,u,o.dir);l.current.style.transform=`translate3d(${j}px, 0, 0)`}},onWheelScroll:y=>{o.viewport&&(o.viewport.scrollLeft=y)},onDragScroll:y=>{o.viewport&&(o.viewport.scrollLeft=h(y,o.dir))}}):n==="vertical"?e.jsx(W_,{...g,ref:s,onThumbPositionChange:()=>{if(o.viewport&&l.current){const y=o.viewport.scrollTop,j=kx(y,u);l.current.style.transform=`translate3d(0, ${j}px, 0)`}},onWheelScroll:y=>{o.viewport&&(o.viewport.scrollTop=y)},onDragScroll:y=>{o.viewport&&(o.viewport.scrollTop=h(y))}}):null}),H_=v.forwardRef((t,s)=>{const{sizes:n,onSizesChange:i,...o}=t,l=Vs(Rr,t.__scopeScrollArea),[d,u]=v.useState(),f=v.useRef(null),p=Ye(s,f,l.onScrollbarXChange);return v.useEffect(()=>{f.current&&u(getComputedStyle(f.current))},[f]),e.jsx(o0,{"data-orientation":"horizontal",...o,ref:p,sizes:n,style:{bottom:0,left:l.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:l.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":Jc(n)+"px",...t.style},onThumbPointerDown:g=>t.onThumbPointerDown(g.x),onDragScroll:g=>t.onDragScroll(g.x),onWheelScroll:(g,h)=>{if(l.viewport){const y=l.viewport.scrollLeft+g.deltaX;t.onWheelScroll(y),m0(y,h)&&g.preventDefault()}},onResize:()=>{f.current&&l.viewport&&d&&i({content:l.viewport.scrollWidth,viewport:l.viewport.offsetWidth,scrollbar:{size:f.current.clientWidth,paddingStart:jc(d.paddingLeft),paddingEnd:jc(d.paddingRight)}})}})}),W_=v.forwardRef((t,s)=>{const{sizes:n,onSizesChange:i,...o}=t,l=Vs(Rr,t.__scopeScrollArea),[d,u]=v.useState(),f=v.useRef(null),p=Ye(s,f,l.onScrollbarYChange);return v.useEffect(()=>{f.current&&u(getComputedStyle(f.current))},[f]),e.jsx(o0,{"data-orientation":"vertical",...o,ref:p,sizes:n,style:{top:0,right:l.dir==="ltr"?0:void 0,left:l.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":Jc(n)+"px",...t.style},onThumbPointerDown:g=>t.onThumbPointerDown(g.y),onDragScroll:g=>t.onDragScroll(g.y),onWheelScroll:(g,h)=>{if(l.viewport){const y=l.viewport.scrollTop+g.deltaY;t.onWheelScroll(y),m0(y,h)&&g.preventDefault()}},onResize:()=>{f.current&&l.viewport&&d&&i({content:l.viewport.scrollHeight,viewport:l.viewport.offsetHeight,scrollbar:{size:f.current.clientHeight,paddingStart:jc(d.paddingTop),paddingEnd:jc(d.paddingBottom)}})}})}),[K_,i0]=e0(Rr),o0=v.forwardRef((t,s)=>{const{__scopeScrollArea:n,sizes:i,hasThumb:o,onThumbChange:l,onThumbPointerUp:d,onThumbPointerDown:u,onThumbPositionChange:f,onDragScroll:p,onWheelScroll:g,onResize:h,...y}=t,j=Vs(Rr,n),[b,w]=v.useState(null),S=Ye(s,J=>w(J)),k=v.useRef(null),C=v.useRef(""),E=j.viewport,P=i.content-i.viewport,T=Ot(g),A=Ot(f),R=Yc(h,10);function $(J){if(k.current){const z=J.clientX-k.current.left,q=J.clientY-k.current.top;p({x:z,y:q})}}return v.useEffect(()=>{const J=z=>{const q=z.target;b?.contains(q)&&T(z,P)};return document.addEventListener("wheel",J,{passive:!1}),()=>document.removeEventListener("wheel",J,{passive:!1})},[E,b,P,T]),v.useEffect(A,[i,A]),yi(b,R),yi(j.content,R),e.jsx(K_,{scope:n,scrollbar:b,hasThumb:o,onThumbChange:Ot(l),onThumbPointerUp:Ot(d),onThumbPositionChange:A,onThumbPointerDown:Ot(u),children:e.jsx(Le.div,{...y,ref:S,style:{position:"absolute",...y.style},onPointerDown:be(t.onPointerDown,J=>{J.button===0&&(J.target.setPointerCapture(J.pointerId),k.current=b.getBoundingClientRect(),C.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",j.viewport&&(j.viewport.style.scrollBehavior="auto"),$(J))}),onPointerMove:be(t.onPointerMove,$),onPointerUp:be(t.onPointerUp,J=>{const z=J.target;z.hasPointerCapture(J.pointerId)&&z.releasePointerCapture(J.pointerId),document.body.style.webkitUserSelect=C.current,j.viewport&&(j.viewport.style.scrollBehavior=""),k.current=null})})})}),bc="ScrollAreaThumb",l0=v.forwardRef((t,s)=>{const{forceMount:n,...i}=t,o=i0(bc,t.__scopeScrollArea);return e.jsx(ds,{present:n||o.hasThumb,children:e.jsx(G_,{ref:s,...i})})}),G_=v.forwardRef((t,s)=>{const{__scopeScrollArea:n,style:i,...o}=t,l=Vs(bc,n),d=i0(bc,n),{onThumbPositionChange:u}=d,f=Ye(s,h=>d.onThumbChange(h)),p=v.useRef(void 0),g=Yc(()=>{p.current&&(p.current(),p.current=void 0)},100);return v.useEffect(()=>{const h=l.viewport;if(h){const y=()=>{if(g(),!p.current){const j=Q_(h,u);p.current=j,u()}};return u(),h.addEventListener("scroll",y),()=>h.removeEventListener("scroll",y)}},[l.viewport,g,u]),e.jsx(Le.div,{"data-state":d.hasThumb?"visible":"hidden",...o,ref:f,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...i},onPointerDownCapture:be(t.onPointerDownCapture,h=>{const j=h.target.getBoundingClientRect(),b=h.clientX-j.left,w=h.clientY-j.top;d.onThumbPointerDown({x:b,y:w})}),onPointerUp:be(t.onPointerUp,d.onThumbPointerUp)})});l0.displayName=bc;var Nf="ScrollAreaCorner",c0=v.forwardRef((t,s)=>{const n=Vs(Nf,t.__scopeScrollArea),i=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&i?e.jsx(J_,{...t,ref:s}):null});c0.displayName=Nf;var J_=v.forwardRef((t,s)=>{const{__scopeScrollArea:n,...i}=t,o=Vs(Nf,n),[l,d]=v.useState(0),[u,f]=v.useState(0),p=!!(l&&u);return yi(o.scrollbarX,()=>{const g=o.scrollbarX?.offsetHeight||0;o.onCornerHeightChange(g),f(g)}),yi(o.scrollbarY,()=>{const g=o.scrollbarY?.offsetWidth||0;o.onCornerWidthChange(g),d(g)}),p?e.jsx(Le.div,{...i,ref:s,style:{width:l,height:u,position:"absolute",right:o.dir==="ltr"?0:void 0,left:o.dir==="rtl"?0:void 0,bottom:0,...t.style}}):null});function jc(t){return t?parseInt(t,10):0}function d0(t,s){const n=t/s;return isNaN(n)?0:n}function Jc(t){const s=d0(t.viewport,t.content),n=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,i=(t.scrollbar.size-n)*s;return Math.max(i,18)}function Y_(t,s,n,i="ltr"){const o=Jc(n),l=o/2,d=s||l,u=o-d,f=n.scrollbar.paddingStart+d,p=n.scrollbar.size-n.scrollbar.paddingEnd-u,g=n.content-n.viewport,h=i==="ltr"?[0,g]:[g*-1,0];return u0([f,p],h)(t)}function kx(t,s,n="ltr"){const i=Jc(s),o=s.scrollbar.paddingStart+s.scrollbar.paddingEnd,l=s.scrollbar.size-o,d=s.content-s.viewport,u=l-i,f=n==="ltr"?[0,d]:[d*-1,0],p=_m(t,f);return u0([0,d],[0,u])(p)}function u0(t,s){return n=>{if(t[0]===t[1]||s[0]===s[1])return s[0];const i=(s[1]-s[0])/(t[1]-t[0]);return s[0]+i*(n-t[0])}}function m0(t,s){return t>0&&t<s}var Q_=(t,s=()=>{})=>{let n={left:t.scrollLeft,top:t.scrollTop},i=0;return(function o(){const l={left:t.scrollLeft,top:t.scrollTop},d=n.left!==l.left,u=n.top!==l.top;(d||u)&&s(),n=l,i=window.requestAnimationFrame(o)})(),()=>window.cancelAnimationFrame(i)};function Yc(t,s){const n=Ot(t),i=v.useRef(0);return v.useEffect(()=>()=>window.clearTimeout(i.current),[]),v.useCallback(()=>{window.clearTimeout(i.current),i.current=window.setTimeout(n,s)},[n,s])}function yi(t,s){const n=Ot(s);vt(()=>{let i=0;if(t){const o=new ResizeObserver(()=>{cancelAnimationFrame(i),i=window.requestAnimationFrame(n)});return o.observe(t),()=>{window.cancelAnimationFrame(i),o.unobserve(t)}}},[t,n])}var f0=t0,X_=r0,Z_=c0;const h0=v.forwardRef(({className:t,children:s,...n},i)=>e.jsxs(f0,{ref:i,"data-slot":"scroll-area",className:Ve("relative",t),...n,children:[e.jsx(X_,{"data-slot":"scroll-area-viewport",className:"focus-visible:ring-ring/50 size-full rounded-[inherit] transition-[color,box-shadow] outline-none focus-visible:ring-[3px] focus-visible:outline-1",children:s}),e.jsx(eE,{}),e.jsx(Z_,{})]}));h0.displayName=f0.displayName;function eE({className:t,orientation:s="vertical",...n}){return e.jsx(n0,{"data-slot":"scroll-area-scrollbar",orientation:s,className:Ve("flex touch-none p-px transition-colors select-none",s==="vertical"&&"h-full w-2.5 border-l border-l-transparent",s==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent",t),...n,children:e.jsx(l0,{"data-slot":"scroll-area-thumb",className:"bg-border relative flex-1 rounded-full"})})}const tE=t=>{let s;return t?s=t:typeof fetch>"u"?s=(...n)=>Sr(async()=>{const{default:i}=await Promise.resolve().then(()=>Ei);return{default:i}},void 0).then(({default:i})=>i(...n)):s=fetch,(...n)=>s(...n)};class Sf extends Error{constructor(s,n="FunctionsError",i){super(s),this.name=n,this.context=i}}class Cx extends Sf{constructor(s){super("Failed to send a request to the Edge Function","FunctionsFetchError",s)}}class _x extends Sf{constructor(s){super("Relay Error invoking the Edge Function","FunctionsRelayError",s)}}class Ex extends Sf{constructor(s){super("Edge Function returned a non-2xx status code","FunctionsHttpError",s)}}var $m;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})($m||($m={}));var sE=function(t,s,n,i){function o(l){return l instanceof n?l:new n(function(d){d(l)})}return new(n||(n=Promise))(function(l,d){function u(g){try{p(i.next(g))}catch(h){d(h)}}function f(g){try{p(i.throw(g))}catch(h){d(h)}}function p(g){g.done?l(g.value):o(g.value).then(u,f)}p((i=i.apply(t,s||[])).next())})};class rE{constructor(s,{headers:n={},customFetch:i,region:o=$m.Any}={}){this.url=s,this.headers=n,this.region=o,this.fetch=tE(i)}setAuth(s){this.headers.Authorization=`Bearer ${s}`}invoke(s,n={}){var i;return sE(this,void 0,void 0,function*(){try{const{headers:o,method:l,body:d,signal:u}=n;let f={},{region:p}=n;p||(p=this.region);const g=new URL(`${this.url}/${s}`);p&&p!=="any"&&(f["x-region"]=p,g.searchParams.set("forceFunctionRegion",p));let h;d&&(o&&!Object.prototype.hasOwnProperty.call(o,"Content-Type")||!o)&&(typeof Blob<"u"&&d instanceof Blob||d instanceof ArrayBuffer?(f["Content-Type"]="application/octet-stream",h=d):typeof d=="string"?(f["Content-Type"]="text/plain",h=d):typeof FormData<"u"&&d instanceof FormData?h=d:(f["Content-Type"]="application/json",h=JSON.stringify(d)));const y=yield this.fetch(g.toString(),{method:l||"POST",headers:Object.assign(Object.assign(Object.assign({},f),this.headers),o),body:h,signal:u}).catch(S=>{throw S.name==="AbortError"?S:new Cx(S)}),j=y.headers.get("x-relay-error");if(j&&j==="true")throw new _x(y);if(!y.ok)throw new Ex(y);let b=((i=y.headers.get("Content-Type"))!==null&&i!==void 0?i:"text/plain").split(";")[0].trim(),w;return b==="application/json"?w=yield y.json():b==="application/octet-stream"?w=yield y.blob():b==="text/event-stream"?w=y:b==="multipart/form-data"?w=yield y.formData():w=yield y.text(),{data:w,error:null,response:y}}catch(o){return o instanceof Error&&o.name==="AbortError"?{data:null,error:new Cx(o)}:{data:null,error:o,response:o instanceof Ex||o instanceof _x?o.context:void 0}}})}}var Rt={},Za={},ei={},ti={},si={},ri={},nE=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},wi=nE();const aE=wi.fetch,p0=wi.fetch.bind(wi),g0=wi.Headers,iE=wi.Request,oE=wi.Response,Ei=Object.freeze(Object.defineProperty({__proto__:null,Headers:g0,Request:iE,Response:oE,default:p0,fetch:aE},Symbol.toStringTag,{value:"Module"})),lE=LN(Ei);var Xl={},Tx;function x0(){if(Tx)return Xl;Tx=1,Object.defineProperty(Xl,"__esModule",{value:!0});class t extends Error{constructor(n){super(n.message),this.name="PostgrestError",this.details=n.details,this.hint=n.hint,this.code=n.code}}return Xl.default=t,Xl}var Px;function v0(){if(Px)return ri;Px=1;var t=ri&&ri.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(ri,"__esModule",{value:!0});const s=t(lE),n=t(x0());class i{constructor(l){var d,u;this.shouldThrowOnError=!1,this.method=l.method,this.url=l.url,this.headers=new Headers(l.headers),this.schema=l.schema,this.body=l.body,this.shouldThrowOnError=(d=l.shouldThrowOnError)!==null&&d!==void 0?d:!1,this.signal=l.signal,this.isMaybeSingle=(u=l.isMaybeSingle)!==null&&u!==void 0?u:!1,l.fetch?this.fetch=l.fetch:typeof fetch>"u"?this.fetch=s.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(l,d){return this.headers=new Headers(this.headers),this.headers.set(l,d),this}then(l,d){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const u=this.fetch;let f=u(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async p=>{var g,h,y,j;let b=null,w=null,S=null,k=p.status,C=p.statusText;if(p.ok){if(this.method!=="HEAD"){const A=await p.text();A===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((g=this.headers.get("Accept"))===null||g===void 0)&&g.includes("application/vnd.pgrst.plan+text"))?w=A:w=JSON.parse(A))}const P=(h=this.headers.get("Prefer"))===null||h===void 0?void 0:h.match(/count=(exact|planned|estimated)/),T=(y=p.headers.get("content-range"))===null||y===void 0?void 0:y.split("/");P&&T&&T.length>1&&(S=parseInt(T[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(w)&&(w.length>1?(b={code:"PGRST116",details:`Results contain ${w.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},w=null,S=null,k=406,C="Not Acceptable"):w.length===1?w=w[0]:w=null)}else{const P=await p.text();try{b=JSON.parse(P),Array.isArray(b)&&p.status===404&&(w=[],b=null,k=200,C="OK")}catch{p.status===404&&P===""?(k=204,C="No Content"):b={message:P}}if(b&&this.isMaybeSingle&&(!((j=b?.details)===null||j===void 0)&&j.includes("0 rows"))&&(b=null,k=200,C="OK"),b&&this.shouldThrowOnError)throw new n.default(b)}return{error:b,data:w,count:S,status:k,statusText:C}});return this.shouldThrowOnError||(f=f.catch(p=>{var g,h,y;return{error:{message:`${(g=p?.name)!==null&&g!==void 0?g:"FetchError"}: ${p?.message}`,details:`${(h=p?.stack)!==null&&h!==void 0?h:""}`,hint:"",code:`${(y=p?.code)!==null&&y!==void 0?y:""}`},data:null,count:null,status:0,statusText:""}})),f.then(l,d)}returns(){return this}overrideTypes(){return this}}return ri.default=i,ri}var Ix;function y0(){if(Ix)return si;Ix=1;var t=si&&si.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(si,"__esModule",{value:!0});const s=t(v0());class n extends s.default{select(o){let l=!1;const d=(o??"*").split("").map(u=>/\s/.test(u)&&!l?"":(u==='"'&&(l=!l),u)).join("");return this.url.searchParams.set("select",d),this.headers.append("Prefer","return=representation"),this}order(o,{ascending:l=!0,nullsFirst:d,foreignTable:u,referencedTable:f=u}={}){const p=f?`${f}.order`:"order",g=this.url.searchParams.get(p);return this.url.searchParams.set(p,`${g?`${g},`:""}${o}.${l?"asc":"desc"}${d===void 0?"":d?".nullsfirst":".nullslast"}`),this}limit(o,{foreignTable:l,referencedTable:d=l}={}){const u=typeof d>"u"?"limit":`${d}.limit`;return this.url.searchParams.set(u,`${o}`),this}range(o,l,{foreignTable:d,referencedTable:u=d}={}){const f=typeof u>"u"?"offset":`${u}.offset`,p=typeof u>"u"?"limit":`${u}.limit`;return this.url.searchParams.set(f,`${o}`),this.url.searchParams.set(p,`${l-o+1}`),this}abortSignal(o){return this.signal=o,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:o=!1,verbose:l=!1,settings:d=!1,buffers:u=!1,wal:f=!1,format:p="text"}={}){var g;const h=[o?"analyze":null,l?"verbose":null,d?"settings":null,u?"buffers":null,f?"wal":null].filter(Boolean).join("|"),y=(g=this.headers.get("Accept"))!==null&&g!==void 0?g:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${p}; for="${y}"; options=${h};`),p==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(o){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${o}`),this}}return si.default=n,si}var Ax;function kf(){if(Ax)return ti;Ax=1;var t=ti&&ti.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(ti,"__esModule",{value:!0});const s=t(y0());class n extends s.default{eq(o,l){return this.url.searchParams.append(o,`eq.${l}`),this}neq(o,l){return this.url.searchParams.append(o,`neq.${l}`),this}gt(o,l){return this.url.searchParams.append(o,`gt.${l}`),this}gte(o,l){return this.url.searchParams.append(o,`gte.${l}`),this}lt(o,l){return this.url.searchParams.append(o,`lt.${l}`),this}lte(o,l){return this.url.searchParams.append(o,`lte.${l}`),this}like(o,l){return this.url.searchParams.append(o,`like.${l}`),this}likeAllOf(o,l){return this.url.searchParams.append(o,`like(all).{${l.join(",")}}`),this}likeAnyOf(o,l){return this.url.searchParams.append(o,`like(any).{${l.join(",")}}`),this}ilike(o,l){return this.url.searchParams.append(o,`ilike.${l}`),this}ilikeAllOf(o,l){return this.url.searchParams.append(o,`ilike(all).{${l.join(",")}}`),this}ilikeAnyOf(o,l){return this.url.searchParams.append(o,`ilike(any).{${l.join(",")}}`),this}is(o,l){return this.url.searchParams.append(o,`is.${l}`),this}in(o,l){const d=Array.from(new Set(l)).map(u=>typeof u=="string"&&new RegExp("[,()]").test(u)?`"${u}"`:`${u}`).join(",");return this.url.searchParams.append(o,`in.(${d})`),this}contains(o,l){return typeof l=="string"?this.url.searchParams.append(o,`cs.${l}`):Array.isArray(l)?this.url.searchParams.append(o,`cs.{${l.join(",")}}`):this.url.searchParams.append(o,`cs.${JSON.stringify(l)}`),this}containedBy(o,l){return typeof l=="string"?this.url.searchParams.append(o,`cd.${l}`):Array.isArray(l)?this.url.searchParams.append(o,`cd.{${l.join(",")}}`):this.url.searchParams.append(o,`cd.${JSON.stringify(l)}`),this}rangeGt(o,l){return this.url.searchParams.append(o,`sr.${l}`),this}rangeGte(o,l){return this.url.searchParams.append(o,`nxl.${l}`),this}rangeLt(o,l){return this.url.searchParams.append(o,`sl.${l}`),this}rangeLte(o,l){return this.url.searchParams.append(o,`nxr.${l}`),this}rangeAdjacent(o,l){return this.url.searchParams.append(o,`adj.${l}`),this}overlaps(o,l){return typeof l=="string"?this.url.searchParams.append(o,`ov.${l}`):this.url.searchParams.append(o,`ov.{${l.join(",")}}`),this}textSearch(o,l,{config:d,type:u}={}){let f="";u==="plain"?f="pl":u==="phrase"?f="ph":u==="websearch"&&(f="w");const p=d===void 0?"":`(${d})`;return this.url.searchParams.append(o,`${f}fts${p}.${l}`),this}match(o){return Object.entries(o).forEach(([l,d])=>{this.url.searchParams.append(l,`eq.${d}`)}),this}not(o,l,d){return this.url.searchParams.append(o,`not.${l}.${d}`),this}or(o,{foreignTable:l,referencedTable:d=l}={}){const u=d?`${d}.or`:"or";return this.url.searchParams.append(u,`(${o})`),this}filter(o,l,d){return this.url.searchParams.append(o,`${l}.${d}`),this}}return ti.default=n,ti}var Rx;function w0(){if(Rx)return ei;Rx=1;var t=ei&&ei.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(ei,"__esModule",{value:!0});const s=t(kf());class n{constructor(o,{headers:l={},schema:d,fetch:u}){this.url=o,this.headers=new Headers(l),this.schema=d,this.fetch=u}select(o,{head:l=!1,count:d}={}){const u=l?"HEAD":"GET";let f=!1;const p=(o??"*").split("").map(g=>/\s/.test(g)&&!f?"":(g==='"'&&(f=!f),g)).join("");return this.url.searchParams.set("select",p),d&&this.headers.append("Prefer",`count=${d}`),new s.default({method:u,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(o,{count:l,defaultToNull:d=!0}={}){var u;const f="POST";if(l&&this.headers.append("Prefer",`count=${l}`),d||this.headers.append("Prefer","missing=default"),Array.isArray(o)){const p=o.reduce((g,h)=>g.concat(Object.keys(h)),[]);if(p.length>0){const g=[...new Set(p)].map(h=>`"${h}"`);this.url.searchParams.set("columns",g.join(","))}}return new s.default({method:f,url:this.url,headers:this.headers,schema:this.schema,body:o,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}upsert(o,{onConflict:l,ignoreDuplicates:d=!1,count:u,defaultToNull:f=!0}={}){var p;const g="POST";if(this.headers.append("Prefer",`resolution=${d?"ignore":"merge"}-duplicates`),l!==void 0&&this.url.searchParams.set("on_conflict",l),u&&this.headers.append("Prefer",`count=${u}`),f||this.headers.append("Prefer","missing=default"),Array.isArray(o)){const h=o.reduce((y,j)=>y.concat(Object.keys(j)),[]);if(h.length>0){const y=[...new Set(h)].map(j=>`"${j}"`);this.url.searchParams.set("columns",y.join(","))}}return new s.default({method:g,url:this.url,headers:this.headers,schema:this.schema,body:o,fetch:(p=this.fetch)!==null&&p!==void 0?p:fetch})}update(o,{count:l}={}){var d;const u="PATCH";return l&&this.headers.append("Prefer",`count=${l}`),new s.default({method:u,url:this.url,headers:this.headers,schema:this.schema,body:o,fetch:(d=this.fetch)!==null&&d!==void 0?d:fetch})}delete({count:o}={}){var l;const d="DELETE";return o&&this.headers.append("Prefer",`count=${o}`),new s.default({method:d,url:this.url,headers:this.headers,schema:this.schema,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}}return ei.default=n,ei}var Dx;function cE(){if(Dx)return Za;Dx=1;var t=Za&&Za.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(Za,"__esModule",{value:!0});const s=t(w0()),n=t(kf());class i{constructor(l,{headers:d={},schema:u,fetch:f}={}){this.url=l,this.headers=new Headers(d),this.schemaName=u,this.fetch=f}from(l){const d=new URL(`${this.url}/${l}`);return new s.default(d,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(l){return new i(this.url,{headers:this.headers,schema:l,fetch:this.fetch})}rpc(l,d={},{head:u=!1,get:f=!1,count:p}={}){var g;let h;const y=new URL(`${this.url}/rpc/${l}`);let j;u||f?(h=u?"HEAD":"GET",Object.entries(d).filter(([w,S])=>S!==void 0).map(([w,S])=>[w,Array.isArray(S)?`{${S.join(",")}}`:`${S}`]).forEach(([w,S])=>{y.searchParams.append(w,S)})):(h="POST",j=d);const b=new Headers(this.headers);return p&&b.set("Prefer",`count=${p}`),new n.default({method:h,url:y,headers:b,schema:this.schemaName,body:j,fetch:(g=this.fetch)!==null&&g!==void 0?g:fetch})}}return Za.default=i,Za}var Mx;function dE(){if(Mx)return Rt;Mx=1;var t=Rt&&Rt.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(Rt,"__esModule",{value:!0}),Rt.PostgrestError=Rt.PostgrestBuilder=Rt.PostgrestTransformBuilder=Rt.PostgrestFilterBuilder=Rt.PostgrestQueryBuilder=Rt.PostgrestClient=void 0;const s=t(cE());Rt.PostgrestClient=s.default;const n=t(w0());Rt.PostgrestQueryBuilder=n.default;const i=t(kf());Rt.PostgrestFilterBuilder=i.default;const o=t(y0());Rt.PostgrestTransformBuilder=o.default;const l=t(v0());Rt.PostgrestBuilder=l.default;const d=t(x0());return Rt.PostgrestError=d.default,Rt.default={PostgrestClient:s.default,PostgrestQueryBuilder:n.default,PostgrestFilterBuilder:i.default,PostgrestTransformBuilder:o.default,PostgrestBuilder:l.default,PostgrestError:d.default},Rt}var uE=dE();const mE=tf(uE),{PostgrestClient:fE,PostgrestQueryBuilder:$R,PostgrestFilterBuilder:FR,PostgrestTransformBuilder:zR,PostgrestBuilder:BR,PostgrestError:UR}=mE;class hE{static detectEnvironment(){var s;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((s=navigator.userAgent)===null||s===void 0)&&s.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const n=process.versions;if(n&&n.node){const i=n.node,o=parseInt(i.replace(/^v/,"").split(".")[0]);return o>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${o} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${o} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const s=this.detectEnvironment();if(s.constructor)return s.constructor;let n=s.error||"WebSocket not supported in this environment.";throw s.workaround&&(n+=`

Suggested solution: ${s.workaround}`),new Error(n)}static createWebSocket(s,n){const i=this.getWebSocketConstructor();return new i(s,n)}static isWebSocketSupported(){try{const s=this.detectEnvironment();return s.type==="native"||s.type==="ws"}catch{return!1}}}const pE="2.15.5",gE=`realtime-js/${pE}`,xE="1.0.0",Fm=1e4,vE=1e3,yE=100;var yo;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(yo||(yo={}));var _t;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(_t||(_t={}));var tr;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(tr||(tr={}));var zm;(function(t){t.websocket="websocket"})(zm||(zm={}));var ca;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(ca||(ca={}));class wE{constructor(){this.HEADER_LENGTH=1}decode(s,n){return s.constructor===ArrayBuffer?n(this._binaryDecode(s)):n(typeof s=="string"?JSON.parse(s):{})}_binaryDecode(s){const n=new DataView(s),i=new TextDecoder;return this._decodeBroadcast(s,n,i)}_decodeBroadcast(s,n,i){const o=n.getUint8(1),l=n.getUint8(2);let d=this.HEADER_LENGTH+2;const u=i.decode(s.slice(d,d+o));d=d+o;const f=i.decode(s.slice(d,d+l));d=d+l;const p=JSON.parse(i.decode(s.slice(d,s.byteLength)));return{ref:null,topic:u,event:f,payload:p}}}class b0{constructor(s,n){this.callback=s,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=s,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var at;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(at||(at={}));const Ox=(t,s,n={})=>{var i;const o=(i=n.skipTypes)!==null&&i!==void 0?i:[];return Object.keys(s).reduce((l,d)=>(l[d]=bE(d,t,s,o),l),{})},bE=(t,s,n,i)=>{const o=s.find(u=>u.name===t),l=o?.type,d=n[t];return l&&!i.includes(l)?j0(l,d):Bm(d)},j0=(t,s)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return kE(s,n)}switch(t){case at.bool:return jE(s);case at.float4:case at.float8:case at.int2:case at.int4:case at.int8:case at.numeric:case at.oid:return NE(s);case at.json:case at.jsonb:return SE(s);case at.timestamp:return CE(s);case at.abstime:case at.date:case at.daterange:case at.int4range:case at.int8range:case at.money:case at.reltime:case at.text:case at.time:case at.timestamptz:case at.timetz:case at.tsrange:case at.tstzrange:return Bm(s);default:return Bm(s)}},Bm=t=>t,jE=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},NE=t=>{if(typeof t=="string"){const s=parseFloat(t);if(!Number.isNaN(s))return s}return t},SE=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(s){return console.log(`JSON parse error: ${s}`),t}return t},kE=(t,s)=>{if(typeof t!="string")return t;const n=t.length-1,i=t[n];if(t[0]==="{"&&i==="}"){let l;const d=t.slice(1,n);try{l=JSON.parse("["+d+"]")}catch{l=d?d.split(","):[]}return l.map(u=>j0(s,u))}return t},CE=t=>typeof t=="string"?t.replace(" ","T"):t,N0=t=>{let s=t;return s=s.replace(/^ws/i,"http"),s=s.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),s.replace(/\/+$/,"")+"/api/broadcast"};class im{constructor(s,n,i={},o=Fm){this.channel=s,this.event=n,this.payload=i,this.timeout=o,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(s){this.timeout=s,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(s){this.payload=Object.assign(Object.assign({},this.payload),s)}receive(s,n){var i;return this._hasReceived(s)&&n((i=this.receivedResp)===null||i===void 0?void 0:i.response),this.recHooks.push({status:s,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const s=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},s),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(s,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:s,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:s,response:n}){this.recHooks.filter(i=>i.status===s).forEach(i=>i.callback(n))}_hasReceived(s){return this.receivedResp&&this.receivedResp.status===s}}var Lx;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(Lx||(Lx={}));class wo{constructor(s,n){this.channel=s,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const i=n?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(i.state,{},o=>{const{onJoin:l,onLeave:d,onSync:u}=this.caller;this.joinRef=this.channel._joinRef(),this.state=wo.syncState(this.state,o,l,d),this.pendingDiffs.forEach(f=>{this.state=wo.syncDiff(this.state,f,l,d)}),this.pendingDiffs=[],u()}),this.channel._on(i.diff,{},o=>{const{onJoin:l,onLeave:d,onSync:u}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(o):(this.state=wo.syncDiff(this.state,o,l,d),u())}),this.onJoin((o,l,d)=>{this.channel._trigger("presence",{event:"join",key:o,currentPresences:l,newPresences:d})}),this.onLeave((o,l,d)=>{this.channel._trigger("presence",{event:"leave",key:o,currentPresences:l,leftPresences:d})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(s,n,i,o){const l=this.cloneDeep(s),d=this.transformState(n),u={},f={};return this.map(l,(p,g)=>{d[p]||(f[p]=g)}),this.map(d,(p,g)=>{const h=l[p];if(h){const y=g.map(S=>S.presence_ref),j=h.map(S=>S.presence_ref),b=g.filter(S=>j.indexOf(S.presence_ref)<0),w=h.filter(S=>y.indexOf(S.presence_ref)<0);b.length>0&&(u[p]=b),w.length>0&&(f[p]=w)}else u[p]=g}),this.syncDiff(l,{joins:u,leaves:f},i,o)}static syncDiff(s,n,i,o){const{joins:l,leaves:d}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return i||(i=()=>{}),o||(o=()=>{}),this.map(l,(u,f)=>{var p;const g=(p=s[u])!==null&&p!==void 0?p:[];if(s[u]=this.cloneDeep(f),g.length>0){const h=s[u].map(j=>j.presence_ref),y=g.filter(j=>h.indexOf(j.presence_ref)<0);s[u].unshift(...y)}i(u,g,f)}),this.map(d,(u,f)=>{let p=s[u];if(!p)return;const g=f.map(h=>h.presence_ref);p=p.filter(h=>g.indexOf(h.presence_ref)<0),s[u]=p,o(u,p,f),p.length===0&&delete s[u]}),s}static map(s,n){return Object.getOwnPropertyNames(s).map(i=>n(i,s[i]))}static transformState(s){return s=this.cloneDeep(s),Object.getOwnPropertyNames(s).reduce((n,i)=>{const o=s[i];return"metas"in o?n[i]=o.metas.map(l=>(l.presence_ref=l.phx_ref,delete l.phx_ref,delete l.phx_ref_prev,l)):n[i]=o,n},{})}static cloneDeep(s){return JSON.parse(JSON.stringify(s))}onJoin(s){this.caller.onJoin=s}onLeave(s){this.caller.onLeave=s}onSync(s){this.caller.onSync=s}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var $x;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})($x||($x={}));var bo;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(bo||(bo={}));var Kr;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(Kr||(Kr={}));class Cf{constructor(s,n={config:{}},i){this.topic=s,this.params=n,this.socket=i,this.bindings={},this.state=_t.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=s.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new im(this,tr.join,this.params,this.timeout),this.rejoinTimer=new b0(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=_t.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(o=>o.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=_t.closed,this.socket._remove(this)}),this._onError(o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=_t.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=_t.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=_t.errored,this.rejoinTimer.scheduleTimeout())}),this._on(tr.reply,{},(o,l)=>{this._trigger(this._replyEventName(l),o)}),this.presence=new wo(this),this.broadcastEndpointURL=N0(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(s,n=this.timeout){var i,o,l;if(this.socket.isConnected()||this.socket.connect(),this.state==_t.closed){const{config:{broadcast:d,presence:u,private:f}}=this.params,p=(o=(i=this.bindings.postgres_changes)===null||i===void 0?void 0:i.map(j=>j.filter))!==null&&o!==void 0?o:[],g=!!this.bindings[bo.PRESENCE]&&this.bindings[bo.PRESENCE].length>0||((l=this.params.config.presence)===null||l===void 0?void 0:l.enabled)===!0,h={},y={broadcast:d,presence:Object.assign(Object.assign({},u),{enabled:g}),postgres_changes:p,private:f};this.socket.accessTokenValue&&(h.access_token=this.socket.accessTokenValue),this._onError(j=>s?.(Kr.CHANNEL_ERROR,j)),this._onClose(()=>s?.(Kr.CLOSED)),this.updateJoinPayload(Object.assign({config:y},h)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:j})=>{var b;if(this.socket.setAuth(),j===void 0){s?.(Kr.SUBSCRIBED);return}else{const w=this.bindings.postgres_changes,S=(b=w?.length)!==null&&b!==void 0?b:0,k=[];for(let C=0;C<S;C++){const E=w[C],{filter:{event:P,schema:T,table:A,filter:R}}=E,$=j&&j[C];if($&&$.event===P&&$.schema===T&&$.table===A&&$.filter===R)k.push(Object.assign(Object.assign({},E),{id:$.id}));else{this.unsubscribe(),this.state=_t.errored,s?.(Kr.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=k,s&&s(Kr.SUBSCRIBED);return}}).receive("error",j=>{this.state=_t.errored,s?.(Kr.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(j).join(", ")||"error")))}).receive("timeout",()=>{s?.(Kr.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(s,n={}){return await this.send({type:"presence",event:"track",payload:s},n.timeout||this.timeout)}async untrack(s={}){return await this.send({type:"presence",event:"untrack"},s)}on(s,n,i){return this.state===_t.joined&&s===bo.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(s,n,i)}async send(s,n={}){var i,o;if(!this._canPush()&&s.type==="broadcast"){const{event:l,payload:d}=s,f={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:l,payload:d,private:this.private}]})};try{const p=await this._fetchWithTimeout(this.broadcastEndpointURL,f,(i=n.timeout)!==null&&i!==void 0?i:this.timeout);return await((o=p.body)===null||o===void 0?void 0:o.cancel()),p.ok?"ok":"error"}catch(p){return p.name==="AbortError"?"timed out":"error"}}else return new Promise(l=>{var d,u,f;const p=this._push(s.type,s,n.timeout||this.timeout);s.type==="broadcast"&&!(!((f=(u=(d=this.params)===null||d===void 0?void 0:d.config)===null||u===void 0?void 0:u.broadcast)===null||f===void 0)&&f.ack)&&l("ok"),p.receive("ok",()=>l("ok")),p.receive("error",()=>l("error")),p.receive("timeout",()=>l("timed out"))})}updateJoinPayload(s){this.joinPush.updatePayload(s)}unsubscribe(s=this.timeout){this.state=_t.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(tr.close,"leave",this._joinRef())};this.joinPush.destroy();let i=null;return new Promise(o=>{i=new im(this,tr.leave,{},s),i.receive("ok",()=>{n(),o("ok")}).receive("timeout",()=>{n(),o("timed out")}).receive("error",()=>{o("error")}),i.send(),this._canPush()||i.trigger("ok",{})}).finally(()=>{i?.destroy()})}teardown(){this.pushBuffer.forEach(s=>s.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=_t.closed,this.bindings={}}async _fetchWithTimeout(s,n,i){const o=new AbortController,l=setTimeout(()=>o.abort(),i),d=await this.socket.fetch(s,Object.assign(Object.assign({},n),{signal:o.signal}));return clearTimeout(l),d}_push(s,n,i=this.timeout){if(!this.joinedOnce)throw`tried to push '${s}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let o=new im(this,s,n,i);return this._canPush()?o.send():this._addToPushBuffer(o),o}_addToPushBuffer(s){if(s.startTimeout(),this.pushBuffer.push(s),this.pushBuffer.length>yE){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(s,n,i){return n}_isMember(s){return this.topic===s}_joinRef(){return this.joinPush.ref}_trigger(s,n,i){var o,l;const d=s.toLocaleLowerCase(),{close:u,error:f,leave:p,join:g}=tr;if(i&&[u,f,p,g].indexOf(d)>=0&&i!==this._joinRef())return;let y=this._onMessage(d,n,i);if(n&&!y)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(d)?(o=this.bindings.postgres_changes)===null||o===void 0||o.filter(j=>{var b,w,S;return((b=j.filter)===null||b===void 0?void 0:b.event)==="*"||((S=(w=j.filter)===null||w===void 0?void 0:w.event)===null||S===void 0?void 0:S.toLocaleLowerCase())===d}).map(j=>j.callback(y,i)):(l=this.bindings[d])===null||l===void 0||l.filter(j=>{var b,w,S,k,C,E;if(["broadcast","presence","postgres_changes"].includes(d))if("id"in j){const P=j.id,T=(b=j.filter)===null||b===void 0?void 0:b.event;return P&&((w=n.ids)===null||w===void 0?void 0:w.includes(P))&&(T==="*"||T?.toLocaleLowerCase()===((S=n.data)===null||S===void 0?void 0:S.type.toLocaleLowerCase()))}else{const P=(C=(k=j?.filter)===null||k===void 0?void 0:k.event)===null||C===void 0?void 0:C.toLocaleLowerCase();return P==="*"||P===((E=n?.event)===null||E===void 0?void 0:E.toLocaleLowerCase())}else return j.type.toLocaleLowerCase()===d}).map(j=>{if(typeof y=="object"&&"ids"in y){const b=y.data,{schema:w,table:S,commit_timestamp:k,type:C,errors:E}=b;y=Object.assign(Object.assign({},{schema:w,table:S,commit_timestamp:k,eventType:C,new:{},old:{},errors:E}),this._getPayloadRecords(b))}j.callback(y,i)})}_isClosed(){return this.state===_t.closed}_isJoined(){return this.state===_t.joined}_isJoining(){return this.state===_t.joining}_isLeaving(){return this.state===_t.leaving}_replyEventName(s){return`chan_reply_${s}`}_on(s,n,i){const o=s.toLocaleLowerCase(),l={type:o,filter:n,callback:i};return this.bindings[o]?this.bindings[o].push(l):this.bindings[o]=[l],this}_off(s,n){const i=s.toLocaleLowerCase();return this.bindings[i]&&(this.bindings[i]=this.bindings[i].filter(o=>{var l;return!(((l=o.type)===null||l===void 0?void 0:l.toLocaleLowerCase())===i&&Cf.isEqual(o.filter,n))})),this}static isEqual(s,n){if(Object.keys(s).length!==Object.keys(n).length)return!1;for(const i in s)if(s[i]!==n[i])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(s){this._on(tr.close,{},s)}_onError(s){this._on(tr.error,{},n=>s(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(s=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=_t.joining,this.joinPush.resend(s))}_getPayloadRecords(s){const n={new:{},old:{}};return(s.type==="INSERT"||s.type==="UPDATE")&&(n.new=Ox(s.columns,s.record)),(s.type==="UPDATE"||s.type==="DELETE")&&(n.old=Ox(s.columns,s.old_record)),n}}const om=()=>{},Zl={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},_E=[1e3,2e3,5e3,1e4],EE=1e4,TE=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class PE{constructor(s,n){var i;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Fm,this.transport=null,this.heartbeatIntervalMs=Zl.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=om,this.ref=0,this.reconnectTimer=null,this.logger=om,this.conn=null,this.sendBuffer=[],this.serializer=new wE,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=o=>{let l;return o?l=o:typeof fetch>"u"?l=(...d)=>Sr(async()=>{const{default:u}=await Promise.resolve().then(()=>Ei);return{default:u}},void 0).then(({default:u})=>u(...d)).catch(u=>{throw new Error(`Failed to load @supabase/node-fetch: ${u.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):l=fetch,(...d)=>l(...d)},!(!((i=n?.params)===null||i===void 0)&&i.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${s}/${zm.websocket}`,this.httpEndpoint=N0(s),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=hE.createWebSocket(this.endpointURL())}catch(s){this._setConnectionState("disconnected");const n=s.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:xE}))}disconnect(s,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const i=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(i),this._setConnectionState("disconnected")},s?this.conn.close(s,n??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(s){const n=await s.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const s=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),s}log(s,n,i){this.logger(s,n,i)}connectionState(){switch(this.conn&&this.conn.readyState){case yo.connecting:return ca.Connecting;case yo.open:return ca.Open;case yo.closing:return ca.Closing;default:return ca.Closed}}isConnected(){return this.connectionState()===ca.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(s,n={config:{}}){const i=`realtime:${s}`,o=this.getChannels().find(l=>l.topic===i);if(o)return o;{const l=new Cf(`realtime:${s}`,n,this);return this.channels.push(l),l}}push(s){const{topic:n,event:i,payload:o,ref:l}=s,d=()=>{this.encode(s,u=>{var f;(f=this.conn)===null||f===void 0||f.send(u)})};this.log("push",`${n} ${i} (${l})`,o),this.isConnected()?d():this.sendBuffer.push(d)}async setAuth(s=null){this._authPromise=this._performAuth(s);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var s;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(s=this.conn)===null||s===void 0||s.close(vE,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},Zl.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(s){this.heartbeatCallback=s}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(s=>s()),this.sendBuffer=[])}_makeRef(){let s=this.ref+1;return s===this.ref?this.ref=0:this.ref=s,this.ref.toString()}_leaveOpenTopic(s){let n=this.channels.find(i=>i.topic===s&&(i._isJoined()||i._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${s}"`),n.unsubscribe())}_remove(s){this.channels=this.channels.filter(n=>n.topic!==s.topic)}_onConnMessage(s){this.decode(s.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply")try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error")}catch(p){this.log("error","error in heartbeat callback",p)}n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:i,event:o,payload:l,ref:d}=n,u=d?`(${d})`:"",f=l.status||"";this.log("receive",`${f} ${i} ${o} ${u}`.trim(),l),this.channels.filter(p=>p._isMember(i)).forEach(p=>p._trigger(o,l,d)),this._triggerStateCallbacks("message",n)})}_clearTimer(s){var n;s==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):s==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=s=>this._onConnError(s),this.conn.onmessage=s=>this._onConnMessage(s),this.conn.onclose=s=>this._onConnClose(s))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(s=>s.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const s=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(s),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(s){var n;this._setConnectionState("disconnected"),this.log("transport","close",s),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",s)}_onConnError(s){this._setConnectionState("disconnected"),this.log("transport",`${s}`),this._triggerChanError(),this._triggerStateCallbacks("error",s)}_triggerChanError(){this.channels.forEach(s=>s._trigger(tr.error))}_appendParams(s,n){if(Object.keys(n).length===0)return s;const i=s.match(/\?/)?"&":"?",o=new URLSearchParams(n);return`${s}${i}${o}`}_workerObjectUrl(s){let n;if(s)n=s;else{const i=new Blob([TE],{type:"application/javascript"});n=URL.createObjectURL(i)}return n}_setConnectionState(s,n=!1){this._connectionState=s,s==="connecting"?this._wasManualDisconnect=!1:s==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(s=null){let n;s?n=s:this.accessToken?n=await this.accessToken():n=this.accessTokenValue,this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(i=>{const o={access_token:n,version:gE};n&&i.updateJoinPayload(o),i.joinedOnce&&i._isJoined()&&i._push(tr.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(s="general"){this.setAuth().catch(n=>{this.log("error",`error setting auth in ${s}`,n)})}_triggerStateCallbacks(s,n){try{this.stateChangeCallbacks[s].forEach(i=>{try{i(n)}catch(o){this.log("error",`error in ${s} callback`,o)}})}catch(i){this.log("error",`error triggering ${s} callbacks`,i)}}_setupReconnectionTimer(){this.reconnectTimer=new b0(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Zl.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(s){var n,i,o,l,d,u,f,p,g;if(this.transport=(n=s?.transport)!==null&&n!==void 0?n:null,this.timeout=(i=s?.timeout)!==null&&i!==void 0?i:Fm,this.heartbeatIntervalMs=(o=s?.heartbeatIntervalMs)!==null&&o!==void 0?o:Zl.HEARTBEAT_INTERVAL,this.worker=(l=s?.worker)!==null&&l!==void 0?l:!1,this.accessToken=(d=s?.accessToken)!==null&&d!==void 0?d:null,this.heartbeatCallback=(u=s?.heartbeatCallback)!==null&&u!==void 0?u:om,s?.params&&(this.params=s.params),s?.logger&&(this.logger=s.logger),(s?.logLevel||s?.log_level)&&(this.logLevel=s.logLevel||s.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(f=s?.reconnectAfterMs)!==null&&f!==void 0?f:(h=>_E[h-1]||EE),this.encode=(p=s?.encode)!==null&&p!==void 0?p:((h,y)=>y(JSON.stringify(h))),this.decode=(g=s?.decode)!==null&&g!==void 0?g:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=s?.workerUrl}}}class _f extends Error{constructor(s){super(s),this.__isStorageError=!0,this.name="StorageError"}}function jt(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class IE extends _f{constructor(s,n,i){super(s),this.name="StorageApiError",this.status=n,this.statusCode=i}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Um extends _f{constructor(s,n){super(s),this.name="StorageUnknownError",this.originalError=n}}var AE=function(t,s,n,i){function o(l){return l instanceof n?l:new n(function(d){d(l)})}return new(n||(n=Promise))(function(l,d){function u(g){try{p(i.next(g))}catch(h){d(h)}}function f(g){try{p(i.throw(g))}catch(h){d(h)}}function p(g){g.done?l(g.value):o(g.value).then(u,f)}p((i=i.apply(t,s||[])).next())})};const S0=t=>{let s;return t?s=t:typeof fetch>"u"?s=(...n)=>Sr(async()=>{const{default:i}=await Promise.resolve().then(()=>Ei);return{default:i}},void 0).then(({default:i})=>i(...n)):s=fetch,(...n)=>s(...n)},RE=()=>AE(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Sr(()=>Promise.resolve().then(()=>Ei),void 0)).Response:Response}),Vm=t=>{if(Array.isArray(t))return t.map(n=>Vm(n));if(typeof t=="function"||t!==Object(t))return t;const s={};return Object.entries(t).forEach(([n,i])=>{const o=n.replace(/([-_][a-z])/gi,l=>l.toUpperCase().replace(/[-_]/g,""));s[o]=Vm(i)}),s},DE=t=>{if(typeof t!="object"||t===null)return!1;const s=Object.getPrototypeOf(t);return(s===null||s===Object.prototype||Object.getPrototypeOf(s)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)};var Na=function(t,s,n,i){function o(l){return l instanceof n?l:new n(function(d){d(l)})}return new(n||(n=Promise))(function(l,d){function u(g){try{p(i.next(g))}catch(h){d(h)}}function f(g){try{p(i.throw(g))}catch(h){d(h)}}function p(g){g.done?l(g.value):o(g.value).then(u,f)}p((i=i.apply(t,s||[])).next())})};const lm=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),ME=(t,s,n)=>Na(void 0,void 0,void 0,function*(){const i=yield RE();t instanceof i&&!n?.noResolveJson?t.json().then(o=>{const l=t.status||500,d=o?.statusCode||l+"";s(new IE(lm(o),l,d))}).catch(o=>{s(new Um(lm(o),o))}):s(new Um(lm(t),t))}),OE=(t,s,n,i)=>{const o={method:t,headers:s?.headers||{}};return t==="GET"||!i?o:(DE(i)?(o.headers=Object.assign({"Content-Type":"application/json"},s?.headers),o.body=JSON.stringify(i)):o.body=i,s?.duplex&&(o.duplex=s.duplex),Object.assign(Object.assign({},o),n))};function Do(t,s,n,i,o,l){return Na(this,void 0,void 0,function*(){return new Promise((d,u)=>{t(n,OE(s,i,o,l)).then(f=>{if(!f.ok)throw f;return i?.noResolveJson?f:f.json()}).then(f=>d(f)).catch(f=>ME(f,u,i))})})}function Nc(t,s,n,i){return Na(this,void 0,void 0,function*(){return Do(t,"GET",s,n,i)})}function vr(t,s,n,i,o){return Na(this,void 0,void 0,function*(){return Do(t,"POST",s,i,o,n)})}function qm(t,s,n,i,o){return Na(this,void 0,void 0,function*(){return Do(t,"PUT",s,i,o,n)})}function LE(t,s,n,i){return Na(this,void 0,void 0,function*(){return Do(t,"HEAD",s,Object.assign(Object.assign({},n),{noResolveJson:!0}),i)})}function k0(t,s,n,i,o){return Na(this,void 0,void 0,function*(){return Do(t,"DELETE",s,i,o,n)})}var $E=function(t,s,n,i){function o(l){return l instanceof n?l:new n(function(d){d(l)})}return new(n||(n=Promise))(function(l,d){function u(g){try{p(i.next(g))}catch(h){d(h)}}function f(g){try{p(i.throw(g))}catch(h){d(h)}}function p(g){g.done?l(g.value):o(g.value).then(u,f)}p((i=i.apply(t,s||[])).next())})};class FE{constructor(s,n){this.downloadFn=s,this.shouldThrowOnError=n}then(s,n){return this.execute().then(s,n)}execute(){return $E(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(jt(s))return{data:null,error:s};throw s}})}}var zE=function(t,s,n,i){function o(l){return l instanceof n?l:new n(function(d){d(l)})}return new(n||(n=Promise))(function(l,d){function u(g){try{p(i.next(g))}catch(h){d(h)}}function f(g){try{p(i.throw(g))}catch(h){d(h)}}function p(g){g.done?l(g.value):o(g.value).then(u,f)}p((i=i.apply(t,s||[])).next())})};class BE{constructor(s,n){this.downloadFn=s,this.shouldThrowOnError=n}asStream(){return new FE(this.downloadFn,this.shouldThrowOnError)}then(s,n){return this.execute().then(s,n)}execute(){return zE(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(jt(s))return{data:null,error:s};throw s}})}}var ws=function(t,s,n,i){function o(l){return l instanceof n?l:new n(function(d){d(l)})}return new(n||(n=Promise))(function(l,d){function u(g){try{p(i.next(g))}catch(h){d(h)}}function f(g){try{p(i.throw(g))}catch(h){d(h)}}function p(g){g.done?l(g.value):o(g.value).then(u,f)}p((i=i.apply(t,s||[])).next())})};const UE={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Fx={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class VE{constructor(s,n={},i,o){this.shouldThrowOnError=!1,this.url=s,this.headers=n,this.bucketId=i,this.fetch=S0(o)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(s,n,i,o){return ws(this,void 0,void 0,function*(){try{let l;const d=Object.assign(Object.assign({},Fx),o);let u=Object.assign(Object.assign({},this.headers),s==="POST"&&{"x-upsert":String(d.upsert)});const f=d.metadata;typeof Blob<"u"&&i instanceof Blob?(l=new FormData,l.append("cacheControl",d.cacheControl),f&&l.append("metadata",this.encodeMetadata(f)),l.append("",i)):typeof FormData<"u"&&i instanceof FormData?(l=i,l.append("cacheControl",d.cacheControl),f&&l.append("metadata",this.encodeMetadata(f))):(l=i,u["cache-control"]=`max-age=${d.cacheControl}`,u["content-type"]=d.contentType,f&&(u["x-metadata"]=this.toBase64(this.encodeMetadata(f)))),o?.headers&&(u=Object.assign(Object.assign({},u),o.headers));const p=this._removeEmptyFolders(n),g=this._getFinalPath(p),h=yield(s=="PUT"?qm:vr)(this.fetch,`${this.url}/object/${g}`,l,Object.assign({headers:u},d?.duplex?{duplex:d.duplex}:{}));return{data:{path:p,id:h.Id,fullPath:h.Key},error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(jt(l))return{data:null,error:l};throw l}})}upload(s,n,i){return ws(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",s,n,i)})}uploadToSignedUrl(s,n,i,o){return ws(this,void 0,void 0,function*(){const l=this._removeEmptyFolders(s),d=this._getFinalPath(l),u=new URL(this.url+`/object/upload/sign/${d}`);u.searchParams.set("token",n);try{let f;const p=Object.assign({upsert:Fx.upsert},o),g=Object.assign(Object.assign({},this.headers),{"x-upsert":String(p.upsert)});typeof Blob<"u"&&i instanceof Blob?(f=new FormData,f.append("cacheControl",p.cacheControl),f.append("",i)):typeof FormData<"u"&&i instanceof FormData?(f=i,f.append("cacheControl",p.cacheControl)):(f=i,g["cache-control"]=`max-age=${p.cacheControl}`,g["content-type"]=p.contentType);const h=yield qm(this.fetch,u.toString(),f,{headers:g});return{data:{path:l,fullPath:h.Key},error:null}}catch(f){if(this.shouldThrowOnError)throw f;if(jt(f))return{data:null,error:f};throw f}})}createSignedUploadUrl(s,n){return ws(this,void 0,void 0,function*(){try{let i=this._getFinalPath(s);const o=Object.assign({},this.headers);n?.upsert&&(o["x-upsert"]="true");const l=yield vr(this.fetch,`${this.url}/object/upload/sign/${i}`,{},{headers:o}),d=new URL(this.url+l.url),u=d.searchParams.get("token");if(!u)throw new _f("No token returned by API");return{data:{signedUrl:d.toString(),path:s,token:u},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(jt(i))return{data:null,error:i};throw i}})}update(s,n,i){return ws(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",s,n,i)})}move(s,n,i){return ws(this,void 0,void 0,function*(){try{return{data:yield vr(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:s,destinationKey:n,destinationBucket:i?.destinationBucket},{headers:this.headers}),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(jt(o))return{data:null,error:o};throw o}})}copy(s,n,i){return ws(this,void 0,void 0,function*(){try{return{data:{path:(yield vr(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:s,destinationKey:n,destinationBucket:i?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(jt(o))return{data:null,error:o};throw o}})}createSignedUrl(s,n,i){return ws(this,void 0,void 0,function*(){try{let o=this._getFinalPath(s),l=yield vr(this.fetch,`${this.url}/object/sign/${o}`,Object.assign({expiresIn:n},i?.transform?{transform:i.transform}:{}),{headers:this.headers});const d=i?.download?`&download=${i.download===!0?"":i.download}`:"";return l={signedUrl:encodeURI(`${this.url}${l.signedURL}${d}`)},{data:l,error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(jt(o))return{data:null,error:o};throw o}})}createSignedUrls(s,n,i){return ws(this,void 0,void 0,function*(){try{const o=yield vr(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:s},{headers:this.headers}),l=i?.download?`&download=${i.download===!0?"":i.download}`:"";return{data:o.map(d=>Object.assign(Object.assign({},d),{signedUrl:d.signedURL?encodeURI(`${this.url}${d.signedURL}${l}`):null})),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(jt(o))return{data:null,error:o};throw o}})}download(s,n){const o=typeof n?.transform<"u"?"render/image/authenticated":"object",l=this.transformOptsToQueryString(n?.transform||{}),d=l?`?${l}`:"",u=this._getFinalPath(s),f=()=>Nc(this.fetch,`${this.url}/${o}/${u}${d}`,{headers:this.headers,noResolveJson:!0});return new BE(f,this.shouldThrowOnError)}info(s){return ws(this,void 0,void 0,function*(){const n=this._getFinalPath(s);try{const i=yield Nc(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:Vm(i),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(jt(i))return{data:null,error:i};throw i}})}exists(s){return ws(this,void 0,void 0,function*(){const n=this._getFinalPath(s);try{return yield LE(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(jt(i)&&i instanceof Um){const o=i.originalError;if([400,404].includes(o?.status))return{data:!1,error:i}}throw i}})}getPublicUrl(s,n){const i=this._getFinalPath(s),o=[],l=n?.download?`download=${n.download===!0?"":n.download}`:"";l!==""&&o.push(l);const u=typeof n?.transform<"u"?"render/image":"object",f=this.transformOptsToQueryString(n?.transform||{});f!==""&&o.push(f);let p=o.join("&");return p!==""&&(p=`?${p}`),{data:{publicUrl:encodeURI(`${this.url}/${u}/public/${i}${p}`)}}}remove(s){return ws(this,void 0,void 0,function*(){try{return{data:yield k0(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:s},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(jt(n))return{data:null,error:n};throw n}})}list(s,n,i){return ws(this,void 0,void 0,function*(){try{const o=Object.assign(Object.assign(Object.assign({},UE),n),{prefix:s||""});return{data:yield vr(this.fetch,`${this.url}/object/list/${this.bucketId}`,o,{headers:this.headers},i),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(jt(o))return{data:null,error:o};throw o}})}listV2(s,n){return ws(this,void 0,void 0,function*(){try{const i=Object.assign({},s);return{data:yield vr(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,i,{headers:this.headers},n),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(jt(i))return{data:null,error:i};throw i}})}encodeMetadata(s){return JSON.stringify(s)}toBase64(s){return typeof Buffer<"u"?Buffer.from(s).toString("base64"):btoa(s)}_getFinalPath(s){return`${this.bucketId}/${s.replace(/^\/+/,"")}`}_removeEmptyFolders(s){return s.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(s){const n=[];return s.width&&n.push(`width=${s.width}`),s.height&&n.push(`height=${s.height}`),s.resize&&n.push(`resize=${s.resize}`),s.format&&n.push(`format=${s.format}`),s.quality&&n.push(`quality=${s.quality}`),n.join("&")}}const qE="2.12.2",HE={"X-Client-Info":`storage-js/${qE}`};var ni=function(t,s,n,i){function o(l){return l instanceof n?l:new n(function(d){d(l)})}return new(n||(n=Promise))(function(l,d){function u(g){try{p(i.next(g))}catch(h){d(h)}}function f(g){try{p(i.throw(g))}catch(h){d(h)}}function p(g){g.done?l(g.value):o(g.value).then(u,f)}p((i=i.apply(t,s||[])).next())})};class WE{constructor(s,n={},i,o){this.shouldThrowOnError=!1;const l=new URL(s);o?.useNewHostname&&/supabase\.(co|in|red)$/.test(l.hostname)&&!l.hostname.includes("storage.supabase.")&&(l.hostname=l.hostname.replace("supabase.","storage.supabase.")),this.url=l.href,this.headers=Object.assign(Object.assign({},HE),n),this.fetch=S0(i)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return ni(this,void 0,void 0,function*(){try{return{data:yield Nc(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(jt(s))return{data:null,error:s};throw s}})}getBucket(s){return ni(this,void 0,void 0,function*(){try{return{data:yield Nc(this.fetch,`${this.url}/bucket/${s}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(jt(n))return{data:null,error:n};throw n}})}createBucket(s,n={public:!1}){return ni(this,void 0,void 0,function*(){try{return{data:yield vr(this.fetch,`${this.url}/bucket`,{id:s,name:s,type:n.type,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(jt(i))return{data:null,error:i};throw i}})}updateBucket(s,n){return ni(this,void 0,void 0,function*(){try{return{data:yield qm(this.fetch,`${this.url}/bucket/${s}`,{id:s,name:s,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(jt(i))return{data:null,error:i};throw i}})}emptyBucket(s){return ni(this,void 0,void 0,function*(){try{return{data:yield vr(this.fetch,`${this.url}/bucket/${s}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(jt(n))return{data:null,error:n};throw n}})}deleteBucket(s){return ni(this,void 0,void 0,function*(){try{return{data:yield k0(this.fetch,`${this.url}/bucket/${s}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(jt(n))return{data:null,error:n};throw n}})}}class KE extends WE{constructor(s,n={},i,o){super(s,n,i,o)}from(s){return new VE(this.url,this.headers,s,this.fetch)}}const GE="2.58.0";let go="";typeof Deno<"u"?go="deno":typeof document<"u"?go="web":typeof navigator<"u"&&navigator.product==="ReactNative"?go="react-native":go="node";const JE={"X-Client-Info":`supabase-js-${go}/${GE}`},YE={headers:JE},QE={schema:"public"},XE={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},ZE={};var eT=function(t,s,n,i){function o(l){return l instanceof n?l:new n(function(d){d(l)})}return new(n||(n=Promise))(function(l,d){function u(g){try{p(i.next(g))}catch(h){d(h)}}function f(g){try{p(i.throw(g))}catch(h){d(h)}}function p(g){g.done?l(g.value):o(g.value).then(u,f)}p((i=i.apply(t,s||[])).next())})};const tT=t=>{let s;return t?s=t:typeof fetch>"u"?s=p0:s=fetch,(...n)=>s(...n)},sT=()=>typeof Headers>"u"?g0:Headers,rT=(t,s,n)=>{const i=tT(n),o=sT();return(l,d)=>eT(void 0,void 0,void 0,function*(){var u;const f=(u=yield s())!==null&&u!==void 0?u:t;let p=new o(d?.headers);return p.has("apikey")||p.set("apikey",t),p.has("Authorization")||p.set("Authorization",`Bearer ${f}`),i(l,Object.assign(Object.assign({},d),{headers:p}))})};var nT=function(t,s,n,i){function o(l){return l instanceof n?l:new n(function(d){d(l)})}return new(n||(n=Promise))(function(l,d){function u(g){try{p(i.next(g))}catch(h){d(h)}}function f(g){try{p(i.throw(g))}catch(h){d(h)}}function p(g){g.done?l(g.value):o(g.value).then(u,f)}p((i=i.apply(t,s||[])).next())})};function aT(t){return t.endsWith("/")?t:t+"/"}function iT(t,s){var n,i;const{db:o,auth:l,realtime:d,global:u}=t,{db:f,auth:p,realtime:g,global:h}=s,y={db:Object.assign(Object.assign({},f),o),auth:Object.assign(Object.assign({},p),l),realtime:Object.assign(Object.assign({},g),d),storage:{},global:Object.assign(Object.assign(Object.assign({},h),u),{headers:Object.assign(Object.assign({},(n=h?.headers)!==null&&n!==void 0?n:{}),(i=u?.headers)!==null&&i!==void 0?i:{})}),accessToken:()=>nT(this,void 0,void 0,function*(){return""})};return t.accessToken?y.accessToken=t.accessToken:delete y.accessToken,y}function oT(t){const s=t?.trim();if(!s)throw new Error("supabaseUrl is required.");if(!s.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(aT(s))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const C0="2.72.0",ci=30*1e3,Hm=3,cm=Hm*ci,lT="http://localhost:9999",cT="supabase.auth.token",dT={"X-Client-Info":`gotrue-js/${C0}`},Wm="X-Supabase-Api-Version",_0={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},uT=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,mT=600*1e3;class Ef extends Error{constructor(s,n,i){super(s),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=i}}function qe(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class fT extends Ef{constructor(s,n,i){super(s,n,i),this.name="AuthApiError",this.status=n,this.code=i}}function hT(t){return qe(t)&&t.name==="AuthApiError"}class E0 extends Ef{constructor(s,n){super(s),this.name="AuthUnknownError",this.originalError=n}}class Bn extends Ef{constructor(s,n,i,o){super(s,i,o),this.name=n,this.status=i}}class Pn extends Bn{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function pT(t){return qe(t)&&t.name==="AuthSessionMissingError"}class mo extends Bn{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class ec extends Bn{constructor(s){super(s,"AuthInvalidCredentialsError",400,void 0)}}class tc extends Bn{constructor(s,n=null){super(s,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function gT(t){return qe(t)&&t.name==="AuthImplicitGrantRedirectError"}class zx extends Bn{constructor(s,n=null){super(s,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Km extends Bn{constructor(s,n){super(s,"AuthRetryableFetchError",n,void 0)}}function dm(t){return qe(t)&&t.name==="AuthRetryableFetchError"}class Bx extends Bn{constructor(s,n,i){super(s,"AuthWeakPasswordError",n,"weak_password"),this.reasons=i}}class Gm extends Bn{constructor(s){super(s,"AuthInvalidJwtError",400,"invalid_jwt")}}const Sc="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Ux=` 	
\r=`.split(""),xT=(()=>{const t=new Array(128);for(let s=0;s<t.length;s+=1)t[s]=-1;for(let s=0;s<Ux.length;s+=1)t[Ux[s].charCodeAt(0)]=-2;for(let s=0;s<Sc.length;s+=1)t[Sc[s].charCodeAt(0)]=s;return t})();function Vx(t,s,n){if(t!==null)for(s.queue=s.queue<<8|t,s.queuedBits+=8;s.queuedBits>=6;){const i=s.queue>>s.queuedBits-6&63;n(Sc[i]),s.queuedBits-=6}else if(s.queuedBits>0)for(s.queue=s.queue<<6-s.queuedBits,s.queuedBits=6;s.queuedBits>=6;){const i=s.queue>>s.queuedBits-6&63;n(Sc[i]),s.queuedBits-=6}}function T0(t,s,n){const i=xT[t];if(i>-1)for(s.queue=s.queue<<6|i,s.queuedBits+=6;s.queuedBits>=8;)n(s.queue>>s.queuedBits-8&255),s.queuedBits-=8;else{if(i===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function qx(t){const s=[],n=d=>{s.push(String.fromCodePoint(d))},i={utf8seq:0,codepoint:0},o={queue:0,queuedBits:0},l=d=>{wT(d,i,n)};for(let d=0;d<t.length;d+=1)T0(t.charCodeAt(d),o,l);return s.join("")}function vT(t,s){if(t<=127){s(t);return}else if(t<=2047){s(192|t>>6),s(128|t&63);return}else if(t<=65535){s(224|t>>12),s(128|t>>6&63),s(128|t&63);return}else if(t<=1114111){s(240|t>>18),s(128|t>>12&63),s(128|t>>6&63),s(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function yT(t,s){for(let n=0;n<t.length;n+=1){let i=t.charCodeAt(n);if(i>55295&&i<=56319){const o=(i-55296)*1024&65535;i=(t.charCodeAt(n+1)-56320&65535|o)+65536,n+=1}vT(i,s)}}function wT(t,s,n){if(s.utf8seq===0){if(t<=127){n(t);return}for(let i=1;i<6;i+=1)if((t>>7-i&1)===0){s.utf8seq=i;break}if(s.utf8seq===2)s.codepoint=t&31;else if(s.utf8seq===3)s.codepoint=t&15;else if(s.utf8seq===4)s.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");s.utf8seq-=1}else if(s.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");s.codepoint=s.codepoint<<6|t&63,s.utf8seq-=1,s.utf8seq===0&&n(s.codepoint)}}function bT(t){const s=[],n={queue:0,queuedBits:0},i=o=>{s.push(o)};for(let o=0;o<t.length;o+=1)T0(t.charCodeAt(o),n,i);return new Uint8Array(s)}function jT(t){const s=[];return yT(t,n=>s.push(n)),new Uint8Array(s)}function NT(t){const s=[],n={queue:0,queuedBits:0},i=o=>{s.push(o)};return t.forEach(o=>Vx(o,n,i)),Vx(null,n,i),s.join("")}function ST(t){return Math.round(Date.now()/1e3)+t}function kT(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const s=Math.random()*16|0;return(t=="x"?s:s&3|8).toString(16)})}const Fs=()=>typeof window<"u"&&typeof document<"u",ia={tested:!1,writable:!1},P0=()=>{if(!Fs())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(ia.tested)return ia.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),ia.tested=!0,ia.writable=!0}catch{ia.tested=!0,ia.writable=!1}return ia.writable};function CT(t){const s={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((o,l)=>{s[l]=o})}catch{}return n.searchParams.forEach((i,o)=>{s[o]=i}),s}const I0=t=>{let s;return t?s=t:typeof fetch>"u"?s=(...n)=>Sr(async()=>{const{default:i}=await Promise.resolve().then(()=>Ei);return{default:i}},void 0).then(({default:i})=>i(...n)):s=fetch,(...n)=>s(...n)},_T=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",di=async(t,s,n)=>{await t.setItem(s,JSON.stringify(n))},oa=async(t,s)=>{const n=await t.getItem(s);if(!n)return null;try{return JSON.parse(n)}catch{return n}},_n=async(t,s)=>{await t.removeItem(s)};class Qc{constructor(){this.promise=new Qc.promiseConstructor((s,n)=>{this.resolve=s,this.reject=n})}}Qc.promiseConstructor=Promise;function um(t){const s=t.split(".");if(s.length!==3)throw new Gm("Invalid JWT structure");for(let i=0;i<s.length;i++)if(!uT.test(s[i]))throw new Gm("JWT not in base64url format");return{header:JSON.parse(qx(s[0])),payload:JSON.parse(qx(s[1])),signature:bT(s[2]),raw:{header:s[0],payload:s[1]}}}async function ET(t){return await new Promise(s=>{setTimeout(()=>s(null),t)})}function TT(t,s){return new Promise((i,o)=>{(async()=>{for(let l=0;l<1/0;l++)try{const d=await t(l);if(!s(l,null,d)){i(d);return}}catch(d){if(!s(l,d)){o(d);return}}})()})}function PT(t){return("0"+t.toString(16)).substr(-2)}function IT(){const s=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",i=n.length;let o="";for(let l=0;l<56;l++)o+=n.charAt(Math.floor(Math.random()*i));return o}return crypto.getRandomValues(s),Array.from(s,PT).join("")}async function AT(t){const n=new TextEncoder().encode(t),i=await crypto.subtle.digest("SHA-256",n),o=new Uint8Array(i);return Array.from(o).map(l=>String.fromCharCode(l)).join("")}async function RT(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=await AT(t);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function ai(t,s,n=!1){const i=IT();let o=i;n&&(o+="/PASSWORD_RECOVERY"),await di(t,`${s}-code-verifier`,o);const l=await RT(i);return[l,i===l?"plain":"s256"]}const DT=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function MT(t){const s=t.headers.get(Wm);if(!s||!s.match(DT))return null;try{return new Date(`${s}T00:00:00.0Z`)}catch{return null}}function OT(t){if(!t)throw new Error("Missing exp claim");const s=Math.floor(Date.now()/1e3);if(t<=s)throw new Error("JWT has expired")}function LT(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const $T=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function ii(t){if(!$T.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function mm(){const t={};return new Proxy(t,{get:(s,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const i=n.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(s,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(s,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Hx(t){return JSON.parse(JSON.stringify(t))}var FT=function(t,s){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&s.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(t);o<i.length;o++)s.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(t,i[o])&&(n[i[o]]=t[i[o]]);return n};const la=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),zT=[502,503,504];async function Wx(t){var s;if(!_T(t))throw new Km(la(t),0);if(zT.includes(t.status))throw new Km(la(t),t.status);let n;try{n=await t.json()}catch(l){throw new E0(la(l),l)}let i;const o=MT(t);if(o&&o.getTime()>=_0["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?i=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(i=n.error_code),i){if(i==="weak_password")throw new Bx(la(n),t.status,((s=n.weak_password)===null||s===void 0?void 0:s.reasons)||[]);if(i==="session_not_found")throw new Pn}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((l,d)=>l&&typeof d=="string",!0))throw new Bx(la(n),t.status,n.weak_password.reasons);throw new fT(la(n),t.status||500,i)}const BT=(t,s,n,i)=>{const o={method:t,headers:s?.headers||{}};return t==="GET"?o:(o.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},s?.headers),o.body=JSON.stringify(i),Object.assign(Object.assign({},o),n))};async function Ge(t,s,n,i){var o;const l=Object.assign({},i?.headers);l[Wm]||(l[Wm]=_0["2024-01-01"].name),i?.jwt&&(l.Authorization=`Bearer ${i.jwt}`);const d=(o=i?.query)!==null&&o!==void 0?o:{};i?.redirectTo&&(d.redirect_to=i.redirectTo);const u=Object.keys(d).length?"?"+new URLSearchParams(d).toString():"",f=await UT(t,s,n+u,{headers:l,noResolveJson:i?.noResolveJson},{},i?.body);return i?.xform?i?.xform(f):{data:Object.assign({},f),error:null}}async function UT(t,s,n,i,o,l){const d=BT(s,i,o,l);let u;try{u=await t(n,Object.assign({},d))}catch(f){throw console.error(f),new Km(la(f),0)}if(u.ok||await Wx(u),i?.noResolveJson)return u;try{return await u.json()}catch(f){await Wx(f)}}function xr(t){var s;let n=null;WT(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=ST(t.expires_in)));const i=(s=t.user)!==null&&s!==void 0?s:t;return{data:{session:n,user:i},error:null}}function Kx(t){const s=xr(t);return!s.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,i)=>n&&typeof i=="string",!0)&&(s.data.weak_password=t.weak_password),s}function In(t){var s;return{data:{user:(s=t.user)!==null&&s!==void 0?s:t},error:null}}function VT(t){return{data:t,error:null}}function qT(t){const{action_link:s,email_otp:n,hashed_token:i,redirect_to:o,verification_type:l}=t,d=FT(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),u={action_link:s,email_otp:n,hashed_token:i,redirect_to:o,verification_type:l},f=Object.assign({},d);return{data:{properties:u,user:f},error:null}}function HT(t){return t}function WT(t){return t.access_token&&t.refresh_token&&t.expires_in}const fm=["global","local","others"];var KT=function(t,s){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&s.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(t);o<i.length;o++)s.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(t,i[o])&&(n[i[o]]=t[i[o]]);return n};class GT{constructor({url:s="",headers:n={},fetch:i}){this.url=s,this.headers=n,this.fetch=I0(i),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(s,n=fm[0]){if(fm.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${fm.join(", ")}`);try{return await Ge(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:s,noResolveJson:!0}),{data:null,error:null}}catch(i){if(qe(i))return{data:null,error:i};throw i}}async inviteUserByEmail(s,n={}){try{return await Ge(this.fetch,"POST",`${this.url}/invite`,{body:{email:s,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:In})}catch(i){if(qe(i))return{data:{user:null},error:i};throw i}}async generateLink(s){try{const{options:n}=s,i=KT(s,["options"]),o=Object.assign(Object.assign({},i),n);return"newEmail"in i&&(o.new_email=i?.newEmail,delete o.newEmail),await Ge(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:o,headers:this.headers,xform:qT,redirectTo:n?.redirectTo})}catch(n){if(qe(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(s){try{return await Ge(this.fetch,"POST",`${this.url}/admin/users`,{body:s,headers:this.headers,xform:In})}catch(n){if(qe(n))return{data:{user:null},error:n};throw n}}async listUsers(s){var n,i,o,l,d,u,f;try{const p={nextPage:null,lastPage:0,total:0},g=await Ge(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(i=(n=s?.page)===null||n===void 0?void 0:n.toString())!==null&&i!==void 0?i:"",per_page:(l=(o=s?.perPage)===null||o===void 0?void 0:o.toString())!==null&&l!==void 0?l:""},xform:HT});if(g.error)throw g.error;const h=await g.json(),y=(d=g.headers.get("x-total-count"))!==null&&d!==void 0?d:0,j=(f=(u=g.headers.get("link"))===null||u===void 0?void 0:u.split(","))!==null&&f!==void 0?f:[];return j.length>0&&(j.forEach(b=>{const w=parseInt(b.split(";")[0].split("=")[1].substring(0,1)),S=JSON.parse(b.split(";")[1].split("=")[1]);p[`${S}Page`]=w}),p.total=parseInt(y)),{data:Object.assign(Object.assign({},h),p),error:null}}catch(p){if(qe(p))return{data:{users:[]},error:p};throw p}}async getUserById(s){ii(s);try{return await Ge(this.fetch,"GET",`${this.url}/admin/users/${s}`,{headers:this.headers,xform:In})}catch(n){if(qe(n))return{data:{user:null},error:n};throw n}}async updateUserById(s,n){ii(s);try{return await Ge(this.fetch,"PUT",`${this.url}/admin/users/${s}`,{body:n,headers:this.headers,xform:In})}catch(i){if(qe(i))return{data:{user:null},error:i};throw i}}async deleteUser(s,n=!1){ii(s);try{return await Ge(this.fetch,"DELETE",`${this.url}/admin/users/${s}`,{headers:this.headers,body:{should_soft_delete:n},xform:In})}catch(i){if(qe(i))return{data:{user:null},error:i};throw i}}async _listFactors(s){ii(s.userId);try{const{data:n,error:i}=await Ge(this.fetch,"GET",`${this.url}/admin/users/${s.userId}/factors`,{headers:this.headers,xform:o=>({data:{factors:o},error:null})});return{data:n,error:i}}catch(n){if(qe(n))return{data:null,error:n};throw n}}async _deleteFactor(s){ii(s.userId),ii(s.id);try{return{data:await Ge(this.fetch,"DELETE",`${this.url}/admin/users/${s.userId}/factors/${s.id}`,{headers:this.headers}),error:null}}catch(n){if(qe(n))return{data:null,error:n};throw n}}}function Gx(t={}){return{getItem:s=>t[s]||null,setItem:(s,n)=>{t[s]=n},removeItem:s=>{delete t[s]}}}function JT(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const oi={debug:!!(globalThis&&P0()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class A0 extends Error{constructor(s){super(s),this.isAcquireTimeout=!0}}class YT extends A0{}async function QT(t,s,n){oi.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,s);const i=new globalThis.AbortController;return s>0&&setTimeout(()=>{i.abort(),oi.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},s),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,s===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:i.signal},async o=>{if(o){oi.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,o.name);try{return await n()}finally{oi.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,o.name)}}else{if(s===0)throw oi.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new YT(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(oi.debug)try{const l=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(l,null,"  "))}catch(l){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",l)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}function R0(t){if(!/^0x[a-fA-F0-9]{40}$/.test(t))throw new Error(`@supabase/auth-js: Address "${t}" is invalid.`);return t.toLowerCase()}function XT(t){return parseInt(t,16)}function ZT(t){const s=new TextEncoder().encode(t);return"0x"+Array.from(s,i=>i.toString(16).padStart(2,"0")).join("")}function e4(t){var s;const{chainId:n,domain:i,expirationTime:o,issuedAt:l=new Date,nonce:d,notBefore:u,requestId:f,resources:p,scheme:g,uri:h,version:y}=t;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!i)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(d&&d.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${d}`);if(!h)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(y!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${y}`);if(!((s=t.statement)===null||s===void 0)&&s.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${t.statement}`)}const j=R0(t.address),b=g?`${g}://${i}`:i,w=t.statement?`${t.statement}
`:"",S=`${b} wants you to sign in with your Ethereum account:
${j}

${w}`;let k=`URI: ${h}
Version: ${y}
Chain ID: ${n}${d?`
Nonce: ${d}`:""}
Issued At: ${l.toISOString()}`;if(o&&(k+=`
Expiration Time: ${o.toISOString()}`),u&&(k+=`
Not Before: ${u.toISOString()}`),f&&(k+=`
Request ID: ${f}`),p){let C=`
Resources:`;for(const E of p){if(!E||typeof E!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${E}`);C+=`
- ${E}`}k+=C}return`${S}
${k}`}JT();const t4={url:lT,storageKey:cT,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:dT,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Jx(t,s,n){return await n()}const li={};class Eo{constructor(s){var n,i;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Eo.nextInstanceID,Eo.nextInstanceID+=1,this.instanceID>0&&Fs()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const o=Object.assign(Object.assign({},t4),s);if(this.logDebugMessages=!!o.debug,typeof o.debug=="function"&&(this.logger=o.debug),this.persistSession=o.persistSession,this.storageKey=o.storageKey,this.autoRefreshToken=o.autoRefreshToken,this.admin=new GT({url:o.url,headers:o.headers,fetch:o.fetch}),this.url=o.url,this.headers=o.headers,this.fetch=I0(o.fetch),this.lock=o.lock||Jx,this.detectSessionInUrl=o.detectSessionInUrl,this.flowType=o.flowType,this.hasCustomAuthorizationHeader=o.hasCustomAuthorizationHeader,o.lock?this.lock=o.lock:Fs()&&(!((n=globalThis?.navigator)===null||n===void 0)&&n.locks)?this.lock=QT:this.lock=Jx,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(o.storage?this.storage=o.storage:P0()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Gx(this.memoryStorage)),o.userStorage&&(this.userStorage=o.userStorage)):(this.memoryStorage={},this.storage=Gx(this.memoryStorage)),Fs()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(l){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",l)}(i=this.broadcastChannel)===null||i===void 0||i.addEventListener("message",async l=>{this._debug("received broadcast notification from other tab or client",l),await this._notifyAllSubscribers(l.data.event,l.data.session,!1)})}this.initialize()}get jwks(){var s,n;return(n=(s=li[this.storageKey])===null||s===void 0?void 0:s.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(s){li[this.storageKey]=Object.assign(Object.assign({},li[this.storageKey]),{jwks:s})}get jwks_cached_at(){var s,n;return(n=(s=li[this.storageKey])===null||s===void 0?void 0:s.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(s){li[this.storageKey]=Object.assign(Object.assign({},li[this.storageKey]),{cachedAt:s})}_debug(...s){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${C0}) ${new Date().toISOString()}`,...s),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var s;try{const n=CT(window.location.href);let i="none";if(this._isImplicitGrantCallback(n)?i="implicit":await this._isPKCECallback(n)&&(i="pkce"),Fs()&&this.detectSessionInUrl&&i!=="none"){const{data:o,error:l}=await this._getSessionFromURL(n,i);if(l){if(this._debug("#_initialize()","error detecting session from URL",l),gT(l)){const f=(s=l.details)===null||s===void 0?void 0:s.code;if(f==="identity_already_exists"||f==="identity_not_found"||f==="single_identity_not_deletable")return{error:l}}return await this._removeSession(),{error:l}}const{session:d,redirectType:u}=o;return this._debug("#_initialize()","detected session in URL",d,"redirect type",u),await this._saveSession(d),setTimeout(async()=>{u==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",d):await this._notifyAllSubscribers("SIGNED_IN",d)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return qe(n)?{error:n}:{error:new E0("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(s){var n,i,o;try{const l=await Ge(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(i=(n=s?.options)===null||n===void 0?void 0:n.data)!==null&&i!==void 0?i:{},gotrue_meta_security:{captcha_token:(o=s?.options)===null||o===void 0?void 0:o.captchaToken}},xform:xr}),{data:d,error:u}=l;if(u||!d)return{data:{user:null,session:null},error:u};const f=d.session,p=d.user;return d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",f)),{data:{user:p,session:f},error:null}}catch(l){if(qe(l))return{data:{user:null,session:null},error:l};throw l}}async signUp(s){var n,i,o;try{let l;if("email"in s){const{email:g,password:h,options:y}=s;let j=null,b=null;this.flowType==="pkce"&&([j,b]=await ai(this.storage,this.storageKey)),l=await Ge(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:y?.emailRedirectTo,body:{email:g,password:h,data:(n=y?.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:y?.captchaToken},code_challenge:j,code_challenge_method:b},xform:xr})}else if("phone"in s){const{phone:g,password:h,options:y}=s;l=await Ge(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:g,password:h,data:(i=y?.data)!==null&&i!==void 0?i:{},channel:(o=y?.channel)!==null&&o!==void 0?o:"sms",gotrue_meta_security:{captcha_token:y?.captchaToken}},xform:xr})}else throw new ec("You must provide either an email or phone number and a password");const{data:d,error:u}=l;if(u||!d)return{data:{user:null,session:null},error:u};const f=d.session,p=d.user;return d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",f)),{data:{user:p,session:f},error:null}}catch(l){if(qe(l))return{data:{user:null,session:null},error:l};throw l}}async signInWithPassword(s){try{let n;if("email"in s){const{email:l,password:d,options:u}=s;n=await Ge(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:l,password:d,gotrue_meta_security:{captcha_token:u?.captchaToken}},xform:Kx})}else if("phone"in s){const{phone:l,password:d,options:u}=s;n=await Ge(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:l,password:d,gotrue_meta_security:{captcha_token:u?.captchaToken}},xform:Kx})}else throw new ec("You must provide either an email or phone number and a password");const{data:i,error:o}=n;return o?{data:{user:null,session:null},error:o}:!i||!i.session||!i.user?{data:{user:null,session:null},error:new mo}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign({user:i.user,session:i.session},i.weak_password?{weakPassword:i.weak_password}:null),error:o})}catch(n){if(qe(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(s){var n,i,o,l;return await this._handleProviderSignIn(s.provider,{redirectTo:(n=s.options)===null||n===void 0?void 0:n.redirectTo,scopes:(i=s.options)===null||i===void 0?void 0:i.scopes,queryParams:(o=s.options)===null||o===void 0?void 0:o.queryParams,skipBrowserRedirect:(l=s.options)===null||l===void 0?void 0:l.skipBrowserRedirect})}async exchangeCodeForSession(s){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(s))}async signInWithWeb3(s){const{chain:n}=s;switch(n){case"ethereum":return await this.signInWithEthereum(s);case"solana":return await this.signInWithSolana(s);default:throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}}async signInWithEthereum(s){var n,i,o,l,d,u,f,p,g,h,y;let j,b;if("message"in s)j=s.message,b=s.signature;else{const{chain:w,wallet:S,statement:k,options:C}=s;let E;if(Fs())if(typeof S=="object")E=S;else{const J=window;if("ethereum"in J&&typeof J.ethereum=="object"&&"request"in J.ethereum&&typeof J.ethereum.request=="function")E=J.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof S!="object"||!C?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");E=S}const P=new URL((n=C?.url)!==null&&n!==void 0?n:window.location.href),T=await E.request({method:"eth_requestAccounts"}).then(J=>J).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!T||T.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const A=R0(T[0]);let R=(i=C?.signInWithEthereum)===null||i===void 0?void 0:i.chainId;if(!R){const J=await E.request({method:"eth_chainId"});R=XT(J)}const $={domain:P.host,address:A,statement:k,uri:P.href,version:"1",chainId:R,nonce:(o=C?.signInWithEthereum)===null||o===void 0?void 0:o.nonce,issuedAt:(d=(l=C?.signInWithEthereum)===null||l===void 0?void 0:l.issuedAt)!==null&&d!==void 0?d:new Date,expirationTime:(u=C?.signInWithEthereum)===null||u===void 0?void 0:u.expirationTime,notBefore:(f=C?.signInWithEthereum)===null||f===void 0?void 0:f.notBefore,requestId:(p=C?.signInWithEthereum)===null||p===void 0?void 0:p.requestId,resources:(g=C?.signInWithEthereum)===null||g===void 0?void 0:g.resources};j=e4($),b=await E.request({method:"personal_sign",params:[ZT(j),A]})}try{const{data:w,error:S}=await Ge(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:j,signature:b},!((h=s.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(y=s.options)===null||y===void 0?void 0:y.captchaToken}}:null),xform:xr});if(S)throw S;return!w||!w.session||!w.user?{data:{user:null,session:null},error:new mo}:(w.session&&(await this._saveSession(w.session),await this._notifyAllSubscribers("SIGNED_IN",w.session)),{data:Object.assign({},w),error:S})}catch(w){if(qe(w))return{data:{user:null,session:null},error:w};throw w}}async signInWithSolana(s){var n,i,o,l,d,u,f,p,g,h,y,j;let b,w;if("message"in s)b=s.message,w=s.signature;else{const{chain:S,wallet:k,statement:C,options:E}=s;let P;if(Fs())if(typeof k=="object")P=k;else{const A=window;if("solana"in A&&typeof A.solana=="object"&&("signIn"in A.solana&&typeof A.solana.signIn=="function"||"signMessage"in A.solana&&typeof A.solana.signMessage=="function"))P=A.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof k!="object"||!E?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");P=k}const T=new URL((n=E?.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in P&&P.signIn){const A=await P.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},E?.signInWithSolana),{version:"1",domain:T.host,uri:T.href}),C?{statement:C}:null));let R;if(Array.isArray(A)&&A[0]&&typeof A[0]=="object")R=A[0];else if(A&&typeof A=="object"&&"signedMessage"in A&&"signature"in A)R=A;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in R&&"signature"in R&&(typeof R.signedMessage=="string"||R.signedMessage instanceof Uint8Array)&&R.signature instanceof Uint8Array)b=typeof R.signedMessage=="string"?R.signedMessage:new TextDecoder().decode(R.signedMessage),w=R.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in P)||typeof P.signMessage!="function"||!("publicKey"in P)||typeof P!="object"||!P.publicKey||!("toBase58"in P.publicKey)||typeof P.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");b=[`${T.host} wants you to sign in with your Solana account:`,P.publicKey.toBase58(),...C?["",C,""]:[""],"Version: 1",`URI: ${T.href}`,`Issued At: ${(o=(i=E?.signInWithSolana)===null||i===void 0?void 0:i.issuedAt)!==null&&o!==void 0?o:new Date().toISOString()}`,...!((l=E?.signInWithSolana)===null||l===void 0)&&l.notBefore?[`Not Before: ${E.signInWithSolana.notBefore}`]:[],...!((d=E?.signInWithSolana)===null||d===void 0)&&d.expirationTime?[`Expiration Time: ${E.signInWithSolana.expirationTime}`]:[],...!((u=E?.signInWithSolana)===null||u===void 0)&&u.chainId?[`Chain ID: ${E.signInWithSolana.chainId}`]:[],...!((f=E?.signInWithSolana)===null||f===void 0)&&f.nonce?[`Nonce: ${E.signInWithSolana.nonce}`]:[],...!((p=E?.signInWithSolana)===null||p===void 0)&&p.requestId?[`Request ID: ${E.signInWithSolana.requestId}`]:[],...!((h=(g=E?.signInWithSolana)===null||g===void 0?void 0:g.resources)===null||h===void 0)&&h.length?["Resources",...E.signInWithSolana.resources.map(R=>`- ${R}`)]:[]].join(`
`);const A=await P.signMessage(new TextEncoder().encode(b),"utf8");if(!A||!(A instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");w=A}}try{const{data:S,error:k}=await Ge(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:b,signature:NT(w)},!((y=s.options)===null||y===void 0)&&y.captchaToken?{gotrue_meta_security:{captcha_token:(j=s.options)===null||j===void 0?void 0:j.captchaToken}}:null),xform:xr});if(k)throw k;return!S||!S.session||!S.user?{data:{user:null,session:null},error:new mo}:(S.session&&(await this._saveSession(S.session),await this._notifyAllSubscribers("SIGNED_IN",S.session)),{data:Object.assign({},S),error:k})}catch(S){if(qe(S))return{data:{user:null,session:null},error:S};throw S}}async _exchangeCodeForSession(s){const n=await oa(this.storage,`${this.storageKey}-code-verifier`),[i,o]=(n??"").split("/");try{const{data:l,error:d}=await Ge(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:s,code_verifier:i},xform:xr});if(await _n(this.storage,`${this.storageKey}-code-verifier`),d)throw d;return!l||!l.session||!l.user?{data:{user:null,session:null,redirectType:null},error:new mo}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:Object.assign(Object.assign({},l),{redirectType:o??null}),error:d})}catch(l){if(qe(l))return{data:{user:null,session:null,redirectType:null},error:l};throw l}}async signInWithIdToken(s){try{const{options:n,provider:i,token:o,access_token:l,nonce:d}=s,u=await Ge(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:i,id_token:o,access_token:l,nonce:d,gotrue_meta_security:{captcha_token:n?.captchaToken}},xform:xr}),{data:f,error:p}=u;return p?{data:{user:null,session:null},error:p}:!f||!f.session||!f.user?{data:{user:null,session:null},error:new mo}:(f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("SIGNED_IN",f.session)),{data:f,error:p})}catch(n){if(qe(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(s){var n,i,o,l,d;try{if("email"in s){const{email:u,options:f}=s;let p=null,g=null;this.flowType==="pkce"&&([p,g]=await ai(this.storage,this.storageKey));const{error:h}=await Ge(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:u,data:(n=f?.data)!==null&&n!==void 0?n:{},create_user:(i=f?.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:f?.captchaToken},code_challenge:p,code_challenge_method:g},redirectTo:f?.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in s){const{phone:u,options:f}=s,{data:p,error:g}=await Ge(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:u,data:(o=f?.data)!==null&&o!==void 0?o:{},create_user:(l=f?.shouldCreateUser)!==null&&l!==void 0?l:!0,gotrue_meta_security:{captcha_token:f?.captchaToken},channel:(d=f?.channel)!==null&&d!==void 0?d:"sms"}});return{data:{user:null,session:null,messageId:p?.message_id},error:g}}throw new ec("You must provide either an email or phone number.")}catch(u){if(qe(u))return{data:{user:null,session:null},error:u};throw u}}async verifyOtp(s){var n,i;try{let o,l;"options"in s&&(o=(n=s.options)===null||n===void 0?void 0:n.redirectTo,l=(i=s.options)===null||i===void 0?void 0:i.captchaToken);const{data:d,error:u}=await Ge(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},s),{gotrue_meta_security:{captcha_token:l}}),redirectTo:o,xform:xr});if(u)throw u;if(!d)throw new Error("An error occurred on token verification.");const f=d.session,p=d.user;return f?.access_token&&(await this._saveSession(f),await this._notifyAllSubscribers(s.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",f)),{data:{user:p,session:f},error:null}}catch(o){if(qe(o))return{data:{user:null,session:null},error:o};throw o}}async signInWithSSO(s){var n,i,o;try{let l=null,d=null;return this.flowType==="pkce"&&([l,d]=await ai(this.storage,this.storageKey)),await Ge(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in s?{provider_id:s.providerId}:null),"domain"in s?{domain:s.domain}:null),{redirect_to:(i=(n=s.options)===null||n===void 0?void 0:n.redirectTo)!==null&&i!==void 0?i:void 0}),!((o=s?.options)===null||o===void 0)&&o.captchaToken?{gotrue_meta_security:{captcha_token:s.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:l,code_challenge_method:d}),headers:this.headers,xform:VT})}catch(l){if(qe(l))return{data:null,error:l};throw l}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async s=>{const{data:{session:n},error:i}=s;if(i)throw i;if(!n)throw new Pn;const{error:o}=await Ge(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:o}})}catch(s){if(qe(s))return{data:{user:null,session:null},error:s};throw s}}async resend(s){try{const n=`${this.url}/resend`;if("email"in s){const{email:i,type:o,options:l}=s,{error:d}=await Ge(this.fetch,"POST",n,{headers:this.headers,body:{email:i,type:o,gotrue_meta_security:{captcha_token:l?.captchaToken}},redirectTo:l?.emailRedirectTo});return{data:{user:null,session:null},error:d}}else if("phone"in s){const{phone:i,type:o,options:l}=s,{data:d,error:u}=await Ge(this.fetch,"POST",n,{headers:this.headers,body:{phone:i,type:o,gotrue_meta_security:{captcha_token:l?.captchaToken}}});return{data:{user:null,session:null,messageId:d?.message_id},error:u}}throw new ec("You must provide either an email or phone number and a type")}catch(n){if(qe(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(s,n){this._debug("#_acquireLock","begin",s);try{if(this.lockAcquired){const i=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),o=(async()=>(await i,await n()))();return this.pendingInLock.push((async()=>{try{await o}catch{}})()),o}return await this.lock(`lock:${this.storageKey}`,s,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const i=n();for(this.pendingInLock.push((async()=>{try{await i}catch{}})()),await i;this.pendingInLock.length;){const o=[...this.pendingInLock];await Promise.all(o),this.pendingInLock.splice(0,o.length)}return await i}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(s){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await s(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let s=null;const n=await oa(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?s=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!s)return{data:{session:null},error:null};const i=s.expires_at?s.expires_at*1e3-Date.now()<cm:!1;if(this._debug("#__loadSession()",`session has${i?"":" not"} expired`,"expires_at",s.expires_at),!i){if(this.userStorage){const d=await oa(this.userStorage,this.storageKey+"-user");d?.user?s.user=d.user:s.user=mm()}if(this.storage.isServer&&s.user){let d=this.suppressGetSessionWarning;s=new Proxy(s,{get:(f,p,g)=>(!d&&p==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),d=!0,this.suppressGetSessionWarning=!0),Reflect.get(f,p,g))})}return{data:{session:s},error:null}}const{session:o,error:l}=await this._callRefreshToken(s.refresh_token);return l?{data:{session:null},error:l}:{data:{session:o},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(s){return s?await this._getUser(s):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(s){try{return s?await Ge(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:s,xform:In}):await this._useSession(async n=>{var i,o,l;const{data:d,error:u}=n;if(u)throw u;return!(!((i=d.session)===null||i===void 0)&&i.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Pn}:await Ge(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(l=(o=d.session)===null||o===void 0?void 0:o.access_token)!==null&&l!==void 0?l:void 0,xform:In})})}catch(n){if(qe(n))return pT(n)&&(await this._removeSession(),await _n(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(s,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(s,n))}async _updateUser(s,n={}){try{return await this._useSession(async i=>{const{data:o,error:l}=i;if(l)throw l;if(!o.session)throw new Pn;const d=o.session;let u=null,f=null;this.flowType==="pkce"&&s.email!=null&&([u,f]=await ai(this.storage,this.storageKey));const{data:p,error:g}=await Ge(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n?.emailRedirectTo,body:Object.assign(Object.assign({},s),{code_challenge:u,code_challenge_method:f}),jwt:d.access_token,xform:In});if(g)throw g;return d.user=p.user,await this._saveSession(d),await this._notifyAllSubscribers("USER_UPDATED",d),{data:{user:d.user},error:null}})}catch(i){if(qe(i))return{data:{user:null},error:i};throw i}}async setSession(s){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(s))}async _setSession(s){try{if(!s.access_token||!s.refresh_token)throw new Pn;const n=Date.now()/1e3;let i=n,o=!0,l=null;const{payload:d}=um(s.access_token);if(d.exp&&(i=d.exp,o=i<=n),o){const{session:u,error:f}=await this._callRefreshToken(s.refresh_token);if(f)return{data:{user:null,session:null},error:f};if(!u)return{data:{user:null,session:null},error:null};l=u}else{const{data:u,error:f}=await this._getUser(s.access_token);if(f)throw f;l={access_token:s.access_token,refresh_token:s.refresh_token,user:u.user,token_type:"bearer",expires_in:i-n,expires_at:i},await this._saveSession(l),await this._notifyAllSubscribers("SIGNED_IN",l)}return{data:{user:l.user,session:l},error:null}}catch(n){if(qe(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(s){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(s))}async _refreshSession(s){try{return await this._useSession(async n=>{var i;if(!s){const{data:d,error:u}=n;if(u)throw u;s=(i=d.session)!==null&&i!==void 0?i:void 0}if(!s?.refresh_token)throw new Pn;const{session:o,error:l}=await this._callRefreshToken(s.refresh_token);return l?{data:{user:null,session:null},error:l}:o?{data:{user:o.user,session:o},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(qe(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(s,n){try{if(!Fs())throw new tc("No browser detected.");if(s.error||s.error_description||s.error_code)throw new tc(s.error_description||"Error in URL with unspecified error_description",{error:s.error||"unspecified_error",code:s.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new zx("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new tc("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!s.code)throw new zx("No code detected.");const{data:C,error:E}=await this._exchangeCodeForSession(s.code);if(E)throw E;const P=new URL(window.location.href);return P.searchParams.delete("code"),window.history.replaceState(window.history.state,"",P.toString()),{data:{session:C.session,redirectType:null},error:null}}const{provider_token:i,provider_refresh_token:o,access_token:l,refresh_token:d,expires_in:u,expires_at:f,token_type:p}=s;if(!l||!u||!d||!p)throw new tc("No session defined in URL");const g=Math.round(Date.now()/1e3),h=parseInt(u);let y=g+h;f&&(y=parseInt(f));const j=y-g;j*1e3<=ci&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${j}s, should have been closer to ${h}s`);const b=y-h;g-b>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",b,y,g):g-b<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",b,y,g);const{data:w,error:S}=await this._getUser(l);if(S)throw S;const k={provider_token:i,provider_refresh_token:o,access_token:l,expires_in:h,expires_at:y,refresh_token:d,token_type:p,user:w.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:k,redirectType:s.type},error:null}}catch(i){if(qe(i))return{data:{session:null,redirectType:null},error:i};throw i}}_isImplicitGrantCallback(s){return!!(s.access_token||s.error_description)}async _isPKCECallback(s){const n=await oa(this.storage,`${this.storageKey}-code-verifier`);return!!(s.code&&n)}async signOut(s={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(s))}async _signOut({scope:s}={scope:"global"}){return await this._useSession(async n=>{var i;const{data:o,error:l}=n;if(l)return{error:l};const d=(i=o.session)===null||i===void 0?void 0:i.access_token;if(d){const{error:u}=await this.admin.signOut(d,s);if(u&&!(hT(u)&&(u.status===404||u.status===401||u.status===403)))return{error:u}}return s!=="others"&&(await this._removeSession(),await _n(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(s){const n=kT(),i={id:n,callback:s,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,i),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:i}}}async _emitInitialSession(s){return await this._useSession(async n=>{var i,o;try{const{data:{session:l},error:d}=n;if(d)throw d;await((i=this.stateChangeEmitters.get(s))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",l)),this._debug("INITIAL_SESSION","callback id",s,"session",l)}catch(l){await((o=this.stateChangeEmitters.get(s))===null||o===void 0?void 0:o.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",s,"error",l),console.error(l)}})}async resetPasswordForEmail(s,n={}){let i=null,o=null;this.flowType==="pkce"&&([i,o]=await ai(this.storage,this.storageKey,!0));try{return await Ge(this.fetch,"POST",`${this.url}/recover`,{body:{email:s,code_challenge:i,code_challenge_method:o,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(l){if(qe(l))return{data:null,error:l};throw l}}async getUserIdentities(){var s;try{const{data:n,error:i}=await this.getUser();if(i)throw i;return{data:{identities:(s=n.user.identities)!==null&&s!==void 0?s:[]},error:null}}catch(n){if(qe(n))return{data:null,error:n};throw n}}async linkIdentity(s){var n;try{const{data:i,error:o}=await this._useSession(async l=>{var d,u,f,p,g;const{data:h,error:y}=l;if(y)throw y;const j=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,s.provider,{redirectTo:(d=s.options)===null||d===void 0?void 0:d.redirectTo,scopes:(u=s.options)===null||u===void 0?void 0:u.scopes,queryParams:(f=s.options)===null||f===void 0?void 0:f.queryParams,skipBrowserRedirect:!0});return await Ge(this.fetch,"GET",j,{headers:this.headers,jwt:(g=(p=h.session)===null||p===void 0?void 0:p.access_token)!==null&&g!==void 0?g:void 0})});if(o)throw o;return Fs()&&!(!((n=s.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(i?.url),{data:{provider:s.provider,url:i?.url},error:null}}catch(i){if(qe(i))return{data:{provider:s.provider,url:null},error:i};throw i}}async unlinkIdentity(s){try{return await this._useSession(async n=>{var i,o;const{data:l,error:d}=n;if(d)throw d;return await Ge(this.fetch,"DELETE",`${this.url}/user/identities/${s.identity_id}`,{headers:this.headers,jwt:(o=(i=l.session)===null||i===void 0?void 0:i.access_token)!==null&&o!==void 0?o:void 0})})}catch(n){if(qe(n))return{data:null,error:n};throw n}}async _refreshAccessToken(s){const n=`#_refreshAccessToken(${s.substring(0,5)}...)`;this._debug(n,"begin");try{const i=Date.now();return await TT(async o=>(o>0&&await ET(200*Math.pow(2,o-1)),this._debug(n,"refreshing attempt",o),await Ge(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:s},headers:this.headers,xform:xr})),(o,l)=>{const d=200*Math.pow(2,o);return l&&dm(l)&&Date.now()+d-i<ci})}catch(i){if(this._debug(n,"error",i),qe(i))return{data:{session:null,user:null},error:i};throw i}finally{this._debug(n,"end")}}_isValidSession(s){return typeof s=="object"&&s!==null&&"access_token"in s&&"refresh_token"in s&&"expires_at"in s}async _handleProviderSignIn(s,n){const i=await this._getUrlForProvider(`${this.url}/authorize`,s,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",s,"options",n,"url",i),Fs()&&!n.skipBrowserRedirect&&window.location.assign(i),{data:{provider:s,url:i},error:null}}async _recoverAndRefresh(){var s,n;const i="#_recoverAndRefresh()";this._debug(i,"begin");try{const o=await oa(this.storage,this.storageKey);if(o&&this.userStorage){let d=await oa(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!d&&(d={user:o.user},await di(this.userStorage,this.storageKey+"-user",d)),o.user=(s=d?.user)!==null&&s!==void 0?s:mm()}else if(o&&!o.user&&!o.user){const d=await oa(this.storage,this.storageKey+"-user");d&&d?.user?(o.user=d.user,await _n(this.storage,this.storageKey+"-user"),await di(this.storage,this.storageKey,o)):o.user=mm()}if(this._debug(i,"session from storage",o),!this._isValidSession(o)){this._debug(i,"session is not valid"),o!==null&&await this._removeSession();return}const l=((n=o.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<cm;if(this._debug(i,`session has${l?"":" not"} expired with margin of ${cm}s`),l){if(this.autoRefreshToken&&o.refresh_token){const{error:d}=await this._callRefreshToken(o.refresh_token);d&&(console.error(d),dm(d)||(this._debug(i,"refresh failed with a non-retryable error, removing the session",d),await this._removeSession()))}}else if(o.user&&o.user.__isUserNotAvailableProxy===!0)try{const{data:d,error:u}=await this._getUser(o.access_token);!u&&d?.user?(o.user=d.user,await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)):this._debug(i,"could not get user data, skipping SIGNED_IN notification")}catch(d){console.error("Error getting user data:",d),this._debug(i,"error getting user data, skipping SIGNED_IN notification",d)}else await this._notifyAllSubscribers("SIGNED_IN",o)}catch(o){this._debug(i,"error",o),console.error(o);return}finally{this._debug(i,"end")}}async _callRefreshToken(s){var n,i;if(!s)throw new Pn;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const o=`#_callRefreshToken(${s.substring(0,5)}...)`;this._debug(o,"begin");try{this.refreshingDeferred=new Qc;const{data:l,error:d}=await this._refreshAccessToken(s);if(d)throw d;if(!l.session)throw new Pn;await this._saveSession(l.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",l.session);const u={session:l.session,error:null};return this.refreshingDeferred.resolve(u),u}catch(l){if(this._debug(o,"error",l),qe(l)){const d={session:null,error:l};return dm(l)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(d),d}throw(i=this.refreshingDeferred)===null||i===void 0||i.reject(l),l}finally{this.refreshingDeferred=null,this._debug(o,"end")}}async _notifyAllSubscribers(s,n,i=!0){const o=`#_notifyAllSubscribers(${s})`;this._debug(o,"begin",n,`broadcast = ${i}`);try{this.broadcastChannel&&i&&this.broadcastChannel.postMessage({event:s,session:n});const l=[],d=Array.from(this.stateChangeEmitters.values()).map(async u=>{try{await u.callback(s,n)}catch(f){l.push(f)}});if(await Promise.all(d),l.length>0){for(let u=0;u<l.length;u+=1)console.error(l[u]);throw l[0]}}finally{this._debug(o,"end")}}async _saveSession(s){this._debug("#_saveSession()",s),this.suppressGetSessionWarning=!0;const n=Object.assign({},s),i=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!i&&n.user&&await di(this.userStorage,this.storageKey+"-user",{user:n.user});const o=Object.assign({},n);delete o.user;const l=Hx(o);await di(this.storage,this.storageKey,l)}else{const o=Hx(n);await di(this.storage,this.storageKey,o)}}async _removeSession(){this._debug("#_removeSession()"),await _n(this.storage,this.storageKey),await _n(this.storage,this.storageKey+"-code-verifier"),await _n(this.storage,this.storageKey+"-user"),this.userStorage&&await _n(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const s=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{s&&Fs()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",s)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const s=setInterval(()=>this._autoRefreshTokenTick(),ci);this.autoRefreshTicker=s,s&&typeof s=="object"&&typeof s.unref=="function"?s.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(s),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const s=this.autoRefreshTicker;this.autoRefreshTicker=null,s&&clearInterval(s)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const s=Date.now();try{return await this._useSession(async n=>{const{data:{session:i}}=n;if(!i||!i.refresh_token||!i.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const o=Math.floor((i.expires_at*1e3-s)/ci);this._debug("#_autoRefreshTokenTick()",`access token expires in ${o} ticks, a tick lasts ${ci}ms, refresh threshold is ${Hm} ticks`),o<=Hm&&await this._callRefreshToken(i.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(s){if(s.isAcquireTimeout||s instanceof A0)this._debug("auto refresh token tick lock not available");else throw s}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Fs()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(s){console.error("_handleVisibilityChange",s)}}async _onVisibilityChanged(s){const n=`#_onVisibilityChanged(${s})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),s||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(s,n,i){const o=[`provider=${encodeURIComponent(n)}`];if(i?.redirectTo&&o.push(`redirect_to=${encodeURIComponent(i.redirectTo)}`),i?.scopes&&o.push(`scopes=${encodeURIComponent(i.scopes)}`),this.flowType==="pkce"){const[l,d]=await ai(this.storage,this.storageKey),u=new URLSearchParams({code_challenge:`${encodeURIComponent(l)}`,code_challenge_method:`${encodeURIComponent(d)}`});o.push(u.toString())}if(i?.queryParams){const l=new URLSearchParams(i.queryParams);o.push(l.toString())}return i?.skipBrowserRedirect&&o.push(`skip_http_redirect=${i.skipBrowserRedirect}`),`${s}?${o.join("&")}`}async _unenroll(s){try{return await this._useSession(async n=>{var i;const{data:o,error:l}=n;return l?{data:null,error:l}:await Ge(this.fetch,"DELETE",`${this.url}/factors/${s.factorId}`,{headers:this.headers,jwt:(i=o?.session)===null||i===void 0?void 0:i.access_token})})}catch(n){if(qe(n))return{data:null,error:n};throw n}}async _enroll(s){try{return await this._useSession(async n=>{var i,o;const{data:l,error:d}=n;if(d)return{data:null,error:d};const u=Object.assign({friendly_name:s.friendlyName,factor_type:s.factorType},s.factorType==="phone"?{phone:s.phone}:{issuer:s.issuer}),{data:f,error:p}=await Ge(this.fetch,"POST",`${this.url}/factors`,{body:u,headers:this.headers,jwt:(i=l?.session)===null||i===void 0?void 0:i.access_token});return p?{data:null,error:p}:(s.factorType==="totp"&&(!((o=f?.totp)===null||o===void 0)&&o.qr_code)&&(f.totp.qr_code=`data:image/svg+xml;utf-8,${f.totp.qr_code}`),{data:f,error:null})})}catch(n){if(qe(n))return{data:null,error:n};throw n}}async _verify(s){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var i;const{data:o,error:l}=n;if(l)return{data:null,error:l};const{data:d,error:u}=await Ge(this.fetch,"POST",`${this.url}/factors/${s.factorId}/verify`,{body:{code:s.code,challenge_id:s.challengeId},headers:this.headers,jwt:(i=o?.session)===null||i===void 0?void 0:i.access_token});return u?{data:null,error:u}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+d.expires_in},d)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",d),{data:d,error:u})})}catch(n){if(qe(n))return{data:null,error:n};throw n}})}async _challenge(s){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var i;const{data:o,error:l}=n;return l?{data:null,error:l}:await Ge(this.fetch,"POST",`${this.url}/factors/${s.factorId}/challenge`,{body:{channel:s.channel},headers:this.headers,jwt:(i=o?.session)===null||i===void 0?void 0:i.access_token})})}catch(n){if(qe(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(s){const{data:n,error:i}=await this._challenge({factorId:s.factorId});return i?{data:null,error:i}:await this._verify({factorId:s.factorId,challengeId:n.id,code:s.code})}async _listFactors(){const{data:{user:s},error:n}=await this.getUser();if(n)return{data:null,error:n};const i=s?.factors||[],o=i.filter(d=>d.factor_type==="totp"&&d.status==="verified"),l=i.filter(d=>d.factor_type==="phone"&&d.status==="verified");return{data:{all:i,totp:o,phone:l},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async s=>{var n,i;const{data:{session:o},error:l}=s;if(l)return{data:null,error:l};if(!o)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:d}=um(o.access_token);let u=null;d.aal&&(u=d.aal);let f=u;((i=(n=o.user.factors)===null||n===void 0?void 0:n.filter(h=>h.status==="verified"))!==null&&i!==void 0?i:[]).length>0&&(f="aal2");const g=d.amr||[];return{data:{currentLevel:u,nextLevel:f,currentAuthenticationMethods:g},error:null}}))}async fetchJwk(s,n={keys:[]}){let i=n.keys.find(u=>u.kid===s);if(i)return i;const o=Date.now();if(i=this.jwks.keys.find(u=>u.kid===s),i&&this.jwks_cached_at+mT>o)return i;const{data:l,error:d}=await Ge(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(d)throw d;return!l.keys||l.keys.length===0||(this.jwks=l,this.jwks_cached_at=o,i=l.keys.find(u=>u.kid===s),!i)?null:i}async getClaims(s,n={}){try{let i=s;if(!i){const{data:j,error:b}=await this.getSession();if(b||!j.session)return{data:null,error:b};i=j.session.access_token}const{header:o,payload:l,signature:d,raw:{header:u,payload:f}}=um(i);n?.allowExpired||OT(l.exp);const p=!o.alg||o.alg.startsWith("HS")||!o.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(o.kid,n?.keys?{keys:n.keys}:n?.jwks);if(!p){const{error:j}=await this.getUser(i);if(j)throw j;return{data:{claims:l,header:o,signature:d},error:null}}const g=LT(o.alg),h=await crypto.subtle.importKey("jwk",p,g,!0,["verify"]);if(!await crypto.subtle.verify(g,h,d,jT(`${u}.${f}`)))throw new Gm("Invalid JWT signature");return{data:{claims:l,header:o,signature:d},error:null}}catch(i){if(qe(i))return{data:null,error:i};throw i}}}Eo.nextInstanceID=0;const s4=Eo;class r4 extends s4{constructor(s){super(s)}}var n4=function(t,s,n,i){function o(l){return l instanceof n?l:new n(function(d){d(l)})}return new(n||(n=Promise))(function(l,d){function u(g){try{p(i.next(g))}catch(h){d(h)}}function f(g){try{p(i.throw(g))}catch(h){d(h)}}function p(g){g.done?l(g.value):o(g.value).then(u,f)}p((i=i.apply(t,s||[])).next())})};class a4{constructor(s,n,i){var o,l,d;this.supabaseUrl=s,this.supabaseKey=n;const u=oT(s);if(!n)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",u),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",u),this.storageUrl=new URL("storage/v1",u),this.functionsUrl=new URL("functions/v1",u);const f=`sb-${u.hostname.split(".")[0]}-auth-token`,p={db:QE,realtime:ZE,auth:Object.assign(Object.assign({},XE),{storageKey:f}),global:YE},g=iT(i??{},p);this.storageKey=(o=g.auth.storageKey)!==null&&o!==void 0?o:"",this.headers=(l=g.global.headers)!==null&&l!==void 0?l:{},g.accessToken?(this.accessToken=g.accessToken,this.auth=new Proxy({},{get:(h,y)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(y)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((d=g.auth)!==null&&d!==void 0?d:{},this.headers,g.global.fetch),this.fetch=rT(n,this._getAccessToken.bind(this),g.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},g.realtime)),this.rest=new fE(new URL("rest/v1",u).href,{headers:this.headers,schema:g.db.schema,fetch:this.fetch}),this.storage=new KE(this.storageUrl.href,this.headers,this.fetch,i?.storage),g.accessToken||this._listenForAuthEvents()}get functions(){return new rE(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(s){return this.rest.from(s)}schema(s){return this.rest.schema(s)}rpc(s,n={},i={}){return this.rest.rpc(s,n,i)}channel(s,n={config:{}}){return this.realtime.channel(s,n)}getChannels(){return this.realtime.getChannels()}removeChannel(s){return this.realtime.removeChannel(s)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var s,n;return n4(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:i}=yield this.auth.getSession();return(n=(s=i.session)===null||s===void 0?void 0:s.access_token)!==null&&n!==void 0?n:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:s,persistSession:n,detectSessionInUrl:i,storage:o,userStorage:l,storageKey:d,flowType:u,lock:f,debug:p},g,h){const y={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new r4({url:this.authUrl.href,headers:Object.assign(Object.assign({},y),g),storageKey:d,autoRefreshToken:s,persistSession:n,detectSessionInUrl:i,storage:o,userStorage:l,flowType:u,lock:f,debug:p,fetch:h,hasCustomAuthorizationHeader:Object.keys(this.headers).some(j=>j.toLowerCase()==="authorization")})}_initRealtimeClient(s){return new PE(this.realtimeUrl.href,Object.assign(Object.assign({},s),{params:Object.assign({apikey:this.supabaseKey},s?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,i)=>{this._handleTokenChanged(n,"CLIENT",i?.access_token)})}_handleTokenChanged(s,n,i){(s==="TOKEN_REFRESHED"||s==="SIGNED_IN")&&this.changedAccessToken!==i?(this.changedAccessToken=i,this.realtime.setAuth(i)):s==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const i4=(t,s,n)=>new a4(t,s,n);function o4(){if(typeof window<"u"||typeof process>"u")return!1;const t=process.version;if(t==null)return!1;const s=t.match(/^v(\d+)\./);return s?parseInt(s[1],10)<=18:!1}o4()&&console.warn("⚠️  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const sc="ldmqrughndskewhfseyw",Yx="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImxkbXFydWdobmRza2V3aGZzZXl3Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTgyMDEzODcsImV4cCI6MjA3Mzc3NzM4N30.FALMK0hYXyo3PVk_ae4vDfkj1zM4WNA7Tv5RYIV7MUw",l4={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1};function c4(){try{if(typeof import.meta<"u"&&l4)return{SUPABASE_URL:`https://${sc}.supabase.co`,SUPABASE_ANON_KEY:Yx,SUPABASE_PROJECT_ID:sc,isVite:!0}}catch{console.log("Vite environment not available, using Supabase info")}return{SUPABASE_URL:`https://${sc}.supabase.co`,SUPABASE_ANON_KEY:Yx,SUPABASE_PROJECT_ID:sc,isVite:!1}}const rc=c4(),yr={SUPABASE_URL:rc.SUPABASE_URL,SUPABASE_ANON_KEY:rc.SUPABASE_ANON_KEY,SUPABASE_PROJECT_ID:rc.SUPABASE_PROJECT_ID,isVite:rc.isVite,isSupabaseConfigured(){return!!(this.SUPABASE_URL&&this.SUPABASE_ANON_KEY)}},Mt=i4(yr.SUPABASE_URL,yr.SUPABASE_ANON_KEY),d4=Object.freeze(Object.defineProperty({__proto__:null,supabase:Mt},Symbol.toStringTag,{value:"Module"})),Gr=`${yr.SUPABASE_URL}/functions/v1/make-server-aa5728d5`,Qx=async()=>{const t={"Content-Type":"application/json",Authorization:`Bearer ${yr.SUPABASE_ANON_KEY}`};try{const{data:{session:s},error:n}=await Mt.auth.getSession();if(n)return console.log("Session error:",n),t;s?.access_token&&(t.Authorization=`Bearer ${s.access_token}`)}catch(s){console.log("Error getting session for headers:",s)}return t},fo={getAll:async()=>{try{const t=await Qx(),s=await fetch(`${Gr}/products`,{headers:t}),n=await s.json();if(!s.ok)throw new Error(n.error||"Failed to fetch products");return n.products}catch(t){throw console.error("Fetch products API error:",t),t}},create:async t=>{try{const s=await Mt.auth.getSession();if(!s.data.session?.access_token)throw new Error("Not authenticated");const n=await fetch(`${Gr}/products`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${s.data.session.access_token}`},body:JSON.stringify(t)}),i=await n.json();if(!n.ok)throw new Error(i.error||"Failed to create product");return i.product}catch(s){throw console.error("Create product API error:",s),s}},update:async(t,s)=>{try{const n=await Mt.auth.getSession();if(!n.data.session?.access_token)throw new Error("Not authenticated");const i=await fetch(`${Gr}/products/${t}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${n.data.session.access_token}`},body:JSON.stringify(s)}),o=await i.json();if(!i.ok)throw new Error(o.error||"Failed to update product");return o.product}catch(n){throw console.error("Update product API error:",n),n}},delete:async t=>{try{const s=await Mt.auth.getSession();if(!s.data.session?.access_token)throw new Error("Not authenticated");const n=await fetch(`${Gr}/products/${t}`,{method:"DELETE",headers:{Authorization:`Bearer ${s.data.session.access_token}`}}),i=await n.json();if(!n.ok)throw new Error(i.error||"Failed to delete product");return i}catch(s){throw console.error("Delete product API error:",s),s}},getUserProducts:async t=>{try{const s=await Qx(),n=await fetch(`${Gr}/users/${t}/products`,{headers:s}),i=await n.json();if(!n.ok)throw new Error(i.error||"Failed to fetch user products");return i.products}catch(s){throw console.error("Fetch user products API error:",s),s}}},Xx={create:async(t,s)=>{try{const n=await Mt.auth.getSession();if(!n.data.session?.access_token)throw new Error("Not authenticated");const i=await fetch(`${Gr}/conversations`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${n.data.session.access_token}`},body:JSON.stringify({sellerId:t,productId:s})}),o=await i.json();if(!i.ok)throw new Error(o.error||"Failed to create conversation");return o.conversation}catch(n){throw console.error("Create conversation API error:",n),n}},getAll:async()=>{try{const{data:{session:t},error:s}=await Mt.auth.getSession();if(s||!t?.access_token)return console.log("No authenticated session for conversations fetch"),[];const n=await fetch(`${Gr}/conversations`,{headers:{Authorization:`Bearer ${t.access_token}`}}),i=await n.json();if(!n.ok){if(n.status===401||n.status===403)return console.log("Authentication error fetching conversations"),[];throw new Error(i.error||"Failed to fetch conversations")}return i.conversations||[]}catch(t){return t instanceof Error&&t.message.includes("Not authenticated")||console.error("Fetch conversations API error:",t),[]}}},Zx={send:async(t,s,n="text")=>{try{const i=await Mt.auth.getSession();if(!i.data.session?.access_token)throw new Error("Not authenticated");const o=await fetch(`${Gr}/messages`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${i.data.session.access_token}`},body:JSON.stringify({conversationId:t,content:s,messageType:n})}),l=await o.json();if(!o.ok)throw new Error(l.error||"Failed to send message");return l.message}catch(i){throw console.error("Send message API error:",i),i}},getForConversation:async t=>{try{const s=await Mt.auth.getSession();if(!s.data.session?.access_token)throw new Error("Not authenticated");const n=await fetch(`${Gr}/conversations/${t}/messages`,{headers:{Authorization:`Bearer ${s.data.session.access_token}`}}),i=await n.json();if(!n.ok)throw new Error(i.error||"Failed to fetch messages");return i.messages}catch(s){throw console.error("Fetch messages API error:",s),s}}},D0={subscribeToMessages:(t,s)=>({unsubscribe:()=>console.log("Mock subscription unsubscribed")}),subscribeToProducts:t=>({unsubscribe:()=>console.log("Mock subscription unsubscribed")})},Xc=()=>{const[t,s]=v.useState(!1),[n,i]=v.useState(!1);return v.useEffect(()=>{console.log("🎯 DEMO MODE ACTIVATED: Backend disabled, using local demo data"),s(!1),i(!1)},[]),{backendAvailable:t,checking:n}},Tf=t=>{const[s,n]=v.useState([]),[i,o]=v.useState({}),[l,d]=v.useState(!1),[u,f]=v.useState(null),{backendAvailable:p}=Xc(),g=v.useCallback(async()=>{if(t)try{if(d(!0),f(null),!p){console.log("📚 Loading conversations from localStorage for user:",t);const C=localStorage.getItem("agriconnect-myanmar-conversations");if(C){const E=JSON.parse(C),P=E.filter(T=>T.buyerId===t||T.sellerId===t);console.log("📋 User conversations loaded:",{userId:t,totalConversations:E.length,userConversations:P.length,conversations:P.map(T=>({id:T.id,productName:T.productName,buyerName:T.buyerName,sellerName:T.sellerName}))}),n(P)}else console.log("📋 No conversations found in localStorage"),n([]);d(!1);return}const{supabase:w}=await Sr(async()=>{const{supabase:C}=await Promise.resolve().then(()=>d4);return{supabase:C}},void 0),{data:{session:S},error:k}=await w.auth.getSession();if(k){console.log("Session error, using fallback mode");const C=localStorage.getItem("agriconnect-myanmar-conversations");C&&n(JSON.parse(C)),d(!1);return}if(!S?.access_token){console.log("No session token, trying fallback");const C=localStorage.getItem("agriconnect-myanmar-conversations");C&&n(JSON.parse(C)),d(!1);return}try{const E=(await Xx.getAll()).map(P=>({id:P.id,buyerId:P.buyer_id,sellerId:P.seller_id,productId:P.product_id,status:P.status,productName:P.products?.name||"Unknown Product",buyerName:P.buyer?.name||"Unknown Buyer",sellerName:P.seller?.name||"Unknown Seller",updatedAt:P.updated_at}));n(E)}catch(C){C instanceof Error&&C.message.includes("Not authenticated")||console.error("Backend conversations fetch failed:",C);const E=localStorage.getItem("agriconnect-myanmar-conversations");E&&n(JSON.parse(E))}}catch(w){w instanceof Error&&w.message.includes("Not authenticated")||(console.error("Fetch conversations error:",w),f(w instanceof Error?w.message:"Failed to fetch conversations"));const S=localStorage.getItem("agriconnect-myanmar-conversations");S&&n(JSON.parse(S))}finally{d(!1)}},[t,p]),h=v.useCallback(async w=>{try{if(!p){console.log("📥 Fetching messages for conversation:",w);const C=`agriconnect-myanmar-messages-${w}`,E=localStorage.getItem(C),P=E?JSON.parse(E):[];return console.log("📨 Messages loaded from localStorage:",{conversationId:w,storageKey:C,messageCount:P.length,messages:P.map(T=>({id:T.id,content:T.content,senderName:T.senderName,senderId:T.senderId}))}),o(T=>({...T,[w]:P})),P}const k=(await Zx.getForConversation(w)).map(C=>({id:C.id,conversationId:C.conversation_id,senderId:C.sender_id,senderName:C.sender?.name||"Unknown",content:C.content,messageType:C.message_type,createdAt:C.created_at}));return o(C=>({...C,[w]:k})),k}catch(S){console.error("Fetch messages error:",S);const k=localStorage.getItem(`agriconnect-myanmar-messages-${w}`),C=k?JSON.parse(k):[];return o(E=>({...E,[w]:C})),C}},[p]),y=v.useCallback(async(w,S,k="text")=>{try{if(!p){const T=JSON.parse(localStorage.getItem("agriconnect-myanmar-users")||"[]").find(Z=>Z.id===t),A={id:`msg-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,conversationId:w,senderId:t||"demo-user",senderName:T?.name||"You",content:S,messageType:k,createdAt:new Date().toISOString(),status:"sending"},$=[...i[w]||[],A];o(Z=>({...Z,[w]:$})),localStorage.setItem(`agriconnect-myanmar-messages-${w}`,JSON.stringify($));const z=JSON.parse(localStorage.getItem("agriconnect-myanmar-conversations")||"[]").map(Z=>Z.id===w?{...Z,lastMessage:A,updatedAt:new Date().toISOString()}:Z);localStorage.setItem("agriconnect-myanmar-conversations",JSON.stringify(z)),n(z),setTimeout(()=>{const Z={...A,status:"sent"},he=$.map(se=>se.id===A.id?Z:se);o(se=>({...se,[w]:he})),localStorage.setItem(`agriconnect-myanmar-messages-${w}`,JSON.stringify(he))},1e3);const Q=JSON.parse(localStorage.getItem("agriconnect-myanmar-conversations")||"[]").find(Z=>Z.id===w);return Q&&T?.id!==Q.sellerId&&setTimeout(()=>{b(w,S)},2e3+Math.random()*3e3),A}const C=await Zx.send(w,S,k),E={id:C.id,conversationId:C.conversation_id,senderId:C.sender_id,senderName:"You",content:C.content,messageType:C.message_type,createdAt:C.created_at};return o(P=>({...P,[w]:[...P[w]||[],E]})),E}catch(C){throw console.error("Send message error:",C),C}},[p,t,i]),j=v.useCallback(async(w,S)=>{try{if(!p){const E=JSON.parse(localStorage.getItem("agriconnect-myanmar-users")||"[]"),P=JSON.parse(localStorage.getItem("agriconnect-myanmar-local-products")||"[]"),T=E.find(se=>se.id===w),A=P.find(se=>se.id===S),R=E.find(se=>se.id===t),$=JSON.parse(localStorage.getItem("agriconnect-myanmar-conversations")||"[]"),J=$.find(se=>se.buyerId===t&&se.sellerId===w&&se.productId===S);if(J)return J;const z={id:`conv-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,buyerId:t||"demo-user",sellerId:w,productId:S,status:"active",productName:A?.name||"Product",buyerName:R?.name||"You",sellerName:T?.businessName||T?.name||"Seller",updatedAt:new Date().toISOString(),unreadCount:0},q=[z,...$];n(q),localStorage.setItem("agriconnect-myanmar-conversations",JSON.stringify(q));const Q={id:`msg-${Date.now()}`,conversationId:z.id,senderId:w,senderName:T?.businessName||T?.name||"Seller",content:`Hello! I saw you're interested in my ${A?.name||"product"}. How can I help you today?`,messageType:"text",createdAt:new Date().toISOString(),status:"sent"},he=[...i[z.id]||[],Q];return o(se=>({...se,[z.id]:he})),localStorage.setItem(`agriconnect-myanmar-messages-${z.id}`,JSON.stringify(he)),z}const k=await Xx.create(w,S),C={id:k.id,buyerId:k.buyer_id,sellerId:k.seller_id,productId:k.product_id,status:k.status,productName:"Product",buyerName:"You",sellerName:"Seller",updatedAt:k.updated_at};return n(E=>[C,...E]),k}catch(k){throw console.error("Start conversation error:",k),k}},[p,t,s]);v.useEffect(()=>{if(t&&p!==void 0){const w=setTimeout(()=>{g()},500);return()=>clearTimeout(w)}},[t,p]),v.useEffect(()=>{if(!t||s.length===0||!p)return;const w=s.map(S=>D0.subscribeToMessages(S.id,k=>{if(console.log("Real-time message update:",k),k.eventType==="INSERT"){const C={id:k.new.id,conversationId:k.new.conversation_id,senderId:k.new.sender_id,senderName:k.new.sender?.name||"Unknown",content:k.new.content,messageType:k.new.message_type,createdAt:k.new.created_at};o(E=>({...E,[S.id]:[...E[S.id]||[],C]}))}}));return()=>{w.forEach(S=>S.unsubscribe())}},[t,s,p]);const b=v.useCallback((w,S)=>{const k=JSON.parse(localStorage.getItem("agriconnect-myanmar-conversations")||"[]"),C=k.find(Z=>Z.id===w);if(!C)return;const P=JSON.parse(localStorage.getItem("agriconnect-myanmar-users")||"[]").find(Z=>Z.id===C.sellerId);if(!P)return;let T=[];const A=S.toLowerCase();A.includes("price")||A.includes("cost")||A.includes("how much")?T=["The current price is very competitive. I can offer special rates for bulk orders.","Let me check the latest pricing for you. Quality comes first in my business.","For the quality I provide, the price is very reasonable. Would you like to discuss quantities?","I always offer fair prices to my customers. What quantity are you looking for?"]:A.includes("quality")||A.includes("fresh")||A.includes("organic")?T=["Quality is my top priority. All products are freshly harvested and carefully selected.","I take great pride in the quality of my products. You can visit my farm anytime to see for yourself.","Everything is organic and fresh. I don't use any harmful chemicals in my farming.","My customers always appreciate the high quality. I have certifications if you'd like to see them."]:A.includes("delivery")||A.includes("shipping")||A.includes("transport")?T=["I can arrange delivery to your location. The cost depends on the distance and quantity.","Yes, I offer delivery services throughout the region. When do you need the products?","Delivery is available. I usually deliver within 24-48 hours for fresh products.","I have reliable transportation. Let me know your location and I'll calculate the delivery cost."]:A.includes("available")||A.includes("stock")||A.includes("quantity")?T=["Yes, I have good stock available right now. How much do you need?","The products are readily available. I just harvested a fresh batch this week.","I maintain good inventory levels. What quantity are you planning to purchase?","Availability is excellent this season. I can provide large quantities if needed."]:A.includes("visit")||A.includes("farm")||A.includes("see")?T=["You're welcome to visit my farm anytime during business hours. I'd be happy to show you around.","I encourage customers to visit and see the quality firsthand. Just let me know when you're coming.","A farm visit would be great! You can see the growing conditions and quality standards yourself.","Feel free to visit. Seeing is believing when it comes to agricultural quality."]:T=["Thank you for your interest! How can I assist you further?","I'm here to help with any questions about my products.","Let me know if you need more details about anything.","What specific information can I provide for you?","I appreciate your inquiry. What would you like to know more about?","Is there anything specific you'd like to discuss about the product?"];const R=T[Math.floor(Math.random()*T.length)],$={id:`msg-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,conversationId:w,senderId:C.sellerId,senderName:P.businessName||P.name,content:R,messageType:"text",createdAt:new Date().toISOString(),status:"sent"},J=localStorage.getItem(`agriconnect-myanmar-messages-${w}`),q=[...J?JSON.parse(J):[],$];o(Z=>({...Z,[w]:q})),localStorage.setItem(`agriconnect-myanmar-messages-${w}`,JSON.stringify(q));const Q=k.map(Z=>Z.id===w?{...Z,lastMessage:$,updatedAt:new Date().toISOString()}:Z);localStorage.setItem("agriconnect-myanmar-conversations",JSON.stringify(Q)),n(Q)},[]);return{conversations:s,messages:i,loading:l,error:u,fetchConversations:g,fetchMessages:h,sendMessage:y,startConversation:j}},hm=()=>{try{localStorage.getItem("agriconnect-myanmar-users")||localStorage.setItem("agriconnect-myanmar-users",JSON.stringify([]))}catch(t){console.error("Failed to initialize users storage:",t)}},M0=()=>{const[t,s]=v.useState(null),[n,i]=v.useState(!0),[o,l]=v.useState(null),{backendAvailable:d}=Xc(),u=v.useCallback(async(h,y)=>{i(!0);try{if(d){const{data:j,error:b}=await Mt.auth.signInWithPassword({email:h,password:y});if(b)throw b;if(j.user){const{data:w,error:S}=await Mt.from("users").select("*").eq("id",j.user.id).single();if(S)throw S;const k={id:w.id,email:w.email,name:w.name,userType:w.user_type,accountType:w.account_type,location:w.location,businessName:w.business_name,businessDescription:w.business_description,experience:w.experience,verified:w.verified,phoneVerified:w.phone_verified,phone:w.phone,qualityCertifications:w.quality_certifications||[],farmingMethods:w.farming_methods||[],profileImage:w.profile_image,storefrontImage:w.storefront_image,joinedDate:w.created_at,rating:w.rating||0,totalReviews:w.total_reviews||0};s(k),l(j.session),localStorage.setItem("agriconnect-myanmar-current-user",JSON.stringify(k))}}else{console.log("🔐 Attempting local login for:",h),hm();const j=JSON.parse(localStorage.getItem("agriconnect-myanmar-users")||"[]");console.log("📋 Available users:",j.length);const b=j.find(k=>k.email===h&&k.password===y);if(!b)throw new Error("Invalid credentials. Please check your email and password.");console.log("✅ User found:",b.email,b.userType);const{password:w,...S}=b;s(S),l({user:S}),localStorage.setItem("agriconnect-myanmar-current-user",JSON.stringify(S)),console.log("✅ Local login successful for:",S.email)}}catch(j){throw console.error("Sign in failed:",j),new Error(j.message||"Login failed")}finally{i(!1)}},[d]),f=v.useCallback(async h=>{i(!0);try{if(d){const{data:y,error:j}=await Mt.auth.signUp({email:h.email,password:h.password});if(j)throw j;if(y.user){const{error:b}=await Mt.from("users").insert({id:y.user.id,email:h.email,name:h.name,user_type:h.userType,account_type:h.accountType,location:h.location,business_name:h.businessName,business_description:h.businessDescription,experience:h.experience,verified:!1,phone_verified:!1,phone:h.phone,quality_certifications:[],farming_methods:[]});if(b)throw b}}else{hm();const y=JSON.parse(localStorage.getItem("agriconnect-myanmar-users")||"[]");if(y.some(w=>w.email===h.email))throw new Error("User with this email already exists");const j={id:`demo-${Date.now()}`,email:h.email,name:h.name,userType:h.userType,accountType:h.accountType,location:h.location,businessName:h.businessName,businessDescription:h.businessDescription,experience:h.experience,verified:!1,phoneVerified:!1,phone:h.phone,qualityCertifications:[],farmingMethods:[],joinedDate:new Date().toISOString(),rating:0,totalReviews:0},b={...j,password:h.password};y.push(b),localStorage.setItem("agriconnect-myanmar-users",JSON.stringify(y)),s(j),l({user:j}),localStorage.setItem("agriconnect-myanmar-current-user",JSON.stringify(j))}}catch(y){throw console.error("Sign up failed:",y),new Error(y.message||"Registration failed")}finally{i(!1)}},[d]),p=v.useCallback(async()=>{try{d&&await Mt.auth.signOut(),s(null),l(null),localStorage.removeItem("agriconnect-myanmar-current-user")}catch(h){console.error("Sign out failed:",h)}},[d]),g=v.useCallback(async h=>{if(t)try{if(d){const{error:j}=await Mt.from("users").update({name:h.name,location:h.location,business_name:h.businessName,business_description:h.businessDescription,experience:h.experience,verified:h.verified,phone_verified:h.phoneVerified,quality_certifications:h.qualityCertifications,farming_methods:h.farmingMethods,profile_image:h.profileImage,storefront_image:h.storefrontImage}).eq("id",t.id);if(j)throw j}else{const j=JSON.parse(localStorage.getItem("agriconnect-myanmar-users")||"[]"),b=j.findIndex(w=>w.id===t.id);b!==-1&&(j[b]={...j[b],...h},localStorage.setItem("agriconnect-myanmar-users",JSON.stringify(j)))}const y={...t,...h};s(y),localStorage.setItem("agriconnect-myanmar-current-user",JSON.stringify(y))}catch(y){throw console.error("Profile update failed:",y),y}},[t,d]);return v.useEffect(()=>{const h=async()=>{console.log("🎯 DEMO MODE ACTIVATED: Backend disabled, using local demo data"),console.log("🎯 LOCAL MODE ACTIVATED: Backend disabled, using local storage"),console.log("🎯 Backend not available, using local mode");try{if(d){console.log("🌐 Backend available - checking Supabase session");try{const{data:{session:b},error:w}=await Mt.auth.getSession();if(w)throw console.warn("Supabase session error, falling back to local mode:",w),w;if(b?.user){const{data:S,error:k}=await Mt.from("users").select("*").eq("id",b.user.id).single();if(k)throw console.warn("Profile fetch error, falling back to local mode:",k),k;if(S){const C={id:S.id,email:S.email,name:S.name,userType:S.user_type,accountType:S.account_type,location:S.location,businessName:S.business_name,businessDescription:S.business_description,experience:S.experience,verified:S.verified,phoneVerified:S.phone_verified,phone:S.phone,qualityCertifications:S.quality_certifications||[],farmingMethods:S.farming_methods||[],profileImage:S.profile_image,storefrontImage:S.storefront_image,joinedDate:S.created_at,rating:S.rating||0,totalReviews:S.total_reviews||0};s(C),l(b),localStorage.setItem("agriconnect-myanmar-current-user",JSON.stringify(C)),console.log("✅ Backend authentication successful:",C.email),i(!1);return}}}catch(b){console.warn("Backend authentication failed, falling back to local mode:",b)}}console.log("🎯 Using local authentication mode"),hm();try{const b=localStorage.getItem("agriconnect-myanmar-current-user");if(b){const w=JSON.parse(b);w&&w.id&&w.email?(s(w),l({user:w}),console.log("✅ Restored user session:",w.email)):(console.warn("⚠️ Invalid stored user data, clearing..."),localStorage.removeItem("agriconnect-myanmar-current-user"))}else console.log("📭 No stored user session found")}catch(b){console.error("❌ Failed to restore local session:",b),localStorage.removeItem("agriconnect-myanmar-current-user")}}catch(b){console.error("❌ Session check failed:",b)}finally{i(!1)}},y=setTimeout(h,100);let j=null;if(d){console.log("🔄 Setting up Supabase auth listener");try{const{data:b}=Mt.auth.onAuthStateChange(async(w,S)=>{console.log("🔔 Supabase auth event:",w),w==="SIGNED_OUT"||!S?(s(null),l(null),localStorage.removeItem("agriconnect-myanmar-current-user"),console.log("🚪 User signed out")):(w==="SIGNED_IN"||w==="TOKEN_REFRESHED")&&h()});j=b.subscription}catch(b){console.warn("⚠️ Failed to set up Supabase auth listener:",b)}}else console.log("⏭️ Skipping Supabase auth listener - backend not available");return()=>{clearTimeout(y),j&&j.unsubscribe()}},[d]),{user:t,loading:n,session:o,signIn:u,signUp:f,signOut:p,updateProfile:g}};var Zc="Dialog",[O0]=Ns(Zc),[u4,or]=O0(Zc),L0=t=>{const{__scopeDialog:s,children:n,open:i,defaultOpen:o,onOpenChange:l,modal:d=!0}=t,u=v.useRef(null),f=v.useRef(null),[p,g]=Ir({prop:i,defaultProp:o??!1,onChange:l,caller:Zc});return e.jsx(u4,{scope:s,triggerRef:u,contentRef:f,contentId:Bs(),titleId:Bs(),descriptionId:Bs(),open:p,onOpenChange:g,onOpenToggle:v.useCallback(()=>g(h=>!h),[g]),modal:d,children:n})};L0.displayName=Zc;var $0="DialogTrigger",F0=v.forwardRef((t,s)=>{const{__scopeDialog:n,...i}=t,o=or($0,n),l=Ye(s,o.triggerRef);return e.jsx(Le.button,{type:"button","aria-haspopup":"dialog","aria-expanded":o.open,"aria-controls":o.contentId,"data-state":Af(o.open),...i,ref:l,onClick:be(t.onClick,o.onOpenToggle)})});F0.displayName=$0;var Pf="DialogPortal",[m4,z0]=O0(Pf,{forceMount:void 0}),B0=t=>{const{__scopeDialog:s,forceMount:n,children:i,container:o}=t,l=or(Pf,s);return e.jsx(m4,{scope:s,forceMount:n,children:v.Children.map(i,d=>e.jsx(ds,{present:n||l.open,children:e.jsx(Vc,{asChild:!0,container:o,children:d})}))})};B0.displayName=Pf;var kc="DialogOverlay",U0=v.forwardRef((t,s)=>{const n=z0(kc,t.__scopeDialog),{forceMount:i=n.forceMount,...o}=t,l=or(kc,t.__scopeDialog);return l.modal?e.jsx(ds,{present:i||l.open,children:e.jsx(h4,{...o,ref:s})}):null});U0.displayName=kc;var f4=ha("DialogOverlay.RemoveScroll"),h4=v.forwardRef((t,s)=>{const{__scopeDialog:n,...i}=t,o=or(kc,n);return e.jsx(Hc,{as:f4,allowPinchZoom:!0,shards:[o.contentRef],children:e.jsx(Le.div,{"data-state":Af(o.open),...i,ref:s,style:{pointerEvents:"auto",...i.style}})})}),wa="DialogContent",V0=v.forwardRef((t,s)=>{const n=z0(wa,t.__scopeDialog),{forceMount:i=n.forceMount,...o}=t,l=or(wa,t.__scopeDialog);return e.jsx(ds,{present:i||l.open,children:l.modal?e.jsx(p4,{...o,ref:s}):e.jsx(g4,{...o,ref:s})})});V0.displayName=wa;var p4=v.forwardRef((t,s)=>{const n=or(wa,t.__scopeDialog),i=v.useRef(null),o=Ye(s,n.contentRef,i);return v.useEffect(()=>{const l=i.current;if(l)return yf(l)},[]),e.jsx(q0,{...t,ref:o,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:be(t.onCloseAutoFocus,l=>{l.preventDefault(),n.triggerRef.current?.focus()}),onPointerDownOutside:be(t.onPointerDownOutside,l=>{const d=l.detail.originalEvent,u=d.button===0&&d.ctrlKey===!0;(d.button===2||u)&&l.preventDefault()}),onFocusOutside:be(t.onFocusOutside,l=>l.preventDefault())})}),g4=v.forwardRef((t,s)=>{const n=or(wa,t.__scopeDialog),i=v.useRef(!1),o=v.useRef(!1);return e.jsx(q0,{...t,ref:s,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:l=>{t.onCloseAutoFocus?.(l),l.defaultPrevented||(i.current||n.triggerRef.current?.focus(),l.preventDefault()),i.current=!1,o.current=!1},onInteractOutside:l=>{t.onInteractOutside?.(l),l.defaultPrevented||(i.current=!0,l.detail.originalEvent.type==="pointerdown"&&(o.current=!0));const d=l.target;n.triggerRef.current?.contains(d)&&l.preventDefault(),l.detail.originalEvent.type==="focusin"&&o.current&&l.preventDefault()}})}),q0=v.forwardRef((t,s)=>{const{__scopeDialog:n,trapFocus:i,onOpenAutoFocus:o,onCloseAutoFocus:l,...d}=t,u=or(wa,n),f=v.useRef(null),p=Ye(s,f);return df(),e.jsxs(e.Fragment,{children:[e.jsx(Lc,{asChild:!0,loop:!0,trapped:i,onMountAutoFocus:o,onUnmountAutoFocus:l,children:e.jsx(Oc,{role:"dialog",id:u.contentId,"aria-describedby":u.descriptionId,"aria-labelledby":u.titleId,"data-state":Af(u.open),...d,ref:p,onDismiss:()=>u.onOpenChange(!1)})}),e.jsxs(e.Fragment,{children:[e.jsx(x4,{titleId:u.titleId}),e.jsx(y4,{contentRef:f,descriptionId:u.descriptionId})]})]})}),If="DialogTitle",H0=v.forwardRef((t,s)=>{const{__scopeDialog:n,...i}=t,o=or(If,n);return e.jsx(Le.h2,{id:o.titleId,...i,ref:s})});H0.displayName=If;var W0="DialogDescription",K0=v.forwardRef((t,s)=>{const{__scopeDialog:n,...i}=t,o=or(W0,n);return e.jsx(Le.p,{id:o.descriptionId,...i,ref:s})});K0.displayName=W0;var G0="DialogClose",J0=v.forwardRef((t,s)=>{const{__scopeDialog:n,...i}=t,o=or(G0,n);return e.jsx(Le.button,{type:"button",...i,ref:s,onClick:be(t.onClick,()=>o.onOpenChange(!1))})});J0.displayName=G0;function Af(t){return t?"open":"closed"}var Y0="DialogTitleWarning",[VR,Q0]=jk(Y0,{contentName:wa,titleName:If,docsSlug:"dialog"}),x4=({titleId:t})=>{const s=Q0(Y0),n=`\`${s.contentName}\` requires a \`${s.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${s.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${s.docsSlug}`;return v.useEffect(()=>{t&&(document.getElementById(t)||console.error(n))},[n,t]),null},v4="DialogDescriptionWarning",y4=({contentRef:t,descriptionId:s})=>{const i=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${Q0(v4).contentName}}.`;return v.useEffect(()=>{const o=t.current?.getAttribute("aria-describedby");s&&o&&(document.getElementById(s)||console.warn(i))},[i,t,s]),null},w4=L0,X0=F0,b4=B0,Z0=U0,ew=V0,tw=H0,sw=K0,Rf=J0;function rw({...t}){return e.jsx(w4,{"data-slot":"dialog",...t})}const nw=v.forwardRef(({...t},s)=>e.jsx(X0,{ref:s,"data-slot":"dialog-trigger",...t}));nw.displayName=X0.displayName;function j4({...t}){return e.jsx(b4,{"data-slot":"dialog-portal",...t})}const N4=v.forwardRef(({...t},s)=>e.jsx(Rf,{ref:s,"data-slot":"dialog-close",...t}));N4.displayName=Rf.displayName;const aw=v.forwardRef(({className:t,...s},n)=>e.jsx(Z0,{ref:n,"data-slot":"dialog-overlay",className:Ve("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",t),...s}));aw.displayName=Z0.displayName;const Df=v.forwardRef(({className:t,children:s,...n},i)=>e.jsxs(j4,{"data-slot":"dialog-portal",children:[e.jsx(aw,{}),e.jsxs(ew,{ref:i,"data-slot":"dialog-content",className:Ve("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",t),...n,children:[s,e.jsxs(Rf,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[e.jsx(cs,{}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Df.displayName=ew.displayName;function iw({className:t,...s}){return e.jsx("div",{"data-slot":"dialog-header",className:Ve("flex flex-col gap-2 text-center sm:text-left",t),...s})}const Mf=v.forwardRef(({className:t,...s},n)=>e.jsx(tw,{ref:n,"data-slot":"dialog-title",className:Ve("text-lg leading-none font-semibold",t),...s}));Mf.displayName=tw.displayName;const Of=v.forwardRef(({className:t,...s},n)=>e.jsx(sw,{ref:n,"data-slot":"dialog-description",className:Ve("text-muted-foreground text-sm",t),...s}));Of.displayName=sw.displayName;var S4="Label",ow=v.forwardRef((t,s)=>e.jsx(Le.label,{...t,ref:s,onMouseDown:n=>{n.target.closest("button, input, select, textarea")||(t.onMouseDown?.(n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));ow.displayName=S4;var k4=ow;function $e({className:t,...s}){return e.jsx(k4,{"data-slot":"label",className:Ve("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",t),...s})}function es({className:t,...s}){return e.jsx("textarea",{"data-slot":"textarea",className:Ve("resize-none border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-input-background px-3 py-2 text-base transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),...s})}function C4(t){if(typeof document>"u")return;let s=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",s.appendChild(n),n.styleSheet?n.styleSheet.cssText=t:n.appendChild(document.createTextNode(t))}const _4=t=>{switch(t){case"success":return P4;case"info":return A4;case"warning":return I4;case"error":return R4;default:return null}},E4=Array(12).fill(0),T4=({visible:t,className:s})=>le.createElement("div",{className:["sonner-loading-wrapper",s].filter(Boolean).join(" "),"data-visible":t},le.createElement("div",{className:"sonner-spinner"},E4.map((n,i)=>le.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${i}`})))),P4=le.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},le.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),I4=le.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},le.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),A4=le.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},le.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),R4=le.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},le.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),D4=le.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},le.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),le.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),M4=()=>{const[t,s]=le.useState(document.hidden);return le.useEffect(()=>{const n=()=>{s(document.hidden)};return document.addEventListener("visibilitychange",n),()=>window.removeEventListener("visibilitychange",n)},[]),t};let Jm=1;class O4{constructor(){this.subscribe=s=>(this.subscribers.push(s),()=>{const n=this.subscribers.indexOf(s);this.subscribers.splice(n,1)}),this.publish=s=>{this.subscribers.forEach(n=>n(s))},this.addToast=s=>{this.publish(s),this.toasts=[...this.toasts,s]},this.create=s=>{var n;const{message:i,...o}=s,l=typeof s?.id=="number"||((n=s.id)==null?void 0:n.length)>0?s.id:Jm++,d=this.toasts.find(f=>f.id===l),u=s.dismissible===void 0?!0:s.dismissible;return this.dismissedToasts.has(l)&&this.dismissedToasts.delete(l),d?this.toasts=this.toasts.map(f=>f.id===l?(this.publish({...f,...s,id:l,title:i}),{...f,...s,id:l,dismissible:u,title:i}):f):this.addToast({title:i,...o,dismissible:u,id:l}),l},this.dismiss=s=>(s?(this.dismissedToasts.add(s),requestAnimationFrame(()=>this.subscribers.forEach(n=>n({id:s,dismiss:!0})))):this.toasts.forEach(n=>{this.subscribers.forEach(i=>i({id:n.id,dismiss:!0}))}),s),this.message=(s,n)=>this.create({...n,message:s}),this.error=(s,n)=>this.create({...n,message:s,type:"error"}),this.success=(s,n)=>this.create({...n,type:"success",message:s}),this.info=(s,n)=>this.create({...n,type:"info",message:s}),this.warning=(s,n)=>this.create({...n,type:"warning",message:s}),this.loading=(s,n)=>this.create({...n,type:"loading",message:s}),this.promise=(s,n)=>{if(!n)return;let i;n.loading!==void 0&&(i=this.create({...n,promise:s,type:"loading",message:n.loading,description:typeof n.description!="function"?n.description:void 0}));const o=Promise.resolve(s instanceof Function?s():s);let l=i!==void 0,d;const u=o.then(async p=>{if(d=["resolve",p],le.isValidElement(p))l=!1,this.create({id:i,type:"default",message:p});else if($4(p)&&!p.ok){l=!1;const h=typeof n.error=="function"?await n.error(`HTTP error! status: ${p.status}`):n.error,y=typeof n.description=="function"?await n.description(`HTTP error! status: ${p.status}`):n.description,b=typeof h=="object"&&!le.isValidElement(h)?h:{message:h};this.create({id:i,type:"error",description:y,...b})}else if(p instanceof Error){l=!1;const h=typeof n.error=="function"?await n.error(p):n.error,y=typeof n.description=="function"?await n.description(p):n.description,b=typeof h=="object"&&!le.isValidElement(h)?h:{message:h};this.create({id:i,type:"error",description:y,...b})}else if(n.success!==void 0){l=!1;const h=typeof n.success=="function"?await n.success(p):n.success,y=typeof n.description=="function"?await n.description(p):n.description,b=typeof h=="object"&&!le.isValidElement(h)?h:{message:h};this.create({id:i,type:"success",description:y,...b})}}).catch(async p=>{if(d=["reject",p],n.error!==void 0){l=!1;const g=typeof n.error=="function"?await n.error(p):n.error,h=typeof n.description=="function"?await n.description(p):n.description,j=typeof g=="object"&&!le.isValidElement(g)?g:{message:g};this.create({id:i,type:"error",description:h,...j})}}).finally(()=>{l&&(this.dismiss(i),i=void 0),n.finally==null||n.finally.call(n)}),f=()=>new Promise((p,g)=>u.then(()=>d[0]==="reject"?g(d[1]):p(d[1])).catch(g));return typeof i!="string"&&typeof i!="number"?{unwrap:f}:Object.assign(i,{unwrap:f})},this.custom=(s,n)=>{const i=n?.id||Jm++;return this.create({jsx:s(i),id:i,...n}),i},this.getActiveToasts=()=>this.toasts.filter(s=>!this.dismissedToasts.has(s.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const bs=new O4,L4=(t,s)=>{const n=s?.id||Jm++;return bs.addToast({title:t,...s,id:n}),n},$4=t=>t&&typeof t=="object"&&"ok"in t&&typeof t.ok=="boolean"&&"status"in t&&typeof t.status=="number",F4=L4,z4=()=>bs.toasts,B4=()=>bs.getActiveToasts(),ge=Object.assign(F4,{success:bs.success,info:bs.info,warning:bs.warning,error:bs.error,custom:bs.custom,message:bs.message,promise:bs.promise,dismiss:bs.dismiss,loading:bs.loading},{getHistory:z4,getToasts:B4});C4("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");function nc(t){return t.label!==void 0}const U4=3,V4="24px",q4="16px",ev=4e3,H4=356,W4=14,K4=45,G4=200;function gr(...t){return t.filter(Boolean).join(" ")}function J4(t){const[s,n]=t.split("-"),i=[];return s&&i.push(s),n&&i.push(n),i}const Y4=t=>{var s,n,i,o,l,d,u,f,p;const{invert:g,toast:h,unstyled:y,interacting:j,setHeights:b,visibleToasts:w,heights:S,index:k,toasts:C,expanded:E,removeToast:P,defaultRichColors:T,closeButton:A,style:R,cancelButtonStyle:$,actionButtonStyle:J,className:z="",descriptionClassName:q="",duration:Q,position:Z,gap:he,expandByDefault:se,classNames:te,icons:ne,closeButtonAriaLabel:U="Close toast"}=t,[M,H]=le.useState(null),[I,V]=le.useState(null),[D,ae]=le.useState(!1),[ce,pe]=le.useState(!1),[W,X]=le.useState(!1),[xe,ye]=le.useState(!1),[je,Ne]=le.useState(!1),[Xe,st]=le.useState(0),[ms,Ss]=le.useState(0),qt=le.useRef(h.duration||Q||ev),Un=le.useRef(null),Ht=le.useRef(null),ut=k===0,Ae=k+1<=w,rt=h.type,ss=h.dismissible!==!1,en=h.className||"",Dr=h.descriptionClassName||"",Mr=le.useMemo(()=>S.findIndex(ee=>ee.toastId===h.id)||0,[S,h.id]),tn=le.useMemo(()=>{var ee;return(ee=h.closeButton)!=null?ee:A},[h.closeButton,A]),Or=le.useMemo(()=>h.duration||Q||ev,[h.duration,Q]),lt=le.useRef(0),Qe=le.useRef(0),cr=le.useRef(0),qs=le.useRef(null),[Ca,Hs]=Z.split("-"),Vn=le.useMemo(()=>S.reduce((ee,Me,Je)=>Je>=Mr?ee:ee+Me.height,0),[S,Mr]),sn=M4(),qn=h.invert||g,Lr=rt==="loading";Qe.current=le.useMemo(()=>Mr*he+Vn,[Mr,Vn]),le.useEffect(()=>{qt.current=Or},[Or]),le.useEffect(()=>{ae(!0)},[]),le.useEffect(()=>{const ee=Ht.current;if(ee){const Me=ee.getBoundingClientRect().height;return Ss(Me),b(Je=>[{toastId:h.id,height:Me,position:h.position},...Je]),()=>b(Je=>Je.filter(yt=>yt.toastId!==h.id))}},[b,h.id]),le.useLayoutEffect(()=>{if(!D)return;const ee=Ht.current,Me=ee.style.height;ee.style.height="auto";const Je=ee.getBoundingClientRect().height;ee.style.height=Me,Ss(Je),b(yt=>yt.find(wt=>wt.toastId===h.id)?yt.map(wt=>wt.toastId===h.id?{...wt,height:Je}:wt):[{toastId:h.id,height:Je,position:h.position},...yt])},[D,h.title,h.description,b,h.id,h.jsx,h.action,h.cancel]);const fs=le.useCallback(()=>{pe(!0),st(Qe.current),b(ee=>ee.filter(Me=>Me.toastId!==h.id)),setTimeout(()=>{P(h)},G4)},[h,P,b,Qe]);le.useEffect(()=>{if(h.promise&&rt==="loading"||h.duration===1/0||h.type==="loading")return;let ee;return E||j||sn?(()=>{if(cr.current<lt.current){const yt=new Date().getTime()-lt.current;qt.current=qt.current-yt}cr.current=new Date().getTime()})():(()=>{qt.current!==1/0&&(lt.current=new Date().getTime(),ee=setTimeout(()=>{h.onAutoClose==null||h.onAutoClose.call(h,h),fs()},qt.current))})(),()=>clearTimeout(ee)},[E,j,h,rt,sn,fs]),le.useEffect(()=>{h.delete&&(fs(),h.onDismiss==null||h.onDismiss.call(h,h))},[fs,h.delete]);function Hn(){var ee;if(ne?.loading){var Me;return le.createElement("div",{className:gr(te?.loader,h==null||(Me=h.classNames)==null?void 0:Me.loader,"sonner-loader"),"data-visible":rt==="loading"},ne.loading)}return le.createElement(T4,{className:gr(te?.loader,h==null||(ee=h.classNames)==null?void 0:ee.loader),visible:rt==="loading"})}const dr=h.icon||ne?.[rt]||_4(rt);var ue,Te;return le.createElement("li",{tabIndex:0,ref:Ht,className:gr(z,en,te?.toast,h==null||(s=h.classNames)==null?void 0:s.toast,te?.default,te?.[rt],h==null||(n=h.classNames)==null?void 0:n[rt]),"data-sonner-toast":"","data-rich-colors":(ue=h.richColors)!=null?ue:T,"data-styled":!(h.jsx||h.unstyled||y),"data-mounted":D,"data-promise":!!h.promise,"data-swiped":je,"data-removed":ce,"data-visible":Ae,"data-y-position":Ca,"data-x-position":Hs,"data-index":k,"data-front":ut,"data-swiping":W,"data-dismissible":ss,"data-type":rt,"data-invert":qn,"data-swipe-out":xe,"data-swipe-direction":I,"data-expanded":!!(E||se&&D),"data-testid":h.testId,style:{"--index":k,"--toasts-before":k,"--z-index":C.length-k,"--offset":`${ce?Xe:Qe.current}px`,"--initial-height":se?"auto":`${ms}px`,...R,...h.style},onDragEnd:()=>{X(!1),H(null),qs.current=null},onPointerDown:ee=>{ee.button!==2&&(Lr||!ss||(Un.current=new Date,st(Qe.current),ee.target.setPointerCapture(ee.pointerId),ee.target.tagName!=="BUTTON"&&(X(!0),qs.current={x:ee.clientX,y:ee.clientY})))},onPointerUp:()=>{var ee,Me,Je;if(xe||!ss)return;qs.current=null;const yt=Number(((ee=Ht.current)==null?void 0:ee.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),rn=Number(((Me=Ht.current)==null?void 0:Me.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),wt=new Date().getTime()-((Je=Un.current)==null?void 0:Je.getTime()),Tt=M==="x"?yt:rn,nn=Math.abs(Tt)/wt;if(Math.abs(Tt)>=K4||nn>.11){st(Qe.current),h.onDismiss==null||h.onDismiss.call(h,h),V(M==="x"?yt>0?"right":"left":rn>0?"down":"up"),fs(),ye(!0);return}else{var Ft,ks;(Ft=Ht.current)==null||Ft.style.setProperty("--swipe-amount-x","0px"),(ks=Ht.current)==null||ks.style.setProperty("--swipe-amount-y","0px")}Ne(!1),X(!1),H(null)},onPointerMove:ee=>{var Me,Je,yt;if(!qs.current||!ss||((Me=window.getSelection())==null?void 0:Me.toString().length)>0)return;const wt=ee.clientY-qs.current.y,Tt=ee.clientX-qs.current.x;var nn;const Ft=(nn=t.swipeDirections)!=null?nn:J4(Z);!M&&(Math.abs(Tt)>1||Math.abs(wt)>1)&&H(Math.abs(Tt)>Math.abs(wt)?"x":"y");let ks={x:0,y:0};const an=As=>1/(1.5+Math.abs(As)/20);if(M==="y"){if(Ft.includes("top")||Ft.includes("bottom"))if(Ft.includes("top")&&wt<0||Ft.includes("bottom")&&wt>0)ks.y=wt;else{const As=wt*an(wt);ks.y=Math.abs(As)<Math.abs(wt)?As:wt}}else if(M==="x"&&(Ft.includes("left")||Ft.includes("right")))if(Ft.includes("left")&&Tt<0||Ft.includes("right")&&Tt>0)ks.x=Tt;else{const As=Tt*an(Tt);ks.x=Math.abs(As)<Math.abs(Tt)?As:Tt}(Math.abs(ks.x)>0||Math.abs(ks.y)>0)&&Ne(!0),(Je=Ht.current)==null||Je.style.setProperty("--swipe-amount-x",`${ks.x}px`),(yt=Ht.current)==null||yt.style.setProperty("--swipe-amount-y",`${ks.y}px`)}},tn&&!h.jsx&&rt!=="loading"?le.createElement("button",{"aria-label":U,"data-disabled":Lr,"data-close-button":!0,onClick:Lr||!ss?()=>{}:()=>{fs(),h.onDismiss==null||h.onDismiss.call(h,h)},className:gr(te?.closeButton,h==null||(i=h.classNames)==null?void 0:i.closeButton)},(Te=ne?.close)!=null?Te:D4):null,(rt||h.icon||h.promise)&&h.icon!==null&&(ne?.[rt]!==null||h.icon)?le.createElement("div",{"data-icon":"",className:gr(te?.icon,h==null||(o=h.classNames)==null?void 0:o.icon)},h.promise||h.type==="loading"&&!h.icon?h.icon||Hn():null,h.type!=="loading"?dr:null):null,le.createElement("div",{"data-content":"",className:gr(te?.content,h==null||(l=h.classNames)==null?void 0:l.content)},le.createElement("div",{"data-title":"",className:gr(te?.title,h==null||(d=h.classNames)==null?void 0:d.title)},h.jsx?h.jsx:typeof h.title=="function"?h.title():h.title),h.description?le.createElement("div",{"data-description":"",className:gr(q,Dr,te?.description,h==null||(u=h.classNames)==null?void 0:u.description)},typeof h.description=="function"?h.description():h.description):null),le.isValidElement(h.cancel)?h.cancel:h.cancel&&nc(h.cancel)?le.createElement("button",{"data-button":!0,"data-cancel":!0,style:h.cancelButtonStyle||$,onClick:ee=>{nc(h.cancel)&&ss&&(h.cancel.onClick==null||h.cancel.onClick.call(h.cancel,ee),fs())},className:gr(te?.cancelButton,h==null||(f=h.classNames)==null?void 0:f.cancelButton)},h.cancel.label):null,le.isValidElement(h.action)?h.action:h.action&&nc(h.action)?le.createElement("button",{"data-button":!0,"data-action":!0,style:h.actionButtonStyle||J,onClick:ee=>{nc(h.action)&&(h.action.onClick==null||h.action.onClick.call(h.action,ee),!ee.defaultPrevented&&fs())},className:gr(te?.actionButton,h==null||(p=h.classNames)==null?void 0:p.actionButton)},h.action.label):null)};function tv(){if(typeof window>"u"||typeof document>"u")return"ltr";const t=document.documentElement.getAttribute("dir");return t==="auto"||!t?window.getComputedStyle(document.documentElement).direction:t}function Q4(t,s){const n={};return[t,s].forEach((i,o)=>{const l=o===1,d=l?"--mobile-offset":"--offset",u=l?q4:V4;function f(p){["top","right","bottom","left"].forEach(g=>{n[`${d}-${g}`]=typeof p=="number"?`${p}px`:p})}typeof i=="number"||typeof i=="string"?f(i):typeof i=="object"?["top","right","bottom","left"].forEach(p=>{i[p]===void 0?n[`${d}-${p}`]=u:n[`${d}-${p}`]=typeof i[p]=="number"?`${i[p]}px`:i[p]}):f(u)}),n}const X4=le.forwardRef(function(s,n){const{id:i,invert:o,position:l="bottom-right",hotkey:d=["altKey","KeyT"],expand:u,closeButton:f,className:p,offset:g,mobileOffset:h,theme:y="light",richColors:j,duration:b,style:w,visibleToasts:S=U4,toastOptions:k,dir:C=tv(),gap:E=W4,icons:P,containerAriaLabel:T="Notifications"}=s,[A,R]=le.useState([]),$=le.useMemo(()=>i?A.filter(D=>D.toasterId===i):A.filter(D=>!D.toasterId),[A,i]),J=le.useMemo(()=>Array.from(new Set([l].concat($.filter(D=>D.position).map(D=>D.position)))),[$,l]),[z,q]=le.useState([]),[Q,Z]=le.useState(!1),[he,se]=le.useState(!1),[te,ne]=le.useState(y!=="system"?y:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),U=le.useRef(null),M=d.join("+").replace(/Key/g,"").replace(/Digit/g,""),H=le.useRef(null),I=le.useRef(!1),V=le.useCallback(D=>{R(ae=>{var ce;return(ce=ae.find(pe=>pe.id===D.id))!=null&&ce.delete||bs.dismiss(D.id),ae.filter(({id:pe})=>pe!==D.id)})},[]);return le.useEffect(()=>bs.subscribe(D=>{if(D.dismiss){requestAnimationFrame(()=>{R(ae=>ae.map(ce=>ce.id===D.id?{...ce,delete:!0}:ce))});return}setTimeout(()=>{Bv.flushSync(()=>{R(ae=>{const ce=ae.findIndex(pe=>pe.id===D.id);return ce!==-1?[...ae.slice(0,ce),{...ae[ce],...D},...ae.slice(ce+1)]:[D,...ae]})})})}),[A]),le.useEffect(()=>{if(y!=="system"){ne(y);return}if(y==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?ne("dark"):ne("light")),typeof window>"u")return;const D=window.matchMedia("(prefers-color-scheme: dark)");try{D.addEventListener("change",({matches:ae})=>{ne(ae?"dark":"light")})}catch{D.addListener(({matches:ce})=>{try{ne(ce?"dark":"light")}catch(pe){console.error(pe)}})}},[y]),le.useEffect(()=>{A.length<=1&&Z(!1)},[A]),le.useEffect(()=>{const D=ae=>{var ce;if(d.every(X=>ae[X]||ae.code===X)){var W;Z(!0),(W=U.current)==null||W.focus()}ae.code==="Escape"&&(document.activeElement===U.current||(ce=U.current)!=null&&ce.contains(document.activeElement))&&Z(!1)};return document.addEventListener("keydown",D),()=>document.removeEventListener("keydown",D)},[d]),le.useEffect(()=>{if(U.current)return()=>{H.current&&(H.current.focus({preventScroll:!0}),H.current=null,I.current=!1)}},[U.current]),le.createElement("section",{ref:n,"aria-label":`${T} ${M}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},J.map((D,ae)=>{var ce;const[pe,W]=D.split("-");return $.length?le.createElement("ol",{key:D,dir:C==="auto"?tv():C,tabIndex:-1,ref:U,className:p,"data-sonner-toaster":!0,"data-sonner-theme":te,"data-y-position":pe,"data-x-position":W,style:{"--front-toast-height":`${((ce=z[0])==null?void 0:ce.height)||0}px`,"--width":`${H4}px`,"--gap":`${E}px`,...w,...Q4(g,h)},onBlur:X=>{I.current&&!X.currentTarget.contains(X.relatedTarget)&&(I.current=!1,H.current&&(H.current.focus({preventScroll:!0}),H.current=null))},onFocus:X=>{X.target instanceof HTMLElement&&X.target.dataset.dismissible==="false"||I.current||(I.current=!0,H.current=X.relatedTarget)},onMouseEnter:()=>Z(!0),onMouseMove:()=>Z(!0),onMouseLeave:()=>{he||Z(!1)},onDragEnd:()=>Z(!1),onPointerDown:X=>{X.target instanceof HTMLElement&&X.target.dataset.dismissible==="false"||se(!0)},onPointerUp:()=>se(!1)},$.filter(X=>!X.position&&ae===0||X.position===D).map((X,xe)=>{var ye,je;return le.createElement(Y4,{key:X.id,icons:P,index:xe,toast:X,defaultRichColors:j,duration:(ye=k?.duration)!=null?ye:b,className:k?.className,descriptionClassName:k?.descriptionClassName,invert:o,visibleToasts:S,closeButton:(je=k?.closeButton)!=null?je:f,interacting:he,position:D,style:k?.style,unstyled:k?.unstyled,classNames:k?.classNames,cancelButtonStyle:k?.cancelButtonStyle,actionButtonStyle:k?.actionButtonStyle,closeButtonAriaLabel:k?.closeButtonAriaLabel,removeToast:V,toasts:$.filter(Ne=>Ne.position==X.position),heights:z.filter(Ne=>Ne.position==X.position),setHeights:q,expandByDefault:u,gap:E,expanded:Q,swipeDirections:s.swipeDirections})})):null}))});function Z4({isOpen:t,onClose:s,product:n,buyerId:i,buyerName:o,sellerId:l,sellerName:d,onCreateOffer:u}){const[f,p]=v.useState(n.price),[g,h]=v.useState(1),[y,j]=v.useState(""),[b,w]=v.useState(""),[S,k]=v.useState("3"),[C,E]=v.useState(""),[P,T]=v.useState({}),A=q=>new Intl.NumberFormat("en-US").format(q)+" MMK",R=()=>{const q={};return f<=0&&(q.price="Price must be greater than 0"),g<=0&&(q.quantity="Quantity must be greater than 0"),y.trim()||(q.deliveryLocation="Delivery location is required"),b.trim()||(q.deliveryTerms="Delivery terms are required"),T(q),Object.keys(q).length===0},$=()=>{if(!R()){ge.error("Please fix the errors in the form");return}console.log("🎯 CreateOfferModal - Creating offer with user details:",{buyerId:i,buyerName:o,sellerId:l,sellerName:d,productId:n.id,productName:n.name});const q=new Date;q.setDate(q.getDate()+parseInt(S));const Q={productId:n.id,productName:n.name,sellerId:l,sellerName:d,buyerId:i,buyerName:o,price:f,quantity:g,unit:n.unit,description:n.description,deliveryTerms:`${b}${y?` | Location: ${y}`:""}`,deliveryLocation:y,validUntil:q.toISOString(),status:"pending",notes:C.trim()||void 0};console.log("✅ CreateOfferModal - Final offer object:",Q),u(Q),ge.success("Formal offer sent successfully!"),s()},J=()=>{p(n.price),h(1),j(""),w(""),k("3"),E(""),T({}),s()},z=f*g;return e.jsx(rw,{open:t,onOpenChange:J,children:e.jsxs(Df,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(iw,{children:[e.jsxs(Mf,{className:"flex items-center gap-2",children:[e.jsx(Nt,{className:"w-5 h-5 text-primary"}),"Create Formal Offer"]}),e.jsx(Of,{children:"Create a formal offer for this product. Once submitted, the seller can accept, decline, or make a counter-offer."})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx(re,{className:"bg-primary/5 border-primary/20",children:e.jsxs(ie,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h3",{className:"font-medium",children:n.name}),e.jsx(Ee,{variant:"outline",children:n.category})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground",children:"Listed Price"}),e.jsxs("p",{className:"font-medium",children:[A(n.price)," per ",n.unit]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground",children:"Available"}),e.jsxs("p",{className:"font-medium",children:[n.quantity," ",n.unit]})]})]}),e.jsxs("div",{className:"mt-2",children:[e.jsx("p",{className:"text-muted-foreground text-sm",children:"Seller"}),e.jsx("p",{className:"font-medium",children:d})]})]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"flex items-center gap-2 font-medium",children:[e.jsx(ga,{className:"w-4 h-4"}),"Offer Details"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs($e,{htmlFor:"price",children:["Price per ",n.unit]}),e.jsx(Ue,{id:"price",type:"number",value:f,onChange:q=>p(Number(q.target.value)),className:P.price?"border-red-500":""}),P.price&&e.jsxs("p",{className:"text-red-500 text-sm flex items-center gap-1",children:[e.jsx(zs,{className:"w-3 h-3"}),P.price]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs($e,{htmlFor:"quantity",children:["Quantity (",n.unit,")"]}),e.jsx(Ue,{id:"quantity",type:"number",value:g,onChange:q=>h(Number(q.target.value)),max:n.quantity,className:P.quantity?"border-red-500":""}),P.quantity&&e.jsxs("p",{className:"text-red-500 text-sm flex items-center gap-1",children:[e.jsx(zs,{className:"w-3 h-3"}),P.quantity]})]})]}),e.jsx("div",{className:"bg-muted/50 p-3 rounded-lg",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-muted-foreground",children:"Total Offer Value:"}),e.jsx("span",{className:"text-xl font-semibold text-primary",children:A(z)})]})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"flex items-center gap-2 font-medium",children:[e.jsx(ja,{className:"w-4 h-4"}),"Delivery & Terms"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx($e,{htmlFor:"deliveryLocation",children:"Delivery Location"}),e.jsx(Ue,{id:"deliveryLocation",value:y,onChange:q=>j(q.target.value),placeholder:"Where should the product be delivered?",className:P.deliveryLocation?"border-red-500":""}),P.deliveryLocation&&e.jsxs("p",{className:"text-red-500 text-sm flex items-center gap-1",children:[e.jsx(zs,{className:"w-3 h-3"}),P.deliveryLocation]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx($e,{htmlFor:"deliveryTerms",children:"Delivery Terms & Conditions"}),e.jsx(es,{id:"deliveryTerms",value:b,onChange:q=>w(q.target.value),placeholder:"Delivery method, timing, payment terms, quality requirements, etc.",className:`min-h-[100px] ${P.deliveryTerms?"border-red-500":""}`}),P.deliveryTerms&&e.jsxs("p",{className:"text-red-500 text-sm flex items-center gap-1",children:[e.jsx(zs,{className:"w-3 h-3"}),P.deliveryTerms]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"flex items-center gap-2 font-medium",children:[e.jsx(ba,{className:"w-4 h-4"}),"Offer Validity"]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx($e,{htmlFor:"validity",children:"Valid for"}),e.jsxs(Yt,{value:S,onValueChange:k,children:[e.jsx(Xt,{children:e.jsx(Qt,{})}),e.jsxs(Zt,{children:[e.jsx(De,{value:"1",children:"1 day"}),e.jsx(De,{value:"3",children:"3 days"}),e.jsx(De,{value:"7",children:"1 week"}),e.jsx(De,{value:"14",children:"2 weeks"}),e.jsx(De,{value:"30",children:"1 month"})]})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx($e,{htmlFor:"notes",children:"Additional Notes (Optional)"}),e.jsx(es,{id:"notes",value:C,onChange:q=>E(q.target.value),placeholder:"Any additional terms, requirements, or information...",className:"min-h-[80px]"})]}),e.jsxs("div",{className:"flex gap-3 pt-4 border-t",children:[e.jsx(O,{variant:"outline",onClick:J,className:"flex-1",children:"Cancel"}),e.jsx(O,{onClick:$,className:"flex-1",children:"Send Formal Offer"})]}),e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:e.jsxs("p",{className:"text-sm text-blue-800",children:["💡 ",e.jsx("strong",{children:"Tip:"})," A formal offer creates a structured deal with clear terms. Once accepted, both parties can track the deal progress and leave reviews upon completion."]})})]})]})})}function eP({offer:t,currentUserId:s,onAccept:n,onDecline:i,onModify:o,onMarkCompleted:l,canModify:d=!1}){const[u,f]=v.useState(!1),[p,g]=v.useState(t.price),[h,y]=v.useState(t.quantity),[j,b]=v.useState(t.deliveryTerms),[w,S]=v.useState(t.notes||""),k=s&&t.sellerId&&s===t.sellerId,C=s&&t.buyerId&&s===t.buyerId,E=C&&t.status==="pending"&&!z,P=C&&t.status==="pending"&&!z,T=t.status==="accepted"&&(k||C),A=se=>new Intl.NumberFormat("en-US").format(se)+" MMK",R=se=>new Date(se).toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),$=se=>{switch(se){case"pending":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"accepted":return"bg-green-100 text-green-800 border-green-200";case"declined":return"bg-red-100 text-red-800 border-red-200";case"expired":return"bg-gray-100 text-gray-800 border-gray-200";case"completed":return"bg-blue-100 text-blue-800 border-blue-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},J=se=>{switch(se){case"pending":return e.jsx(Lt,{className:"w-4 h-4"});case"accepted":return e.jsx(He,{className:"w-4 h-4"});case"declined":return e.jsx(An,{className:"w-4 h-4"});case"expired":return e.jsx(ba,{className:"w-4 h-4"});case"completed":return e.jsx(Xg,{className:"w-4 h-4"});default:return e.jsx(Lt,{className:"w-4 h-4"})}},z=new Date(t.validUntil)<new Date,q=()=>{n&&(n(t.id),ge.success("Offer accepted! Deal is now active."))},Q=()=>{i&&(i(t.id),ge.success("Offer declined"))},Z=()=>{o&&(p!==t.price||h!==t.quantity||j!==t.deliveryTerms||w!==t.notes)?(o(t.id,{price:p,quantity:h,deliveryTerms:j,notes:w}),f(!1),ge.success("Offer modified and sent")):f(!1)},he=()=>{l&&(l(t.id),ge.success("Deal marked as completed! You can now leave a review."))};return e.jsxs(re,{className:"border-2 border-primary/20 bg-primary/5 w-full mb-4",children:[e.jsx(Ie,{className:"pb-3",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-primary/10 rounded-lg flex items-center justify-center",children:e.jsx(Nt,{className:"w-5 h-5 text-primary"})}),e.jsxs("div",{children:[e.jsx(Oe,{className:"text-base",children:"Formal Offer"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:k?`To: ${t.buyerName}`:`From: ${t.sellerName}`}),!1]})]}),e.jsxs(Ee,{className:`${$(z&&t.status==="pending"?"expired":t.status)} flex items-center gap-1`,children:[J(z&&t.status==="pending"?"expired":t.status),z&&t.status==="pending"?"Expired":t.status.charAt(0).toUpperCase()+t.status.slice(1)]})]})}),e.jsxs(ie,{className:"space-y-4",children:[e.jsxs("div",{className:"bg-white rounded-lg p-4 space-y-3 border",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h4",{className:"font-medium",children:t.productName}),e.jsxs("div",{className:"flex items-center text-primary",children:[e.jsx(ga,{className:"w-4 h-4 mr-1"}),e.jsx("span",{className:"text-lg font-semibold",children:u?e.jsx(Ue,{type:"number",value:p,onChange:se=>g(Number(se.target.value)),className:"w-24 h-8 text-sm"}):A(t.price)})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground",children:"Quantity"}),e.jsx("p",{className:"font-medium",children:u?e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ue,{type:"number",value:h,onChange:se=>y(Number(se.target.value)),className:"w-16 h-8 text-sm"}),e.jsx("span",{children:t.unit})]}):`${t.quantity} ${t.unit}`})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground",children:"Total Value"}),e.jsx("p",{className:"font-medium text-primary",children:A((u?p:t.price)*(u?h:t.quantity))})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs($e,{className:"flex items-center gap-2",children:[e.jsx(ja,{className:"w-4 h-4"}),"Delivery Terms"]}),u?e.jsx(es,{value:j,onChange:se=>b(se.target.value),className:"min-h-[60px] text-sm",placeholder:"Delivery location, timing, and terms..."}):e.jsx("p",{className:"text-sm bg-muted/50 p-3 rounded-md",children:t.deliveryTerms})]}),(t.notes||u)&&e.jsxs("div",{className:"space-y-2",children:[e.jsx($e,{children:"Additional Notes"}),u?e.jsx(es,{value:w,onChange:se=>S(se.target.value),className:"min-h-[60px] text-sm",placeholder:"Any additional terms or notes..."}):e.jsx("p",{className:"text-sm bg-muted/50 p-3 rounded-md",children:t.notes||"No additional notes"})]}),e.jsxs("div",{className:"flex items-center justify-between text-xs text-muted-foreground border-t pt-3",children:[e.jsxs("span",{children:["Created: ",R(t.createdAt)]}),e.jsxs("span",{children:["Valid until: ",R(t.validUntil)]})]}),e.jsxs("div",{className:"flex gap-2 pt-2",children:[E&&!z&&e.jsxs(O,{onClick:q,className:"flex-1",children:[e.jsx(He,{className:"w-4 h-4 mr-2"}),"Accept Offer"]}),P&&!z&&e.jsxs(O,{variant:"outline",onClick:Q,className:"flex-1",children:[e.jsx(An,{className:"w-4 h-4 mr-2"}),"Decline"]}),d&&t.status==="pending"&&!z&&e.jsx(e.Fragment,{children:u?e.jsxs("div",{className:"flex gap-2 flex-1",children:[e.jsx(O,{onClick:Z,className:"flex-1",children:"Send Modified"}),e.jsx(O,{variant:"outline",onClick:()=>f(!1),children:"Cancel"})]}):e.jsxs(O,{variant:"outline",onClick:()=>f(!0),className:"flex-1",children:[e.jsx(Mv,{className:"w-4 h-4 mr-2"}),"Modify Offer"]})}),T&&e.jsxs(O,{onClick:he,className:"flex-1 bg-green-600 hover:bg-green-700",children:[e.jsx(Xg,{className:"w-4 h-4 mr-2"}),"Mark as Completed"]})]}),t.status==="accepted"&&e.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3",children:e.jsxs("p",{className:"text-sm text-green-800",children:["🎉 ",e.jsx("strong",{children:"Deal Accepted!"})," Please coordinate payment and delivery. Mark as completed once the transaction is finished to leave reviews."]})}),t.status==="completed"&&e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:e.jsxs("p",{className:"text-sm text-blue-800",children:["✅ ",e.jsx("strong",{children:"Deal Completed!"})," This transaction has been successfully completed. Don't forget to leave a review for your trading partner."]})}),z&&t.status==="pending"&&e.jsx("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-3",children:e.jsx("p",{className:"text-sm text-gray-700",children:"⏰ This offer has expired and is no longer valid."})})]})]})}function Cc({sellerName:t,sellerType:s,sellerLocation:n,sellerRating:i,productName:o,productId:l,sellerId:d,conversationId:u,onClose:f,sellerVerified:p=!1,currentUserVerified:g=!1,currentUserType:h="buyer",sellerVerificationStatus:y,product:j}){const{user:b}=M0(),w=v.useMemo(()=>{if(b?.id)return b;try{const W=localStorage.getItem("agriconnect-myanmar-current-user");if(W){const X=JSON.parse(W);if(X?.id)return console.log("🔄 ChatInterface using fallback user:",X.email||X.name),X}}catch(W){console.error("Failed to parse stored current user:",W)}return null},[b?.id]);v.useEffect(()=>{},[b?.id,w?.id]);const{messages:S,sendMessage:k,startConversation:C,fetchMessages:E}=Tf(w?.id),[P,T]=v.useState(""),[A,R]=v.useState(u||null);v.useEffect(()=>{console.log("🔄 Conversation ID changed:",{old:A,new:A,timestamp:new Date().toISOString()})},[A]);const[$,J]=v.useState(!1),z=v.useRef(null),[q,Q]=v.useState(!1),[Z,he]=v.useState([]),se=v.useMemo(()=>!l||!d||!w?.id?null:`${l}-${d}-${w.id}`,[l,d,w?.id]);v.useEffect(()=>()=>{Q(!1),J(!1)},[]),v.useEffect(()=>{if($){const W=setTimeout(()=>{console.warn("Chat interface stuck in loading state, forcing recovery"),J(!1),ge.warning("Chat recovered from loading state")},1e4);return()=>clearTimeout(W)}},[$]),v.useEffect(()=>{se&&w?.id?(()=>{try{console.log("📋 Loading offers for conversation key:",se);const X=localStorage.getItem("agriconnect-myanmar-offers");if(X){const ye=JSON.parse(X).filter(je=>{const Ne=je.productId===l,Xe=je.sellerId===d&&je.buyerId===w.id||je.sellerId===w.id&&je.buyerId===d;return console.log("🔍 Offer filter check:",{offerId:je.id.slice(-8),productMatch:Ne,userMatch:Xe,offerSellerId:je.sellerId,offerBuyerId:je.buyerId,currentSellerId:d,currentUserId:w.id}),Ne&&Xe});ye.sort((je,Ne)=>new Date(je.createdAt).getTime()-new Date(Ne.createdAt).getTime()),console.log(`✅ Loaded ${ye.length} offers for conversation`),he(ye)}else he([])}catch(X){console.error("❌ Failed to load offers:",X),he([])}})():he([])},[se,w?.id]);const te=v.useMemo(()=>A?S[A]||[]:[],[A,S[A||""]?.length]);v.useEffect(()=>{const W=()=>{try{const xe=localStorage.getItem("agriconnect-myanmar-offers");if(xe){const ye=JSON.parse(xe),je=ye.filter(Ne=>Ne.buyerId&&Ne.sellerId&&Ne.buyerName&&Ne.sellerName&&Ne.productId&&Ne.createdAt);je.length!==ye.length&&(console.log(`🧹 Cleaned up ${ye.length-je.length} invalid offers`),localStorage.setItem("agriconnect-myanmar-offers",JSON.stringify(je)),ge.info(`Cleaned up ${ye.length-je.length} old offers`))}}catch(xe){console.error("Failed to cleanup offers:",xe)}};sessionStorage.getItem("offers-cleanup-done")||(W(),sessionStorage.setItem("offers-cleanup-done","true"))},[]),v.useEffect(()=>{(async()=>{if(!w||!l||!d){console.log("🔄 Chat initialization skipped - missing dependencies:",{hasUser:!!w,hasProductId:!!l,hasSellerId:!!d});return}if(A){console.log("✅ Chat already initialized:",A);try{await E(A)}catch(X){console.error("❌ Failed to fetch messages for existing conversation:",X)}return}try{if(console.log("🚀 Initializing chat:",{productId:l,sellerId:d,currentUserId:w.id,initialConversationId:u}),J(!0),u)console.log("📱 Using existing conversation:",u),R(u),await E(u);else{try{const xe=localStorage.getItem("agriconnect-myanmar-conversations");if(xe){const je=JSON.parse(xe).find(Ne=>Ne.buyerId===w.id&&Ne.sellerId===d&&Ne.productId===l);if(je){console.log("📱 Found existing conversation in localStorage:",je.id),R(je.id),await E(je.id);return}}}catch(xe){console.warn("Could not check for existing conversations:",xe)}console.log("🆕 Starting new conversation");const X=await C(d,l);console.log("✅ New conversation created:",X.id),R(X.id)}}catch(X){console.error("❌ Failed to initialize chat:",X),ge.error("Failed to start conversation")}finally{J(!1)}})()},[w?.id,l,d,u]),v.useEffect(()=>{if(z.current){const W=z.current.querySelector("[data-radix-scroll-area-viewport]");W&&(W.scrollTop=W.scrollHeight)}},[te,Z]);const ne=async()=>{if(!P.trim()||!A||$||!w){console.log("⚠️ Cannot send message:",{hasMessage:!!P.trim(),hasConversationId:!!A,hasEffectiveUser:!!w,isLoading:$});return}const W=P.trim();console.log("📤 Sending message:",{conversationId:A,content:W,sender:w.name,userId:w.id}),T("");try{J(!0);const X=await k(A,W);console.log("✅ Message sent successfully:",X),console.log("🔍 Post-send conversation state:",{conversationId:A,messageCount:te.length,isLoading:!1})}catch(X){console.error("❌ Failed to send message:",X),T(W),ge.error("Failed to send message. Please try again.")}finally{J(!1),console.log("🔍 Final conversation check:",{conversationId:A,stillValid:!!A,timestamp:new Date().toISOString()})}},U=W=>{W.key==="Enter"&&!W.shiftKey&&(W.preventDefault(),ne())},M=W=>{const X=new Date(W),ye=new Date().getTime()-X.getTime(),je=Math.floor(ye/6e4);if(je<1)return"Just now";if(je<60)return`${je}m ago`;const Ne=Math.floor(je/60);if(Ne<24)return`${Ne}h ago`;const Xe=Math.floor(Ne/24);return Xe<7?`${Xe}d ago`:X.toLocaleDateString()},H=W=>{console.log("🎯 Creating offer - conversation state before:",{conversationId:A,productId:l,sellerId:d,currentUserId:b?.id,conversationKey:se});const X={...W,id:`offer_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,createdAt:new Date().toISOString()};try{const xe=localStorage.getItem("agriconnect-myanmar-offers"),je=[...xe?JSON.parse(xe):[],X];localStorage.setItem("agriconnect-myanmar-offers",JSON.stringify(je)),console.log("💾 Offer saved to localStorage:",X.id),he(Ne=>(console.log("📝 Updating offers state - previous count:",Ne.length),Ne.find(st=>st.id===X.id)?(console.log("⚠️ Duplicate offer detected, skipping"),Ne):(console.log("✅ Adding new offer to state"),[...Ne,X]))),Q(!1),ge.success("Offer sent successfully!"),console.log("🎯 Offer creation complete - conversation state after:",{conversationId:A,productId:l,sellerId:d,currentUserId:b?.id,conversationKey:se}),setTimeout(()=>{if(z.current){const Ne=z.current.querySelector("[data-radix-scroll-area-viewport]");Ne&&(Ne.scrollTop=Ne.scrollHeight)}},100)}catch(xe){console.error("❌ Failed to save offer:",xe),ge.error("Failed to create offer")}},I=W=>{ce(W,"accepted",{acceptedAt:new Date().toISOString()})},V=W=>{ce(W,"declined")},D=W=>{ce(W,"completed",{completedAt:new Date().toISOString()})},ae=(W,X)=>{ce(W,"pending",X)},ce=(W,X,xe={})=>{try{const ye=localStorage.getItem("agriconnect-myanmar-offers"),Ne=(ye?JSON.parse(ye):[]).map(Xe=>Xe.id===W?{...Xe,status:X,...xe}:Xe);localStorage.setItem("agriconnect-myanmar-offers",JSON.stringify(Ne)),he(Xe=>Xe.map(st=>st.id===W?{...st,status:X,...xe}:st))}catch(ye){console.error("Failed to update offer:",ye),ge.error("Failed to update offer")}},pe=w&&j&&w.id!==d;return w?.id,e.jsxs(re,{className:"h-full flex flex-col border-0 rounded-none",children:[e.jsx(Ie,{className:"flex-shrink-0 pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{children:e.jsxs(Oe,{className:"flex items-center gap-2",children:[t,e.jsx(Fv,{userType:s,accountType:"individual",size:"sm",className:"mr-1"})]})}),e.jsxs("div",{className:"flex gap-2",children:[pe&&e.jsxs(O,{variant:"outline",size:"sm",onClick:()=>Q(!0),className:"text-primary border-primary hover:bg-primary hover:text-primary-foreground",children:[e.jsx(Nt,{className:"w-4 h-4 mr-1"}),"Offer"]}),e.jsx(O,{variant:"outline",size:"sm",onClick:f,children:e.jsx(cs,{className:"w-4 h-4"})})]})]})}),e.jsxs(ie,{className:"flex-1 flex flex-col p-0 min-h-0",children:[y&&e.jsx("div",{className:`mx-4 mt-3 p-3 rounded-lg border ${y.verified?"bg-green-50 border-green-200":"bg-yellow-50 border-yellow-200"}`,children:e.jsxs("div",{className:"flex items-start gap-2",children:[!y.verified&&e.jsx(as,{className:"w-4 h-4 text-yellow-600 mt-0.5"}),y.verified&&e.jsx(He,{className:"w-4 h-4 text-green-600 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[!y.verified&&e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-sm font-medium text-yellow-800",children:"Profile Not Confirmed"}),e.jsxs("p",{className:"text-xs text-yellow-700 mt-1",children:[e.jsx("span",{className:"font-medium",children:t})," has not completed profile verification yet. Exercise appropriate caution when sharing personal information."]})]}),y.verified&&e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:"text-sm font-medium text-green-800",children:["Verified ",s==="farmer"?"Farmer":s==="trader"?"Trader":"User"]}),e.jsxs("p",{className:"text-xs text-green-700 mt-1",children:[e.jsx("span",{className:"font-medium",children:t})," has completed profile verification and confirmed their identity."]})]})]})]})}),e.jsx(h0,{ref:z,className:"flex-1 p-4",children:e.jsx("div",{className:"space-y-4 pb-4",children:$&&te.length===0&&Z.length===0?e.jsx("div",{className:"text-center text-muted-foreground py-8",children:e.jsx("div",{className:"animate-pulse",children:"Starting conversation..."})}):te.length===0&&Z.length===0?e.jsx("div",{className:"text-center text-muted-foreground py-8",children:e.jsx("p",{children:"No messages yet. Say hello to start the conversation!"})}):e.jsxs(e.Fragment,{children:[te.map(W=>e.jsx("div",{className:`flex ${W.senderId===w?.id?"justify-end":"justify-start"}`,children:e.jsxs("div",{className:`max-w-[80%] p-3 rounded-lg ${W.senderId===w?.id?"bg-primary text-primary-foreground":"bg-muted"}`,children:[e.jsx("p",{className:"text-sm",children:W.content}),e.jsxs("div",{className:"flex items-center justify-between mt-1",children:[e.jsx("p",{className:"text-xs opacity-70",children:M(W.createdAt)}),W.senderId===w?.id&&W.status&&e.jsx("span",{className:"text-xs opacity-70 ml-2",children:W.status==="sending"?"⏳":W.status==="sent"?"✓":W.status==="delivered"||W.status==="read"?"✓✓":""})]})]})},W.id)),Z.length>0&&e.jsx("div",{className:"space-y-3",children:Z.map(W=>e.jsx("div",{className:"w-full",children:e.jsx(eP,{offer:W,currentUserId:w?.id||"",onAccept:I,onDecline:V,onModify:ae,onMarkCompleted:D,canModify:w?.id===d})},W.id))})]})})}),!1,e.jsxs("div",{className:"flex-shrink-0 p-4 border-t bg-card",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Ue,{placeholder:A?$?"Sending...":"Type your message...":"Initializing...",value:P,onChange:W=>T(W.target.value),onKeyPress:U,disabled:$||!A||!w,className:"flex-1",autoComplete:"off",maxLength:1e3}),e.jsx(O,{onClick:ne,size:"sm",disabled:$||!A||!P.trim()||!w,className:"shrink-0",children:$?e.jsx("div",{className:"w-4 h-4 animate-spin rounded-full border-2 border-primary border-t-transparent"}):e.jsx(Lv,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"mt-2 space-y-1",children:[!A&&w&&e.jsx("p",{className:"text-xs text-muted-foreground text-center",children:"Setting up conversation..."}),!w&&e.jsx("p",{className:"text-xs text-muted-foreground text-center",children:"Please log in to send messages"}),!1]})]})]}),q&&j&&w&&(console.log("🔍 ChatInterface - Rendering CreateOfferModal with user data:",{currentUserId:w.id,currentUserName:w.name,currentUserEmail:w.email,currentUserType:w.userType,sellerId:d,sellerName:t,productId:j.id,productName:j.name}),e.jsx(Z4,{isOpen:q,onClose:()=>Q(!1),product:j,buyerId:w.id,buyerName:w.name,sellerId:d,sellerName:t,onCreateOffer:H}))]})}var tP="Separator",sv="horizontal",sP=["horizontal","vertical"],lw=v.forwardRef((t,s)=>{const{decorative:n,orientation:i=sv,...o}=t,l=rP(i)?i:sv,u=n?{role:"none"}:{"aria-orientation":l==="vertical"?l:void 0,role:"separator"};return e.jsx(Le.div,{"data-orientation":l,...u,...o,ref:s})});lw.displayName=tP;function rP(t){return sP.includes(t)}var nP=lw;function sr({className:t,orientation:s="horizontal",decorative:n=!0,...i}){return e.jsx(nP,{"data-slot":"separator-root",decorative:n,orientation:s,className:Ve("bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px",t),...i})}function aP({product:t,onBack:s,onChat:n,onPriceCompare:i,onViewStorefront:o,onEditProduct:l,currentUserId:d,isUserVerified:u=!1,userType:f,isPhoneVerified:p=!1,sellerVerified:g=!1,sellerVerificationStatus:h,sellerProfile:y}){const j=M=>new Intl.NumberFormat("en-US").format(M),b={description:t.description||`High-quality ${t.name.toLowerCase()} sourced ${t.sellerType==="farmer"?"directly from our farm":"from trusted farmers"} in ${t.location}. ${t.sellerType==="farmer"?"Grown using sustainable farming practices.":"Carefully selected and stored to ensure freshness."}`,harvestDate:t.sellerType==="farmer"?"January 15, 2024":"January 10-20, 2024",minimumOrder:t.minimumOrder||"10 "+t.unit.split("(")[0].trim()+"s",deliveryOptions:t.deliveryOptions&&t.deliveryOptions.length>0?t.deliveryOptions:["Nationwide Shipping","Express Delivery","Local Delivery (Within 10km)","Pickup","Regional Delivery"],paymentTerms:t.paymentTerms&&t.paymentTerms.length>0?t.paymentTerms.join(", "):"Cash on Pickup, Bank Transfer, 50% Advance, 50% on Delivery, Mobile Payment"},w={rating:y?.rating||4.2,totalReviews:y?.totalReviews||(t.sellerType==="farmer"?15:28),yearsActive:y?.yearsActive||(y?.experience?parseInt(y.experience.split(" ")[0])||1:t.sellerType==="farmer"?5:8),responseTime:y?.responseTime||(t.sellerType==="farmer"?"3 hours":"1 hour")},S=d&&t.sellerId===d,[k,C]=v.useState(0),[E,P]=v.useState(0),T=t.images&&t.images.length>0?t.images:t.image?[t.image]:[],A=5,R=()=>{C(M=>M===0?T.length-1:M-1)},$=()=>{C(M=>M===T.length-1?0:M+1)},J=M=>{C(M),M<E?P(M):M>=E+A&&P(M-A+1)},z=()=>{P(M=>Math.max(0,M-1))},q=()=>{P(M=>Math.min(T.length-A,M+1))},[Q,Z]=v.useState(null),[he,se]=v.useState(null),te=M=>{se(null),Z(M.targetTouches[0].clientX)},ne=M=>{se(M.targetTouches[0].clientX)},U=()=>{if(!Q||!he)return;const M=Q-he,H=M>50,I=M<-50;T.length>1&&(H&&$(),I&&R())};return v.useEffect(()=>{k<E?P(k):k>=E+A&&P(Math.max(0,k-A+1))},[k,E,A]),v.useEffect(()=>{const M=H=>{T.length>1&&(H.key==="ArrowLeft"?(H.preventDefault(),R()):H.key==="ArrowRight"&&(H.preventDefault(),$()))};return window.addEventListener("keydown",M),()=>window.removeEventListener("keydown",M)},[T.length]),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs(O,{variant:"ghost",onClick:s,className:"h-9 px-3 -ml-3",children:[e.jsx(ls,{className:"w-4 h-4 mr-2"}),"Back"]}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl md:text-3xl font-bold",children:t.name}),e.jsx("p",{className:"text-muted-foreground",children:"Product Details"})]})]}),e.jsxs("div",{className:"grid lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsx(re,{className:"border-primary/30",children:e.jsx(ie,{className:"p-6",children:e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsx("div",{children:T.length>0?e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:T[k],alt:`${t.name} - Image ${k+1}`,className:"w-full h-64 object-cover rounded-lg cursor-pointer select-none",onTouchStart:te,onTouchMove:ne,onTouchEnd:U,draggable:!1}),T.length>1&&e.jsxs("div",{className:"absolute bottom-3 right-3 bg-black/70 text-white text-xs px-2 py-1 rounded-md",children:[k+1," / ",T.length]})]}),T.length>1&&e.jsx("div",{className:"space-y-2",children:e.jsx("div",{className:"relative",children:e.jsx("div",{className:"flex gap-2 overflow-hidden",children:T.slice(E,E+A).map((M,H)=>{const I=E+H,V=H===0,D=H===A-1,ae=E>0,ce=E+A<T.length;return e.jsxs("div",{className:"relative flex-shrink-0",children:[e.jsx("img",{src:M,alt:`${t.name} - View ${I+1}`,className:`w-16 h-16 object-cover rounded border-2 cursor-pointer transition-all ${I===k?"border-primary ring-2 ring-primary/20":"border-border hover:border-primary"}`,onClick:()=>J(I)}),V&&ae&&e.jsx("button",{onClick:z,className:"absolute left-1 top-1/2 -translate-y-1/2 w-5 h-5 bg-white/90 hover:bg-white border border-black/20 rounded-sm shadow-sm flex items-center justify-center transition-all duration-200 z-10",children:e.jsx(ls,{className:"w-3 h-3 text-gray-700"})}),D&&ce&&e.jsx("button",{onClick:q,className:"absolute right-1 top-1/2 -translate-y-1/2 w-5 h-5 bg-white/90 hover:bg-white border border-black/20 rounded-sm shadow-sm flex items-center justify-center transition-all duration-200 z-10",children:e.jsx(ho,{className:"w-3 h-3 text-gray-700"})})]},I)})})})})]}):e.jsx("div",{className:"w-full h-64 bg-muted rounded-lg flex items-center justify-center",children:e.jsx("p",{className:"text-muted-foreground",children:"No images available"})})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"flex items-center gap-2 mb-2",children:t.price&&t.price>0?e.jsxs(e.Fragment,{children:[e.jsxs("span",{className:"text-3xl font-bold",children:[j(t.price)," MMK"]}),e.jsxs("span",{className:"text-muted-foreground",children:["per ",t.unit]})]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-3xl font-bold",children:"Contact"}),e.jsx("span",{className:"text-muted-foreground",children:"for price"})]})}),t.priceChange!==void 0&&e.jsxs("div",{className:"flex items-center gap-2",children:[t.priceChange>0?e.jsx(cf,{className:"w-4 h-4 text-green-600"}):e.jsx(hc,{className:"w-4 h-4 text-red-600"}),e.jsxs("span",{className:`text-sm ${t.priceChange>0?"text-green-600":"text-red-600"}`,children:[t.priceChange>0?"+":"",t.priceChange,"% from last week"]})]})]}),e.jsx(sr,{}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Nt,{className:"w-4 h-4 text-muted-foreground"}),e.jsxs("span",{className:"text-sm",children:["Available: ",t.quantity]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Vt,{className:"w-4 h-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm",children:t.location})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ba,{className:"w-4 h-4 text-muted-foreground"}),e.jsxs("span",{className:"text-sm",children:["Updated ",xi(t.lastUpdated)]})]})]}),e.jsx("div",{className:"flex gap-2",children:S?e.jsxs(e.Fragment,{children:[l&&e.jsxs(O,{onClick:()=>l(t),className:"flex-1",children:[e.jsx(ht,{className:"w-4 h-4 mr-2"}),"Edit Product"]}),e.jsxs(O,{variant:"outline",onClick:()=>i(t.id),className:"flex-1",children:[e.jsx(mc,{className:"w-4 h-4 mr-2"}),"See Market Prices"]})]}):e.jsxs(e.Fragment,{children:[e.jsxs(O,{onClick:()=>n(t.id),className:"flex-1",children:[e.jsx(Rn,{className:"w-4 h-4 mr-2"}),"Contact Seller"]}),e.jsxs(O,{variant:"outline",onClick:()=>i(t.id),children:[e.jsx(mc,{className:"w-4 h-4 mr-2"}),"Compare Prices"]})]})})]})]})})}),b.description&&e.jsxs(re,{className:"border-primary/30",children:[e.jsx(Ie,{children:e.jsxs(Oe,{className:"flex items-center gap-2",children:[e.jsx(er,{className:"w-5 h-5"}),"Product Description"]})}),e.jsx(ie,{children:e.jsx("p",{className:"text-foreground leading-relaxed",children:b.description})})]}),e.jsxs(re,{className:"border-primary/30",children:[e.jsx(Ie,{children:e.jsxs(Oe,{className:"flex items-center gap-2",children:[e.jsx(Nt,{className:"w-5 h-5"}),"Order & Delivery Information"]})}),e.jsxs(ie,{className:"space-y-6",children:[e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[t.availableQuantity&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("h4",{className:"font-medium flex items-center gap-2",children:[e.jsx(Nt,{className:"w-4 h-4 text-muted-foreground"}),"Available Stock"]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:t.availableQuantity})]}),t.minimumOrder&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("h4",{className:"font-medium flex items-center gap-2",children:[e.jsx(Lt,{className:"w-4 h-4 text-muted-foreground"}),"Minimum Order"]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:t.minimumOrder})]})]}),t.paymentTerms&&t.paymentTerms.length>0&&e.jsxs(e.Fragment,{children:[e.jsx(sr,{}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("h4",{className:"font-medium flex items-center gap-2",children:[e.jsx(af,{className:"w-4 h-4 text-muted-foreground"}),"Payment Terms"]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:t.paymentTerms.map((M,H)=>e.jsx(Ee,{variant:"secondary",className:"text-xs",children:M},H))})]})]}),t.deliveryOptions&&t.deliveryOptions.length>0&&e.jsxs(e.Fragment,{children:[e.jsx(sr,{}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("h4",{className:"font-medium flex items-center gap-2",children:[e.jsx(ja,{className:"w-4 h-4 text-muted-foreground"}),"Delivery Options"]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:t.deliveryOptions.map((M,H)=>e.jsx(Ee,{variant:"outline",className:"text-xs",children:M},H))})]})]}),t.additionalNotes&&e.jsxs(e.Fragment,{children:[e.jsx(sr,{}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("h4",{className:"font-medium flex items-center gap-2",children:[e.jsx(of,{className:"w-4 h-4 text-muted-foreground"}),"Additional Information"]}),e.jsx("div",{className:"p-3 bg-muted/30 rounded-md border border-dashed border-muted-foreground/20",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(er,{className:"w-4 h-4 mt-0.5 text-muted-foreground flex-shrink-0"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:t.additionalNotes})]})})]})]}),!t.availableQuantity&&!t.minimumOrder&&(!t.paymentTerms||t.paymentTerms.length===0)&&(!t.deliveryOptions||t.deliveryOptions.length===0)&&!t.additionalNotes&&e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(Nt,{className:"w-8 h-8 mx-auto mb-2 text-muted-foreground/50"}),e.jsx("p",{children:"Contact seller for detailed order information"}),e.jsx("p",{className:"text-sm",children:"Payment terms and delivery options available upon inquiry"})]})]})]})]}),e.jsx("div",{className:"space-y-6",children:e.jsxs(re,{className:"border-primary/30",children:[e.jsx(Ie,{children:e.jsxs(Oe,{className:"flex items-center gap-2",children:[e.jsx($t,{className:"w-5 h-5"}),"Seller Information"]})}),e.jsxs(ie,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(_r,{className:"w-4 h-4 text-muted-foreground"}),e.jsx("button",{className:"font-medium text-primary hover:underline",onClick:()=>o(t.sellerId),children:t.sellerName})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx(Ni,{userType:t.sellerType,accountType:h?.accountType||"individual",verificationLevel:h?h.trustLevel:"unverified",size:"sm"})})]}),e.jsx(sr,{}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Vt,{className:"w-4 h-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm",children:t.location})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Yr,{className:"w-4 h-4 text-yellow-500"}),e.jsxs("span",{className:"text-sm",children:[w.rating.toFixed(1)," (",w.totalReviews," reviews)"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Lt,{className:"w-4 h-4 text-muted-foreground"}),e.jsxs("span",{className:"text-sm",children:["Usually responds within ",w.responseTime]})]})]}),e.jsx(sr,{}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"font-medium text-sm",children:"Contact Information"}),y?.phone&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Cr,{className:"w-4 h-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm",children:y.phone})]}),y?.openingHours&&e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(Lt,{className:"w-4 h-4 text-muted-foreground mt-0.5"}),e.jsxs("div",{className:"text-sm",children:[e.jsx("div",{className:"font-medium",children:"Business Hours"}),e.jsx("div",{className:"text-muted-foreground",children:y.openingHours})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[y?.email&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Rn,{className:"w-4 h-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm",children:y.email})]}),!S&&e.jsxs(O,{onClick:()=>o(t.sellerId),variant:"outline",size:"sm",className:"w-full",children:[e.jsx(_r,{className:"w-4 h-4 mr-2"}),"View Full Storefront"]})]})]})]})})]})]})}function iP({seller:t,products:s,onBack:n,onViewProduct:i,onChat:o,isOwnStorefront:l=!1,onEditStorefrontImage:d,onUpdateStorefront:u,previewMode:f=!1,onTogglePreviewMode:p}){const[g,h]=v.useState(null),[y,j]=v.useState(()=>({description:t.description||"",businessHours:t.businessHours||"9 AM - 6 PM, Mon-Sat",phone:t.phone||"",email:t.email||"",website:t.website||"",facebook:t.facebook||"",instagram:t.instagram||"",telegram:t.telegram||"",specialties:t.specialties||[],policies:t.policies||{returns:"",delivery:"",payment:""}}));v.useEffect(()=>{j({description:t.description||"",businessHours:t.businessHours||"9 AM - 6 PM, Mon-Sat",phone:t.phone||"",email:t.email||"",website:t.website||"",facebook:t.facebook||"",instagram:t.instagram||"",telegram:t.telegram||"",specialties:t.specialties||[],policies:t.policies||{returns:"",delivery:"",payment:""}})},[t]);const b=(T,A)=>{h({field:T,value:A})},w=()=>{h(null)},S=async(T,A)=>{try{const R={[T]:A};j($=>({...$,[T]:A})),h(null),u&&await u(R)}catch(R){console.error("Failed to save:",R),j($=>({...$,[T]:y[T]}))}},k=T=>{if(!T.trim()||y.specialties.includes(T.trim()))return;const A=[...y.specialties,T.trim()];j(R=>({...R,specialties:A})),h(null),u&&u({specialties:A})},C=T=>{const A=y.specialties.filter(R=>R!==T);j(R=>({...R,specialties:A})),u&&u({specialties:A})};if(!t||!t.name)return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center gap-4",children:e.jsx(O,{variant:"outline",size:"sm",onClick:n,children:e.jsx(ls,{className:"w-4 h-4"})})}),e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-muted-foreground",children:"Seller information not available."})})]});const E=T=>new Intl.NumberFormat("en-US").format(T),P=s.length;return s.length>0&&Math.round(s.reduce((T,A)=>T+A.price,0)/s.length),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(ls,{className:"w-5 h-5 cursor-pointer text-muted-foreground hover:text-foreground transition-colors",onClick:n}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-semibold",children:t.name}),e.jsxs("p",{className:"text-muted-foreground",children:[t.type==="farmer"?"Farm":"Trading"," Storefront"]})]})]}),l&&p&&e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 bg-muted/50 rounded-lg",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Preview Mode"}),e.jsx("button",{onClick:()=>p(!f),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2 ${f?"bg-primary":"bg-gray-300"}`,children:e.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${f?"translate-x-6":"translate-x-1"}`})})]}),f&&e.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 bg-primary/10 border border-primary/30 rounded-lg",children:[e.jsx(Ut,{className:"w-4 h-4 text-primary"}),e.jsx("span",{className:"text-sm font-medium text-primary",children:"Customer View"})]})]})]}),l&&f&&e.jsx("div",{className:"bg-primary/10 border border-primary/30 rounded-lg p-4 mb-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ut,{className:"w-5 h-5 text-primary"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-primary",children:"Customer Preview Mode"}),e.jsx("p",{className:"text-sm text-primary/80",children:"This is exactly how customers see your storefront. Toggle off to return to editing mode."})]})]})}),e.jsxs("div",{className:"grid lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-1 space-y-4",children:[e.jsx(re,{className:"border-primary/30",children:e.jsx(ie,{className:"p-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"relative group",children:[e.jsx("img",{src:t.image,alt:t.name,className:"w-full h-48 object-cover rounded-lg"}),l&&!f&&d&&e.jsxs(O,{size:"sm",variant:"secondary",className:"absolute top-3 right-3 opacity-0 group-hover:opacity-100 transition-opacity bg-white/90 hover:bg-white shadow-md",onClick:d,children:[e.jsx(jo,{className:"w-4 h-4 mr-1"}),"Edit Photo"]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h2",{className:"text-xl font-semibold",children:t.name}),e.jsx($v,{verificationLevel:Qr(t),size:"sm"})]}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx(Vt,{className:"w-4 h-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:t.location})]}),e.jsx("div",{className:"flex items-center gap-2 mt-1",children:e.jsx(Ni,{userType:t.type,accountType:gi(t),verificationLevel:Qr(t),size:"sm"})})]}),t.rating>0&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"flex items-center",children:[...Array(5)].map((T,A)=>e.jsx(Yr,{className:`w-4 h-4 ${A<Math.floor(t.rating)?"text-yellow-400 fill-current":"text-gray-300"}`},A))}),e.jsx("span",{className:"text-sm font-medium",children:typeof t.rating=="number"?t.rating.toFixed(1):t.rating}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:["(",t.totalReviews," reviews)"]})]}),e.jsx(sr,{}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Lt,{className:"w-4 h-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm font-medium",children:"Business Hours"})]}),l&&!f&&e.jsx(O,{size:"sm",variant:"ghost",onClick:()=>b("businessHours",y.businessHours),className:"h-8 w-8 p-0 opacity-60 hover:opacity-100",children:e.jsx(ht,{className:"w-4 h-4"})})]}),g?.field==="businessHours"?e.jsxs("div",{className:"space-y-2",children:[e.jsx(Ue,{value:g.value,onChange:T=>h({...g,value:T.target.value}),placeholder:"e.g., 9 AM - 6 PM, Mon-Sat",autoFocus:!0}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(O,{size:"sm",onClick:()=>S("businessHours",g.value),children:[e.jsx(Dt,{className:"w-4 h-4 mr-1"}),"Save"]}),e.jsx(O,{size:"sm",variant:"outline",onClick:w,children:"Cancel"})]})]}):e.jsx("p",{className:"text-sm text-muted-foreground",children:y.businessHours})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ba,{className:"w-4 h-4 text-muted-foreground"}),e.jsxs("span",{className:"text-sm",children:["Joined ",Dc(t.joinedDate)]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(No,{className:"w-4 h-4 text-muted-foreground"}),e.jsxs("span",{className:"text-sm",children:["Response time: ",t.responseTime]})]})]})]})})}),(!f||y.phone||y.email||y.website)&&e.jsxs(re,{className:"border-primary/30",children:[e.jsx(Ie,{children:e.jsxs(Oe,{className:"text-lg flex items-center gap-2",children:[e.jsx(Cr,{className:"w-5 h-5"}),"Contact Information"]})}),e.jsxs(ie,{className:"space-y-4",children:[(!f||y.phone)&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Cr,{className:"w-4 h-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm font-medium",children:"Phone"})]}),l&&!f&&e.jsx(O,{size:"sm",variant:"ghost",onClick:()=>b("phone",y.phone),className:"h-8 w-8 p-0 opacity-60 hover:opacity-100",children:e.jsx(ht,{className:"w-4 h-4"})})]}),g?.field==="phone"?e.jsxs("div",{className:"space-y-2",children:[e.jsx(Ue,{value:g.value,onChange:T=>h({...g,value:T.target.value}),placeholder:"+95 9 xxx xxx xxx",autoFocus:!0}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(O,{size:"sm",onClick:()=>S("phone",g.value),children:[e.jsx(Dt,{className:"w-4 h-4 mr-1"}),"Save"]}),e.jsx(O,{size:"sm",variant:"outline",onClick:w,children:"Cancel"})]})]}):e.jsx("p",{className:"text-sm text-muted-foreground",children:y.phone||(l&&!f?"Add phone number":null)})]}),(!f||y.email)&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(pi,{className:"w-4 h-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm font-medium",children:"Email"})]}),l&&!f&&e.jsx(O,{size:"sm",variant:"ghost",onClick:()=>b("email",y.email),className:"h-8 w-8 p-0 opacity-60 hover:opacity-100",children:e.jsx(ht,{className:"w-4 h-4"})})]}),g?.field==="email"?e.jsxs("div",{className:"space-y-2",children:[e.jsx(Ue,{value:g.value,onChange:T=>h({...g,value:T.target.value}),placeholder:"business@example.com",type:"email",autoFocus:!0}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(O,{size:"sm",onClick:()=>S("email",g.value),children:[e.jsx(Dt,{className:"w-4 h-4 mr-1"}),"Save"]}),e.jsx(O,{size:"sm",variant:"outline",onClick:w,children:"Cancel"})]})]}):e.jsx("p",{className:"text-sm text-muted-foreground",children:y.email||(l&&!f?"Add email address":null)})]}),(y.website||l&&!f)&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(dS,{className:"w-4 h-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm font-medium",children:"Website"})]}),l&&!f&&e.jsx(O,{size:"sm",variant:"ghost",onClick:()=>b("website",y.website),className:"h-8 w-8 p-0 opacity-60 hover:opacity-100",children:e.jsx(ht,{className:"w-4 h-4"})})]}),g?.field==="website"?e.jsxs("div",{className:"space-y-2",children:[e.jsx(Ue,{value:g.value,onChange:T=>h({...g,value:T.target.value}),placeholder:"https://example.com",autoFocus:!0}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(O,{size:"sm",onClick:()=>S("website",g.value),children:[e.jsx(Dt,{className:"w-4 h-4 mr-1"}),"Save"]}),e.jsx(O,{size:"sm",variant:"outline",onClick:w,children:"Cancel"})]})]}):y.website?e.jsx("a",{href:y.website,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-primary hover:underline",children:y.website}):l&&!f&&e.jsx("p",{className:"text-sm text-muted-foreground",children:"Add website URL"})]}),(y.facebook||y.instagram||y.telegram||l&&!f)&&e.jsxs(e.Fragment,{children:[e.jsx(sr,{className:"my-4"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("h4",{className:"text-sm font-medium text-muted-foreground flex items-center gap-2",children:[e.jsx(fc,{className:"w-4 h-4"}),"Social Media & Online Presence"]}),e.jsxs("div",{className:"flex items-center gap-3",children:[y.facebook&&e.jsx(e.Fragment,{children:g?.field==="facebook"?e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsx(Ue,{value:g.value,onChange:T=>h({...g,value:T.target.value}),placeholder:"facebook.com/yourpage",autoFocus:!0}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(O,{size:"sm",onClick:()=>S("facebook",g.value),children:[e.jsx(Dt,{className:"w-4 h-4 mr-1"}),"Save"]}),e.jsx(O,{size:"sm",variant:"outline",onClick:w,children:"Cancel"})]})]}):e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("a",{href:y.facebook.startsWith("http")?y.facebook:`https://facebook.com/${y.facebook.replace("facebook.com/","").replace("@","")}`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center w-10 h-10 rounded-full bg-blue-50 hover:bg-blue-100 transition-colors group",children:e.jsx(Nm,{className:"w-5 h-5 text-blue-600 group-hover:text-blue-700"})}),l&&!f&&e.jsx(O,{size:"sm",variant:"ghost",onClick:()=>b("facebook",y.facebook),className:"h-6 w-6 p-0 opacity-60 hover:opacity-100",children:e.jsx(ht,{className:"w-3 h-3"})})]})}),y.instagram&&e.jsx(e.Fragment,{children:g?.field==="instagram"?e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsx(Ue,{value:g.value,onChange:T=>h({...g,value:T.target.value}),placeholder:"instagram.com/yourprofile",autoFocus:!0}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(O,{size:"sm",onClick:()=>S("instagram",g.value),children:[e.jsx(Dt,{className:"w-4 h-4 mr-1"}),"Save"]}),e.jsx(O,{size:"sm",variant:"outline",onClick:w,children:"Cancel"})]})]}):e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("a",{href:y.instagram.startsWith("http")?y.instagram:`https://instagram.com/${y.instagram.replace("instagram.com/","").replace("@","")}`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center w-10 h-10 rounded-full bg-pink-50 hover:bg-pink-100 transition-colors group",children:e.jsx(km,{className:"w-5 h-5 text-pink-600 group-hover:text-pink-700"})}),l&&!f&&e.jsx(O,{size:"sm",variant:"ghost",onClick:()=>b("instagram",y.instagram),className:"h-6 w-6 p-0 opacity-60 hover:opacity-100",children:e.jsx(ht,{className:"w-3 h-3"})})]})}),y.telegram&&e.jsx(e.Fragment,{children:g?.field==="telegram"?e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsx(Ue,{value:g.value,onChange:T=>h({...g,value:T.target.value}),placeholder:"@yourusername or t.me/yourusername",autoFocus:!0}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(O,{size:"sm",onClick:()=>S("telegram",g.value),children:[e.jsx(Dt,{className:"w-4 h-4 mr-1"}),"Save"]}),e.jsx(O,{size:"sm",variant:"outline",onClick:w,children:"Cancel"})]})]}):e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("a",{href:y.telegram.startsWith("http")?y.telegram:`https://t.me/${y.telegram.replace("@","").replace("t.me/","")}`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center w-10 h-10 rounded-full bg-blue-50 hover:bg-blue-100 transition-colors group",children:e.jsx(Rn,{className:"w-5 h-5 text-blue-500 group-hover:text-blue-600"})}),l&&!f&&e.jsx(O,{size:"sm",variant:"ghost",onClick:()=>b("telegram",y.telegram),className:"h-6 w-6 p-0 opacity-60 hover:opacity-100",children:e.jsx(ht,{className:"w-3 h-3"})})]})}),l&&!f&&e.jsxs(e.Fragment,{children:[!y.facebook&&e.jsxs(O,{size:"sm",variant:"outline",onClick:()=>b("facebook",""),className:"flex items-center gap-2 text-xs",children:[e.jsx(Nm,{className:"w-4 h-4 text-blue-600"}),"Add"]}),!y.instagram&&e.jsxs(O,{size:"sm",variant:"outline",onClick:()=>b("instagram",""),className:"flex items-center gap-2 text-xs",children:[e.jsx(km,{className:"w-4 h-4 text-pink-600"}),"Add"]}),!y.telegram&&e.jsxs(O,{size:"sm",variant:"outline",onClick:()=>b("telegram",""),className:"flex items-center gap-2 text-xs",children:[e.jsx(Rn,{className:"w-4 h-4 text-blue-500"}),"Add"]})]})]})]})]}),l&&!f&&!y.phone&&!y.email&&!y.website&&!y.facebook&&!y.instagram&&!y.telegram&&e.jsxs("div",{className:"text-center py-4 text-sm text-muted-foreground bg-muted/30 rounded-lg",children:[e.jsx(Cr,{className:"w-8 h-8 mx-auto mb-2 text-muted-foreground"}),e.jsx("p",{className:"font-medium",children:"Add contact information"}),e.jsx("p",{children:"Help customers reach you easily"})]})]})]}),(t.certifications.length>0||y.specialties.length>0||l&&!f)&&e.jsxs(re,{className:"border-primary/30",children:[e.jsx(Ie,{children:e.jsxs(Oe,{className:"text-lg flex items-center gap-2",children:[e.jsx(pa,{className:"w-5 h-5"}),"Certifications & Specialties"]})}),e.jsxs(ie,{className:"space-y-4",children:[t.certifications.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("span",{className:"text-sm font-medium",children:"Certifications"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:t.certifications.map((T,A)=>e.jsxs(Ee,{variant:"outline",className:"text-xs",children:[e.jsx(He,{className:"w-3 h-3 mr-1 text-green-600"}),T]},A))})]}),(y.specialties.length>0||l&&!f)&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:"Specialties"}),l&&!f&&e.jsx(O,{size:"sm",variant:"ghost",onClick:()=>b("specialties",""),className:"h-8 w-8 p-0 opacity-60 hover:opacity-100",title:"Add specialty",children:e.jsx(fa,{className:"w-4 h-4"})})]}),g?.field==="specialties"?e.jsxs("div",{className:"space-y-2",children:[e.jsx(Ue,{value:g.value,onChange:T=>h({...g,value:T.target.value}),placeholder:"e.g., Organic Vegetables, Rice Varieties",autoFocus:!0,onKeyDown:T=>{T.key==="Enter"&&k(g.value),T.key==="Escape"&&w()}}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(O,{size:"sm",onClick:()=>k(g.value),disabled:!g.value.trim(),children:[e.jsx(Dt,{className:"w-4 h-4 mr-1"}),"Add"]}),e.jsx(O,{size:"sm",variant:"outline",onClick:w,children:"Cancel"})]})]}):e.jsx("div",{className:"flex flex-wrap gap-2 min-h-[2rem] items-center",children:y.specialties.length>0?y.specialties.map((T,A)=>e.jsxs(Ee,{variant:"secondary",className:"text-xs flex items-center gap-1",children:[T,l&&!f&&e.jsx("button",{onClick:()=>C(T),className:"hover:text-destructive transition-colors",title:"Remove specialty",children:e.jsx(cs,{className:"w-3 h-3"})})]},A)):l&&!f&&e.jsx("p",{className:"text-sm text-muted-foreground",children:"Add your specialties"})})]}),l&&!f&&t.certifications.length===0&&y.specialties.length===0&&e.jsxs("div",{className:"text-center py-4 text-sm text-muted-foreground bg-muted/30 rounded-lg",children:[e.jsx(pa,{className:"w-8 h-8 mx-auto mb-2 text-muted-foreground"}),e.jsx("p",{className:"font-medium",children:"Showcase your expertise"}),e.jsx("p",{children:"Add certifications and specialties to build customer trust"})]})]})]})]}),e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs(re,{className:"border-primary/30",children:[e.jsx(Ie,{children:e.jsxs(Oe,{className:"flex items-center justify-between",children:["About ",t.name,l&&!f&&e.jsxs(O,{size:"sm",variant:"ghost",onClick:()=>b("description",y.description),className:"opacity-60 hover:opacity-100",children:[e.jsx(ht,{className:"w-4 h-4 mr-1"}),"Edit Description"]})]})}),e.jsx(ie,{children:g?.field==="description"?e.jsxs("div",{className:"space-y-3",children:[e.jsx(es,{value:g.value,onChange:T=>h({...g,value:T.target.value}),placeholder:"Tell customers about your business, experience, farming methods, quality standards, and what makes you unique...",rows:6,autoFocus:!0}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(O,{onClick:()=>S("description",g.value),children:[e.jsx(Dt,{className:"w-4 h-4 mr-1"}),"Save Description"]}),e.jsx(O,{variant:"outline",onClick:w,children:"Cancel"})]})]}):e.jsx("div",{className:"space-y-4",children:e.jsx("p",{className:"text-muted-foreground leading-relaxed",children:y.description||(l&&!f?'Tell customers about your business. Click "Edit Description" to add information about your farming experience, quality standards, and what makes your products special.':"No description available.")})})})]}),(y.policies.delivery||y.policies.payment||y.policies.returns||l&&!f)&&e.jsxs(re,{className:"border-primary/30",children:[e.jsx(Ie,{children:e.jsxs(Oe,{className:"flex items-center gap-2",children:[e.jsx(ui,{className:"w-5 h-5"}),"Business Policies"]})}),e.jsxs(ie,{className:"space-y-4",children:[(y.policies.delivery||l&&!f)&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"font-medium",children:"Delivery & Shipping"}),l&&!f&&e.jsx(O,{size:"sm",variant:"ghost",onClick:()=>b("delivery",y.policies.delivery),className:"h-8 w-8 p-0 opacity-60 hover:opacity-100",children:e.jsx(ht,{className:"w-4 h-4"})})]}),g?.field==="delivery"?e.jsxs("div",{className:"space-y-2",children:[e.jsx(es,{value:g.value,onChange:T=>h({...g,value:T.target.value}),placeholder:"Describe your delivery options, areas covered, delivery times, and shipping costs...",rows:3,autoFocus:!0}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(O,{size:"sm",onClick:()=>{j(T=>({...T,policies:{...T.policies,delivery:g.value}})),S("policies",{...y.policies,delivery:g.value})},children:[e.jsx(Dt,{className:"w-4 h-4 mr-1"}),"Save"]}),e.jsx(O,{size:"sm",variant:"outline",onClick:w,children:"Cancel"})]})]}):e.jsx("p",{className:"text-sm text-muted-foreground",children:y.policies.delivery||l&&!f&&"Add your delivery and shipping information"})]}),(y.policies.payment||l&&!f)&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"font-medium",children:"Payment Methods"}),l&&!f&&e.jsx(O,{size:"sm",variant:"ghost",onClick:()=>b("payment",y.policies.payment),className:"h-8 w-8 p-0 opacity-60 hover:opacity-100",children:e.jsx(ht,{className:"w-4 h-4"})})]}),g?.field==="payment"?e.jsxs("div",{className:"space-y-2",children:[e.jsx(es,{value:g.value,onChange:T=>h({...g,value:T.target.value}),placeholder:"List accepted payment methods: Cash on delivery, bank transfer, mobile payments, etc...",rows:3,autoFocus:!0}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(O,{size:"sm",onClick:()=>{j(T=>({...T,policies:{...T.policies,payment:g.value}})),S("policies",{...y.policies,payment:g.value})},children:[e.jsx(Dt,{className:"w-4 h-4 mr-1"}),"Save"]}),e.jsx(O,{size:"sm",variant:"outline",onClick:w,children:"Cancel"})]})]}):e.jsx("p",{className:"text-sm text-muted-foreground",children:y.policies.payment||l&&!f&&"Add your accepted payment methods"})]}),(y.policies.returns||l&&!f)&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"font-medium",children:"Returns & Quality Guarantee"}),l&&!f&&e.jsx(O,{size:"sm",variant:"ghost",onClick:()=>b("returns",y.policies.returns),className:"h-8 w-8 p-0 opacity-60 hover:opacity-100",children:e.jsx(ht,{className:"w-4 h-4"})})]}),g?.field==="returns"?e.jsxs("div",{className:"space-y-2",children:[e.jsx(es,{value:g.value,onChange:T=>h({...g,value:T.target.value}),placeholder:"Describe your quality guarantee, return policy, and how you handle customer concerns...",rows:3,autoFocus:!0}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(O,{size:"sm",onClick:()=>{j(T=>({...T,policies:{...T.policies,returns:g.value}})),S("policies",{...y.policies,returns:g.value})},children:[e.jsx(Dt,{className:"w-4 h-4 mr-1"}),"Save"]}),e.jsx(O,{size:"sm",variant:"outline",onClick:w,children:"Cancel"})]})]}):e.jsx("p",{className:"text-sm text-muted-foreground",children:y.policies.returns||l&&!f&&"Add your quality guarantee and return policy"})]}),l&&!f&&!y.policies.delivery&&!y.policies.payment&&!y.policies.returns&&e.jsxs("div",{className:"text-center py-4 text-sm text-muted-foreground bg-muted/30 rounded-lg",children:[e.jsx(ui,{className:"w-8 h-8 mx-auto mb-2 text-muted-foreground"}),e.jsx("p",{className:"font-medium",children:"Build customer trust"}),e.jsx("p",{children:"Add your business policies to help customers understand your services"})]})]})]}),e.jsxs(re,{className:"border-primary/30",children:[e.jsx(Ie,{children:e.jsxs(Oe,{children:["Products (",P," ",P===1?"item":"items",")"]})}),e.jsx(ie,{children:s.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Nt,{className:"w-12 h-12 text-muted-foreground mx-auto mb-3"}),e.jsx("p",{className:"text-muted-foreground",children:l?"You haven't listed any products yet. Go to your Dashboard to add and manage products.":"No products available at the moment."})]}):e.jsx("div",{className:"grid md:grid-cols-2 gap-4",children:s.map(T=>e.jsx(re,{className:"hover:shadow-md transition-shadow border-primary/30",children:e.jsx(ie,{className:"p-4",children:e.jsxs("div",{className:"flex gap-4",children:[e.jsx("img",{src:T.image,alt:T.name,className:"w-20 h-20 object-cover rounded-lg"}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium",children:T.name}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-lg font-semibold",children:[E(T.price)," MMK"]}),e.jsxs("span",{className:"text-xs text-muted-foreground",children:["per ",T.unit]})]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[e.jsx(Nt,{className:"w-3 h-3"}),e.jsx("span",{children:T.quantity})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[T.priceChange>0?e.jsx(cf,{className:"w-3 h-3 text-green-600"}):e.jsx(hc,{className:"w-3 h-3 text-red-600"}),e.jsxs("span",{className:`text-xs ${T.priceChange>0?"text-green-600":"text-red-600"}`,children:[T.priceChange>0?"+":"",T.priceChange,"%"]}),e.jsxs("span",{className:"text-xs text-muted-foreground",children:["• ",xi(T.lastUpdated)]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(O,{size:"sm",className:`h-9 px-3 py-2 ${l?"w-full":"flex-1"}`,onClick:()=>i(T.id),children:[e.jsx(Ut,{className:"w-4 h-4 mr-2"}),"View Details"]}),!l&&e.jsxs(O,{size:"sm",variant:"outline",className:"flex-1 h-9 px-3 py-2",onClick:()=>o(T.id),children:[e.jsx(Rn,{className:"w-4 h-4 mr-2"}),"Chat"]})]})]})]})})},T.id))})})]})]})]})]})}const oP=rf("relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"bg-card text-card-foreground",destructive:"text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90"}},defaultVariants:{variant:"default"}});function is({className:t,variant:s,...n}){return e.jsx("div",{"data-slot":"alert",role:"alert",className:Ve(oP({variant:s}),t),...n})}function os({className:t,...s}){return e.jsx("div",{"data-slot":"alert-description",className:Ve("text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed",t),...s})}function lP({onLogin:t,onSwitchToRegister:s,onForgotPassword:n,onClose:i}){const[o,l]=v.useState({email:"",password:""}),[d,u]=v.useState(!1),[f,p]=v.useState(""),[g,h]=v.useState(!1),y=async j=>{j.preventDefault(),p(""),h(!0);try{console.log("🔐 Attempting demo login with email:",o.email,"password:",o.password);const b=JSON.parse(localStorage.getItem("agriconnect-myanmar-users")||"[]");if(console.log("📋 LocalStorage users count:",b.length),b.length>0){console.log("📧 Available emails:",b.map(S=>S.email).slice(0,5));const w=b.find(S=>S.email==="admin@agrilink.com");w&&console.log("👤 Admin user found with password:",w.password)}await t(o.email,o.password),console.log("✅ Demo login successful"),i()}catch(b){console.error("❌ Demo login error in component:",b),p(b.message||"Login failed. Please try again.")}finally{h(!1)}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsxs("h1",{className:"text-2xl font-semibold flex items-center justify-center gap-2 mb-2",children:[e.jsx(nr,{className:"w-6 h-6 text-primary"}),"Welcome Back"]}),e.jsx("p",{className:"text-muted-foreground",children:"Sign in to your AgriLink account"})]}),e.jsx("div",{className:"flex justify-center",children:e.jsxs(re,{className:"w-full max-w-md",children:[e.jsxs(Ie,{className:"space-y-1",children:[e.jsx("div",{className:"flex items-center justify-center mb-4",children:e.jsx("div",{className:"w-12 h-12 bg-primary rounded-lg flex items-center justify-center",children:e.jsx(nr,{className:"w-6 h-6 text-primary-foreground"})})}),e.jsx(Oe,{className:"text-2xl text-center",children:"Sign In"}),e.jsx(ts,{className:"text-center",children:"Access your agricultural marketplace account"})]}),e.jsxs(ie,{className:"space-y-4",children:[f&&e.jsx(is,{variant:"destructive",children:e.jsx(os,{children:f})}),e.jsxs("form",{onSubmit:y,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx($e,{htmlFor:"email",children:"Email Address"}),e.jsxs("div",{className:"relative",children:[e.jsx(pi,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground w-4 h-4"}),e.jsx(Ue,{id:"email",type:"email",placeholder:"Enter your email",value:o.email,onChange:j=>l(b=>({...b,email:j.target.value})),className:"pl-10",required:!0})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx($e,{htmlFor:"password",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(Cm,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground w-4 h-4"}),e.jsx(Ue,{id:"password",type:d?"text":"password",placeholder:"Enter your password",value:o.password,onChange:j=>l(b=>({...b,password:j.target.value})),className:"pl-10 pr-10",required:!0}),e.jsx("button",{type:"button",onClick:()=>u(!d),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-muted-foreground hover:text-foreground",children:d?e.jsx(hi,{className:"w-4 h-4"}):e.jsx(Ut,{className:"w-4 h-4"})})]}),e.jsx("div",{className:"text-left mb-2",children:e.jsx("button",{type:"button",onClick:n,className:"text-sm text-muted-foreground hover:text-primary hover:underline",children:"Forgot your password?"})})]}),e.jsx(O,{type:"submit",className:"w-full mt-6",disabled:g,children:g?"Signing In...":"Sign In"})]})]}),e.jsx(zv,{className:"flex flex-col space-y-4 pt-0",children:e.jsxs("div",{className:"text-sm text-center text-muted-foreground",children:["Don't have an account?"," ",e.jsx("button",{onClick:s,className:"text-primary hover:underline font-medium",children:"Register here"})]})})]})})]})}function cP({selectedType:t,onTypeSelect:s,onBack:n,userType:i}){const o=[{id:"farmer",name:"Farmer",icon:nr,description:"Sell your agricultural products directly to buyers",features:["List products","Direct sales","Price setting","Customer management"],color:"text-green-600",bgColor:"bg-green-50",borderColor:"border-green-200"},{id:"trader",name:"Trader",icon:$n,description:"Distribute agricultural products to retailers and businesses",features:["Bulk trading","Supply chain","Wholesale pricing","Business partnerships"],color:"text-blue-600",bgColor:"bg-blue-50",borderColor:"border-blue-200"},{id:"buyer",name:"Buyer",icon:lf,description:"Purchase agricultural products for your business or personal use",features:["Browse products","Price comparison","Direct contact","Order tracking"],color:"text-purple-600",bgColor:"bg-purple-50",borderColor:"border-purple-200"}];return e.jsxs("div",{className:"space-y-4",children:[n&&e.jsx("div",{className:"flex items-center space-x-2",children:e.jsxs(O,{variant:"ghost",size:"sm",onClick:n,children:[e.jsx(Iv,{className:"w-4 h-4 mr-2"}),"Back"]})}),e.jsxs("div",{className:"text-center space-y-2",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Choose Your Account Type"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Select the type that best describes your role in the agricultural marketplace"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:o.map(l=>{const d=l.icon,u=t===l.id;return e.jsxs(re,{className:`cursor-pointer transition-all duration-200 hover:shadow-md ${u?`${l.borderColor} border-2 shadow-md`:"border hover:border-gray-300"}`,onClick:()=>s?.(l.id),children:[e.jsx(Ie,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:`p-2 rounded-lg ${l.bgColor}`,children:e.jsx(d,{className:`w-5 h-5 ${l.color}`})}),e.jsxs("div",{children:[e.jsx(Oe,{className:"text-base",children:l.name}),u&&e.jsx(Ee,{variant:"secondary",className:"mt-1",children:"Selected"})]})]})}),e.jsxs(ie,{className:"pt-0",children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:l.description}),e.jsx("div",{className:"space-y-1",children:l.features.map((f,p)=>e.jsxs("div",{className:"flex items-center space-x-2 text-xs text-muted-foreground",children:[e.jsx(dt,{className:"w-3 h-3"}),e.jsx("span",{children:f})]},p))})]})]},l.id)})}),e.jsx("div",{className:"bg-muted/50 rounded-lg p-4 text-center",children:e.jsxs("p",{className:"text-xs text-muted-foreground",children:[e.jsx("strong",{children:"Note:"})," You can change your account type later in your profile settings. Different account types have different features and capabilities."]})})]})}function rv({onRegister:t,onSwitchToLogin:s,onClose:n}){const[i,o]=v.useState({name:"",email:"",password:"",confirmPassword:"",phone:"",userType:"",accountType:"",region:"",location:""}),[l,d]=v.useState(!1),[u,f]=v.useState(!1),[p,g]=v.useState(""),[h,y]=v.useState(!1),[j,b]=v.useState(!1);if(j)return e.jsx("div",{className:"absolute inset-0 bg-background",children:e.jsx(cP,{onBack:()=>b(!1),userType:i.userType})});const w=()=>i.region?jr[i.region]?.cities||[]:[],S=[{value:"farmer",label:"Farmer",description:"I grow and produce fresh agricultural products to sell",color:"bg-green-100 text-green-800 border-green-200"},{value:"trader",label:"Trader",description:"I connect farmers with buyers through distribution and trading",color:"bg-primary/10 text-primary border-primary/20"},{value:"buyer",label:"Buyer",description:"I purchase agricultural products for my business or personal consumption",color:"bg-purple-100 text-purple-800 border-purple-200"}],k=()=>!i.name||!i.email||!i.password?(g("Please fill in all required fields in the Personal Information section"),!1):i.password!==i.confirmPassword?(g("Passwords do not match"),!1):i.password.length<6?(g("Password must be at least 6 characters long"),!1):i.email.includes("@")?!i.userType||!i.accountType||!i.region||!i.location?(g("Please select your user role, account type, region, and city"),!1):!0:(g("Please enter a valid email address"),!1),C=async T=>{if(T.preventDefault(),g(""),!!k()){y(!0);try{const A={email:i.email,password:i.password,name:i.name,userType:i.userType,accountType:i.accountType,location:i.location,region:i.region,phone:i.phone,businessName:"",businessDescription:"",experience:"1 year",qualityCertifications:[],farmingMethods:i.userType==="farmer"?["Traditional"]:[]};await t(A),n()}catch(A){g(A.message||"Registration failed. Please try again.")}finally{y(!1)}}},E=()=>e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx($e,{htmlFor:"name",children:"Full Name *"}),e.jsxs("div",{className:"relative",children:[e.jsx($t,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground w-4 h-4"}),e.jsx(Ue,{id:"name",placeholder:"Enter your full name",value:i.name,onChange:T=>o(A=>({...A,name:T.target.value})),className:"pl-10",required:!0})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx($e,{htmlFor:"email",children:"Email Address *"}),e.jsxs("div",{className:"relative",children:[e.jsx(pi,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground w-4 h-4"}),e.jsx(Ue,{id:"email",type:"email",placeholder:"Enter your email",value:i.email,onChange:T=>o(A=>({...A,email:T.target.value})),className:"pl-10",required:!0})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx($e,{htmlFor:"phone",children:"Phone Number"}),e.jsxs("div",{className:"relative",children:[e.jsx(Cr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground w-4 h-4"}),e.jsx(Ue,{id:"phone",placeholder:"+95 9 123 456 789",value:i.phone,onChange:T=>o(A=>({...A,phone:T.target.value})),className:"pl-10"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx($e,{htmlFor:"password",children:"Password *"}),e.jsxs("div",{className:"relative",children:[e.jsx(Cm,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground w-4 h-4"}),e.jsx(Ue,{id:"password",type:l?"text":"password",placeholder:"Create a password (min. 6 characters)",value:i.password,onChange:T=>o(A=>({...A,password:T.target.value})),className:"pl-10 pr-10",required:!0}),e.jsx("button",{type:"button",onClick:()=>d(!l),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-muted-foreground hover:text-foreground",children:l?e.jsx(hi,{className:"w-4 h-4"}):e.jsx(Ut,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx($e,{htmlFor:"confirmPassword",children:"Confirm Password *"}),e.jsxs("div",{className:"relative",children:[e.jsx(Cm,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground w-4 h-4"}),e.jsx(Ue,{id:"confirmPassword",type:u?"text":"password",placeholder:"Confirm your password",value:i.confirmPassword,onChange:T=>o(A=>({...A,confirmPassword:T.target.value})),className:"pl-10 pr-10",required:!0}),e.jsx("button",{type:"button",onClick:()=>f(!u),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-muted-foreground hover:text-foreground",children:u?e.jsx(hi,{className:"w-4 h-4"}):e.jsx(Ut,{className:"w-4 h-4"})})]})]})]}),P=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx($e,{children:"Your Role *"}),e.jsx("div",{className:"space-y-2",children:S.map(T=>e.jsx("div",{onClick:()=>o(A=>({...A,userType:T.value})),className:`p-4 rounded-lg border cursor-pointer transition-all ${i.userType===T.value?"border-primary/80 bg-primary/8":"border-primary/50 hover:border-primary/70"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("span",{className:"font-medium",children:T.label})}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:T.description})]}),e.jsx("div",{className:`w-4 h-4 rounded-full border-2 ${i.userType===T.value?"border-primary bg-primary":"border-primary/50"}`})]})},T.value))})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx($e,{children:"Account Type *"}),e.jsxs(O,{variant:"ghost",size:"sm",onClick:()=>b(!0),className:"text-primary hover:text-primary/80 h-auto p-1",children:[e.jsx(of,{className:"w-4 h-4 mr-1"}),"Learn More"]})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Choose the account type that best fits your operation and available documents."}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{onClick:()=>o(T=>({...T,accountType:"individual"})),className:`p-4 rounded-lg border cursor-pointer transition-all ${i.accountType==="individual"?"border-primary/80 bg-primary/8":"border-primary/50 hover:border-primary/70"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx($t,{className:"w-5 h-5 text-primary"}),e.jsx("span",{className:"font-medium",children:"Individual Account"})]}),e.jsx("div",{className:`w-5 h-5 rounded-full border-2 ${i.accountType==="individual"?"border-primary bg-primary":"border-primary/50"}`,children:i.accountType==="individual"&&e.jsx("div",{className:"w-full h-full rounded-full bg-white scale-50"})})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:i.userType==="buyer"?"Perfect for individual consumers, small restaurants, and personal purchases.":i.userType?"Perfect for individual farmers, small operations, and personal trading.":"Perfect for individual farmers, traders, and personal operations."})]}),e.jsxs("div",{onClick:()=>o(T=>({...T,accountType:"business"})),className:`p-4 rounded-lg border cursor-pointer transition-all ${i.accountType==="business"?"border-primary/80 bg-primary/8":"border-primary/50 hover:border-primary/70"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx($n,{className:"w-5 h-5 text-primary"}),e.jsx("span",{className:"font-medium",children:"Business Account"})]}),e.jsx("div",{className:`w-5 h-5 rounded-full border-2 ${i.accountType==="business"?"border-primary bg-primary":"border-primary/50"}`,children:i.accountType==="business"&&e.jsx("div",{className:"w-full h-full rounded-full bg-white scale-50"})})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:i.userType==="buyer"?"For hotels, restaurants, distributors, and large-scale purchasing operations.":(i.userType,"For registered businesses, companies, and formal operations.")})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx($e,{children:"Location *"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Vt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground w-4 h-4 z-10"}),e.jsxs(Yt,{value:i.region,onValueChange:T=>o(A=>({...A,region:T,location:""})),children:[e.jsx(Xt,{className:"pl-10",children:e.jsx(Qt,{placeholder:"Select your region"})}),e.jsx(Zt,{className:"max-h-64 overflow-y-auto",children:Object.entries(jr).map(([T,A])=>e.jsx(De,{value:T,children:A.name},T))})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx(Vt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground w-4 h-4 z-10"}),e.jsxs(Yt,{value:i.location,onValueChange:T=>o(A=>({...A,location:T})),disabled:!i.region,children:[e.jsx(Xt,{className:"pl-10",children:e.jsx(Qt,{placeholder:"Select your city/town"})}),e.jsx(Zt,{className:"max-h-64 overflow-y-auto",children:w().map(T=>e.jsx(De,{value:T,children:T},T))})]})]})]}),!i.region&&e.jsx("p",{className:"text-xs text-muted-foreground",children:"Please select a region first"})]})]});return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsxs("h1",{className:"text-2xl font-semibold flex items-center justify-center gap-2 mb-2",children:[e.jsx(nr,{className:"w-6 h-6 text-primary"}),"Join AgriLink"]}),e.jsx("p",{className:"text-muted-foreground",children:"Create your account to connect with Myanmar's agricultural community"})]}),e.jsxs("form",{onSubmit:C,className:"space-y-8",children:[p&&e.jsx(is,{variant:"destructive",children:e.jsx(os,{children:p})}),e.jsxs(re,{children:[e.jsx(Ie,{children:e.jsxs(Oe,{className:"flex items-center gap-2",children:[e.jsx($t,{className:"w-5 h-5"}),"Personal Information"]})}),e.jsx(ie,{className:"space-y-4",children:E()})]}),e.jsxs(re,{children:[e.jsx(Ie,{children:e.jsxs(Oe,{className:"flex items-center gap-2",children:[e.jsx(Vt,{className:"w-5 h-5"}),"Role, Account Type & Location"]})}),e.jsx(ie,{className:"space-y-4",children:P()})]}),e.jsx(re,{children:e.jsx(ie,{className:"pt-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx(O,{type:"submit",className:"w-full",disabled:h,children:h?"Creating Account...":"Create Account"}),e.jsx("div",{className:"text-center",children:e.jsxs("span",{className:"text-sm text-muted-foreground",children:["Already have an account?"," ",e.jsx("button",{type:"button",onClick:s,className:"text-primary hover:underline font-medium",children:"Sign in here"})]})})]})})})]})]})}function dP({onBack:t,onReturnToLogin:s}){const[n,i]=v.useState("email"),[o,l]=v.useState(""),[d,u]=v.useState(""),[f,p]=v.useState(""),[g,h]=v.useState(""),[y,j]=v.useState(!1),[b,w]=v.useState(!1),[S,k]=v.useState(!1),[C,E]=v.useState({}),P=async $=>{if($.preventDefault(),E({}),!o){E({email:"Email is required"});return}if(!o.includes("@")){E({email:"Please enter a valid email address"});return}k(!0),await new Promise(J=>setTimeout(J,1500)),k(!1),i("verification")},T=async $=>{if($.preventDefault(),E({}),!d){E({code:"Verification code is required"});return}if(d.length!==6){E({code:"Please enter the 6-digit code"});return}if(d!=="123456"&&!/^\d{6}$/.test(d)){E({code:"Invalid verification code. Try 123456 for demo."});return}k(!0),await new Promise(J=>setTimeout(J,1e3)),k(!1),i("password")},A=async $=>{if($.preventDefault(),E({}),!f){E({password:"New password is required"});return}if(f.length<6){E({password:"Password must be at least 6 characters"});return}if(f!==g){E({confirmPassword:"Passwords do not match"});return}k(!0),await new Promise(J=>setTimeout(J,2e3)),k(!1),i("success")},R=async()=>{k(!0),await new Promise($=>setTimeout($,1e3)),k(!1)};return e.jsx("div",{className:"min-h-screen bg-background py-6 px-4",children:e.jsxs("div",{className:"max-w-md mx-auto space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsxs("h1",{className:"text-2xl font-semibold flex items-center justify-center gap-2 mb-2",children:[e.jsx(nr,{className:"w-6 h-6 text-primary"}),"Reset Password"]}),e.jsx("p",{className:"text-muted-foreground",children:"Secure password recovery for your AgriLink account"})]}),e.jsxs("div",{className:"flex items-center justify-center space-x-2 mb-6",children:[e.jsx("div",{className:`w-3 h-3 rounded-full ${n==="email"||n!=="email"?"bg-primary":"bg-muted"}`}),e.jsx("div",{className:`w-8 h-1 ${n==="verification"||n==="code"||n==="password"||n==="success"?"bg-primary":"bg-muted"} rounded`}),e.jsx("div",{className:`w-3 h-3 rounded-full ${n==="verification"||n==="code"||n==="password"||n==="success"?"bg-primary":"bg-muted"}`}),e.jsx("div",{className:`w-8 h-1 ${n==="code"||n==="password"||n==="success"?"bg-primary":"bg-muted"} rounded`}),e.jsx("div",{className:`w-3 h-3 rounded-full ${n==="password"||n==="success"?"bg-primary":"bg-muted"}`}),e.jsx("div",{className:`w-8 h-1 ${n==="success"?"bg-primary":"bg-muted"} rounded`}),e.jsx("div",{className:`w-3 h-3 rounded-full ${n==="success"?"bg-primary":"bg-muted"}`})]}),e.jsxs(re,{className:"w-full",children:[e.jsxs(Ie,{className:"space-y-1",children:[e.jsx("div",{className:"flex items-center justify-center mb-4",children:e.jsxs("div",{className:"w-12 h-12 bg-primary rounded-lg flex items-center justify-center",children:[n==="email"&&e.jsx(pi,{className:"w-6 h-6 text-primary-foreground"}),(n==="verification"||n==="code")&&e.jsx(dt,{className:"w-6 h-6 text-primary-foreground"}),n==="password"&&e.jsx(Ut,{className:"w-6 h-6 text-primary-foreground"}),n==="success"&&e.jsx(He,{className:"w-6 h-6 text-primary-foreground"})]})}),e.jsxs(Oe,{className:"text-xl text-center",children:[n==="email"&&"Enter Your Email",n==="verification"&&"Check Your Email",n==="code"&&"Enter Verification Code",n==="password"&&"Set New Password",n==="success"&&"Password Reset Complete"]}),e.jsxs(ts,{className:"text-center",children:[n==="email"&&"We'll send you a verification code to reset your password",n==="verification"&&"We've sent a verification code to your email",n==="code"&&"Enter the 6-digit code from your email",n==="password"&&"Choose a strong new password for your account",n==="success"&&"Your password has been successfully updated"]})]}),e.jsxs(ie,{className:"space-y-4",children:[e.jsx(is,{children:e.jsx(os,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-medium",children:"🎭 Demo Mode Password Reset"}),e.jsxs("div",{className:"text-xs text-muted-foreground space-y-1",children:[n==="email"&&e.jsxs(e.Fragment,{children:[e.jsx("p",{children:"• Enter any valid email address"}),e.jsx("p",{children:"• No actual email will be sent"})]}),(n==="verification"||n==="code")&&e.jsxs(e.Fragment,{children:[e.jsxs("p",{children:["• Use verification code: ",e.jsx("strong",{children:"123456"})]}),e.jsx("p",{children:"• Any 6-digit number will work"})]}),n==="password"&&e.jsxs(e.Fragment,{children:[e.jsx("p",{children:"• Choose any password (minimum 6 characters)"}),e.jsx("p",{children:"• This will simulate updating your password"})]}),n==="success"&&e.jsxs(e.Fragment,{children:[e.jsx("p",{children:"• Password reset simulation complete"}),e.jsx("p",{children:"• You can now sign in with any demo credentials"})]})]})]})})}),n==="email"&&e.jsxs("form",{onSubmit:P,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx($e,{htmlFor:"email",children:"Email Address"}),e.jsx(Ue,{id:"email",type:"email",value:o,onChange:$=>l($.target.value),placeholder:"Enter your email address",className:C.email?"border-destructive":""}),C.email&&e.jsx("p",{className:"text-sm text-destructive mt-1",children:C.email})]}),e.jsx(O,{type:"submit",className:"w-full h-11",disabled:S,children:S?"Sending...":"Send Verification Code"})]}),n==="verification"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-primary/10 border border-primary/20 rounded-lg p-4 text-center",children:[e.jsx(pi,{className:"w-8 h-8 text-primary mx-auto mb-2"}),e.jsx("p",{className:"text-sm font-medium text-primary",children:"Verification Email Sent!"}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Check your email at ",e.jsx("strong",{children:o})]})]}),e.jsxs("div",{className:"text-center space-y-2",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Didn't receive the email? Check your spam folder or"}),e.jsx(O,{variant:"ghost",size:"sm",onClick:R,disabled:S,children:S?"Resending...":"Resend Code"})]}),e.jsx(O,{onClick:()=>i("code"),className:"w-full h-11",children:"I Have the Code"})]}),n==="code"&&e.jsxs("form",{onSubmit:T,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx($e,{htmlFor:"code",children:"Verification Code"}),e.jsx(Ue,{id:"code",type:"text",value:d,onChange:$=>u($.target.value.replace(/\D/g,"").slice(0,6)),placeholder:"Enter 6-digit code",className:`text-center tracking-widest text-lg ${C.code?"border-destructive":""}`,maxLength:6}),C.code&&e.jsx("p",{className:"text-sm text-destructive mt-1",children:C.code})]}),e.jsx("div",{className:"text-center",children:e.jsx(O,{type:"button",variant:"ghost",size:"sm",onClick:R,disabled:S,children:S?"Resending...":"Resend Code"})}),e.jsx(O,{type:"submit",className:"w-full h-11",disabled:S,children:S?"Verifying...":"Verify Code"})]}),n==="password"&&e.jsxs("form",{onSubmit:A,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx($e,{htmlFor:"new-password",children:"New Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(Ue,{id:"new-password",type:y?"text":"password",value:f,onChange:$=>p($.target.value),placeholder:"Enter new password",className:C.password?"border-destructive pr-10":"pr-10"}),e.jsx(O,{type:"button",variant:"ghost",size:"sm",className:"absolute right-1 top-1 h-8 w-8 p-0",onClick:()=>j(!y),children:y?e.jsx(hi,{className:"w-4 h-4"}):e.jsx(Ut,{className:"w-4 h-4"})})]}),C.password&&e.jsx("p",{className:"text-sm text-destructive mt-1",children:C.password})]}),e.jsxs("div",{children:[e.jsx($e,{htmlFor:"confirm-password",children:"Confirm New Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(Ue,{id:"confirm-password",type:b?"text":"password",value:g,onChange:$=>h($.target.value),placeholder:"Confirm new password",className:C.confirmPassword?"border-destructive pr-10":"pr-10"}),e.jsx(O,{type:"button",variant:"ghost",size:"sm",className:"absolute right-1 top-1 h-8 w-8 p-0",onClick:()=>w(!b),children:b?e.jsx(hi,{className:"w-4 h-4"}):e.jsx(Ut,{className:"w-4 h-4"})})]}),C.confirmPassword&&e.jsx("p",{className:"text-sm text-destructive mt-1",children:C.confirmPassword})]}),e.jsxs("div",{className:"text-xs text-muted-foreground space-y-1",children:[e.jsx("p",{children:"Password requirements:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-1 ml-2",children:[e.jsx("li",{className:f.length>=6?"text-primary":"",children:"At least 6 characters"}),e.jsx("li",{className:f!==g||!g?"":"text-primary",children:"Passwords match"})]})]}),e.jsx(O,{type:"submit",className:"w-full h-11",disabled:S,children:S?"Updating Password...":"Update Password"})]}),n==="success"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-6 text-center",children:[e.jsx(He,{className:"w-12 h-12 text-green-600 mx-auto mb-3"}),e.jsx("h3",{className:"font-medium text-green-800 mb-2",children:"Password Reset Successful!"}),e.jsx("p",{className:"text-sm text-green-700",children:"Your password has been updated successfully. You can now sign in with your new password."})]}),e.jsx(O,{onClick:s,className:"w-full h-11",children:"Return to Sign In"})]}),(n==="email"||n==="verification")&&e.jsx("div",{className:"pt-4 border-t",children:e.jsxs(O,{type:"button",variant:"ghost",onClick:t,className:"w-full",children:[e.jsx(ls,{className:"w-4 h-4 mr-2"}),"Back to Sign In"]})}),(n==="code"||n==="password")&&e.jsx("div",{className:"pt-4 border-t",children:e.jsx("div",{className:"text-center",children:e.jsx(O,{type:"button",variant:"ghost",size:"sm",onClick:()=>i("email"),children:"Use Different Email"})})})]})]})]})})}var ed="Checkbox",[uP]=Ns(ed),[mP,Lf]=uP(ed);function fP(t){const{__scopeCheckbox:s,checked:n,children:i,defaultChecked:o,disabled:l,form:d,name:u,onCheckedChange:f,required:p,value:g="on",internal_do_not_use_render:h}=t,[y,j]=Ir({prop:n,defaultProp:o??!1,onChange:f,caller:ed}),[b,w]=v.useState(null),[S,k]=v.useState(null),C=v.useRef(!1),E=b?!!d||!!b.closest("form"):!0,P={checked:y,disabled:l,setChecked:j,control:b,setControl:w,name:u,form:d,value:g,hasConsumerStoppedPropagationRef:C,required:p,defaultChecked:Dn(o)?!1:o,isFormControl:E,bubbleInput:S,setBubbleInput:k};return e.jsx(mP,{scope:s,...P,children:hP(h)?h(P):i})}var cw="CheckboxTrigger",dw=v.forwardRef(({__scopeCheckbox:t,onKeyDown:s,onClick:n,...i},o)=>{const{control:l,value:d,disabled:u,checked:f,required:p,setControl:g,setChecked:h,hasConsumerStoppedPropagationRef:y,isFormControl:j,bubbleInput:b}=Lf(cw,t),w=Ye(o,g),S=v.useRef(f);return v.useEffect(()=>{const k=l?.form;if(k){const C=()=>h(S.current);return k.addEventListener("reset",C),()=>k.removeEventListener("reset",C)}},[l,h]),e.jsx(Le.button,{type:"button",role:"checkbox","aria-checked":Dn(f)?"mixed":f,"aria-required":p,"data-state":gw(f),"data-disabled":u?"":void 0,disabled:u,value:d,...i,ref:w,onKeyDown:be(s,k=>{k.key==="Enter"&&k.preventDefault()}),onClick:be(n,k=>{h(C=>Dn(C)?!0:!C),b&&j&&(y.current=k.isPropagationStopped(),y.current||k.stopPropagation())})})});dw.displayName=cw;var uw=v.forwardRef((t,s)=>{const{__scopeCheckbox:n,name:i,checked:o,defaultChecked:l,required:d,disabled:u,value:f,onCheckedChange:p,form:g,...h}=t;return e.jsx(fP,{__scopeCheckbox:n,checked:o,defaultChecked:l,disabled:u,required:d,onCheckedChange:p,name:i,form:g,value:f,internal_do_not_use_render:({isFormControl:y})=>e.jsxs(e.Fragment,{children:[e.jsx(dw,{...h,ref:s,__scopeCheckbox:n}),y&&e.jsx(pw,{__scopeCheckbox:n})]})})});uw.displayName=ed;var mw="CheckboxIndicator",fw=v.forwardRef((t,s)=>{const{__scopeCheckbox:n,forceMount:i,...o}=t,l=Lf(mw,n);return e.jsx(ds,{present:i||Dn(l.checked)||l.checked===!0,children:e.jsx(Le.span,{"data-state":gw(l.checked),"data-disabled":l.disabled?"":void 0,...o,ref:s,style:{pointerEvents:"none",...t.style}})})});fw.displayName=mw;var hw="CheckboxBubbleInput",pw=v.forwardRef(({__scopeCheckbox:t,...s},n)=>{const{control:i,hasConsumerStoppedPropagationRef:o,checked:l,defaultChecked:d,required:u,disabled:f,name:p,value:g,form:h,bubbleInput:y,setBubbleInput:j}=Lf(hw,t),b=Ye(n,j),w=vy(l),S=ny(i);v.useEffect(()=>{const C=y;if(!C)return;const E=window.HTMLInputElement.prototype,T=Object.getOwnPropertyDescriptor(E,"checked").set,A=!o.current;if(w!==l&&T){const R=new Event("click",{bubbles:A});C.indeterminate=Dn(l),T.call(C,Dn(l)?!1:l),C.dispatchEvent(R)}},[y,w,l,o]);const k=v.useRef(Dn(l)?!1:l);return e.jsx(Le.input,{type:"checkbox","aria-hidden":!0,defaultChecked:d??k.current,required:u,disabled:f,name:p,value:g,form:h,...s,tabIndex:-1,ref:b,style:{...s.style,...S,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});pw.displayName=hw;function hP(t){return typeof t=="function"}function Dn(t){return t==="indeterminate"}function gw(t){return Dn(t)?"indeterminate":t?"checked":"unchecked"}function nv({className:t,...s}){return e.jsx(uw,{"data-slot":"checkbox",className:Ve("peer h-4 w-4 shrink-0 rounded border-2 border-primary/40 bg-white shadow focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground data-[state=checked]:border-primary hover:border-primary/60 transition-all",t),...s,children:e.jsx(fw,{"data-slot":"checkbox-indicator",className:"flex items-center justify-center text-current",children:e.jsx(Rv,{className:"h-3 w-3 text-white"})})})}function pP({currentUser:t,onBack:s,onSave:n,editingProduct:i}){const[o,l]=v.useState(""),[d,u]=v.useState(""),[f,p]=v.useState(!1),[g,h]=v.useState({}),y=v.useRef(null),j=v.useRef(null),[b,w]=v.useState(()=>{if(i){console.log("🔄 Initializing form with editing product:",{id:i.id,name:i.name,price:i.price,priceType:typeof i.price,description:i.description||"UNDEFINED",category:i.category||"UNDEFINED",hasImage:!!i.image||!!i.images?.length});const M={id:i.id,sellerId:i.sellerId,name:i.name||"",price:i.price||0,unit:i.unit||"",location:i.location||t?.location||"",region:i.region||t?.region||"",sellerType:i.sellerType||t?.userType||"farmer",sellerName:i.sellerName||t?.name||"",image:i.image||"",images:i.images||(i.image?[i.image]:[]),quantity:i.quantity||"",minimumOrder:i.minimumOrder||"",availableQuantity:i.availableQuantity||"",deliveryOptions:i.deliveryOptions||[],paymentTerms:i.paymentTerms||[],lastUpdated:i.lastUpdated||new Date().toISOString(),category:i.category||"",description:i.description||"",additionalNotes:i.additionalNotes||"",priceChange:i.priceChange,isEditing:!0};return j.current={...M},M}return{id:"",sellerId:t?.id||"",name:"",price:0,unit:"",location:t?.location||"",region:t?.region||"",sellerType:t?.userType||"farmer",sellerName:t?.name||"",image:"",images:[],quantity:"",minimumOrder:"",availableQuantity:"",deliveryOptions:[],paymentTerms:[],lastUpdated:new Date().toISOString(),category:"",description:"",additionalNotes:"",priceChange:void 0}}),S=v.useMemo(()=>{const M=["Pickup","Local Delivery (Within 10km)","Regional Delivery","Nationwide Shipping","Express Delivery","Cold Chain Transport"],H=localStorage.getItem("agriconnect-custom-delivery-options"),I=H?JSON.parse(H):[];return[...M,...I]},[]),k=v.useMemo(()=>{const M=localStorage.getItem("agriconnect-custom-delivery-options");return M?JSON.parse(M):[]},[]),C=v.useMemo(()=>{if(!i||!j.current)return!1;const M=j.current,I=["name","price","unit","location","region","category","description","quantity","minimumOrder","availableQuantity","additionalNotes"].some(ce=>String(b[ce]||"")!==String(M[ce]||"")),V=JSON.stringify(b.deliveryOptions?.sort())!==JSON.stringify(M.deliveryOptions?.sort()),D=JSON.stringify(b.paymentTerms?.sort())!==JSON.stringify(M.paymentTerms?.sort()),ae=JSON.stringify(b.images?.sort())!==JSON.stringify(M.images?.sort());return I||V||D||ae},[b,i]),E=()=>i?C?{text:"Save Changes",disabled:!1,variant:"default"}:{text:"Update Product",disabled:!0,variant:"secondary"}:{text:"Publish Product",disabled:!1,variant:"default"},P=v.useCallback(M=>{localStorage.setItem("agriconnect-custom-delivery-options",JSON.stringify(M))},[]),T=v.useMemo(()=>{const M=["Cash on Delivery","Bank Transfer","Mobile Payment","Cash on Pickup","50% Advance, 50% on Delivery","30% Advance, 70% on Delivery"],H=localStorage.getItem("agriconnect-custom-payment-terms"),I=H?JSON.parse(H):[];return[...M,...I]},[]),A=v.useMemo(()=>{const M=localStorage.getItem("agriconnect-custom-payment-terms");return M?JSON.parse(M):[]},[]),R=v.useCallback(M=>{localStorage.setItem("agriconnect-custom-payment-terms",JSON.stringify(M))},[]),$=v.useCallback(()=>{const M={};return b.name?.trim()||(M.name="Product name is required"),b.category?.trim()||(M.category="Category is required"),b.unit?.trim()||(M.unit='Quantity & unit is required (e.g., "50 kg", "25 bags")'),(!b.price||b.price<=0)&&(M.price="Valid price is required"),b.availableQuantity?.trim()||(M.availableQuantity="Available quantity is required"),b.minimumOrder?.trim()||(M.minimumOrder="Minimum order is required"),b.deliveryOptions.length===0&&(M.deliveryOptions="At least one delivery option is required"),b.paymentTerms.length===0&&(M.paymentTerms="At least one payment term is required"),h(M),Object.keys(M).length===0},[b]),J=v.useCallback(M=>{w(H=>({...H,deliveryOptions:H.deliveryOptions.includes(M)?H.deliveryOptions.filter(I=>I!==M):[...H.deliveryOptions,M]}))},[]),z=v.useCallback(M=>{w(H=>({...H,paymentTerms:H.paymentTerms.includes(M)?H.paymentTerms.filter(I=>I!==M):[...H.paymentTerms,M]}))},[]),q=v.useCallback(()=>{if(!o.trim())return;const M=[...k,o.trim()];P(M),l("")},[o,k,P]),Q=v.useCallback(M=>{const H=k.filter(I=>I!==M);P(H),w(I=>({...I,deliveryOptions:I.deliveryOptions.filter(V=>V!==M)}))},[k,P]),Z=v.useCallback(()=>{if(!d.trim())return;const M=[...A,d.trim()];R(M),u("")},[d,A,R]),he=v.useCallback(M=>{const H=A.filter(I=>I!==M);R(H),w(I=>({...I,paymentTerms:I.paymentTerms.filter(V=>V!==M)}))},[A,R]),se=v.useCallback(M=>{const H=Array.from(M.target.files||[]);if(H.length===0)return;const I=10;if((b.images?.length||0)+H.length>I){h(ce=>({...ce,images:`Maximum ${I} images allowed`}));return}if(H.filter(ce=>ce.size>3*1024*1024).length>0){h(ce=>({...ce,images:"Each image must be smaller than 3MB"}));return}h(ce=>{const pe={...ce};return delete pe.images,pe}),(async()=>{const ce=[];for(const pe of H)await new Promise(W=>{const X=new FileReader;X.onload=xe=>{const ye=xe.target?.result;ce.push(ye),W()},X.readAsDataURL(pe)});w(pe=>({...pe,images:[...pe.images||[],...ce],image:pe.images?.length===0&&ce.length>0?ce[0]:pe.image}))})(),y.current&&(y.current.value="")},[b.images]),te=v.useCallback(M=>{w(H=>{const I=[...H.images||[]];return I.splice(M,1),{...H,images:I,image:I.length>0?I[0]:""}})},[]),ne=v.useCallback(()=>{w(M=>({...M,images:[],image:""})),y.current&&(y.current.value="")},[]),U=v.useCallback(async()=>{if(console.log("🚀 Form submission started"),i&&!C){console.log("❌ No changes detected, skipping submission");return}if(console.log("Form data being validated:",{id:b.id,name:b.name,price:b.price,priceType:typeof b.price,category:b.category,description:b.description,isEditing:b.isEditing,hasImages:!!(b.images?.length||b.image),imagesCount:b.images?.length||(b.image?1:0),hasChanges:C}),!$()){console.log("❌ Validation failed:",g);return}p(!0);try{console.log("✅ Validation passed, calling onSave");const M={...b,quantity:b.availableQuantity,lastUpdated:new Date().toISOString(),isEditing:b.isEditing};await n(M),console.log("✅ onSave completed successfully")}catch(M){console.error("❌ Product save failed:",M),p(!1)}},[b,$,g,n,i,C]);return e.jsxs("div",{className:"max-w-4xl mx-auto p-4 md:p-6 space-y-6 md:space-y-8",children:[e.jsxs("div",{className:"space-y-4 mb-8",children:[e.jsxs(O,{variant:"ghost",onClick:s,className:"h-9 px-3 -ml-3",children:[e.jsx(ls,{className:"w-4 h-4 mr-2"}),"Back"]}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl md:text-3xl font-bold",children:i?"Edit Product":"Add New Product"}),e.jsx("p",{className:"text-muted-foreground",children:i?"Update your product listing details":"Create a detailed product listing for buyers"})]})]}),!i&&e.jsxs(is,{className:"border-primary/20 bg-primary/5",children:[e.jsx(_S,{className:"h-4 w-4 text-primary"}),e.jsxs(os,{className:"text-sm",children:[e.jsx("span",{className:"font-medium text-primary",children:"💡 Selling multiple sizes or variants?"}),e.jsx("br",{}),'Create separate product listings for each size/variant (e.g., "Rice - 25kg bag", "Rice - 50kg bag"). This makes it easier for buyers to find exactly what they need and helps with analytics.']})]}),Object.keys(g).length>0&&e.jsxs(is,{variant:"destructive",children:[e.jsx(zs,{className:"h-4 w-4"}),e.jsxs(os,{children:["Please fix the following errors:",e.jsx("ul",{className:"mt-2 ml-4 list-disc",children:Object.entries(g).map(([M,H])=>e.jsx("li",{className:"text-sm",children:H},M))})]})]}),e.jsxs("div",{className:"space-y-6 md:space-y-8",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 lg:items-start",children:[e.jsx("div",{className:"lg:col-span-2 lg:self-start",children:e.jsxs(re,{className:"h-[300px] lg:h-[320px] flex flex-col",children:[e.jsx(Ie,{className:"flex-shrink-0 pb-4",children:e.jsxs(Oe,{className:"flex items-center gap-2 text-base md:text-lg",children:[e.jsx(Nt,{className:"w-5 h-5"}),"Product Information"]})}),e.jsxs(ie,{className:"flex-grow flex flex-col space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 flex-shrink-0",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx($e,{htmlFor:"productName",children:"Product Name *"}),e.jsx(Ue,{id:"productName",placeholder:"e.g., Fresh Cabbage",value:b.name,onChange:M=>w(H=>({...H,name:M.target.value})),className:`h-10 ${g.name?"border-destructive":""}`})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx($e,{htmlFor:"category",children:"Category *"}),e.jsxs(Yt,{value:b.category,onValueChange:M=>w(H=>({...H,category:M})),children:[e.jsx(Xt,{className:`h-10 ${g.category?"border-destructive":""}`,children:e.jsx(Qt,{placeholder:"Pulses & Beans"})}),e.jsxs(Zt,{children:[e.jsx(De,{value:"rice",children:"Rice"}),e.jsx(De,{value:"vegetables",children:"Vegetables"}),e.jsx(De,{value:"fruits",children:"Fruits"}),e.jsx(De,{value:"spices",children:"Spices & Herbs"}),e.jsx(De,{value:"pulses",children:"Pulses & Beans"}),e.jsx(De,{value:"grains",children:"Grains & Cereals"}),e.jsx(De,{value:"tea-coffee",children:"Tea & Coffee"}),e.jsx(De,{value:"nuts",children:"Nuts & Seeds"}),e.jsx(De,{value:"livestock",children:"Livestock"}),e.jsx(De,{value:"dairy",children:"Dairy Products"}),e.jsx(De,{value:"other",children:"Other"})]})]})]})]}),e.jsxs("div",{className:"space-y-2 flex-grow flex flex-col",children:[e.jsx($e,{htmlFor:"description",children:"Product Description"}),e.jsx(es,{id:"description",placeholder:"Describe your product, quality, farming methods, and what makes it special...",value:b.description,onChange:M=>w(H=>({...H,description:M.target.value})),className:"flex-grow resize-none h-[100px] lg:h-[110px]"})]})]})]})}),e.jsx("div",{className:"lg:col-span-1 lg:self-end",children:e.jsxs(re,{className:"h-[300px] lg:h-[320px] flex flex-col",children:[e.jsx(Ie,{className:"flex-shrink-0 pb-4",children:e.jsxs(Oe,{className:"flex items-center gap-2 text-base md:text-lg",children:[e.jsx(jo,{className:"w-5 h-5"}),"Product Photos"]})}),e.jsxs(ie,{className:"flex-grow flex flex-col space-y-3",children:[b.images&&b.images.length>0?e.jsxs("div",{className:"flex-grow flex flex-col space-y-2",children:[e.jsx("div",{className:"flex-grow",children:e.jsx("div",{className:"grid grid-cols-2 gap-2 h-[120px] lg:h-[130px] overflow-y-auto",children:b.images.map((M,H)=>e.jsxs("div",{className:"relative group",children:[e.jsx("img",{src:M,alt:`Product ${H+1}`,className:"w-full h-16 md:h-18 object-cover rounded-lg border hover:opacity-90 transition-opacity"}),e.jsx(O,{type:"button",variant:"destructive",size:"sm",onClick:()=>te(H),className:"absolute top-1 right-1 h-5 w-5 p-0 opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx(cs,{className:"w-2 h-2"})}),H===0&&e.jsx(Ee,{className:"absolute bottom-1 left-1 text-xs px-1 py-0 h-4",children:"Main"})]},H))})}),e.jsxs("div",{className:"flex-shrink-0 space-y-2",children:[b.images.length<10&&e.jsxs(O,{type:"button",variant:"outline",size:"sm",onClick:()=>y.current?.click(),className:"w-full h-9",children:[e.jsx(fa,{className:"w-3 h-3 mr-1"}),"Add More (",b.images.length,"/10)"]}),b.images.length>1&&e.jsx(O,{type:"button",variant:"ghost",size:"sm",onClick:ne,className:"w-full text-destructive hover:text-destructive h-9",children:"Remove All Photos"})]})]}):e.jsx("div",{className:"flex-grow flex items-center justify-center",children:e.jsxs("div",{className:"border-2 border-dashed border-muted rounded-lg p-3 text-center w-full",children:[e.jsx(jo,{className:"w-12 h-12 mx-auto text-muted-foreground mb-3"}),e.jsxs("div",{className:"text-xs text-muted-foreground space-y-1 mb-3",children:[e.jsx("p",{children:"• Use high-quality photos"}),e.jsx("p",{children:"• Multiple photos help customers"}),e.jsx("p",{children:"• JPG, PNG up to 3MB each"})]}),e.jsxs(O,{type:"button",variant:"outline",size:"sm",onClick:()=>y.current?.click(),className:"h-9",children:[e.jsx(uk,{className:"w-3 h-3 mr-1"}),"Upload Photos"]})]})}),e.jsx("input",{ref:y,type:"file",accept:"image/*",multiple:!0,onChange:se,className:"hidden"}),g.images&&e.jsx("p",{className:"text-sm text-destructive",children:g.images})]})]})})]}),e.jsxs(re,{children:[e.jsx(Ie,{children:e.jsxs(Oe,{className:"flex items-center gap-2 text-base md:text-lg",children:[e.jsx(ga,{className:"w-5 h-5"}),"Pricing & Quantity"]})}),e.jsxs(ie,{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx($e,{htmlFor:"unit",children:"Package Size *"}),e.jsx(Ue,{id:"unit",placeholder:"e.g., 50 kg, 25 bags, 1 basket",value:b.unit,onChange:M=>w(H=>({...H,unit:M.target.value})),className:`h-11 ${g.unit?"border-destructive":""}`})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx($e,{htmlFor:"price",children:"Price (MMK) *"}),e.jsx(Ue,{id:"price",type:"number",placeholder:"0",value:b.price||"",onChange:M=>{const H=parseFloat(M.target.value)||0;console.log("💰 Price changed:",{inputValue:M.target.value,parsedValue:H,previousPrice:b.price}),w(I=>({...I,price:H}))},className:`h-11 ${g.price?"border-destructive":""}`})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx($e,{htmlFor:"availableQuantity",children:"Available Stock *"}),e.jsx(Ue,{id:"availableQuantity",placeholder:"e.g., 100 bags available",value:b.availableQuantity,onChange:M=>w(H=>({...H,availableQuantity:M.target.value})),className:`h-11 ${g.availableQuantity?"border-destructive":""}`})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx($e,{htmlFor:"minimumOrder",children:"Minimum Order *"}),e.jsx(Ue,{id:"minimumOrder",placeholder:"e.g., 5 bags minimum",value:b.minimumOrder,onChange:M=>w(H=>({...H,minimumOrder:M.target.value})),className:`h-11 ${g.minimumOrder?"border-destructive":""}`})]})]})]}),e.jsxs(re,{children:[e.jsx(Ie,{children:e.jsxs(Oe,{className:"flex items-center gap-2 text-base md:text-lg",children:[e.jsx(ja,{className:"w-5 h-5"}),"Delivery Options *"]})}),e.jsxs(ie,{className:"space-y-4",children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:S.map(M=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(nv,{id:`delivery-${M}`,checked:b.deliveryOptions.includes(M),onCheckedChange:()=>J(M)}),e.jsx($e,{htmlFor:`delivery-${M}`,className:"text-sm leading-5 cursor-pointer",children:M}),k.includes(M)&&e.jsx(O,{type:"button",variant:"ghost",size:"sm",onClick:()=>Q(M),className:"h-6 w-6 p-0 ml-2 text-destructive hover:text-destructive",children:e.jsx(cs,{className:"w-3 h-3"})})]},M))}),g.deliveryOptions&&e.jsx("p",{className:"text-sm text-destructive",children:g.deliveryOptions}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Ue,{placeholder:"Add custom delivery option",value:o,onChange:M=>l(M.target.value),className:"h-11",onKeyPress:M=>M.key==="Enter"&&q()}),e.jsx(O,{type:"button",variant:"outline",onClick:q,disabled:!o.trim(),className:"h-11 px-3",children:e.jsx(fa,{className:"w-4 h-4"})})]})]})]}),e.jsxs(re,{children:[e.jsx(Ie,{children:e.jsxs(Oe,{className:"flex items-center gap-2 text-base md:text-lg",children:[e.jsx(af,{className:"w-5 h-5"}),"Payment Terms *"]})}),e.jsxs(ie,{className:"space-y-4",children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:T.map(M=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(nv,{id:`payment-${M}`,checked:b.paymentTerms.includes(M),onCheckedChange:()=>z(M)}),e.jsx($e,{htmlFor:`payment-${M}`,className:"text-sm leading-5 cursor-pointer",children:M}),A.includes(M)&&e.jsx(O,{type:"button",variant:"ghost",size:"sm",onClick:()=>he(M),className:"h-6 w-6 p-0 ml-2 text-destructive hover:text-destructive",children:e.jsx(cs,{className:"w-3 h-3"})})]},M))}),g.paymentTerms&&e.jsx("p",{className:"text-sm text-destructive",children:g.paymentTerms}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Ue,{placeholder:"Add custom payment term",value:d,onChange:M=>u(M.target.value),className:"h-11",onKeyPress:M=>M.key==="Enter"&&Z()}),e.jsx(O,{type:"button",variant:"outline",onClick:Z,disabled:!d.trim(),className:"h-11 px-3",children:e.jsx(fa,{className:"w-4 h-4"})})]})]})]}),e.jsxs(re,{children:[e.jsx(Ie,{children:e.jsxs(Oe,{className:"flex items-center gap-2 text-base md:text-lg",children:[e.jsx(er,{className:"w-5 h-5"}),"Additional Notes"]})}),e.jsx(ie,{children:e.jsx(es,{placeholder:"Any special conditions, harvest dates, certifications, or additional information...",value:b.additionalNotes,onChange:M=>w(H=>({...H,additionalNotes:M.target.value})),className:"min-h-20 resize-none"})})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4 sm:justify-end",children:[e.jsx(O,{variant:"outline",onClick:s,disabled:f,className:"h-11 sm:px-6 order-2 sm:order-1 min-h-11",children:"Cancel"}),e.jsx(O,{onClick:U,disabled:f||E().disabled,variant:E().variant,className:`h-11 flex-1 sm:flex-none sm:px-8 order-1 sm:order-2 min-h-11 ${E().disabled?"opacity-50 cursor-not-allowed bg-muted text-muted-foreground hover:bg-muted":""}`,children:f?e.jsxs(e.Fragment,{children:[e.jsx(He,{className:"w-4 h-4 mr-2 animate-spin"}),i?"Updating...":"Publishing..."]}):e.jsxs(e.Fragment,{children:[!i&&e.jsx(Nt,{className:"w-4 h-4 mr-2"}),E().text]})})]})]})]})}function gP(t){if(!t)return"unit";const s=t.toLowerCase(),n=["sack","sacks","bag","bags","basket","baskets","crate","crates","box","boxes","carton","cartons","bottle","bottles","jar","jars","can","cans","pack","packs","bundle","bundles","bunch","bunches"];for(const l of n)if(s.includes(l))return l.endsWith("s")?l:l+"s";const i=s.split(/[^\w]+/),o=i[i.length-1];return o&&o.length>1?o.endsWith("s")?o:o+"s":"units"}function xP({user:t,userProducts:s,onAddListing:n,onEditListing:i,onDeleteListing:o,onViewStorefront:l,onGoToMarketplace:d,onViewProduct:u,onShowVerification:f,onViewMessages:p}){const g=j=>{if(j.variations&&j.variations.length>0){const b=j.variations.filter(w=>w.price&&w.price>0);if(b.length===0)return{price:"Contact for price",unit:"",showUnit:!1};if(b.length===1){const w=b[0],S=w.quantity?`${w.quantity} ${w.unit}`:w.unit||gP(w.name);return{price:`${new Intl.NumberFormat("en-US").format(w.price)} MMK`,unit:S,showUnit:!0}}else{const w=b.map(k=>k.price),S=Math.min(...w);return{price:`From ${new Intl.NumberFormat("en-US").format(S)} MMK`,unit:"multiple options",showUnit:!0}}}else return j.price&&j.price>0?{price:`${new Intl.NumberFormat("en-US").format(j.price)} MMK`,unit:j.unit,showUnit:!!j.unit}:{price:"Contact for price",unit:"",showUnit:!1}},h=s.length;s.slice(0,3);const y=v.useMemo(()=>{const j=new Date;j.getMonth(),j.getFullYear();let b=0;if(h>0){const C=t.verified?8:3;b=h*C;const E=s.filter(P=>P.name.length>20&&P.image&&!P.image.includes("placeholder")).length*2;b+=E,t.verified&&(b+=Math.floor(b*.3)),b=Math.min(b,150)}let w=0;if(h>0){const C=t.verified?25:12;w=h*C;const E=s.filter(P=>{const T=new Date(P.lastUpdated);return(j.getTime()-T.getTime())/(1e3*3600*24)<=7}).length;w+=E*15,t.verified&&(w+=Math.floor(w*.4)),t.userType==="farmer"&&(w+=Math.floor(w*.1)),w=Math.min(w,500)}const S=Math.floor(b*.85),k=S>0?Math.round((b-S)/S*100):0;return{monthlyInquiries:b,profileViews:w,growthPercentage:Math.max(0,Math.min(k,50))}},[t.id,t.verified,t.userType,h,s]);return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-gradient-to-r from-primary/10 via-primary/5 to-amber-900/10 rounded-xl p-6 border border-primary/30",children:e.jsx("div",{className:"flex flex-col lg:flex-row lg:items-center justify-between gap-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"flex items-center gap-3",children:e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold",children:["Welcome back, ",t.name.split(" ")[0],"!"]}),e.jsxs("p",{className:"text-muted-foreground flex items-center gap-2",children:[e.jsx(Vt,{className:"w-4 h-4"}),t.businessName||`${t.name}'s ${t.userType==="farmer"?"Farm":"Trading"}`," • ",t.location]})]})}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(ba,{className:"w-4 h-4"}),e.jsxs("span",{children:["Member since ",Dc(t.joinedDate)]})]}),t.verified?e.jsxs(Ee,{variant:"secondary",className:"bg-emerald-100 text-emerald-800 border-emerald-300",children:[e.jsx(He,{className:"w-3 h-3 mr-1"}),"Verified"]}):e.jsx("div",{className:"flex items-center gap-2",children:e.jsx(Ni,{userType:t.userType,accountType:gi(t),verificationLevel:Qr(t),size:"sm"})})]})]})})}),(()=>{const b=(()=>{if(t.verified)return"verified";if(t.verificationStatus==="under_review"||t.verificationSubmitted)return"under-review";const w=t.phoneVerified===!0,S=t.verificationDocuments?.idCard==="uploaded"||t.verificationDocuments?.idCard==="approved",k=t.businessDetailsCompleted;return console.log("🔍 Verification Progress Debug:",{userId:t.id,userType:t.userType,phoneVerified:t.phoneVerified,hasPhoneVerification:w,verificationStatus:t.verificationStatus,verificationSubmitted:t.verificationSubmitted,verificationDocuments:t.verificationDocuments,hasDocuments:S,hasBusinessDetails:k}),t.userType==="buyer"?w?"verified":"not-started":w||S||k?"in-progress":"not-started"})();return b==="verified"?e.jsxs(is,{className:"border-emerald-200 bg-gradient-to-r from-emerald-50 to-emerald-100",children:[e.jsx(He,{className:"h-5 w-5",style:{color:"#059669"}}),e.jsx(os,{children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"flex items-center gap-2 mb-1",children:e.jsx("span",{className:"font-semibold text-emerald-700",children:"AgriLink Verification Complete"})}),e.jsx("p",{className:"text-sm text-emerald-600",children:"Your account is fully verified! You now have enhanced buyer trust and credibility on the platform."})]}),e.jsx("div",{className:"flex justify-end sm:justify-start",children:e.jsx(O,{size:"sm",variant:"outline",className:"border-emerald-300 text-emerald-700 hover:bg-emerald-50 shrink-0",onClick:()=>{console.log("👀 View Verification clicked"),f()},children:"View Details"})})]})})]}):b==="under-review"?e.jsxs(is,{className:"border-blue-200 bg-gradient-to-r from-blue-50 to-blue-100",children:[e.jsx(dt,{className:"h-5 w-5",style:{color:"#2563eb"}}),e.jsx(os,{children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"flex items-center gap-2 mb-1",children:e.jsx("span",{className:"font-semibold text-blue-700",children:"Verification Under Review"})}),e.jsx("p",{className:"text-sm text-blue-600",children:"Your verification documents have been submitted. AgriLink team will review within 1-2 business days."})]}),e.jsx(O,{size:"sm",variant:"outline",className:"border-blue-300 text-blue-700 hover:bg-blue-50 shrink-0",onClick:()=>{console.log("🔍 Check Status clicked"),f()},children:"Check Status"})]})})]}):b==="in-progress"?e.jsxs(is,{className:"border-amber-200 bg-gradient-to-r from-amber-50 to-amber-100",children:[e.jsx(dt,{className:"h-5 w-5",style:{color:"#d97706"}}),e.jsx(os,{children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"flex items-center gap-2 mb-1",children:e.jsx("span",{className:"font-semibold text-amber-700",children:"Complete Your Verification"})}),e.jsx("p",{className:"text-sm text-amber-600",children:"Your phone is verified! Complete ID verification to get the green verified badge and boost buyer trust."})]}),e.jsx(O,{size:"sm",className:"bg-amber-600 hover:bg-amber-700 text-white shrink-0",onClick:()=>{console.log("📋 Continue Verification clicked"),f()},children:"Continue Setup"})]})})]}):e.jsxs(is,{className:"border-red-200 bg-gradient-to-r from-red-50 to-red-100",children:[e.jsx(dt,{className:"h-5 w-5",style:{color:"#dc2626"}}),e.jsx(os,{children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"flex items-center gap-2 mb-1",children:e.jsx("span",{className:"font-semibold text-red-700",children:"Boost Your Sales with Verification!"})}),e.jsxs("p",{className:"text-sm text-red-600",children:["Verified ",t.userType,"s get 3x more inquiries, featured listings, and buyer trust"]})]}),e.jsx(O,{size:"sm",className:"bg-red-600 hover:bg-red-700 text-white shrink-0",onClick:()=>{console.log("🚀 Start Verification clicked"),f()},children:"Start Verification"})]})})]})})(),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(re,{className:"hover:shadow-md transition-shadow border-primary/30",children:e.jsx(ie,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Active Products"}),e.jsx("p",{className:"text-3xl font-bold text-primary",children:h}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:h>0?"Great inventory!":"Add your first product"})]}),e.jsx("div",{className:"w-12 h-12 bg-primary/10 rounded-full flex items-center justify-center",children:e.jsx(Nt,{className:"w-6 h-6 text-primary"})})]})})}),e.jsx(re,{className:"hover:shadow-md transition-shadow border-primary/30",children:e.jsx(ie,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Monthly Inquiries"}),e.jsx("p",{className:"text-3xl font-bold text-primary",children:y.monthlyInquiries}),e.jsxs("p",{className:"text-xs text-primary/80 mt-1 flex items-center gap-1",children:[e.jsx(cf,{className:"w-3 h-3"}),y.monthlyInquiries>0&&t.verified?`+${y.growthPercentage}% this month`:y.monthlyInquiries>0?"Growing steadily":"Add products to start"]})]}),e.jsx("div",{className:"w-12 h-12 bg-primary/10 rounded-full flex items-center justify-center",children:e.jsx(js,{className:"w-6 h-6 text-primary"})})]})})}),e.jsx(re,{className:"hover:shadow-md transition-shadow border-primary/30",children:e.jsx(ie,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Profile Views"}),e.jsx("p",{className:"text-3xl font-bold text-primary",children:y.profileViews}),e.jsxs("p",{className:"text-xs text-primary/80 mt-1 flex items-center gap-1",children:[e.jsx(No,{className:"w-3 h-3"}),"This month"]})]}),e.jsx("div",{className:"w-12 h-12 bg-primary/10 rounded-full flex items-center justify-center",children:e.jsx(No,{className:"w-6 h-6 text-primary"})})]})})})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3",children:[e.jsxs(O,{onClick:j=>{j.preventDefault(),j.stopPropagation(),console.log("✨ Quick Add Product clicked - calling onAddListing"),console.log("onAddListing function:",typeof n);try{n(),console.log("✅ onAddListing called successfully")}catch(b){console.error("❌ Error calling onAddListing:",b)}},className:"h-12 justify-start gap-3 bg-primary hover:bg-primary/90",children:[e.jsx(fa,{className:"w-5 h-5"}),"Add New Product"]}),e.jsxs(O,{onClick:()=>{console.log("👁️ View Storefront clicked"),l()},variant:"outline",className:"h-12 justify-start gap-3",children:[e.jsx(_r,{className:"w-5 h-5"}),"View Storefront"]}),e.jsxs(O,{onClick:()=>{console.log("💬 Check Messages clicked"),p()},variant:"outline",className:"h-12 justify-start gap-3",children:[e.jsx(js,{className:"w-5 h-5"}),"Check Messages"]})]}),e.jsxs(re,{className:"border-primary/30",children:[e.jsx(Ie,{children:e.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:e.jsxs("div",{children:[e.jsxs(Oe,{className:"flex items-center gap-2",children:[e.jsx(Nt,{className:"w-5 h-5"}),"My Products (",h,")"]}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Manage your product listings and track performance"})]})})}),e.jsx(ie,{children:h===0?e.jsxs("div",{className:"text-center py-12 space-y-6",children:[e.jsx("div",{className:"w-20 h-20 bg-muted/50 rounded-full flex items-center justify-center mx-auto",children:e.jsx(Nt,{className:"w-10 h-10 text-muted-foreground"})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"text-xl font-semibold",children:"Ready to start selling?"}),e.jsxs("p",{className:"text-muted-foreground max-w-md mx-auto",children:["Add your first product to connect with buyers across Myanmar.",t.userType==="farmer"?" Share your fresh produce with customers who value quality.":" Start distributing quality agricultural products to retailers and businesses."]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs(O,{onClick:j=>{j.preventDefault(),j.stopPropagation(),console.log("🎯 Add First Product clicked"),console.log("onAddListing function:",typeof n);try{n(),console.log("✅ First Product onAddListing called successfully")}catch(b){console.error("❌ Error calling first product onAddListing:",b)}},size:"lg",className:"h-12 px-8",children:[e.jsx(fa,{className:"w-5 h-5 mr-2"}),"Add Your First Product"]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Takes less than 5 minutes to create your first listing"})]})]}):e.jsxs("div",{className:"space-y-4",children:[s.map(j=>e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 p-4 border rounded-lg hover:bg-muted/30 transition-colors",children:[e.jsx("div",{className:"shrink-0",children:e.jsx("img",{src:j.image,alt:j.name,className:"w-full sm:w-20 h-48 sm:h-20 object-cover rounded-lg"})}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start justify-between gap-2",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-lg",children:j.name}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[e.jsx("span",{className:"font-medium text-primary text-base",children:g(j).price}),g(j).showUnit&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"/"}),e.jsx("span",{children:g(j).unit})]})]})]}),e.jsxs("div",{className:"flex gap-2 sm:shrink-0",children:[e.jsxs(O,{size:"sm",variant:"outline",onClick:()=>{console.log("👁️ View Product:",j.id),u(j.id)},className:"h-9",children:[e.jsx(Ut,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline ml-2",children:"View"})]}),e.jsxs(O,{size:"sm",variant:"outline",onClick:()=>{console.log("✏️ Edit Product:",j.id),i(j)},className:"h-9",children:[e.jsx(Mv,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline ml-2",children:"Edit"})]}),e.jsxs(O,{size:"sm",variant:"outline",onClick:()=>{console.log("🗑️ Delete Product:",j.id),confirm(`Are you sure you want to delete "${j.name}"?`)&&o(j.id)},className:"text-destructive hover:text-destructive h-9",children:[e.jsx(Tr,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline ml-2",children:"Delete"})]})]})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-4 text-sm text-muted-foreground",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Nt,{className:"w-3 h-3"}),(()=>{if(j.variations&&j.variations.length>0){const b=j.variations.filter(w=>w.availableQuantity);if(b.length===1)return b[0].availableQuantity;if(b.length>1)return`${b.length} options`}return j.quantity||"Available"})()]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Vt,{className:"w-3 h-3"}),j.location]}),e.jsxs("span",{children:["Updated ",xi(j.lastUpdated)]})]})]})]},j.id)),h>5&&e.jsx("div",{className:"pt-4 border-t",children:e.jsxs(O,{variant:"outline",className:"w-full",onClick:()=>{console.log("🔍 View All Products clicked"),l()},children:["View All ",h," Products",e.jsx(uc,{className:"w-4 h-4 ml-2"})]})})]})})]})]})}function vP({user:t,allProducts:s,savedProducts:n,onGoToMarketplace:i,onViewProduct:o,onStartChat:l,onViewMessages:d}){const u=v.useMemo(()=>n.map(g=>{const h=s.find(w=>w.id===g.productId),y=h&&h.price!==g.priceWhenSaved,j=h&&h.price>g.priceWhenSaved,b=h&&h.price<g.priceWhenSaved;return{...g,product:h,priceChanged:y,priceIncrease:j,priceDecrease:b,currentPrice:h?.price||g.priceWhenSaved}}),[s,n]),f=v.useMemo(()=>{const g=n.length,h=n.filter(j=>j.alerts.priceAlert).length,y=u.filter(j=>j.priceDecrease&&j.alerts.priceAlert).length;return{savedProductsCount:g,priceAlertsActive:h,priceDropsDetected:y}},[n,u]),p=g=>new Intl.NumberFormat("en-US").format(g)+" MMK";return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl md:text-3xl",children:["Welcome back, ",t.name,"!"]}),e.jsx("p",{className:"text-muted-foreground",children:"Your AgriLink buying dashboard"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(re,{children:e.jsx(ie,{className:"p-4",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-primary/10 rounded-lg flex items-center justify-center",children:e.jsx(vo,{className:"w-5 h-5 text-primary"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Saved Products"}),e.jsx("p",{className:"text-xl",children:f.savedProductsCount})]})]})})}),e.jsx(re,{children:e.jsx(ie,{className:"p-4",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-orange-100 rounded-lg flex items-center justify-center",children:e.jsx(Av,{className:"w-5 h-5 text-orange-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Price Alerts"}),e.jsx("p",{className:"text-xl text-orange-600",children:f.priceAlertsActive})]})]})})}),e.jsx(re,{children:e.jsx(ie,{className:"p-4",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center",children:e.jsx(hc,{className:"w-5 h-5 text-green-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Price Drops"}),e.jsx("p",{className:"text-xl text-green-600",children:f.priceDropsDetected})]})]})})})]}),e.jsxs(re,{children:[e.jsxs(Ie,{children:[e.jsxs(Oe,{className:"flex items-center gap-2",children:[e.jsx(vo,{className:"w-5 h-5"}),"Your Saved Products (",u.length,")"]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Track prices and get alerts on products you're interested in"})]}),e.jsx(ie,{children:e.jsxs("div",{className:"space-y-4",children:[u.map(g=>e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center space-y-3 md:space-y-0 md:space-x-4 p-4 border rounded-lg",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("h3",{className:"font-medium",children:g.product?.name||"Product Not Found"}),g.priceDecrease&&g.alerts.priceAlert&&e.jsxs(Ee,{variant:"secondary",className:"text-green-600",children:[e.jsx(hc,{className:"w-3 h-3 mr-1"}),"Price Drop!"]})]}),e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center gap-2 text-sm text-muted-foreground",children:[e.jsxs("span",{children:["Saved at: ",p(g.priceWhenSaved)]}),e.jsx("span",{className:"hidden md:inline",children:"•"}),e.jsxs("span",{children:["Current: ",p(g.currentPrice)]}),g.priceChanged&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"hidden md:inline",children:"•"}),e.jsxs("span",{className:g.priceDecrease?"text-green-600":"text-red-600",children:[g.priceDecrease?"↓":"↑"," ",p(Math.abs(g.currentPrice-g.priceWhenSaved))," change"]})]})]}),g.product&&e.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:["Seller: ",g.product.sellerName," • ",g.product.location]})]}),e.jsxs("div",{className:"flex flex-col md:flex-row space-y-2 md:space-y-0 md:space-x-2",children:[e.jsxs(O,{variant:"outline",size:"sm",className:"w-full md:w-auto",onClick:()=>g.product&&o(g.productId),disabled:!g.product,children:[e.jsx(Ut,{className:"w-4 h-4 mr-1"}),"View Product"]}),e.jsxs(O,{size:"sm",className:"w-full md:w-auto",onClick:()=>g.product&&l(g.productId,g.product.sellerId),disabled:!g.product,children:[e.jsx(Rn,{className:"w-4 h-4 mr-1"}),"Contact Seller"]})]})]},g.productId)),u.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(vo,{className:"w-16 h-16 text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium mb-2",children:"No saved products yet"}),e.jsx("p",{className:"text-muted-foreground",children:"Start saving products to track their prices and get notified when prices drop. You can save products by clicking the heart icon on any product card in the marketplace."})]})]})})]})]})}function yP({length:t=6,value:s,onChange:n,disabled:i,className:o}){const[l,d]=v.useState(0),u=v.useRef([]);v.useEffect(()=>{u.current=u.current.slice(0,t)},[t]);const f=(y,j)=>{if(i)return;const b=j.replace(/\D/g,"").slice(-1),w=s.split("");w[y]=b;const S=w.join("").slice(0,t);if(n(S),b&&y<t-1){const k=u.current[y+1];k&&(k.focus(),d(y+1))}},p=(y,j)=>{if(!i){if(j.key==="Backspace"){j.preventDefault();const b=s.split("");if(b[y])b[y]="",n(b.join(""));else if(y>0){b[y-1]="",n(b.join(""));const w=u.current[y-1];w&&(w.focus(),d(y-1))}}else if(j.key==="ArrowLeft"&&y>0){j.preventDefault();const b=u.current[y-1];b&&(b.focus(),d(y-1))}else if(j.key==="ArrowRight"&&y<t-1){j.preventDefault();const b=u.current[y+1];b&&(b.focus(),d(y+1))}}},g=y=>{d(y)},h=y=>{if(i)return;y.preventDefault();const j=y.clipboardData.getData("text/plain").replace(/\D/g,"").slice(0,t);n(j);const b=Math.min(j.length,t-1),w=u.current[b];w&&(w.focus(),d(b))};return e.jsx("div",{className:Ve("flex items-center gap-3 md:gap-2",o),onPaste:h,children:Array.from({length:t},(y,j)=>e.jsx("input",{ref:b=>u.current[j]=b,type:"text",inputMode:"numeric",pattern:"[0-9]*",maxLength:1,value:s[j]||"",onChange:b=>f(j,b.target.value),onKeyDown:b=>p(j,b),onFocus:()=>g(j),disabled:i,className:Ve("relative flex h-14 w-14 items-center justify-center border border-input bg-input-background text-center text-xl font-medium transition-all","md:h-12 md:w-12 md:text-lg","focus:border-ring focus:outline-none focus:ring-2 focus:ring-ring/20","disabled:cursor-not-allowed disabled:opacity-50","first:rounded-l-md last:rounded-r-md",l===j&&"z-10 border-ring ring-2 ring-ring/20",s[j]&&"border-ring",o),"aria-label":`Digit ${j+1}`},j))})}function wP({phoneNumber:t,onVerificationComplete:s,onBack:n,isDemo:i=!0}){const[o,l]=v.useState(""),[d,u]=v.useState(300),[f,p]=v.useState(!1),[g,h]=v.useState(!1),[y,j]=v.useState(0),[b,w]=v.useState(!1),[S,k]=v.useState(""),C=R=>{if(R.startsWith("+95")){const $=R.replace("+95","").replace(/\s/g,"");if($.length>=7)return`+95 ${$.substring(0,1)} *** *** ${$.substring($.length-3)}`}return R.replace(/\d(?=\d{3})/g,"*")};v.useEffect(()=>{if(d>0&&!b){const R=setTimeout(()=>{u($=>$-1)},1e3);return()=>clearTimeout(R)}else d===0&&(w(!0),h(!0))},[d,b]);const E=R=>{const $=Math.floor(R/60),J=R%60;return`${$}:${J.toString().padStart(2,"0")}`},P=v.useCallback(R=>{l(R),k("")},[]),T=async(R=o)=>{if(R.length!==6){k("Please enter the complete 6-digit code");return}if(b){k("This code has expired. Please request a new one.");return}p(!0),k("");try{if(await new Promise($=>setTimeout($,2e3)),i&&!(["123456","000000"].includes(R)||R.endsWith("00")||R==="111111")&&y<2){j(z=>z+1),k("Invalid code. Please try again."),l(""),ge.error("Invalid verification code");return}ge.success("Phone number verified successfully!"),s()}catch{k("Verification failed. Please try again."),ge.error("Verification failed")}finally{p(!1)}},A=async()=>{p(!0),k("");try{await new Promise(R=>setTimeout(R,1500)),u(300),w(!1),h(!1),l(""),j(0),ge.success("New verification code sent!")}catch{k("Failed to resend code. Please try again."),ge.error("Failed to resend code")}finally{p(!1)}};return e.jsx("div",{className:"min-h-screen bg-background md:min-h-0",children:e.jsxs("div",{className:"container mx-auto px-4 py-6 max-w-md",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[e.jsx(O,{variant:"ghost",size:"sm",onClick:n,className:"p-2 h-10 w-10 shrink-0",children:e.jsx(Iv,{className:"w-5 h-5"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h1",{className:"text-xl font-semibold",children:"Phone Verification"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Enter the code we sent to your phone"})]})]}),e.jsx(re,{className:"mb-6",children:e.jsx(ie,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-primary/10 rounded-full flex items-center justify-center",children:e.jsx(GS,{className:"w-5 h-5 text-primary"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Code sent to"}),e.jsx("p",{className:"font-medium",children:C(t)})]})]})})}),e.jsx(re,{className:"mb-6",children:e.jsx(ie,{className:"p-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("label",{className:"block text-sm font-medium mb-4",children:"Enter 6-digit verification code"}),e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx(yP,{length:6,value:o,onChange:P,disabled:f||b})}),S&&e.jsxs("div",{className:"flex items-center gap-2 justify-center text-destructive text-sm mb-4",children:[e.jsx(zs,{className:"w-4 h-4"}),e.jsx("span",{children:S})]}),b?e.jsxs("div",{className:"flex items-center gap-2 justify-center text-destructive text-sm",children:[e.jsx(zs,{className:"w-4 h-4"}),e.jsx("span",{children:"Code has expired"})]}):e.jsxs("div",{className:"flex items-center gap-2 justify-center text-muted-foreground text-sm",children:[e.jsx(Lt,{className:"w-4 h-4"}),e.jsxs("span",{children:["Code expires in ",E(d)]})]})]}),o.length>0&&e.jsx(O,{onClick:()=>T(),disabled:o.length!==6||f||b,className:"w-full",size:"lg",children:f?e.jsxs(e.Fragment,{children:[e.jsx(rr,{className:"w-4 h-4 mr-2 animate-spin"}),"Verifying..."]}):e.jsxs(e.Fragment,{children:[e.jsx(He,{className:"w-4 h-4 mr-2"}),"Verify Code"]})}),e.jsx("div",{className:"text-center",children:g||b?e.jsx(O,{variant:"outline",onClick:A,disabled:f,className:"w-full",children:f?e.jsxs(e.Fragment,{children:[e.jsx(rr,{className:"w-4 h-4 mr-2 animate-spin"}),"Sending..."]}):e.jsxs(e.Fragment,{children:[e.jsx(rr,{className:"w-4 h-4 mr-2"}),"Send New Code"]})}):e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Didn't receive the code? You can resend in ",E(d)]})})]})})}),i&&e.jsx(re,{className:"bg-blue-50 border-blue-200",children:e.jsx(ie,{className:"p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-5 h-5 rounded-full bg-blue-600 flex items-center justify-center mt-0.5 shrink-0",children:e.jsx("span",{className:"text-white text-xs font-bold",children:"!"})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-blue-800 font-medium text-sm",children:"Demo Mode"}),e.jsxs("div",{className:"text-blue-700 text-xs space-y-1",children:[e.jsxs("p",{children:["• Use code ",e.jsx("strong",{children:"123456"})," for instant verification"]}),e.jsxs("p",{children:["• Any code ending in ",e.jsx("strong",{children:"00"})," will work"]}),e.jsx("p",{children:"• Other codes will work after 2 attempts"}),e.jsxs("p",{children:["• ",e.jsx("strong",{children:'Click "Verify Code" button'})," after entering the code"]}),e.jsx("p",{children:"• SMS sending is simulated"})]})]})]})})}),e.jsxs("div",{className:"mt-6 text-center space-y-2",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Make sure to check your messages for the verification code"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"If you don't receive the code, check your spam folder or try resending"})]})]})})}function bP({currentUser:t,onClose:s,onUpdate:n}){const[i,o]=v.useState(()=>{const I={};if(console.log("🔄 Initializing verification component for user:",t.email),console.log("📋 User verification documents:",t.verificationDocuments),t.verificationDocuments){const V=t.verificationDocuments;V.idCard&&V.idCard!=="pending"&&(console.log("📄 Restoring ID Card document with status:",V.idCard),I.idCard={file:null,url:"",name:"ID Card Document",verified:V.idCard==="verified",status:V.idCard}),V.businessLicense&&V.businessLicense!=="pending"&&(console.log("📄 Restoring Business License document with status:",V.businessLicense),I.businessLicense={file:null,url:"",name:"Business License Document",verified:V.businessLicense==="verified",status:V.businessLicense})}return console.log("✅ Restored documents:",Object.keys(I)),I});v.useEffect(()=>{const I=t.verificationDocuments;I&&(console.log("🔄 Syncing uploaded documents with user verification documents:",I),o(V=>{const D={...V};return I.idCard&&I.idCard!=="pending"&&!V.idCard&&(console.log("📄 Syncing ID Card document with status:",I.idCard),D.idCard={file:null,url:"",name:"ID Card Document",verified:I.idCard==="verified",status:I.idCard}),I.businessLicense&&I.businessLicense!=="pending"&&!V.businessLicense&&(console.log("📄 Syncing Business License document with status:",I.businessLicense),D.businessLicense={file:null,url:"",name:"Business License Document",verified:I.businessLicense==="verified",status:I.businessLicense}),console.log("✅ Synced documents state:",Object.keys(D)),D}))},[t.verificationDocuments]);const[l,d]=v.useState(!1),[u,f]=v.useState({businessName:t.businessName||"",businessDescription:t.businessDescription||"",businessType:t.businessType||"",businessLicenseNumber:t.businessLicenseNumber||""}),[p,g]=v.useState(!1);v.useEffect(()=>{f({businessName:t.businessName||"",businessDescription:t.businessDescription||"",businessType:t.businessType||"",businessLicenseNumber:t.businessLicenseNumber||""})},[t.businessName,t.businessDescription,t.businessType,t.businessLicenseNumber]);const[h,y]=v.useState(()=>{console.log("🔄 Initializing AgriLink verification state"),console.log("📋 User agriLinkVerificationRequested:",t.agriLinkVerificationRequested),console.log("📋 User verified:",t.verified);const I=t.agriLinkVerificationRequested,V=t.verified;return console.log("✅ AgriLink verification state:",I||V?"true":"false"),I||V}),[j,b]=v.useState(()=>{const I=t.agriLinkVerificationRequested,V=t.verificationStatus==="under_review",D=!t.verified;return console.log("🔄 Initializing success message state:",{hasRequestedVerification:I,isUnderReview:V,isNotYetVerified:D,shouldShow:I&&V&&D}),I&&V&&D}),[w,S]=v.useState(!1);v.useEffect(()=>{console.log("🔍 Monitoring verification status changes:",{verified:t.verified,verificationStatus:t.verificationStatus,showSuccessMessage:j,agriLinkVerificationRequested:t.agriLinkVerificationRequested}),j&&(t.verified||t.verificationStatus==="rejected")&&(console.log("✅ Verification status changed - hiding success message"),b(!1))},[t.verified,t.verificationStatus,j]);const[k,C]=v.useState(!1),[E,P]=v.useState(!1),[T,A]=v.useState(t.phone||""),[R]=v.useState(t.phone||""),[$,J]=v.useState(!1),[z,q]=v.useState(!1),Q=t.accountType==="business",Z=()=>{const I=t.verificationDocuments;console.log("🔍 Checking document completion status:",{isBusinessAccount:Q,uploadedDocuments:Object.keys(i),userVerificationDocuments:I,hasLocalIdCard:!!i.idCard,hasUserIdCard:!!(I?.idCard&&I.idCard!=="pending"),hasLocalBusinessLicense:!!i.businessLicense,hasUserBusinessLicense:!!(I?.businessLicense&&I.businessLicense!=="pending")});const V=i.idCard||I?.idCard&&I.idCard!=="pending",D=V;return console.log("📊 Document status calculation:",{hasIdCard:V,isComplete:D,accountType:Q?"business":"individual",note:"Identity Documents step only requires ID card for both account types"}),{hasIdCard:V,hasBusinessLicense:!1,isComplete:D}},he=()=>{let I=0,V=Q?4:3;t.phoneVerified&&I++;const D=t.verificationDocuments;if((i.idCard||D?.idCard&&D.idCard!=="pending")&&I++,Q){const ce=t.businessName&&t.businessLicenseNumber,pe=t.verificationDocuments?.businessLicense&&t.verificationDocuments.businessLicense!=="pending";ce&&pe&&I++}return t.verified&&I++,Math.round(I/V*100)},se=async()=>{if(!T.trim()){alert("Please enter a valid phone number");return}S(!0);try{await new Promise(I=>setTimeout(I,1500)),await n({...t,phone:T}),P(!0)}catch{alert("Failed to send verification code. Please try again.")}finally{S(!1)}},te=async()=>{try{await n({...t,phone:T,phoneVerified:!0,phoneVerificationDate:new Date().toISOString()}),P(!1),C(!0),d(!1)}catch{alert("Failed to update verification status. Please try again.")}},ne=async(I,V)=>{const D=I.target.files?.[0];if(D){if(D.size>10*1024*1024){alert("File size must be less than 10MB");return}if(!D.type.startsWith("image/")){alert("Please upload an image file (JPG, PNG, etc.)");return}S(!0);try{const ae=URL.createObjectURL(D);o(pe=>({...pe,[V]:{file:D,url:ae,name:D.name,verified:!1,status:"uploaded"}})),await new Promise(pe=>setTimeout(pe,1500));const ce={...t.verificationDocuments||{},[V]:"uploaded"};console.log("📝 Updating user profile with new verification documents:",ce),await n({...t,verificationDocuments:ce}),console.log(`✅ Document ${V} uploaded and user profile updated`),console.log("📋 Current user verification documents after update:",t.verificationDocuments),await new Promise(pe=>setTimeout(pe,100))}catch(ae){console.error("Upload failed:",ae),alert("Upload failed. Please try again.")}finally{S(!1)}}},U=I=>{o(V=>{const D={...V};return delete D[I],D})},M=async()=>{S(!0);try{if(console.log("🛡️ Requesting AgriLink verification for user:",t.email),i.idCard&&(!Q||i.businessLicense)){const V={id:`req-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,userId:t.id,userEmail:t.email,userName:t.name,userType:t.userType,accountType:t.accountType,requestType:"standard",status:"pending",submittedAt:new Date().toISOString(),documents:{nationalId:i.idCard?{status:"uploaded",name:i.idCard.name}:void 0,businessLicense:i.businessLicense?{status:"uploaded",name:i.businessLicense.name}:void 0},businessInfo:Q?{businessName:t.businessName,businessDescription:t.businessDescription,businessType:t.businessType,businessLicenseNumber:t.businessLicenseNumber,location:t.location}:void 0,phoneVerified:t.phoneVerified},D=JSON.parse(localStorage.getItem("agriconnect-verification-requests")||"[]");D.push(V),localStorage.setItem("agriconnect-verification-requests",JSON.stringify(D)),await new Promise(ae=>setTimeout(ae,1500)),y(!0),b(!0),await n({...t,agriLinkVerificationRequested:!0,agriLinkVerificationRequestedAt:new Date().toISOString(),verificationStatus:"under_review",verificationSubmittedAt:new Date().toISOString(),verificationDocuments:{...t.verificationDocuments,idCard:"uploaded",...Q&&{businessLicense:"uploaded"}}}),console.log("✅ AgriLink verification request submitted successfully:",V)}else alert("Please upload all required documents before requesting verification.")}catch(I){console.error("❌ Failed to request AgriLink verification:",I),alert("Failed to request verification. Please try again.")}finally{S(!1)}},H=async()=>{if(!u.businessName.trim()){alert("Please enter your business name");return}if(!u.businessLicenseNumber.trim()){alert("Please enter your business license number");return}S(!0);try{console.log("💼 Saving business information:",{businessName:u.businessName,businessDescription:u.businessDescription,businessType:u.businessType,businessLicenseNumber:u.businessLicenseNumber}),await n({...t,businessName:u.businessName,businessDescription:u.businessDescription,businessType:u.businessType,businessLicenseNumber:u.businessLicenseNumber}),console.log("✅ Business information saved to user profile"),g(!1)}catch{alert("Failed to save business information. Please try again.")}finally{S(!1)}};return E?e.jsx(wP,{phoneNumber:T,onVerificationComplete:te,onBack:()=>P(!1),isDemo:!0}):k?e.jsxs("div",{className:"max-w-2xl mx-auto space-y-4 md:space-y-6",children:[e.jsx("div",{className:"flex items-center gap-4",children:e.jsxs("div",{className:"flex-1",children:[e.jsx("h1",{className:"text-xl font-semibold",children:"Phone Verification"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:t.phoneVerified?"Your verified phone number details":"Verify your phone number for account security"})]})}),e.jsx(re,{className:t.phoneVerified?"bg-primary/5 border-primary/20":"",children:e.jsxs(ie,{className:"p-6",children:[e.jsx("h3",{className:`font-semibold mb-4 ${t.phoneVerified?"text-primary":""}`,children:t.phoneVerified&&!l?"Verified Phone Number":l?"Update Your Phone Number":"Verify Your Phone Number"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"tel",value:T,onChange:I=>A(I.target.value),placeholder:"+95 9 XXX XXX XXX",className:`w-full px-3 py-2 pr-10 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary ${T&&!l?"bg-muted border-muted cursor-not-allowed":"border-muted bg-background text-foreground"}`,disabled:T&&!l}),T&&!l&&e.jsx(O,{type:"button",variant:"ghost",size:"sm",onClick:()=>d(!0),className:"absolute right-1 top-1/2 -translate-y-1/2 h-8 w-8 p-0 text-muted-foreground hover:text-foreground",children:e.jsx(ht,{className:"w-4 h-4"})})]}),t.phoneVerified&&!l&&e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsx(Ee,{variant:"secondary",className:"bg-primary/10 text-primary",children:"Verified"}),e.jsxs("span",{className:"text-xs text-muted-foreground",children:["on ",new Date(t.phoneVerificationDate||Date.now()).toLocaleDateString()]})]})]}),(!t.phoneVerified||l)&&e.jsxs("div",{className:"flex gap-2",children:[e.jsx(O,{onClick:se,disabled:w||!T.trim()||l&&T===R,className:"flex-1",children:w?"Sending Code...":"Send Verification Code"}),l&&e.jsx(O,{variant:"outline",onClick:()=>{d(!1),A(t.phone||"")},className:"px-4",children:"Cancel"})]})]})]})}),e.jsx("div",{className:"flex justify-start",children:e.jsxs(O,{variant:"ghost",size:"sm",onClick:()=>C(!1),className:"px-3 py-2",children:[e.jsx(ls,{className:"w-4 h-4 mr-2"}),"Back to Overview"]})})]}):$?e.jsxs("div",{className:"max-w-2xl mx-auto space-y-4 md:space-y-6",children:[e.jsx("div",{className:"flex items-center gap-4",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"w-10 h-10 bg-primary/10 rounded-lg flex items-center justify-center",children:e.jsx(er,{className:"w-5 h-5 text-primary"})}),e.jsx("h1",{className:"text-xl font-semibold text-primary",children:"Identity Documents"})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:t.verified?"Documents submitted for identity verification":"Upload your government-issued ID to verify your identity"})]})}),t.verified?e.jsx(re,{className:"bg-primary/5 border-primary/20",children:e.jsxs(ie,{className:"p-6",children:[e.jsx("h3",{className:"font-semibold mb-4 text-primary",children:"Submitted Documents"}),e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"bg-muted rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(er,{className:"w-5 h-5 text-primary"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"National ID Card"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Government-issued identification"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ee,{variant:"secondary",className:"bg-primary/10 text-primary",children:"Verified"}),i.businessLicense&&e.jsxs(O,{variant:"ghost",size:"sm",onClick:()=>window.open(i.businessLicense.url,"_blank"),className:"text-blue-600 hover:text-blue-700 hover:bg-blue-50",children:[e.jsx(Ut,{className:"w-4 h-4 mr-1"}),"View"]})]})]}),e.jsx("div",{className:"text-xs text-muted-foreground mb-3",children:i.businessLicense?`Uploaded: ${i.businessLicense.name}`:"Document verified and stored securely"})]})}),e.jsxs("div",{className:"bg-primary/5 border border-primary/20 rounded-lg p-4 mt-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(He,{className:"w-5 h-5 text-primary"}),e.jsx("p",{className:"font-medium text-primary",children:"Verification Complete"})]}),e.jsx("p",{className:"text-sm text-primary/80",children:"Your documents have been successfully verified. You now have full access to AgriLink platform features."})]})]})}):t.verificationStatus==="under_review"&&!h?e.jsx(re,{className:"bg-orange-50 border-orange-200",children:e.jsxs(ie,{className:"p-6",children:[e.jsx("h3",{className:"font-semibold mb-4 text-orange-800",children:"Documents Under Review"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(er,{className:"w-5 h-5 text-orange-600"}),e.jsx("p",{className:"font-medium text-orange-800",children:"Review in Progress"})]}),e.jsx("p",{className:"text-sm text-orange-700 mb-2",children:"We'll notify you once the review is complete, typically within 1-2 business days."}),t.verificationSubmittedAt&&e.jsxs("p",{className:"text-xs text-orange-600 mt-2",children:["Submitted on ",new Date(t.verificationSubmittedAt).toLocaleDateString()]})]}),i.idCard&&e.jsx("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(er,{className:"w-5 h-5 text-orange-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-orange-800",children:i.idCard.name}),e.jsx("p",{className:"text-xs text-orange-700",children:"Under Review"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(O,{variant:"ghost",size:"sm",onClick:()=>window.open(i.idCard.url,"_blank"),className:"text-blue-600 hover:text-blue-700 hover:bg-blue-50",children:[e.jsx(Ut,{className:"w-4 h-4 mr-1"}),"View"]}),e.jsx(Ee,{variant:"secondary",className:"bg-orange-100 text-orange-700",children:"Under Review"})]})]})}),Q&&i.businessLicense&&e.jsx("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ui,{className:"w-5 h-5 text-orange-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-orange-800",children:i.businessLicense.name}),e.jsx("p",{className:"text-xs text-orange-700",children:"Under Review"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(O,{variant:"ghost",size:"sm",onClick:()=>window.open(i.businessLicense.url,"_blank"),className:"text-blue-600 hover:text-blue-700 hover:bg-blue-50",children:[e.jsx(Ut,{className:"w-4 h-4 mr-1"}),"View"]}),e.jsx(Ee,{variant:"secondary",className:"bg-orange-100 text-orange-700",children:"Under Review"})]})]})})]})]})}):e.jsx(e.Fragment,{children:e.jsx(re,{className:"border-primary/20 bg-primary/2",children:e.jsx(ie,{className:"p-6",children:e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-primary/80 mb-4",children:"Please upload a clear photo of your government-issued ID (National ID card, passport, or driver's license)."}),e.jsxs("div",{className:"space-y-4",children:[!i.idCard&&!h&&e.jsxs("div",{className:"border-2 border-dashed border-primary/30 bg-primary/5 rounded-lg p-6 text-center hover:border-primary/50 hover:bg-primary/8 transition-all duration-200",children:[e.jsx(er,{className:"w-12 h-12 text-primary/70 mx-auto mb-4"}),e.jsx("p",{className:"text-sm font-medium mb-2 text-primary",children:"Upload Identity Document"}),e.jsx("p",{className:"text-xs text-primary/70 mb-4",children:"National ID, Passport, or Driver's License • JPG, PNG up to 10MB"}),e.jsx("input",{type:"file",accept:"image/*",className:"hidden",id:"id-upload",onChange:I=>ne(I,"idCard")}),e.jsx(O,{variant:"outline",size:"sm",asChild:!0,className:"border-primary/30 text-primary hover:bg-primary hover:text-primary-foreground",children:e.jsx("label",{htmlFor:"id-upload",className:"cursor-pointer",children:"Choose File"})})]}),i.idCard&&e.jsx("div",{className:"bg-primary/5 border border-primary/20 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(er,{className:"w-5 h-5 text-primary"}),e.jsx("div",{children:e.jsx("button",{onClick:()=>window.open(i.idCard.url,"_blank"),className:"text-sm font-medium text-primary hover:text-primary/80 hover:underline transition-colors text-left",children:i.idCard.name})})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[t.verificationStatus!=="under_review"&&!t.verified&&!h&&e.jsx(O,{variant:"ghost",size:"sm",onClick:()=>U("idCard"),className:"text-muted-foreground hover:text-foreground hover:bg-muted",children:e.jsx(cs,{className:"w-4 h-4"})}),e.jsx(Ee,{variant:"secondary",className:"bg-primary/10 text-primary",children:"Uploaded"})]})]})})]})]})})})})}),e.jsx("div",{className:"flex justify-start",children:e.jsxs(O,{variant:"ghost",size:"sm",onClick:()=>J(!1),className:"px-3 py-2 text-primary/70 hover:text-primary hover:bg-primary/10",children:[e.jsx(ls,{className:"w-4 h-4 mr-2"}),"Back to Overview"]})})]}):z?e.jsxs("div",{className:"max-w-2xl mx-auto space-y-4 md:space-y-6",children:[e.jsx("div",{className:"flex items-center gap-4",children:e.jsxs("div",{className:"flex-1",children:[e.jsx("h1",{className:"text-xl font-semibold",children:"Business Details"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:t.businessName?"Your business information":"Complete your business information"})]})}),e.jsx(re,{children:e.jsxs(ie,{className:"p-6",children:[e.jsx("h3",{className:"font-semibold mb-4",children:p?"Update Business Information":"Business Information"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Business Name *"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",value:u.businessName,onChange:I=>f(V=>({...V,businessName:I.target.value})),placeholder:"Enter your business name",className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary ${t.businessName&&!p?"bg-muted text-muted-foreground border-muted cursor-not-allowed":"border-muted bg-background text-foreground"}`,disabled:t.businessName&&!p}),t.businessName&&!p&&e.jsx(O,{type:"button",variant:"ghost",size:"sm",onClick:()=>g(!0),className:"absolute right-1 top-1/2 -translate-y-1/2 h-8 w-8 p-0 text-muted-foreground hover:text-foreground",children:e.jsx(ht,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Business License Number *"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",value:u.businessLicenseNumber,onChange:I=>f(V=>({...V,businessLicenseNumber:I.target.value})),placeholder:"Enter your business license number",className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary ${t.businessLicenseNumber&&!p?"bg-muted text-muted-foreground border-muted cursor-not-allowed":"border-muted bg-background text-foreground"}`,disabled:t.businessLicenseNumber&&!p}),t.businessLicenseNumber&&!p&&e.jsx(O,{type:"button",variant:"ghost",size:"sm",onClick:()=>g(!0),className:"absolute right-1 top-1/2 -translate-y-1/2 h-8 w-8 p-0 text-muted-foreground hover:text-foreground",children:e.jsx(ht,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Business Description"}),e.jsx("textarea",{value:u.businessDescription,onChange:I=>f(V=>({...V,businessDescription:I.target.value})),placeholder:"Describe your business activities",rows:3,className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary resize-none ${t.businessName&&!p?"bg-muted text-muted-foreground border-muted cursor-not-allowed":"border-muted bg-background text-foreground"}`,disabled:t.businessName&&!p})]}),t.businessName&&!p&&e.jsx("div",{className:"bg-muted/50 border border-muted rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(He,{className:"w-4 h-4 text-muted-foreground"}),e.jsx("p",{className:"text-muted-foreground text-sm",children:"Business information saved to your profile"})]})}),e.jsx("div",{className:"flex gap-2",children:p||!t.businessName?e.jsxs(e.Fragment,{children:[e.jsx(O,{onClick:H,disabled:w||t.verificationStatus==="under_review",className:"flex-1",children:w?"Saving...":"Save Business Info"}),p&&e.jsx(O,{variant:"outline",onClick:()=>{g(!1),f({businessName:t.businessName||"",businessDescription:t.businessDescription||"",businessType:t.businessType||"",businessLicenseNumber:t.businessLicenseNumber||""})},className:"px-4",children:"Cancel"})]}):e.jsx(O,{onClick:()=>g(!0),variant:"outline",className:"flex-1",children:"Edit Business Info"})})]}),e.jsxs("div",{className:"border-t pt-6",children:[e.jsx("h4",{className:"font-medium mb-4",children:"Business License Document *"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Upload your business registration or license document to complete your business verification. This is mandatory for business account verification."}),!i.businessLicense&&!h&&e.jsxs("div",{className:"border-2 border-dashed border-muted rounded-lg p-6 text-center",children:[e.jsx(ui,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),e.jsx("p",{className:"text-sm font-medium mb-2",children:"Upload Business Registration"}),e.jsx("p",{className:"text-xs text-muted-foreground mb-4",children:"Business License or Registration • JPG, PNG up to 10MB"}),e.jsx("input",{type:"file",accept:"image/*",className:"hidden",id:"business-detail-upload",onChange:I=>ne(I,"businessLicense")}),e.jsx(O,{variant:"outline",size:"sm",asChild:!0,children:e.jsx("label",{htmlFor:"business-detail-upload",className:"cursor-pointer",children:"Choose File"})})]}),i.businessLicense&&e.jsx("div",{className:"bg-primary/5 border border-primary/20 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ui,{className:"w-5 h-5 text-primary"}),e.jsx("div",{children:e.jsx("button",{onClick:()=>window.open(i.businessLicense.url,"_blank"),className:"text-sm font-medium text-primary hover:text-primary/80 hover:underline transition-colors text-left",children:i.businessLicense.name})})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[t.verificationStatus!=="under_review"&&!t.verified&&!h&&e.jsx(O,{variant:"ghost",size:"sm",onClick:()=>U("businessLicense"),className:"text-muted-foreground hover:text-foreground hover:bg-muted",children:e.jsx(cs,{className:"w-4 h-4"})}),e.jsx(Ee,{variant:"secondary",className:"bg-primary/10 text-primary",children:"Uploaded"})]})]})})]})]})]})}),e.jsx("div",{className:"flex justify-start",children:e.jsxs(O,{variant:"ghost",size:"sm",onClick:()=>q(!1),className:"px-3 py-2",children:[e.jsx(ls,{className:"w-4 h-4 mr-2"}),"Back to Overview"]})})]}):e.jsxs("div",{className:"max-w-2xl mx-auto space-y-4 md:space-y-6 pb-20",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsx("h1",{className:"text-xl font-semibold",children:"AgriLink Verification"})}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Complete your verification in ",Q?"4":"3"," steps to build trust and credibility"]}),e.jsx("div",{className:"w-full bg-muted rounded-full h-2 mt-4",children:e.jsx("div",{className:"bg-primary h-2 rounded-full transition-all duration-500",style:{width:`${he()}%`}})}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[he(),"% Complete"]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(re,{className:(t.phoneVerified,"bg-primary/5 border-primary/20"),children:e.jsx(ie,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0 ${t.phoneVerified?"bg-primary":"bg-primary/10 border-2 border-primary/40"}`,children:t.phoneVerified?e.jsx(He,{className:"w-5 h-5 text-white"}):e.jsx(Cr,{className:"w-5 h-5 text-primary"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:`font-medium truncate ${t.phoneVerified?"text-primary":"text-primary/90"}`,children:"Phone Verification"}),e.jsx("p",{className:`text-sm truncate ${t.phoneVerified?"text-primary/80":"text-primary"}`,children:t.phoneVerified?"Phone number verified":"Verify your phone number"})]})]}),e.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[e.jsx(Ee,{variant:"secondary",className:t.phoneVerified?"bg-green-100 text-green-700 border-green-200":"bg-red-100 text-red-700 border-red-200",children:t.phoneVerified?"Complete":"Required"}),e.jsx(O,{variant:"ghost",size:"sm",onClick:()=>C(!0),className:`p-1 h-8 w-8 ${t.phoneVerified,"text-primary hover:bg-primary/10"}`,children:e.jsx(ho,{className:"w-4 h-4"})})]})]})})}),e.jsx(re,{className:(t.verified||Z().isComplete,"bg-primary/5 border-primary/20"),children:e.jsx(ie,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0 ${t.verified||Z().isComplete?"bg-primary":"bg-primary/10 border-2 border-primary/40"}`,children:t.verified?e.jsx(He,{className:"w-5 h-5 text-white"}):Z().isComplete?e.jsx(He,{className:"w-5 h-5 text-white"}):e.jsx(er,{className:"w-5 h-5 text-primary"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:`font-medium truncate ${t.verified||Z().isComplete?"text-primary":"text-primary/90"}`,children:"Identity Documents"}),e.jsx("p",{className:`text-sm truncate ${t.verified||Z().isComplete?"text-primary/80":"text-primary"}`,children:t.verified?"Documents verified":Z().isComplete?"Documents uploaded":"Upload identity documents"})]})]}),e.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[e.jsx(Ee,{variant:"secondary",className:t.verified||Z().isComplete?"bg-green-100 text-green-700 border-green-200":"bg-red-100 text-red-700 border-red-200",children:t.verified||Z().isComplete?"Complete":"Required"}),e.jsx(O,{variant:"ghost",size:"sm",onClick:()=>J(!0),className:`p-1 h-8 w-8 ${t.verified||Z().isComplete,"text-primary hover:bg-primary/10"}`,children:e.jsx(ho,{className:"w-4 h-4"})})]})]})})}),Q&&(()=>{const I=t.businessName&&t.businessLicenseNumber,V=i.businessLicense||t.verificationDocuments?.businessLicense&&t.verificationDocuments.businessLicense!=="pending",D=I&&V;return e.jsx(re,{className:"bg-primary/5 border-primary/20",children:e.jsx(ie,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0 ${D?"bg-primary":"bg-primary/10 border-2 border-primary/40"}`,children:D?e.jsx(He,{className:"w-5 h-5 text-white"}):e.jsx(ui,{className:"w-5 h-5 text-primary"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:`font-medium truncate ${D?"text-primary":"text-primary/90"}`,children:"Business Details"}),e.jsx("p",{className:`text-sm truncate ${D?"text-primary/80":"text-primary"}`,children:D?"Business information & license completed":I?"Business license needed":"Complete business information"})]})]}),e.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[e.jsx(Ee,{variant:"secondary",className:D?"bg-green-100 text-green-700 border-green-200":"bg-red-100 text-red-700 border-red-200",children:D?"Complete":"Required"}),e.jsx(O,{variant:"ghost",size:"sm",onClick:()=>q(!0),className:"p-1 h-8 w-8 text-primary hover:bg-primary/10",children:e.jsx(ho,{className:"w-4 h-4"})})]})]})})})})(),t.verified?e.jsx(re,{className:"bg-emerald-50 border-emerald-200",children:e.jsx(ie,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-emerald-600 flex items-center justify-center flex-shrink-0",children:e.jsx(He,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-medium text-emerald-700 truncate",children:"AgriLink Verification"}),e.jsx("p",{className:"text-sm text-emerald-600 truncate",children:"Your account is fully verified!"}),t.agriLinkVerificationDate&&e.jsxs("p",{className:"text-xs text-emerald-600 mt-1 truncate",children:["on ",new Date(t.agriLinkVerificationDate).toLocaleDateString()]})]})]}),e.jsx(Ee,{variant:"secondary",className:"bg-emerald-100 text-emerald-700 border-emerald-200 flex-shrink-0",children:"Verified"})]})})}):h?e.jsx(re,{className:"bg-blue-50 border-blue-200",children:e.jsx(ie,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-blue-600 flex items-center justify-center flex-shrink-0",children:e.jsx(dt,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-medium text-blue-800 truncate",children:"AgriLink Verification"}),e.jsx("p",{className:"text-sm text-blue-700 truncate",children:"Verification submitted for review"})]})]}),e.jsx("div",{className:"flex items-center gap-2 flex-shrink-0",children:e.jsx(O,{size:"sm",disabled:!0,variant:"secondary",className:"text-xs px-3 py-2 bg-blue-100 text-blue-700 border-blue-200",children:"Verification Requested"})})]})})}):e.jsx(re,{className:"bg-primary/5 border-primary/20",children:e.jsx(ie,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-primary/10 border-2 border-primary/40 flex items-center justify-center flex-shrink-0",children:e.jsx(dt,{className:"w-5 h-5 text-primary"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-medium text-primary/90 truncate",children:"AgriLink Verification"}),e.jsx("p",{className:"text-sm text-primary truncate",children:"Complete all steps to get verified"})]})]}),e.jsx("div",{className:"flex items-center gap-2 flex-shrink-0",children:(()=>{if(t.phoneVerified&&i.idCard&&(!Q||i.businessLicense)&&!h)return e.jsx(O,{size:"sm",onClick:M,disabled:w,className:"text-xs px-3 py-2",children:w?"Processing...":"Request Verification"});{const V=[];t.phoneVerified||V.push("phone verification"),i.idCard||V.push("ID documents"),Q&&!i.businessLicense&&V.push("business license");const D=V.length>0?`Complete ${V.join(", ")} first`:"Complete required steps above";return e.jsx(O,{size:"sm",disabled:!0,variant:"outline",className:"text-xs px-3 py-2 opacity-60 cursor-not-allowed",title:D,children:"Request Verification"})}})()})]})})}),t.verified&&e.jsx("p",{className:"text-sm text-emerald-600",children:"Congratulations! Your AgriLink verification is complete. You now have enhanced buyer trust and credibility."}),j&&e.jsx("p",{className:"text-sm text-blue-700",children:"AgriLink verification requested successfully! We will review your documents within 1-2 business days and notify you of the outcome."}),e.jsx("div",{className:"mt-8 pt-6",children:e.jsxs(O,{variant:"ghost",size:"sm",onClick:s,className:"px-3 py-2",children:[e.jsx(ho,{className:"w-4 h-4 mr-2 rotate-180"}),"Back to Profile"]})})]})]})}function jP(t,s=5e5){return new Promise((n,i)=>{const o=document.createElement("canvas"),l=o.getContext("2d"),d=new Image;d.onload=()=>{let{width:u,height:f}=d;const p=u/f,g=400;if(u>f?(u=Math.min(u,g),f=u/p):(f=Math.min(f,g),u=f*p),o.width=u,o.height=f,!l){i(new Error("Failed to get canvas context"));return}l.drawImage(d,0,0,u,f);let h=.8,y=o.toDataURL("image/jpeg",h);for(;y.length>s&&h>.1;)h-=.1,y=o.toDataURL("image/jpeg",h);y.length>s&&(u*=.8,f*=.8,o.width=u,o.height=f,l.drawImage(d,0,0,u,f),y=o.toDataURL("image/jpeg",.6)),n(y)},d.onerror=()=>i(new Error("Failed to load image")),d.src=URL.createObjectURL(t)})}function NP(){let t=0;const s=10*1024*1024;try{for(const n in localStorage)localStorage.hasOwnProperty(n)&&(t+=localStorage[n].length+n.length)}catch(n){console.warn("Could not calculate localStorage usage:",n)}return{used:t,available:s-t,total:s}}function av(t,s){try{const n=s.length+t.length;let i=0;const o=10*1024*1024;for(const u in localStorage)localStorage.hasOwnProperty(u)&&(i+=localStorage[u].length+u.length);const l=o-i;console.log("🔍 Storage check:",{key:t,itemSize:Math.round(n/1024)+"KB",available:Math.round(l/1024)+"KB",used:Math.round(i/1024)+"KB",total:Math.round(o/1024)+"KB"});const d=512*1024;if(n>l-d){const u=(i+n)/o*100;return{success:!1,error:`Storage nearly full (${u.toFixed(1)}%). Please clean up browser data or try a smaller image.`,details:{itemSize:n,available:l,wouldUse:u}}}return localStorage.setItem(t,s),console.log("✅ Storage save successful for key:",t),{success:!0}}catch(n){return console.error("❌ Storage save failed:",n),n instanceof DOMException&&n.code===22?{success:!1,error:"Browser storage limit exceeded. Please clear app data in Settings or use a smaller image.",details:{errorCode:22,errorType:"QuotaExceededError"}}:{success:!1,error:"Failed to save data: "+(n instanceof Error?n.message:"Unknown error"),details:{error:n}}}}function SP(){let t=0;const s=[];try{console.log("🧹 Starting aggressive cleanup...");const n=Object.keys(localStorage),i=[/^temp-/,/^cache-/,/^old-/,/^debug-/,/^test-/];n.forEach(l=>{if(i.some(d=>d.test(l)))try{localStorage.removeItem(l),t++,console.log(`🗑️ Removed temporary key: ${l}`)}catch(d){s.push(`Failed to remove ${l}: ${d}`)}});try{const l=localStorage.getItem("agriconnect-myanmar-users");if(l){const d=JSON.parse(l);let u=!1;d.forEach(f=>{f.profileImage&&f.profileImage.length>200&&(delete f.profileImage,u=!0,console.log(`🖼️ Removed large profile image for user: ${f.email}`)),f.storefrontImage&&(delete f.storefrontImage,u=!0,console.log(`🖼️ Removed storefront image for user: ${f.email}`)),f.businessDescription&&f.businessDescription.length>500&&(f.businessDescription=f.businessDescription.substring(0,500)+"...",u=!0)}),u&&(av("agriconnect-myanmar-users",JSON.stringify(d)).success?(console.log("✅ Compacted user data successfully"),t++):s.push("Failed to save compacted user data"))}}catch(l){s.push(`Failed to compact user data: ${l}`)}try{const l=localStorage.getItem("agriconnect-myanmar-product-overrides");if(l){const d=JSON.parse(l);let u=!1;Object.keys(d).forEach(f=>{const p=d[f];p.image&&p.image.length>1e3&&(delete p.image,u=!0,console.log(`🖼️ Removed large product image for: ${f}`))}),u&&av("agriconnect-myanmar-product-overrides",JSON.stringify(d)).success&&(console.log("✅ Cleaned product overrides"),t++)}}catch(l){s.push(`Failed to clean product overrides: ${l}`)}NP().available<1024*1024&&(console.log("🚨 Emergency cleanup: removing non-essential data"),["agriconnect-myanmar-local-products","agriconnect-myanmar-user-products","agriconnect-myanmar-messages","agriconnect-myanmar-conversations"].forEach(d=>{if(localStorage.getItem(d))try{localStorage.removeItem(d),t++,console.log(`🚨 Emergency: removed ${d}`)}catch(u){s.push(`Failed to remove ${d}: ${u}`)}}))}catch(n){s.push(`General cleanup error: ${n}`)}return console.log(`🧹 Cleanup completed: ${t} items cleaned, ${s.length} errors`),{cleaned:t,errors:s}}function kP(){const t={users:0,products:0,images:0,other:0};try{for(const s in localStorage)if(localStorage.hasOwnProperty(s)){const n=localStorage[s].length+s.length;s.includes("users")?t.users+=n:s.includes("products")?t.products+=n:s.includes("image")||localStorage[s].startsWith("data:image/")?t.images+=n:t.other+=n}}catch(s){console.warn("Could not analyze storage usage:",s)}return t}function ac(t){if(t===0)return"0 Bytes";const s=1024,n=["Bytes","KB","MB","GB"],i=Math.floor(Math.log(t)/Math.log(s));return parseFloat((t/Math.pow(s,i)).toFixed(2))+" "+n[i]}var $f="Progress",Ff=100,[CP]=Ns($f),[_P,EP]=CP($f),xw=v.forwardRef((t,s)=>{const{__scopeProgress:n,value:i=null,max:o,getValueLabel:l=TP,...d}=t;(o||o===0)&&!iv(o)&&console.error(PP(`${o}`,"Progress"));const u=iv(o)?o:Ff;i!==null&&!ov(i,u)&&console.error(IP(`${i}`,"Progress"));const f=ov(i,u)?i:null,p=_c(f)?l(f,u):void 0;return e.jsx(_P,{scope:n,value:f,max:u,children:e.jsx(Le.div,{"aria-valuemax":u,"aria-valuemin":0,"aria-valuenow":_c(f)?f:void 0,"aria-valuetext":p,role:"progressbar","data-state":ww(f,u),"data-value":f??void 0,"data-max":u,...d,ref:s})})});xw.displayName=$f;var vw="ProgressIndicator",yw=v.forwardRef((t,s)=>{const{__scopeProgress:n,...i}=t,o=EP(vw,n);return e.jsx(Le.div,{"data-state":ww(o.value,o.max),"data-value":o.value??void 0,"data-max":o.max,...i,ref:s})});yw.displayName=vw;function TP(t,s){return`${Math.round(t/s*100)}%`}function ww(t,s){return t==null?"indeterminate":t===s?"complete":"loading"}function _c(t){return typeof t=="number"}function iv(t){return _c(t)&&!isNaN(t)&&t>0}function ov(t,s){return _c(t)&&!isNaN(t)&&t<=s&&t>=0}function PP(t,s){return`Invalid prop \`max\` of value \`${t}\` supplied to \`${s}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${Ff}\`.`}function IP(t,s){return`Invalid prop \`value\` of value \`${t}\` supplied to \`${s}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${Ff} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var AP=xw,RP=yw;function Ym({className:t,value:s,...n}){return e.jsx(AP,{"data-slot":"progress",className:Ve("bg-primary/20 relative h-2 w-full overflow-hidden rounded-full",t),...n,children:e.jsx(RP,{"data-slot":"progress-indicator",className:"bg-primary h-full w-full flex-1 transition-all",style:{transform:`translateX(-${100-(s||0)}%)`}})})}function pm(t){if(t===0)return"0 B";const s=1024,n=["B","KB","MB","GB"],i=Math.floor(Math.log(t)/Math.log(s));return parseFloat((t/Math.pow(s,i)).toFixed(1))+" "+n[i]}function DP(){try{let t=0;const s=10*1024*1024;for(const o in localStorage)localStorage.hasOwnProperty(o)&&(t+=localStorage[o].length+o.length);const n=s-t,i=Math.round(t/s*100*10)/10;return{used:t,total:s,available:n,usagePercentage:i,formattedUsed:pm(t),formattedTotal:pm(s),formattedAvailable:pm(n)}}catch(t){return console.warn("Could not get storage summary:",t),{used:0,total:10*1024*1024,available:10*1024*1024,usagePercentage:0,formattedUsed:"0 B",formattedTotal:"10 MB",formattedAvailable:"10 MB"}}}function MP({onClose:t,onStorageCleared:s}){const[n,i]=v.useState(!1),[o,l]=v.useState(null),d=DP(),u=kP(),f=d.usagePercentage,p=async()=>{i(!0);try{await new Promise(y=>setTimeout(y,500));const h=SP();l(h),s&&s()}catch(h){console.error("Cleanup failed:",h),l({cleaned:0,errors:["Cleanup failed: "+h]})}finally{i(!1)}},g=()=>{if(confirm("⚠️ This will clear ALL app data including your profile, products, and messages. Are you sure?"))try{["agriconnect-myanmar-users","agriconnect-myanmar-current-user","agriconnect-verification-requests","agriconnect-myanmar-user-products","agriconnect-myanmar-product-overrides","agriconnect-myanmar-deleted-products","agriconnect-myanmar-messages","agriconnect-myanmar-conversations","agriconnect-myanmar-local-products"].forEach(y=>{localStorage.removeItem(y)}),alert("✅ All app data has been cleared. The page will now reload."),s&&s(),window.location.reload()}catch(h){alert("Failed to clear data: "+h)}};return e.jsx("div",{className:"max-w-2xl mx-auto space-y-6",children:e.jsxs(re,{children:[e.jsxs(Ie,{children:[e.jsxs(Oe,{className:"flex items-center gap-2",children:[e.jsx(Jr,{className:"w-5 h-5"}),"Storage Manager"]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Manage your browser storage space for AgriLink"})]}),e.jsxs(ie,{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"Storage Used"}),e.jsxs("span",{children:[d.formattedUsed," / ",d.formattedTotal]})]}),e.jsx(Ym,{value:f,className:"h-2"}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:[f.toFixed(1),"% of browser storage used"]})]}),f>80&&e.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-amber-800",children:[e.jsx(zs,{className:"w-4 h-4"}),e.jsx("span",{className:"font-medium text-sm",children:"Storage Nearly Full"})]}),e.jsxs("p",{className:"text-xs text-amber-700 mt-1",children:["Your browser storage is ",f.toFixed(1),"% full. Consider cleaning up data to avoid issues."]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-medium text-sm",children:"Storage Usage by Category"}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"User Data"}),e.jsx("span",{children:ac(u.users)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Products"}),e.jsx("span",{children:ac(u.products)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Images"}),e.jsx("span",{children:ac(u.images)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Other"}),e.jsx("span",{children:ac(u.other)})]})]})]}),o&&e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-green-800",children:[e.jsx(He,{className:"w-4 h-4"}),e.jsx("span",{className:"font-medium text-sm",children:"Cleanup Complete"})]}),e.jsxs("p",{className:"text-xs text-green-700 mt-1",children:[o.cleaned>0?`Successfully cleaned ${o.cleaned} items. `:"No items needed cleaning. ",o.errors.length>0&&`${o.errors.length} errors occurred.`]}),o.errors.length>0&&e.jsxs("details",{className:"mt-2",children:[e.jsx("summary",{className:"text-xs cursor-pointer",children:"Show errors"}),e.jsx("ul",{className:"text-xs mt-1 pl-4",children:o.errors.map((h,y)=>e.jsx("li",{className:"list-disc",children:h},y))})]})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs(O,{onClick:p,disabled:n,className:"w-full",children:[e.jsx(Tr,{className:"w-4 h-4 mr-2"}),n?"Cleaning up...":"Clean Up Storage"]}),e.jsxs(O,{variant:"destructive",onClick:g,className:"w-full",children:[e.jsx(Jr,{className:"w-4 h-4 mr-2"}),"Clear All App Data"]}),t&&e.jsx(O,{variant:"outline",onClick:t,className:"w-full",children:"Close"})]}),e.jsxs("div",{className:"text-xs text-muted-foreground bg-muted/50 rounded p-3",children:[e.jsx("h5",{className:"font-medium mb-1",children:"Storage Tips:"}),e.jsxs("ul",{className:"space-y-1 list-disc pl-4",children:[e.jsx("li",{children:"Profile images are compressed automatically to save space"}),e.jsx("li",{children:"Clean up regularly if you upload many large images"}),e.jsx("li",{children:"Clearing app data will log you out and remove all local data"}),e.jsx("li",{children:"You will need to create a new account after clearing all data"})]})]})]})]})})}function OP({user:t,onBack:s,onEditProfile:n,onShowVerification:i,onUpdate:o,onViewStorefront:l}){if(!t)return e.jsx("div",{className:"max-w-6xl mx-auto p-4",children:e.jsxs("div",{className:"text-center py-8",children:[e.jsx("p",{className:"text-muted-foreground",children:"User data not available"}),e.jsx(O,{onClick:s,className:"mt-4",children:"Go Back"})]})});const[d,u]=v.useState(null),[f,p]=v.useState(!1),[g,h]=v.useState(!1),[y,j]=v.useState(!1),[b,w]=v.useState(()=>t?{name:t.name||"",phone:t.phone||"",location:t.location||"",profileImage:t.profileImage||"",region:t.region||"",businessName:t.businessName||"",facebook:t.facebook||"",instagram:t.instagram||"",website:t.website||"",telegram:t.telegram||""}:{name:"",phone:"",location:"",profileImage:"",region:"",businessName:"",facebook:"",instagram:"",website:"",telegram:""}),S=v.useRef(null),k=v.useRef(null);v.useEffect(()=>{if(!t)return;if(!k.current||t.name!==k.current.name||t.phone!==k.current.phone||t.location!==k.current.location||t.profileImage!==k.current.profileImage||t.region!==k.current.region||t.businessName!==k.current.businessName||t.facebook!==k.current.facebook||t.instagram!==k.current.instagram||t.website!==k.current.website||t.telegram!==k.current.telegram){console.log("Profile: User data changed, updating form data");const q={name:t.name||"",phone:t.phone||"",location:t.location||"",profileImage:t.profileImage||"",region:t.region||"",businessName:t.businessName||"",facebook:t.facebook||"",instagram:t.instagram||"",website:t.website||"",telegram:t.telegram||""};w(q),k.current=t}},[t]);const C=async(z,q)=>{try{w(Q=>({...Q,[z]:q})),u(null),o&&await o({[z]:q})}catch(Q){console.error("Failed to save:",Q),w(Z=>({...Z,[z]:b[z]}))}},E=async z=>{if(!z.type.startsWith("image/")){alert("Please select a valid image file");return}if(z.size>10*1024*1024){alert("Image size must be less than 10MB");return}try{p(!1);const q=await jP(z,5e5);if(console.log("Image compressed:",{originalSize:z.size,compressedSize:q.length,compressionRatio:(z.size/q.length).toFixed(2)}),o)try{await o({profileImage:q}),w(Q=>({...Q,profileImage:q})),console.log("✅ Profile image updated successfully")}catch(Q){console.error("Failed to save profile image:",Q);let Z="Failed to save profile image. ";Q instanceof Error?Q.message.includes("Storage quota exceeded")||Q.message.includes("storage is full")?(Z+="Your browser storage is full. Please clear browser data or try a smaller image.",j(!0)):Z+=Q.message:(Z+="Please try with a smaller image or clear browser data.",j(!0)),alert(Z)}else w(Q=>({...Q,profileImage:q}))}catch(q){console.error("Failed to process image:",q),alert("Failed to process image. Please try a different image."),p(!1)}},P=async()=>{try{p(!1),o?(await o({profileImage:""}),console.log("✅ Profile image removed successfully")):w(z=>({...z,profileImage:""}))}catch(z){console.error("Failed to remove profile image:",z)}},T=(z,q)=>{u({field:z,value:q})},A=()=>{u(null),p(!1)},R=()=>{if(!b.region)return[];const z=jr[b.region];return z?z.cities:[]},$=async z=>{try{const q={region:z,location:""};w(Q=>({...Q,...q})),u(null),o&&await o(q)}catch(q){console.error("Failed to save region:",q),w(Q=>({...Q,region:b.region,location:b.location}))}},J=async z=>{try{w(q=>({...q,location:z})),u(null),o&&await o({location:z})}catch(q){console.error("Failed to save location:",q),w(Q=>({...Q,location:b.location}))}};return e.jsxs("div",{className:"space-y-6",children:[g&&e.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:e.jsx("div",{className:"bg-background rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:e.jsx(MP,{onClose:()=>h(!1),onStorageCleared:()=>{j(!1),h(!1)}})})}),y&&e.jsx("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(zs,{className:"w-5 h-5 text-amber-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-amber-800",children:"Storage Nearly Full"}),e.jsx("p",{className:"text-sm text-amber-700",children:"Your browser storage may be getting full. This can cause issues saving profile changes."})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(O,{size:"sm",variant:"outline",onClick:()=>h(!0),className:"border-amber-300 text-amber-700 hover:bg-amber-100",children:[e.jsx(Jr,{className:"w-4 h-4 mr-2"}),"Manage Storage"]}),e.jsx(O,{size:"sm",variant:"ghost",onClick:()=>j(!1),className:"text-amber-700",children:e.jsx(cs,{className:"w-4 h-4"})})]})]})}),e.jsxs("div",{className:"space-y-4 mb-8",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(O,{variant:"ghost",onClick:s,className:"h-9 px-3 -ml-3",children:[e.jsx(ls,{className:"w-4 h-4 mr-2"}),"Back"]}),d||f?e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs(O,{variant:"outline",size:"sm",onClick:A,children:[e.jsx(cs,{className:"w-4 h-4 mr-2"}),"Cancel"]})}):null]}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl md:text-3xl font-bold",children:"My Profile"}),e.jsx("p",{className:"text-muted-foreground",children:"View and manage your account information"})]})]}),e.jsxs("div",{className:"grid lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-1",children:[e.jsx(re,{className:"overflow-hidden border-primary/30",children:e.jsxs(Ie,{className:"text-center pb-6",children:[e.jsx("div",{className:"flex justify-center mb-6",children:e.jsxs("div",{className:"relative group",children:[b.profileImage?e.jsx(ko,{src:b.profileImage,alt:`${b.name}'s profile picture`,className:"w-28 h-28 rounded-full object-cover border-4 border-border shadow-lg"}):e.jsx("div",{className:"w-28 h-28 rounded-full border-4 border-border shadow-lg bg-muted flex items-center justify-center",children:e.jsx("div",{className:"text-center",children:e.jsx("div",{className:"w-12 h-12 bg-primary/10 rounded-full flex items-center justify-center mx-auto",children:e.jsx($t,{className:"w-6 h-6 text-primary"})})})}),e.jsx("div",{className:"absolute inset-0 bg-black/40 rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity cursor-pointer",onClick:()=>p(!0),children:e.jsx(jo,{className:"w-6 h-6 text-white"})}),t.verified&&e.jsx("div",{className:"absolute -bottom-1 -right-1 w-8 h-8 bg-green-500 rounded-full flex items-center justify-center border-2 border-card",children:e.jsx(He,{className:"w-5 h-5 text-white"})})]})}),e.jsx("input",{ref:S,type:"file",accept:"image/*",onChange:z=>{const q=z.target.files?.[0];q&&E(q)},className:"hidden"}),f&&e.jsxs("div",{className:"mb-4 p-4 bg-muted/50 rounded-lg",children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:"Update your profile picture"}),e.jsxs("div",{className:"flex gap-2 justify-center flex-wrap",children:[e.jsxs(O,{size:"sm",onClick:()=>S.current?.click(),children:[e.jsx(jo,{className:"w-4 h-4 mr-2"}),"Choose Photo"]}),t.profileImage&&b.profileImage&&e.jsxs(O,{size:"sm",variant:"outline",onClick:P,className:"text-destructive hover:text-destructive",children:[e.jsx(Tr,{className:"w-4 h-4 mr-2"}),"Remove Photo"]}),e.jsx(O,{size:"sm",variant:"outline",onClick:()=>p(!1),children:"Cancel"})]})]}),e.jsxs("div",{className:"space-y-3 mb-6",children:[d?.field==="name"?e.jsxs("div",{className:"space-y-2",children:[e.jsx(Ue,{value:d.value,onChange:z=>u({...d,value:z.target.value}),className:"text-center text-xl font-bold",autoFocus:!0,onKeyDown:z=>{z.key==="Enter"&&C("name",d.value),z.key==="Escape"&&A()}}),e.jsxs("div",{className:"flex justify-center gap-2",children:[e.jsxs(O,{size:"sm",onClick:()=>C("name",d.value),children:[e.jsx(Dt,{className:"w-4 h-4 mr-1"}),"Save"]}),e.jsx(O,{size:"sm",variant:"outline",onClick:A,children:"Cancel"})]})]}):e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(Oe,{className:"text-2xl font-bold",children:b.name}),e.jsx(O,{size:"sm",variant:"ghost",onClick:()=>T("name",b.name),className:"h-8 w-8 p-0 opacity-60 hover:opacity-100",children:e.jsx(ht,{className:"w-4 h-4"})})]}),e.jsx("div",{className:"flex justify-center gap-2 flex-wrap",children:e.jsx(Ni,{userType:t.userType,accountType:gi(t),verificationLevel:Qr(t),size:"md"})})]}),e.jsx("div",{className:"space-y-3",children:e.jsxs(O,{variant:"outline",className:`w-full h-11 font-medium ${(()=>{switch(Qr(t)){case"business-verified":case"id-verified":return"text-green-600 border-green-300 hover:bg-green-50 hover:text-green-700 dark:text-green-400 dark:border-green-700 dark:hover:bg-green-900/20";case"under-review":return"text-blue-600 border-blue-300 hover:bg-blue-50 hover:text-blue-700 dark:text-blue-400 dark:border-blue-700 dark:hover:bg-blue-900/20";case"phone-verified":return"text-yellow-600 border-yellow-300 hover:bg-yellow-50 hover:text-yellow-700 dark:text-yellow-400 dark:border-yellow-700 dark:hover:bg-yellow-900/20";default:return"text-red-600 border-red-300 hover:bg-red-50 hover:text-red-700 dark:text-red-400 dark:border-red-700 dark:hover:bg-red-900/20"}})()}`,onClick:()=>i(1),children:[(()=>{switch(Qr(t)){case"business-verified":case"id-verified":return e.jsx(dt,{className:"w-4 h-4 mr-2 text-green-600 dark:text-green-400"});case"under-review":return e.jsx(dt,{className:"w-4 h-4 mr-2 text-blue-600 dark:text-blue-400"});case"phone-verified":return e.jsx(dt,{className:"w-4 h-4 mr-2 text-yellow-600 dark:text-yellow-400"});default:return e.jsx(dt,{className:"w-4 h-4 mr-2 text-red-600 dark:text-red-400"})}})(),"View Verification Details"]})})]})}),e.jsxs(re,{className:"mt-6 border-primary/30",children:[e.jsx(Ie,{children:e.jsx(Oe,{className:"text-lg",children:"Account Stats"})}),e.jsxs(ie,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ba,{className:"w-4 h-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm",children:"Member Since"})]}),e.jsx("span",{className:"text-sm font-medium",children:Dc(t.joinedDate)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Yr,{className:"w-4 h-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm",children:"Rating"})]}),e.jsx("span",{className:"text-sm font-medium",children:t.rating>0?`${t.rating}/5 (${t.totalReviews} reviews)`:"No ratings yet"})]})]})]})]}),e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs(re,{className:"border-primary/30",children:[e.jsx(Ie,{children:e.jsxs(Oe,{className:"flex items-center gap-2",children:[e.jsx($t,{className:"w-5 h-5"}),"Contact Information"]})}),e.jsx(ie,{className:"space-y-6",children:e.jsxs("div",{className:"grid md:grid-cols-2 gap-6 md:gap-x-10 md:gap-y-8",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[e.jsx(pi,{className:"w-4 h-4"}),"Email Address"]}),e.jsx("p",{className:"font-medium",children:t.email})]}),(t.userType==="farmer"||t.userType==="trader")&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[e.jsx(_r,{className:"w-4 h-4"}),t.userType==="farmer"?"Farm Name":"Business Name"]}),d?.field==="businessName"?e.jsxs("div",{className:"space-y-2",children:[e.jsx(Ue,{value:d.value,onChange:z=>u({...d,value:z.target.value}),placeholder:t.userType==="farmer"?"Enter your farm name":"Enter your business name",autoFocus:!0,onKeyDown:z=>{z.key==="Enter"&&C("businessName",d.value),z.key==="Escape"&&A()}}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(O,{size:"sm",onClick:()=>C("businessName",d.value),children:[e.jsx(Dt,{className:"w-4 h-4 mr-1"}),"Save"]}),e.jsx(O,{size:"sm",variant:"outline",onClick:A,children:"Cancel"})]})]}):e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:"font-medium flex-1",children:b.businessName||`${b.name}'s ${t.userType==="farmer"?"Farm":"Trading"}`}),e.jsx(O,{size:"sm",variant:"ghost",onClick:()=>T("businessName",b.businessName||""),className:"h-8 w-8 p-0 opacity-60 hover:opacity-100",children:e.jsx(ht,{className:"w-4 h-4"})})]}),!b.businessName&&e.jsxs("p",{className:"text-xs text-muted-foreground",children:['Currently showing as "',b.name,"'s ",t.userType==="farmer"?"Farm":"Trading",'" - Click edit to customize']})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[e.jsx(Cr,{className:"w-4 h-4"}),"Phone Number"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:"font-medium flex-1",children:b.phone||"Add phone number"}),e.jsx(O,{size:"sm",variant:"ghost",onClick:()=>{i(3)},className:"h-8 w-8 p-0 opacity-60 hover:opacity-100",title:b.phone?"Update and verify phone number":"Add and verify phone number",children:e.jsx(ht,{className:"w-4 h-4"})})]}),t.phoneVerified&&e.jsxs(Ee,{variant:"outline",className:"text-xs text-green-600 border-green-200",children:[e.jsx(He,{className:"w-3 h-3 mr-1"}),"Verified"]}),!t.phoneVerified&&b.phone&&e.jsxs(Ee,{variant:"outline",className:"text-xs text-orange-600 border-orange-200",children:[e.jsx(zs,{className:"w-3 h-3 mr-1"}),"Unverified"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[e.jsx(Vt,{className:"w-4 h-4"}),"Location"]}),d?.field==="location"||d?.field==="region"?e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx($e,{className:"text-sm",children:"Region"}),e.jsxs("div",{className:"relative",children:[e.jsx(Vt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground w-4 h-4 z-10"}),e.jsxs(Yt,{value:b.region,onValueChange:$,children:[e.jsx(Xt,{className:"pl-10",children:e.jsx(Qt,{placeholder:"Select your region"})}),e.jsx(Zt,{className:"max-h-64 overflow-y-auto",children:Object.entries(jr).map(([z,q])=>e.jsx(De,{value:z,children:q.name},z))})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx($e,{className:"text-sm",children:"City/Town"}),e.jsxs("div",{className:"relative",children:[e.jsx(Vt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground w-4 h-4 z-10"}),e.jsxs(Yt,{value:b.location,onValueChange:J,disabled:!b.region,children:[e.jsx(Xt,{className:"pl-10",children:e.jsx(Qt,{placeholder:"Select your city/town"})}),e.jsx(Zt,{className:"max-h-64 overflow-y-auto",children:R().map(z=>e.jsx(De,{value:z,children:z},z))})]})]}),!b.region&&e.jsx("p",{className:"text-xs text-muted-foreground",children:"Please select a region first"})]}),e.jsx("div",{className:"flex gap-2",children:e.jsx(O,{size:"sm",variant:"outline",onClick:A,children:"Done"})})]}):e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:"font-medium flex-1",children:(()=>{if(console.log("Profile: Location display debug:",{location:b.location,region:b.region,regionData:b.region?jr[b.region]:null}),b.location&&!b.region){const z=Object.entries(jr).find(([q,Q])=>Q.cities.includes(b.location));if(z){console.log("Auto-detected region for",b.location,":",z[0]);const q={region:z[0]};return w(Q=>({...Q,...q})),o&&o(q).catch(Q=>{console.error("Failed to auto-save region:",Q),w(Z=>({...Z,region:""}))}),`${b.location}, ${z[1].name}`}}return b.location?`${b.location}${b.region?`, ${jr[b.region]?.name||b.region}`:""}`:"Add location"})()}),e.jsx(O,{size:"sm",variant:"ghost",onClick:()=>{u({field:"location",value:b.location})},className:"h-8 w-8 p-0 opacity-60 hover:opacity-100",children:e.jsx(ht,{className:"w-4 h-4"})})]})]})]})})]}),(t.userType==="farmer"||t.userType==="trader")&&e.jsxs(re,{className:"border-primary/30",children:[e.jsxs(Ie,{children:[e.jsxs(Oe,{className:"flex items-center gap-2",children:[e.jsx(fc,{className:"w-5 h-5"}),"Social Media & Online Presence"]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Add your social media profiles to build trust and connect with customers"})]}),e.jsxs(ie,{className:"space-y-6",children:[e.jsxs("div",{className:"grid md:grid-cols-2 gap-6 md:gap-x-10 md:gap-y-8",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[e.jsx(Nm,{className:"w-4 h-4"}),"Facebook Page/Profile"]}),d?.field==="facebook"?e.jsxs("div",{className:"space-y-2",children:[e.jsx(Ue,{value:d.value,onChange:z=>u({...d,value:z.target.value}),placeholder:"https://facebook.com/yourpage or facebook.com/yourpage",autoFocus:!0,onKeyDown:z=>{z.key==="Enter"&&C("facebook",d.value),z.key==="Escape"&&A()}}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(O,{size:"sm",onClick:()=>C("facebook",d.value),children:[e.jsx(Dt,{className:"w-4 h-4 mr-1"}),"Save"]}),e.jsx(O,{size:"sm",variant:"outline",onClick:A,children:"Cancel"})]})]}):e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:"font-medium flex-1",children:b.facebook||"Add Facebook page/profile"}),e.jsx(O,{size:"sm",variant:"ghost",onClick:()=>T("facebook",b.facebook||""),className:"h-8 w-8 p-0 opacity-60 hover:opacity-100",children:e.jsx(ht,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[e.jsx(km,{className:"w-4 h-4"}),"Instagram Profile"]}),d?.field==="instagram"?e.jsxs("div",{className:"space-y-2",children:[e.jsx(Ue,{value:d.value,onChange:z=>u({...d,value:z.target.value}),placeholder:"https://instagram.com/yourprofile or instagram.com/yourprofile",autoFocus:!0,onKeyDown:z=>{z.key==="Enter"&&C("instagram",d.value),z.key==="Escape"&&A()}}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(O,{size:"sm",onClick:()=>C("instagram",d.value),children:[e.jsx(Dt,{className:"w-4 h-4 mr-1"}),"Save"]}),e.jsx(O,{size:"sm",variant:"outline",onClick:A,children:"Cancel"})]})]}):e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:"font-medium flex-1",children:b.instagram||"Add Instagram profile"}),e.jsx(O,{size:"sm",variant:"ghost",onClick:()=>T("instagram",b.instagram||""),className:"h-8 w-8 p-0 opacity-60 hover:opacity-100",children:e.jsx(ht,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[e.jsx(fc,{className:"w-4 h-4"}),"Business Website"]}),d?.field==="website"?e.jsxs("div",{className:"space-y-2",children:[e.jsx(Ue,{value:d.value,onChange:z=>u({...d,value:z.target.value}),placeholder:"https://yourwebsite.com",autoFocus:!0,onKeyDown:z=>{z.key==="Enter"&&C("website",d.value),z.key==="Escape"&&A()}}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(O,{size:"sm",onClick:()=>C("website",d.value),children:[e.jsx(Dt,{className:"w-4 h-4 mr-1"}),"Save"]}),e.jsx(O,{size:"sm",variant:"outline",onClick:A,children:"Cancel"})]})]}):e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:"font-medium flex-1",children:b.website||"Add business website"}),e.jsx(O,{size:"sm",variant:"ghost",onClick:()=>T("website",b.website||""),className:"h-8 w-8 p-0 opacity-60 hover:opacity-100",children:e.jsx(ht,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[e.jsx(Rn,{className:"w-4 h-4"}),"Telegram"]}),d?.field==="telegram"?e.jsxs("div",{className:"space-y-2",children:[e.jsx(Ue,{value:d.value,onChange:z=>u({...d,value:z.target.value}),placeholder:"@yourusername or t.me/yourusername",autoFocus:!0,onKeyDown:z=>{z.key==="Enter"&&C("telegram",d.value),z.key==="Escape"&&A()}}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(O,{size:"sm",onClick:()=>C("telegram",d.value),children:[e.jsx(Dt,{className:"w-4 h-4 mr-1"}),"Save"]}),e.jsx(O,{size:"sm",variant:"outline",onClick:A,children:"Cancel"})]})]}):e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:"font-medium flex-1",children:b.telegram||"Add Telegram username"}),e.jsx(O,{size:"sm",variant:"ghost",onClick:()=>T("telegram",b.telegram||""),className:"h-8 w-8 p-0 opacity-60 hover:opacity-100",children:e.jsx(ht,{className:"w-4 h-4"})})]})]})]}),e.jsxs("div",{className:"text-xs text-muted-foreground bg-blue-50 border border-blue-200 rounded-lg p-3",children:[e.jsx("strong",{children:"💡 Tip:"})," Adding social media profiles helps customers verify your business and increases trust. Your social links will be displayed on your storefront."]})]})]}),(t.userType==="farmer"||t.userType==="trader")&&e.jsxs(re,{className:"border-primary/30",children:[e.jsx(Ie,{children:e.jsxs(Oe,{className:"flex items-center gap-2",children:[e.jsx(_r,{className:"w-5 h-5"}),"Business Management"]})}),e.jsxs(ie,{className:"space-y-4",children:[e.jsxs("div",{className:"bg-muted/50 rounded-lg p-4 text-center space-y-3",children:[e.jsx("div",{className:"w-12 h-12 bg-primary/10 rounded-full flex items-center justify-center mx-auto",children:e.jsx(_r,{className:"w-6 h-6 text-primary"})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-medium",children:"Manage Your Storefront"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Set up your business description, product categories, and customer information in your dedicated storefront."})]}),e.jsx(O,{onClick:()=>{l&&t?.id&&l(t.id)},className:"w-full",children:"View My Storefront"})]}),e.jsxs("div",{className:"text-xs text-muted-foreground bg-amber-50 border border-amber-200 rounded-lg p-3",children:[e.jsx("strong",{children:"💡 Business Focus:"})," Your profile is for account management. Use your storefront to showcase products, business information, and connect with customers."]})]})]})]})]})]})}const LP=(t,s,n)=>{const i=JSON.parse(localStorage.getItem("agriconnect-myanmar-users")||"[]"),o=JSON.parse(localStorage.getItem("agriconnect-myanmar-local-products")||"[]"),l=i.find(h=>h.id===s),d=o.find(h=>h.id===n);if(!l||!d)return console.error("User or product not found for demo conversation"),null;const u=`conv-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,f={id:u,buyerId:t,sellerId:s,productId:n,status:"active",productName:d.name,buyerName:"You",sellerName:l.businessName||l.name,updatedAt:new Date().toISOString(),unreadCount:0},p=[{id:`msg-${Date.now()}-1`,conversationId:u,senderId:s,senderName:l.businessName||l.name,content:`Hello! I saw you're interested in my ${d.name}. How can I help you today?`,messageType:"text",createdAt:new Date(Date.now()-3e5).toISOString(),status:"sent"},{id:`msg-${Date.now()}-2`,conversationId:u,senderId:t,senderName:"You",content:`Hi! Yes, I'm interested in your ${d.name}. What's the current availability and pricing?`,messageType:"text",createdAt:new Date(Date.now()-24e4).toISOString(),status:"sent"},{id:`msg-${Date.now()}-3`,conversationId:u,senderId:s,senderName:l.businessName||l.name,content:`Great! I have plenty available. The current price is ${d.price?.toLocaleString()} MMK per ${d.unit}. For bulk orders over 50kg, I can offer a 10% discount.`,messageType:"text",createdAt:new Date(Date.now()-18e4).toISOString(),status:"sent"}],g=JSON.parse(localStorage.getItem("agriconnect-myanmar-conversations")||"[]");return g.push(f),localStorage.setItem("agriconnect-myanmar-conversations",JSON.stringify(g)),localStorage.setItem(`agriconnect-myanmar-messages-${u}`,JSON.stringify(p)),console.log(`✅ Created demo conversation between user ${t} and ${l.name} about ${d.name}`),f},$P=t=>{const s=JSON.parse(localStorage.getItem("agriconnect-myanmar-users")||"[]"),n=JSON.parse(localStorage.getItem("agriconnect-myanmar-local-products")||"[]"),i=s.filter(l=>l.id!==t);if(i.length===0||n.length===0){console.log("❌ No other users or products found to create demo conversations");return}const o=Math.min(3,i.length,n.length);for(let l=0;l<o;l++){const d=i[l%i.length],u=n[l%n.length];LP(t,d.id,u.id)}console.log(`✅ Created ${o} demo conversations for user ${t}`)},FP=()=>{try{const t=localStorage.getItem("agriconnect-myanmar-current-user");if(t){const n=JSON.parse(t);if(n&&n.id)return console.log("✅ Retrieved current user from storage:",n.email),n}const s=sessionStorage.getItem("agriconnect-myanmar-current-user");if(s){const n=JSON.parse(s);if(n&&n.id)return console.log("⚠️ Restored user from session storage:",n.email),localStorage.setItem("agriconnect-myanmar-current-user",s),n}return console.log("❌ No valid current user found in storage"),null}catch(t){return console.error("❌ Failed to get current user:",t),null}};function zP({currentUser:t,onBack:s,onStartChat:n}){const[i,o]=v.useState(""),[l,d]=v.useState("all"),[u,f]=v.useState(null),[p,g]=v.useState(!1),[h,y]=v.useState(null),j=v.useMemo(()=>{if(t)return t;const R=FP();return R?(console.log("🔄 Using fallback current user:",R.email),R):(console.warn("⚠️ No current user available for Messages component"),null)},[t]),{conversations:b,messages:w,loading:S,fetchConversations:k,error:C}=Tf(j?.id);v.useEffect(()=>{},[]),v.useEffect(()=>{j?.id?(console.log("🔄 Initializing conversations for user:",j.email),k()):console.log("⚠️ Cannot initialize conversations - no effective current user")},[j?.id,k]),v.useEffect(()=>{if(p){const $=setTimeout(()=>{try{const J={conversations:localStorage.getItem("agriconnect-myanmar-conversations")?.length||0,messageKeys:Object.keys(localStorage).filter(z=>z.startsWith("agriconnect-myanmar-messages-")).length,offers:localStorage.getItem("agriconnect-myanmar-offers")?.length||0,totalStorage:JSON.stringify(localStorage).length};y(J)}catch(J){console.error("Failed to get storage stats:",J),y(null)}},500);return()=>clearTimeout($)}else y(null)},[p]);const E=R=>{const $=new Date(R),z=new Date().getTime()-$.getTime(),q=Math.floor(z/(1e3*60*60)),Q=Math.floor(q/24);return q<1?"Just now":q<24?`${q}h ago`:Q<7?`${Q}d ago`:$.toLocaleDateString()},P=v.useMemo(()=>{if(!b?.length)return console.log("📭 No conversations to transform"),[];const R=JSON.parse(localStorage.getItem("agriconnect-myanmar-users")||"[]"),$=JSON.parse(localStorage.getItem("agriconnect-myanmar-local-products")||"[]");return b.map(J=>{const z=J.buyerId===j?.id?J.sellerId:J.buyerId,q=R.find(ne=>ne.id===z),Q=$.find(ne=>ne.id===J.productId),Z=w[J.id]||[],he=Z[Z.length-1],se=Z.filter(ne=>ne.senderId!==j?.id&&ne.status!=="read").length;return{id:J.id,productId:J.productId,productName:J.productName||Q?.name||"Unknown Product",productImage:Q?.image||"https://images.unsplash.com/photo-1546470427-227c013b2b5f?w=400&h=300&fit=crop",otherParty:{id:z,name:q?.businessName||q?.name||"Unknown User",type:q?.userType||"buyer",location:q?.location||"Unknown",rating:q?.rating||0,verified:q?.verified||!1},lastMessage:he?{content:he.content,timestamp:he.createdAt,isOwn:he.senderId===j?.id}:{content:"No messages yet",timestamp:J.updatedAt,isOwn:!1},unreadCount:se,status:J.status==="active"?"active":"archived"}})},[b?.length,Object.keys(w).length,j?.id]),T=v.useMemo(()=>{let R=P;switch(i&&(R=R.filter($=>$.otherParty.name.toLowerCase().includes(i.toLowerCase())||$.productName.toLowerCase().includes(i.toLowerCase())||$.lastMessage.content.toLowerCase().includes(i.toLowerCase()))),l){case"unread":R=R.filter($=>$.unreadCount>0);break;case"active":R=R.filter($=>$.status==="active");break;case"archived":R=R.filter($=>$.status==="archived");break}return R.sort(($,J)=>new Date(J.lastMessage.timestamp).getTime()-new Date($.lastMessage.timestamp).getTime())},[P,i,l]),A=P.reduce((R,$)=>R+$.unreadCount,0);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4 mb-8",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(O,{variant:"ghost",onClick:s,className:"h-9 px-3 -ml-3",children:[e.jsx(ls,{className:"w-4 h-4 mr-2"}),"Back"]}),!1]}),p&&e.jsxs(re,{className:"border-blue-200 bg-blue-50/50",children:[e.jsx(Ie,{className:"pb-3",children:e.jsx(Oe,{className:"text-sm text-blue-800",children:"Debug Information"})}),e.jsxs(ie,{className:"space-y-3 text-xs",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Authentication:"}),e.jsxs("div",{className:"text-muted-foreground",children:["User: ",j?.email||"Not authenticated",e.jsx("br",{}),"ID: ",j?.id||"None",e.jsx("br",{}),"Type: ",j?.userType||"Unknown"]})]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Storage Stats:"}),e.jsxs("div",{className:"text-muted-foreground",children:["Conversations: ",h?.conversations||0," bytes",e.jsx("br",{}),"Message Keys: ",h?.messageKeys||0,e.jsx("br",{}),"Offers: ",h?.offers||0," bytes",e.jsx("br",{}),"Total Storage: ",Math.round((h?.totalStorage||0)/1024)," KB"]})]})]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Chat State:"}),e.jsxs("div",{className:"text-muted-foreground",children:["Conversations: ",b?.length||0,e.jsx("br",{}),"Transformed: ",P.length,e.jsx("br",{}),"Filtered: ",T.length,e.jsx("br",{}),"Loading: ",S?"Yes":"No",e.jsx("br",{}),"Error: ",C||"None"]})]}),b?.length>0&&e.jsxs("details",{className:"bg-white rounded border p-2",children:[e.jsx("summary",{className:"cursor-pointer font-medium",children:"Raw Conversations Data"}),e.jsx("pre",{className:"mt-2 text-xs overflow-auto max-h-32",children:JSON.stringify(b.map(R=>({id:R.id,productName:R.productName,buyerId:R.buyerId,sellerId:R.sellerId,messageCount:w[R.id]?.length||0})),null,2)})]})]})]}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl md:text-3xl font-bold",children:"Messages"}),e.jsxs("p",{className:"text-muted-foreground",children:[A>0?`${A} unread messages`:"All caught up!",j?` • Logged in as ${j.name}`:" • Not authenticated"]})]})]}),C&&e.jsx(re,{className:"border-red-200 bg-red-50",children:e.jsxs(ie,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-red-700",children:[e.jsx(as,{className:"w-4 h-4"}),e.jsx("span",{className:"font-medium",children:"Error loading conversations"})]}),e.jsx("p",{className:"text-red-600 text-sm mt-1",children:C}),e.jsx(O,{variant:"outline",size:"sm",onClick:k,className:"mt-2",children:"Retry"})]})}),!j&&e.jsx(re,{className:"border-amber-200 bg-amber-50",children:e.jsxs(ie,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-amber-700",children:[e.jsx(as,{className:"w-4 h-4"}),e.jsx("span",{className:"font-medium",children:"Authentication Issue"})]}),e.jsx("p",{className:"text-amber-600 text-sm mt-1",children:"No authenticated user found. Please log in to view messages."}),e.jsx(O,{variant:"outline",size:"sm",onClick:s,className:"mt-2",children:"Go Back"})]})}),e.jsx(re,{children:e.jsx(ie,{className:"p-4",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(Ov,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),e.jsx(Ue,{type:"text",placeholder:"Search conversations...",value:i,onChange:R=>o(R.target.value),className:"w-full pl-10"})]}),e.jsx("div",{className:"flex gap-2",children:[{key:"all",label:"All",count:P.length},{key:"unread",label:"Unread",count:A},{key:"active",label:"Active",count:P.filter(R=>R.status==="active").length}].map(R=>e.jsxs(O,{variant:l===R.key?"default":"outline",size:"sm",onClick:()=>d(R.key),className:"gap-2",children:[R.label,R.count>0&&e.jsx(Ee,{variant:"secondary",className:"text-xs px-1.5 py-0.5",children:R.count})]},R.key))})]})})}),e.jsx("div",{className:"space-y-4",children:T.length===0?e.jsx(re,{children:e.jsxs(ie,{className:"p-12 text-center",children:[e.jsx(js,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"font-medium mb-2",children:"No conversations found"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:i?`No conversations match "${i}"`:l==="unread"?"You're all caught up! No unread messages.":"Start chatting with sellers and buyers to see conversations here."}),!i&&l==="all"&&e.jsx(O,{variant:"outline",onClick:s,children:"Browse Products"})]})}):T.map(R=>e.jsx(re,{className:`cursor-pointer transition-all hover:shadow-md ${R.unreadCount>0?"ring-2 ring-primary/20":""}`,onClick:()=>f(R.id),children:e.jsx(ie,{className:"p-4",children:e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("img",{src:R.productImage,alt:R.productName,className:"w-16 h-16 rounded-lg object-cover",onError:$=>{const J=$.target;J.src="https://images.unsplash.com/photo-1546470427-227c013b2b5f?w=400&h=300&fit=crop"}})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h3",{className:"font-medium truncate",children:R.otherParty.name}),e.jsx(Ni,{userType:R.otherParty.type,accountType:gi(R.otherParty),verificationLevel:Qr(R.otherParty),size:"sm"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[e.jsx(Lt,{className:"w-3 h-3"}),E(R.lastMessage.timestamp)]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground mb-2",children:[e.jsx(Nt,{className:"w-3 h-3"}),e.jsx("span",{className:"truncate",children:R.productName}),e.jsx("span",{children:"•"}),e.jsx(Vt,{className:"w-3 h-3"}),e.jsx("span",{children:R.otherParty.location}),R.otherParty.rating>0&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"•"}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Yr,{className:"w-3 h-3 text-yellow-400 fill-current"}),e.jsx("span",{children:R.otherParty.rating.toFixed(1)})]})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("p",{className:"text-sm text-muted-foreground truncate flex-1 mr-4",children:[R.lastMessage.isOwn?"You: ":"",R.lastMessage.content||"No message content"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[R.unreadCount>0&&e.jsx(Ee,{variant:"default",className:"bg-primary text-primary-foreground px-2 py-1 text-xs",children:R.unreadCount}),e.jsx(O,{variant:"ghost",size:"sm",className:"p-1",children:e.jsx(lS,{className:"w-4 h-4"})})]})]})]})]})})},R.id))}),P.length===0&&!S&&j&&e.jsx(re,{children:e.jsxs(ie,{className:"p-12 text-center",children:[e.jsx(js,{className:"w-16 h-16 text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium mb-2",children:"No messages yet"}),e.jsx("p",{className:"text-muted-foreground mb-6 max-w-md mx-auto",children:"Start conversations with farmers, traders, and buyers by browsing products and clicking the chat button."}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 justify-center",children:[e.jsx(O,{onClick:s,children:"Browse Products"}),e.jsx(O,{variant:"outline",onClick:()=>{j?.id&&($P(j.id),setTimeout(()=>{k()},500))},className:"text-sm",children:"Create Demo Conversations"})]})]})}),S&&e.jsx(re,{children:e.jsxs(ie,{className:"p-12 text-center",children:[e.jsxs("div",{className:"animate-pulse space-y-4",children:[e.jsx("div",{className:"w-16 h-16 bg-muted rounded-full mx-auto"}),e.jsx("div",{className:"h-4 bg-muted rounded w-1/2 mx-auto"}),e.jsx("div",{className:"h-3 bg-muted rounded w-1/3 mx-auto"})]}),e.jsx("p",{className:"text-muted-foreground mt-4",children:"Loading conversations..."})]})}),u&&(()=>{const R=P.find($=>$.id===u);return R?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 bg-card shadow-2xl border-l border-t z-50 transition-transform duration-300 md:hidden",children:e.jsx(Cc,{sellerName:R.otherParty.name,sellerType:R.otherParty.type,sellerLocation:R.otherParty.location,sellerRating:R.otherParty.rating,productName:R.productName,productId:R.productId,sellerId:R.otherParty.id,conversationId:R.id,onClose:()=>f(null),sellerVerified:R.otherParty.verified,currentUserVerified:j?.verified||!1,currentUserType:j?.userType,sellerVerificationStatus:{trustLevel:R.otherParty.verified?"id-verified":"unverified",tierLabel:R.otherParty.verified?"Verified":"Unverified",levelBadge:R.otherParty.verified?"Tier 1":"Unverified"}})}),e.jsx("div",{className:"hidden md:block fixed right-0 bottom-0 h-[600px] w-96 bg-card shadow-2xl border-l border-t z-50 transition-transform duration-300",children:e.jsx(Cc,{sellerName:R.otherParty.name,sellerType:R.otherParty.type,sellerLocation:R.otherParty.location,sellerRating:R.otherParty.rating,productName:R.productName,productId:R.productId,sellerId:R.otherParty.id,conversationId:R.id,onClose:()=>f(null),sellerVerified:R.otherParty.verified,currentUserVerified:j?.verified||!1,currentUserType:j?.userType,sellerVerificationStatus:{trustLevel:R.otherParty.verified?"id-verified":"unverified",tierLabel:R.otherParty.verified?"Verified":"Unverified",levelBadge:R.otherParty.verified?"Tier 1":"Unverified"}})})]}):null})()]})}function BP({onClose:t,onStartVerification:s,feature:n,sellerName:i,userType:o}){const d=(()=>{switch(n){case"chat":return{icon:e.jsx(js,{className:"w-6 h-6"}),title:o==="buyer"?"Quick Phone Verification Required":"Direct Messaging Requires Verification",description:o==="buyer"?`To start chatting with ${i||"sellers"}, you just need to verify your phone number.`:`To start a conversation with ${i||"sellers"}, you need to complete account verification.`,benefits:o==="buyer"?["Instant access to chat with sellers","View seller contact information","Secure communication","No complex verification required"]:["Direct communication with verified sellers","Protected messaging environment","Priority seller responses","Access to exclusive deals and bulk pricing"]};case"contact":return{icon:e.jsx(Cr,{className:"w-6 h-6"}),title:o==="buyer"?"Phone Verification Required":"Contact Information Requires Verification",description:o==="buyer"?"Just verify your phone number to access seller contact information.":"Phone numbers and direct contact details are only available to verified users.",benefits:o==="buyer"?["Access to seller phone numbers","Direct contact capabilities","Faster communication","Simple one-step verification"]:["Access to seller phone numbers","Direct contact capabilities","Faster communication channels","Building trusted business relationships"]};case"listing":return{icon:e.jsx(Nt,{className:"w-6 h-6"}),title:"Product Listing Requires Verification",description:o==="farmer"?"Farmers need verification to create product listings and ensure marketplace quality.":"Sellers need verification to create product listings and ensure marketplace quality.",benefits:["List unlimited products","Full storefront customization","Advanced listing management","Higher visibility in search results"]};case"storefront":return{icon:e.jsx(_r,{className:"w-6 h-6"}),title:"Storefront Management Requires Verification",description:"Professional storefront features are available only to verified sellers.",benefits:["Custom storefront design","Business analytics dashboard","Advanced inventory management","Professional seller badge"]};default:return{icon:e.jsx(dt,{className:"w-6 h-6"}),title:"Feature Requires Verification",description:"This feature is only available to verified users.",benefits:["Enhanced platform access","Trusted user status"]}}})();return e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:e.jsxs(re,{className:"w-full max-w-lg",children:[e.jsxs(Ie,{className:"relative",children:[e.jsx(O,{variant:"ghost",size:"sm",className:"absolute right-2 top-2",onClick:t,children:e.jsx(cs,{className:"w-4 h-4"})}),e.jsxs("div",{className:"flex items-center gap-3 pr-8",children:[e.jsx("div",{className:"w-12 h-12 bg-primary/10 rounded-lg flex items-center justify-center text-primary",children:d.icon}),e.jsxs("div",{children:[e.jsx(Oe,{className:"text-lg",children:d.title}),e.jsx(ts,{className:"text-sm mt-1",children:d.description})]})]})]}),e.jsxs(ie,{className:"space-y-6",children:[e.jsxs(is,{children:[e.jsx(dt,{className:"h-4 w-4"}),e.jsxs(os,{children:[e.jsx("strong",{children:"Why verification?"})," We require verification to build trust, prevent spam, and ensure quality interactions between all users in the AgriLink marketplace."]})]}),e.jsxs("div",{children:[e.jsxs("h4",{className:"font-medium mb-3 flex items-center gap-2",children:[e.jsx(He,{className:"w-4 h-4 text-primary"}),"Verification Benefits"]}),e.jsx("ul",{className:"space-y-2",children:d.benefits.map((u,f)=>e.jsxs("li",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-primary rounded-full"}),u]},f))})]}),(n==="listing"||n==="storefront")&&e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-3",children:o==="buyer"?"Simple Verification":"Verification Process"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-3 text-sm",children:[e.jsx(Ee,{variant:"outline",className:"w-6 h-6 rounded-full p-0 flex items-center justify-center",children:"1"}),e.jsxs("span",{className:"text-muted-foreground",children:["Phone verification (",o==="buyer"?"1 minute":"2 minutes",")"]})]}),o!=="buyer"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center gap-3 text-sm",children:[e.jsx(Ee,{variant:"outline",className:"w-6 h-6 rounded-full p-0 flex items-center justify-center",children:"2"}),e.jsx("span",{className:"text-muted-foreground",children:"Upload ID document (5 minutes)"})]}),(o==="farmer"||o==="trader")&&e.jsxs("div",{className:"flex items-center gap-3 text-sm",children:[e.jsx(Ee,{variant:"outline",className:"w-6 h-6 rounded-full p-0 flex items-center justify-center",children:"3"}),e.jsx("span",{className:"text-muted-foreground",children:"Complete business details (3 minutes)"})]})]}),o==="buyer"&&e.jsx("div",{className:"text-sm text-muted-foreground",children:"That's it! Just one step for buyers."})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(O,{onClick:t,variant:"outline",className:"flex-1",children:"Maybe Later"}),e.jsxs(O,{onClick:s,className:"flex-1",children:[o==="buyer"?"Verify Phone":"Start Verification",e.jsx(uc,{className:"w-4 h-4 ml-2"})]})]})]})]})})}var gm="rovingFocusGroup.onEntryFocus",UP={bubbles:!1,cancelable:!0},Mo="RovingFocusGroup",[Qm,bw,VP]=Mc(Mo),[qP,td]=Ns(Mo,[VP]),[HP,WP]=qP(Mo),jw=v.forwardRef((t,s)=>e.jsx(Qm.Provider,{scope:t.__scopeRovingFocusGroup,children:e.jsx(Qm.Slot,{scope:t.__scopeRovingFocusGroup,children:e.jsx(KP,{...t,ref:s})})}));jw.displayName=Mo;var KP=v.forwardRef((t,s)=>{const{__scopeRovingFocusGroup:n,orientation:i,loop:o=!1,dir:l,currentTabStopId:d,defaultCurrentTabStopId:u,onCurrentTabStopIdChange:f,onEntryFocus:p,preventScrollOnEntryFocus:g=!1,...h}=t,y=v.useRef(null),j=Ye(s,y),b=Si(l),[w,S]=Ir({prop:d,defaultProp:u??null,onChange:f,caller:Mo}),[k,C]=v.useState(!1),E=Ot(p),P=bw(n),T=v.useRef(!1),[A,R]=v.useState(0);return v.useEffect(()=>{const $=y.current;if($)return $.addEventListener(gm,E),()=>$.removeEventListener(gm,E)},[E]),e.jsx(HP,{scope:n,orientation:i,dir:b,loop:o,currentTabStopId:w,onItemFocus:v.useCallback($=>S($),[S]),onItemShiftTab:v.useCallback(()=>C(!0),[]),onFocusableItemAdd:v.useCallback(()=>R($=>$+1),[]),onFocusableItemRemove:v.useCallback(()=>R($=>$-1),[]),children:e.jsx(Le.div,{tabIndex:k||A===0?-1:0,"data-orientation":i,...h,ref:j,style:{outline:"none",...t.style},onMouseDown:be(t.onMouseDown,()=>{T.current=!0}),onFocus:be(t.onFocus,$=>{const J=!T.current;if($.target===$.currentTarget&&J&&!k){const z=new CustomEvent(gm,UP);if($.currentTarget.dispatchEvent(z),!z.defaultPrevented){const q=P().filter(te=>te.focusable),Q=q.find(te=>te.active),Z=q.find(te=>te.id===w),se=[Q,Z,...q].filter(Boolean).map(te=>te.ref.current);kw(se,g)}}T.current=!1}),onBlur:be(t.onBlur,()=>C(!1))})})}),Nw="RovingFocusGroupItem",Sw=v.forwardRef((t,s)=>{const{__scopeRovingFocusGroup:n,focusable:i=!0,active:o=!1,tabStopId:l,children:d,...u}=t,f=Bs(),p=l||f,g=WP(Nw,n),h=g.currentTabStopId===p,y=bw(n),{onFocusableItemAdd:j,onFocusableItemRemove:b,currentTabStopId:w}=g;return v.useEffect(()=>{if(i)return j(),()=>b()},[i,j,b]),e.jsx(Qm.ItemSlot,{scope:n,id:p,focusable:i,active:o,children:e.jsx(Le.span,{tabIndex:h?0:-1,"data-orientation":g.orientation,...u,ref:s,onMouseDown:be(t.onMouseDown,S=>{i?g.onItemFocus(p):S.preventDefault()}),onFocus:be(t.onFocus,()=>g.onItemFocus(p)),onKeyDown:be(t.onKeyDown,S=>{if(S.key==="Tab"&&S.shiftKey){g.onItemShiftTab();return}if(S.target!==S.currentTarget)return;const k=YP(S,g.orientation,g.dir);if(k!==void 0){if(S.metaKey||S.ctrlKey||S.altKey||S.shiftKey)return;S.preventDefault();let E=y().filter(P=>P.focusable).map(P=>P.ref.current);if(k==="last")E.reverse();else if(k==="prev"||k==="next"){k==="prev"&&E.reverse();const P=E.indexOf(S.currentTarget);E=g.loop?QP(E,P+1):E.slice(P+1)}setTimeout(()=>kw(E))}}),children:typeof d=="function"?d({isCurrentTabStop:h,hasTabStop:w!=null}):d})})});Sw.displayName=Nw;var GP={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function JP(t,s){return s!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function YP(t,s,n){const i=JP(t.key,n);if(!(s==="vertical"&&["ArrowLeft","ArrowRight"].includes(i))&&!(s==="horizontal"&&["ArrowUp","ArrowDown"].includes(i)))return GP[i]}function kw(t,s=!1){const n=document.activeElement;for(const i of t)if(i===n||(i.focus({preventScroll:s}),document.activeElement!==n))return}function QP(t,s){return t.map((n,i)=>t[(s+i)%t.length])}var Cw=jw,_w=Sw,sd="Tabs",[XP]=Ns(sd,[td]),Ew=td(),[ZP,zf]=XP(sd),Tw=v.forwardRef((t,s)=>{const{__scopeTabs:n,value:i,onValueChange:o,defaultValue:l,orientation:d="horizontal",dir:u,activationMode:f="automatic",...p}=t,g=Si(u),[h,y]=Ir({prop:i,onChange:o,defaultProp:l??"",caller:sd});return e.jsx(ZP,{scope:n,baseId:Bs(),value:h,onValueChange:y,orientation:d,dir:g,activationMode:f,children:e.jsx(Le.div,{dir:g,"data-orientation":d,...p,ref:s})})});Tw.displayName=sd;var Pw="TabsList",Iw=v.forwardRef((t,s)=>{const{__scopeTabs:n,loop:i=!0,...o}=t,l=zf(Pw,n),d=Ew(n);return e.jsx(Cw,{asChild:!0,...d,orientation:l.orientation,dir:l.dir,loop:i,children:e.jsx(Le.div,{role:"tablist","aria-orientation":l.orientation,...o,ref:s})})});Iw.displayName=Pw;var Aw="TabsTrigger",Rw=v.forwardRef((t,s)=>{const{__scopeTabs:n,value:i,disabled:o=!1,...l}=t,d=zf(Aw,n),u=Ew(n),f=Ow(d.baseId,i),p=Lw(d.baseId,i),g=i===d.value;return e.jsx(_w,{asChild:!0,...u,focusable:!o,active:g,children:e.jsx(Le.button,{type:"button",role:"tab","aria-selected":g,"aria-controls":p,"data-state":g?"active":"inactive","data-disabled":o?"":void 0,disabled:o,id:f,...l,ref:s,onMouseDown:be(t.onMouseDown,h=>{!o&&h.button===0&&h.ctrlKey===!1?d.onValueChange(i):h.preventDefault()}),onKeyDown:be(t.onKeyDown,h=>{[" ","Enter"].includes(h.key)&&d.onValueChange(i)}),onFocus:be(t.onFocus,()=>{const h=d.activationMode!=="manual";!g&&!o&&h&&d.onValueChange(i)})})})});Rw.displayName=Aw;var Dw="TabsContent",Mw=v.forwardRef((t,s)=>{const{__scopeTabs:n,value:i,forceMount:o,children:l,...d}=t,u=zf(Dw,n),f=Ow(u.baseId,i),p=Lw(u.baseId,i),g=i===u.value,h=v.useRef(g);return v.useEffect(()=>{const y=requestAnimationFrame(()=>h.current=!1);return()=>cancelAnimationFrame(y)},[]),e.jsx(ds,{present:o||g,children:({present:y})=>e.jsx(Le.div,{"data-state":g?"active":"inactive","data-orientation":u.orientation,role:"tabpanel","aria-labelledby":f,hidden:!y,id:p,tabIndex:0,...d,ref:s,style:{...t.style,animationDuration:h.current?"0s":void 0},children:y&&l})})});Mw.displayName=Dw;function Ow(t,s){return`${t}-trigger-${s}`}function Lw(t,s){return`${t}-content-${s}`}var $w=Tw,Fw=Iw,zw=Rw,Bw=Mw;const Bf=v.forwardRef(({className:t,...s},n)=>e.jsx($w,{ref:n,"data-slot":"tabs",className:Ve("flex flex-col gap-2",t),...s}));Bf.displayName=$w.displayName;const Uf=v.forwardRef(({className:t,...s},n)=>e.jsx(Fw,{ref:n,"data-slot":"tabs-list",className:Ve("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-xl p-[3px] flex",t),...s}));Uf.displayName=Fw.displayName;const Nr=v.forwardRef(({className:t,...s},n)=>e.jsx(zw,{ref:n,"data-slot":"tabs-trigger",className:Ve("data-[state=active]:bg-card dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-xl border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...s}));Nr.displayName=zw.displayName;const da=v.forwardRef(({className:t,...s},n)=>e.jsx(Bw,{ref:n,"data-slot":"tabs-content",className:Ve("flex-1 outline-none",t),...s}));da.displayName=Bw.displayName;const wr={USERS:"agriconnect-myanmar-users",LOCAL_PRODUCTS:"agriconnect-myanmar-local-products",SAVED_PRODUCTS:"agriconnect-myanmar-saved-products",CURRENT_USER:"agriconnect-myanmar-current-user",CHAT_HISTORY:"agriconnect-myanmar-chat-history",TEMP_DATA:"agriconnect-myanmar-temp"},eI={[wr.CURRENT_USER]:"high",[wr.USERS]:"high",[wr.SAVED_PRODUCTS]:"medium",[wr.LOCAL_PRODUCTS]:"medium",[wr.CHAT_HISTORY]:"low",[wr.TEMP_DATA]:"low"};class ua{static instance;MAX_STORAGE_PERCENTAGE=80;CLEANUP_THRESHOLD=90;static getInstance(){return ua.instance||(ua.instance=new ua),ua.instance}getStorageInfo(){let s=0;for(let i=0;i<localStorage.length;i++){const o=localStorage.key(i);if(o){const l=localStorage.getItem(o)||"";s+=o.length+l.length}}const n=this.estimateStorageQuota();return{used:s,available:n-s,total:n,percentage:s/n*100}}estimateStorageQuota(){try{return typeof navigator<"u"&&(navigator.userAgent.includes("Mobile")||navigator.userAgent.includes("Android"))?3*1024*1024:8*1024*1024}catch{return 5*1024*1024}}isStorageNearCapacity(){return this.getStorageInfo().percentage>=this.CLEANUP_THRESHOLD}getStorageItems(){const s=[];for(let n=0;n<localStorage.length;n++){const i=localStorage.key(n);if(i&&i.startsWith("agriconnect-myanmar-")){const o=localStorage.getItem(i)||"",l=i.length+o.length,d=eI[i]||"low";s.push({key:i,size:l,lastAccessed:this.getLastAccessTime(i),priority:d})}}return s.sort((n,i)=>{const o={low:0,medium:1,high:2};return o[n.priority]!==o[i.priority]?o[n.priority]-o[i.priority]:new Date(n.lastAccessed).getTime()-new Date(i.lastAccessed).getTime()})}getLastAccessTime(s){const n=Math.floor(Math.random()*30),i=new Date;return i.setDate(i.getDate()-n),i.toISOString()}async cleanupStorage(s=30){console.log("🧹 Starting storage cleanup...");const n=this.getStorageItems();let i=0,o=0;for(const l of n)if(l.priority==="low")try{if(l.key===wr.CHAT_HISTORY?i+=await this.cleanupChatHistory():l.key===wr.LOCAL_PRODUCTS?i+=await this.cleanupOldProducts():l.key.includes("temp")&&(localStorage.removeItem(l.key),i+=l.size),o++,this.getStorageInfo().percentage<s)break}catch(d){console.warn(`Failed to cleanup ${l.key}:`,d)}return console.log(`✅ Cleanup completed: ${o} items, ${i} bytes freed`),{cleaned:o,freed:i}}async cleanupChatHistory(){const s=wr.CHAT_HISTORY,n=localStorage.getItem(s);if(!n)return 0;try{const i=JSON.parse(n),o=new Date;o.setDate(o.getDate()-30);const l=Object.fromEntries(Object.entries(i).filter(([f,p])=>new Date(p.lastMessage?.timestamp||0)>o)),d=n.length;localStorage.setItem(s,JSON.stringify(l));const u=JSON.stringify(l).length;return Math.max(0,d-u)}catch(i){return console.warn("Failed to cleanup chat history:",i),0}}async cleanupOldProducts(){const s=wr.LOCAL_PRODUCTS,n=localStorage.getItem(s);if(!n)return 0;try{const i=JSON.parse(n),o=new Date;o.setDate(o.getDate()-90);const l=i.filter(u=>{const p=new Date(u.lastUpdated||u.createdAt||0)>o,g=u.images?.length>0||u.image;return p||g}),d=n.length;if(l.length<i.length){localStorage.setItem(s,JSON.stringify(l));const u=JSON.stringify(l).length;return console.log(`🧹 Product cleanup: removed ${i.length-l.length} old products, freed ${Math.round((d-u)/1024)} KB`),Math.max(0,d-u)}return 0}catch(i){return console.warn("Failed to cleanup old products:",i),0}}compressData(s){try{return JSON.stringify(s,null,0)}catch(n){return console.warn("Failed to compress data:",n),JSON.stringify(s)}}async safeSetItem(s,n){try{const i=this.getStorageInfo(),o=s.length+n.length;if(console.log(`📊 Storage check for ${s}:`,{required:`${Math.round(o/1024)} KB`,available:`${Math.round(i.available/1024)} KB`,used:`${Math.round(i.percentage)}%`}),i.available<o){console.warn("⚠️ Insufficient storage space, attempting cleanup..."),await this.cleanupStorage();const l=this.getStorageInfo();if(l.available<o)return console.error(`❌ Still insufficient space after cleanup. Required: ${Math.round(o/1024)} KB, Available: ${Math.round(l.available/1024)} KB`),!1;console.log(`✅ Cleanup successful. Now available: ${Math.round(l.available/1024)} KB`)}localStorage.setItem(s,n),console.log(`✅ Successfully stored ${s} (${Math.round(o/1024)} KB)`);try{window.dispatchEvent(new Event("agrilink-storage-changed"))}catch{}return!0}catch(i){if(i instanceof DOMException&&i.name==="QuotaExceededError"){console.error("❌ Storage quota exceeded, attempting emergency cleanup..."),await this.emergencyCleanup();try{return localStorage.setItem(s,n),console.log("✅ Storage successful after emergency cleanup"),!0}catch(o){return console.error("❌ Failed to store even after emergency cleanup:",o),!1}}return console.error("❌ Failed to store data:",i),!1}}async emergencyCleanup(){console.log("🚨 Emergency storage cleanup initiated");const s=this.getStorageItems();for(const i of s)i.priority==="low"&&localStorage.removeItem(i.key);if(this.getStorageInfo().percentage>70){for(const i of s)if(i.priority==="medium"){await this.cleanupOldProducts();break}}}getStorageBreakdown(){const s={};for(let n=0;n<localStorage.length;n++){const i=localStorage.key(n);if(i&&i.startsWith("agriconnect-myanmar-")){const o=localStorage.getItem(i)||"";s[i]=i.length+o.length}}return s}}const Mn=ua.getInstance(),tI=async(t,s)=>{const n=Mn.compressData(s);return await Mn.safeSetItem(t,n)},ma=()=>Mn.getStorageInfo(),Uw=async()=>{await Mn.cleanupStorage()},ic=Object.freeze(Object.defineProperty({__proto__:null,StorageManager:ua,cleanupStorage:Uw,getStorageInfo:ma,safeLocalStorageSetItem:tI,storageManager:Mn},Symbol.toStringTag,{value:"Module"}));function sI({onBack:t}){const[s,n]=v.useState(ma()),[i,o]=v.useState({}),[l,d]=v.useState(!1),[u,f]=v.useState(null),p=()=>{n(ma()),o(Mn.getStorageBreakdown())};v.useEffect(()=>{p();const S=setInterval(p,3e4);return()=>clearInterval(S)},[]);const g=async()=>{d(!0);try{const S=await Mn.cleanupStorage();ge.success(`Cleanup completed! Freed ${Math.round(S.freed/1024)} KB`),f(new Date().toLocaleString()),p()}catch(S){console.error("Cleanup failed:",S),ge.error("Cleanup failed. Please try again.")}finally{d(!1)}},h=async()=>{if(confirm("This will remove old chat history and temporary data. Continue?")){d(!0);try{await Mn.cleanupStorage(50),ge.success("Emergency cleanup completed!"),f(new Date().toLocaleString()),p()}catch(S){console.error("Emergency cleanup failed:",S),ge.error("Emergency cleanup failed.")}finally{d(!1)}}},y=S=>{if(S===0)return"0 B";const k=1024,C=["B","KB","MB"],E=Math.floor(Math.log(S)/Math.log(k));return parseFloat((S/Math.pow(k,E)).toFixed(1))+" "+C[E]},b=s.percentage<50?{color:"bg-green-500",status:"Good",icon:He}:s.percentage<80?{color:"bg-yellow-500",status:"Warning",icon:as}:{color:"bg-red-500",status:"Critical",icon:as},w=b.icon;return e.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[t&&e.jsxs(O,{variant:"ghost",onClick:t,className:"h-9 px-3 -ml-3",children:[e.jsx(bS,{className:"w-4 h-4 mr-2"}),"Back"]}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl md:text-3xl font-bold",children:"Storage Management"}),e.jsx("p",{className:"text-muted-foreground",children:"Monitor and manage local storage usage"})]})]}),e.jsxs(re,{children:[e.jsxs(Ie,{children:[e.jsxs(Oe,{className:"flex items-center gap-2",children:[e.jsx(Jr,{className:"w-5 h-5"}),"Storage Overview"]}),e.jsx(ts,{children:"Current local storage usage and health status"})]}),e.jsxs(ie,{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(w,{className:`w-5 h-5 ${b.status==="Good"?"text-green-500":b.status==="Warning"?"text-yellow-500":"text-red-500"}`}),e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium",children:["Storage Status: ",b.status]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[y(s.used)," of ",y(s.total)," used"]})]})]}),e.jsxs(Ee,{variant:b.status==="Good"?"default":b.status==="Warning"?"secondary":"destructive",children:[Math.round(s.percentage),"%"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Ym,{value:s.percentage,className:"h-3"}),e.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground",children:[e.jsx("span",{children:"0%"}),e.jsx("span",{children:"50%"}),e.jsx("span",{children:"100%"})]})]}),s.percentage>80&&e.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(as,{className:"w-5 h-5 text-yellow-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-yellow-800",children:"Storage Warning"}),e.jsxs("p",{className:"text-sm text-yellow-700",children:["Storage is ",Math.round(s.percentage),"% full. Consider cleaning up old data to prevent storage errors."]})]})]})}),s.percentage>95&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(as,{className:"w-5 h-5 text-red-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-red-800",children:"Critical Storage Level"}),e.jsx("p",{className:"text-sm text-red-700",children:"Storage is critically full. New data may not be saved until space is freed."})]})]})})]})]}),e.jsxs(re,{children:[e.jsxs(Ie,{children:[e.jsx(Oe,{children:"Storage Breakdown"}),e.jsx(ts,{children:"Detailed view of what's using storage space"})]}),e.jsx(ie,{children:e.jsx("div",{className:"space-y-4",children:Object.entries(i).map(([S,k])=>{const C=k/s.used*100,E=S.replace("agriconnect-myanmar-","").replace(/-/g," ");return e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm font-medium capitalize",children:E}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:y(k)}),e.jsxs(Ee,{variant:"outline",className:"text-xs",children:[Math.round(C),"%"]})]})]}),e.jsx(Ym,{value:C,className:"h-2"})]},S)})})})]}),e.jsxs(re,{children:[e.jsxs(Ie,{children:[e.jsxs(Oe,{className:"flex items-center gap-2",children:[e.jsx(Tr,{className:"w-5 h-5"}),"Cleanup Actions"]}),e.jsx(ts,{children:"Free up storage space by removing old or unnecessary data"})]}),e.jsxs(ie,{className:"space-y-4",children:[u&&e.jsx("div",{className:"bg-muted/50 rounded-lg p-3",children:e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Last cleanup: ",u]})}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-medium",children:"Standard Cleanup"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Removes old chat history and temporary data (safe operation)"}),e.jsx(O,{onClick:g,disabled:l,className:"w-full",variant:"outline",children:l?e.jsxs(e.Fragment,{children:[e.jsx(rr,{className:"w-4 h-4 mr-2 animate-spin"}),"Cleaning..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Tr,{className:"w-4 h-4 mr-2"}),"Run Cleanup"]})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-medium",children:"Emergency Cleanup"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"More aggressive cleanup for critical storage situations"}),e.jsx(O,{onClick:h,disabled:l,className:"w-full",variant:"destructive",children:l?e.jsxs(e.Fragment,{children:[e.jsx(rr,{className:"w-4 h-4 mr-2 animate-spin"}),"Cleaning..."]}):e.jsxs(e.Fragment,{children:[e.jsx(as,{className:"w-4 h-4 mr-2"}),"Emergency Cleanup"]})})]})]}),e.jsx(sr,{}),e.jsx("div",{className:"space-y-2",children:e.jsxs(O,{onClick:p,variant:"ghost",className:"w-full",children:[e.jsx(rr,{className:"w-4 h-4 mr-2"}),"Refresh Storage Info"]})})]})]}),e.jsxs(re,{children:[e.jsx(Ie,{children:e.jsxs(Oe,{className:"flex items-center gap-2",children:[e.jsx(of,{className:"w-5 h-5"}),"Storage Tips"]})}),e.jsx(ie,{children:e.jsxs("div",{className:"space-y-3 text-sm",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-2 h-2 bg-primary rounded-full mt-2 flex-shrink-0"}),e.jsx("p",{children:"Local storage is limited to about 5-10MB per website"})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-2 h-2 bg-primary rounded-full mt-2 flex-shrink-0"}),e.jsx("p",{children:"Old chat messages and temporary data are automatically cleaned up"})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-2 h-2 bg-primary rounded-full mt-2 flex-shrink-0"}),e.jsx("p",{children:"Product listings and user data are preserved during cleanup"})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-2 h-2 bg-primary rounded-full mt-2 flex-shrink-0"}),e.jsx("p",{children:"Regular cleanup prevents storage errors and keeps the app running smoothly"})]})]})})]})]})}function rI({onClose:t}){const[s,n]=v.useState({}),[i,o]=v.useState({}),[l,d]=v.useState(null),u=()=>{const j={};for(let b=0;b<localStorage.length;b++){const w=localStorage.key(b);if(w&&w.startsWith("agriconnect-myanmar-"))try{const S=localStorage.getItem(w);if(S){const k=JSON.parse(S);j[w]={raw:S,parsed:k,size:S.length,type:Array.isArray(k)?"array":typeof k,count:Array.isArray(k)?k.length:1}}}catch(S){j[w]={raw:localStorage.getItem(w),parsed:null,size:localStorage.getItem(w)?.length||0,type:"invalid-json",count:0,error:S instanceof Error?S.message:"Unknown error"}}}n(j)};v.useEffect(()=>{u()},[]);const f=j=>{if(j===0)return"0 B";const b=1024,w=["B","KB","MB"],S=Math.floor(Math.log(j)/Math.log(b));return parseFloat((j/Math.pow(b,S)).toFixed(1))+" "+w[S]},p=async j=>{try{d(j),await navigator.clipboard.writeText(s[j].raw),ge.success(`Copied ${j} to clipboard`)}catch{ge.error("Failed to copy to clipboard")}finally{setTimeout(()=>d(null),1e3)}},g=j=>{confirm(`Are you sure you want to delete ${j}? This cannot be undone.`)&&(localStorage.removeItem(j),ge.success(`Deleted ${j}`),u())},h=()=>{confirm("Are you sure you want to delete ALL AgriLink data? This will log you out and remove all products, messages, and settings. This cannot be undone.")&&(Object.keys(s).forEach(j=>{localStorage.removeItem(j)}),ge.success("All AgriLink data cleared"),setTimeout(()=>window.location.reload(),1e3))},y=Object.values(s).reduce((j,b)=>j+b.size,0);return e.jsxs("div",{className:"max-w-6xl mx-auto space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold flex items-center gap-2",children:[e.jsx(Jr,{className:"w-6 h-6"}),"Storage Debug Panel"]}),e.jsx("p",{className:"text-muted-foreground",children:"Inspect and manage localStorage data for AgriLink"})]}),t&&e.jsx(O,{variant:"outline",onClick:t,children:"Close"})]}),e.jsxs(re,{children:[e.jsxs(Ie,{children:[e.jsx(Oe,{children:"Storage Overview"}),e.jsxs(ts,{children:["Total AgriLink data: ",f(y)," across ",Object.keys(s).length," keys"]})]}),e.jsx(ie,{className:"space-y-4",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(O,{onClick:u,variant:"outline",size:"sm",children:[e.jsx(rr,{className:"w-4 h-4 mr-2"}),"Refresh"]}),e.jsxs(O,{onClick:h,variant:"destructive",size:"sm",className:"ml-auto",children:[e.jsx(Tr,{className:"w-4 h-4 mr-2"}),"Clear All AgriLink Data"]})]})})]}),e.jsx("div",{className:"space-y-4",children:Object.entries(s).map(([j,b])=>e.jsxs(re,{children:[e.jsxs(Ie,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(Oe,{className:"text-lg",children:j.replace("agriconnect-myanmar-","").replace(/-/g," ")}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ee,{variant:"outline",children:b.type}),e.jsx(Ee,{variant:"secondary",children:f(b.size)}),b.count>0&&e.jsxs(Ee,{children:[b.count," items"]})]})]}),e.jsxs(ts,{children:["Storage Key: ",e.jsx("code",{className:"bg-muted px-1 rounded text-xs",children:j})]})]}),e.jsxs(ie,{className:"space-y-4",children:[b.error&&e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded p-3 text-sm text-red-800",children:[e.jsx("strong",{children:"Error:"})," ",b.error]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(O,{variant:"outline",size:"sm",onClick:()=>o(w=>({...w,[j]:!w[j]})),children:[i[j]?e.jsx(hi,{className:"w-4 h-4 mr-2"}):e.jsx(Ut,{className:"w-4 h-4 mr-2"}),i[j]?"Hide":"Show"," Data"]}),e.jsxs(O,{variant:"outline",size:"sm",onClick:()=>p(j),disabled:l===j,children:[l===j?e.jsx(He,{className:"w-4 h-4 mr-2"}):e.jsx(rS,{className:"w-4 h-4 mr-2"}),l===j?"Copied!":"Copy Raw Data"]}),e.jsxs(O,{variant:"destructive",size:"sm",onClick:()=>g(j),children:[e.jsx(Tr,{className:"w-4 h-4 mr-2"}),"Delete"]})]}),i[j]&&e.jsxs(e.Fragment,{children:[e.jsx(sr,{}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-2",children:"Parsed Data Preview:"}),e.jsx("pre",{className:"bg-muted p-3 rounded text-xs overflow-auto max-h-64",children:b.parsed?JSON.stringify(b.parsed,null,2):"Failed to parse JSON"})]}),b.type==="array"&&b.parsed&&e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-2",children:"Array Items Summary:"}),e.jsxs("div",{className:"grid gap-2",children:[b.parsed.slice(0,5).map((w,S)=>e.jsxs("div",{className:"bg-muted/50 p-2 rounded text-sm",children:[e.jsxs("strong",{children:["Item ",S+1,":"]})," ",typeof w=="object"&&w.id?`ID: ${w.id}${w.name?`, Name: ${w.name}`:""}`:JSON.stringify(w).substring(0,100)+"..."]},S)),b.parsed.length>5&&e.jsxs("div",{className:"text-sm text-muted-foreground",children:["... and ",b.parsed.length-5," more items"]})]})]})]})]})]})]},j))}),Object.keys(s).length===0&&e.jsx(re,{children:e.jsxs(ie,{className:"text-center py-8",children:[e.jsx(Jr,{className:"w-12 h-12 mx-auto text-muted-foreground mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"No AgriLink data found in localStorage"})]})})]})}const Xm=[{id:"sample-rice-001",sellerId:"farmer-thura-001",name:"Premium Jasmine Rice - 50kg",price:45e3,unit:"50 kg bag",location:"Bago",region:"Bago Region",sellerType:"farmer",sellerName:"Ko Thura Min",image:"https://images.unsplash.com/photo-1586201375761-83865001e31c?w=500&h=400&fit=crop",images:["https://images.unsplash.com/photo-1586201375761-83865001e31c?w=500&h=400&fit=crop","https://images.unsplash.com/photo-1536304993881-ff6e9eefa2a6?w=500&h=400&fit=crop"],quantity:"500 bags available",minimumOrder:"10 bags minimum",availableQuantity:"500 bags in stock",deliveryOptions:["Pickup","Local Delivery (Within 10km)","Regional Delivery"],paymentTerms:["Cash on Pickup","Bank Transfer","50% Advance, 50% on Delivery"],category:"rice",description:"Premium quality jasmine rice grown using traditional farming methods in Bago Region. Each grain is carefully selected for exceptional aroma and taste. Our rice is perfect for restaurants, hotels, and wholesale buyers looking for consistent quality and authentic Myanmar jasmine rice.",additionalNotes:"Harvest date: January 2024. Storage in controlled environment.",priceChange:-2.1,lastUpdated:new Date(Date.now()-2880*60*1e3).toISOString()},{id:"sample-vegetables-001",sellerId:"farmer-su-002",name:"Fresh Tomatoes - 25kg",price:18e3,unit:"25 kg crate",location:"Mandalay",region:"Mandalay Region",sellerType:"farmer",sellerName:"Ma Su Hlaing",image:"https://images.unsplash.com/photo-1592841200221-a6898f307baa?w=500&h=400&fit=crop",images:["https://images.unsplash.com/photo-1592841200221-a6898f307baa?w=500&h=400&fit=crop","https://images.unsplash.com/photo-1571771894821-ce9b6c11b08e?w=500&h=400&fit=crop"],quantity:"200 crates available",minimumOrder:"5 crates minimum",availableQuantity:"200 crates fresh daily",deliveryOptions:["Pickup","Local Delivery (Within 10km)","Express Delivery"],paymentTerms:["Cash on Pickup","Mobile Payment","Cash on Delivery"],category:"vegetables",description:"Fresh, vine-ripened tomatoes harvested daily from our organic farm. Perfect for markets, restaurants, and food processing. Rich color and excellent taste.",additionalNotes:"Harvested fresh every morning. Best consumed within 5 days.",priceChange:1.5,lastUpdated:new Date(Date.now()-1440*60*1e3).toISOString()},{id:"sample-spices-001",sellerId:"trader-kyaw-003",name:"Premium Turmeric Powder - 10kg",price:25e3,unit:"10 kg sack",location:"Yangon",region:"Yangon Region",sellerType:"trader",sellerName:"Ko Kyaw Zin",image:"https://images.unsplash.com/photo-1615485290382-441e4d049cb5?w=500&h=400&fit=crop",images:["https://images.unsplash.com/photo-1615485290382-441e4d049cb5?w=500&h=400&fit=crop","https://images.unsplash.com/photo-1609501676725-7186f63e1099?w=500&h=400&fit=crop"],quantity:"100 sacks available",minimumOrder:"3 sacks minimum",availableQuantity:"100 sacks in warehouse",deliveryOptions:["Pickup","Nationwide Shipping","Local Delivery (Within 10km)"],paymentTerms:["Bank Transfer","30% Advance, 70% on Delivery","Cash on Pickup"],category:"spices",description:"High-quality turmeric powder sourced from trusted farmers in Sagaing Region. Finely ground, vibrant color, and strong aroma. Perfect for cooking and export.",additionalNotes:"Processed and packaged in clean facility. 18-month shelf life.",priceChange:-.8,lastUpdated:new Date(Date.now()-4320*60*1e3).toISOString()},{id:"sample-fruits-001",sellerId:"farmer-min-004",name:"Dragon Fruit - 20kg",price:32e3,unit:"20 kg box",location:"Magway",region:"Magway Region",sellerType:"farmer",sellerName:"Ko Min Oo",image:"https://images.unsplash.com/photo-1526318896980-cf78ec5c3fce?w=500&h=400&fit=crop",images:["https://images.unsplash.com/photo-1526318896980-cf78ec5c3fce?w=500&h=400&fit=crop","https://images.unsplash.com/photo-1587132137056-bfbf0166836e?w=500&h=400&fit=crop"],quantity:"80 boxes available",minimumOrder:"5 boxes minimum",availableQuantity:"80 boxes ready for harvest",deliveryOptions:["Pickup","Cold Chain Transport","Express Delivery"],paymentTerms:["Cash on Pickup","Bank Transfer","50% Advance, 50% on Delivery"],category:"fruits",description:"Sweet and fresh dragon fruit grown in controlled environment. Perfect size and ripeness for retail and wholesale. High nutrition value and exotic taste.",additionalNotes:"Harvest twice weekly. Best consumed within 7 days. Export quality.",lastUpdated:new Date(Date.now()-300*60*1e3).toISOString()}];function nI(){const[t,s]=v.useState([]);v.useEffect(()=>{try{const u=JSON.parse(localStorage.getItem("agriconnect-myanmar-hidden-sample-products")||"[]");s(u)}catch(u){console.error("Failed to load hidden sample products:",u)}},[]);const n=u=>{try{const f=t.filter(p=>p!==u);localStorage.setItem("agriconnect-myanmar-hidden-sample-products",JSON.stringify(f)),s(f),window.dispatchEvent(new Event("sample-products-changed")),ge.success("Sample product restored to marketplace")}catch(f){console.error("Failed to restore sample product:",f),ge.error("Failed to restore product")}},i=u=>{try{const f=[...t,u];localStorage.setItem("agriconnect-myanmar-hidden-sample-products",JSON.stringify(f)),s(f),window.dispatchEvent(new Event("sample-products-changed")),ge.success("Sample product hidden from marketplace")}catch(f){console.error("Failed to hide sample product:",f),ge.error("Failed to hide product")}},o=()=>{try{localStorage.setItem("agriconnect-myanmar-hidden-sample-products",JSON.stringify([])),s([]),window.dispatchEvent(new Event("sample-products-changed")),ge.success("All sample products restored to marketplace")}catch(u){console.error("Failed to clear hidden products:",u),ge.error("Failed to restore products")}},l=Xm.filter(u=>!t.includes(u.id)),d=Xm.filter(u=>t.includes(u.id));return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Sample Product Management"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Manage visibility of sample products in the marketplace"})]}),t.length>0&&e.jsx(O,{variant:"outline",onClick:o,children:"Restore All Hidden Products"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(re,{children:[e.jsxs(Ie,{children:[e.jsxs(Oe,{className:"flex items-center gap-2",children:[e.jsx(Ut,{className:"w-5 h-5 text-green-500"}),"Visible Products (",l.length,")"]}),e.jsx(ts,{children:"These sample products are currently shown in the marketplace"})]}),e.jsxs(ie,{className:"space-y-3",children:[l.map(u=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium",children:u.name}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[u.price.toLocaleString()," MMK • ",u.sellerName]})]}),e.jsx(O,{variant:"outline",size:"sm",onClick:()=>i(u.id),children:"Hide"})]},u.id)),l.length===0&&e.jsx("p",{className:"text-center text-muted-foreground py-4",children:"All sample products are currently hidden"})]})]}),e.jsxs(re,{children:[e.jsxs(Ie,{children:[e.jsxs(Oe,{className:"flex items-center gap-2",children:[e.jsx(An,{className:"w-5 h-5 text-red-500"}),"Hidden Products (",t.length,")"]}),e.jsx(ts,{children:"These sample products are hidden from the marketplace"})]}),e.jsxs(ie,{className:"space-y-3",children:[d.map(u=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg bg-red-50/50",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium",children:u.name}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[u.price.toLocaleString()," MMK • ",u.sellerName]})]}),e.jsx(O,{variant:"outline",size:"sm",onClick:()=>n(u.id),children:"Restore"})]},u.id)),t.length===0&&e.jsx("p",{className:"text-center text-muted-foreground py-4",children:"No sample products are currently hidden"})]})]})]}),e.jsxs(is,{children:[e.jsx(as,{className:"w-4 h-4"}),e.jsxs(os,{children:[e.jsx("strong",{children:"Note:"})," Sample products are demonstration data included with the platform. Hiding them removes them from the marketplace view but they can be restored at any time. This feature is useful for customizing the initial product display for specific deployments."]})]})]})}function aI({currentAdmin:t,onBack:s}){const[n,i]=v.useState([]),[o,l]=v.useState(null),[d,u]=v.useState(""),[f,p]=v.useState(!1);v.useEffect(()=>{const S=()=>{try{const C=localStorage.getItem("agriconnect-verification-requests");if(C){const E=JSON.parse(C);i(E)}}catch(C){console.error("Failed to load verification requests:",C)}};S();const k=setInterval(S,3e4);return()=>clearInterval(k)},[]);const g=S=>{switch(S){case"pending":return"bg-yellow-500";case"approved":return"bg-green-500";case"rejected":return"bg-red-500";default:return"bg-gray-500"}},h=S=>{if(S.type)switch(S.type){case"id":return"ID Verification";case"business":return"Business Verification";case"buyer":return"Buyer Verification";default:return"Unknown Verification Type"}const{requestType:k,userType:C}=S;switch(k){case"tier1":return C==="trader"?"Tier 1 Trader Verification":"Basic Farmer Verification";case"tier2":return C==="trader"?"Tier 2 Business Trader Verification":"Business Farmer Verification";case"buyer":return"Buyer Verification";default:return"Unknown Verification Type"}},y=async S=>{p(!0);try{const k={...S,status:"approved",reviewedAt:new Date().toISOString(),reviewedBy:t.email,reviewNotes:d||"Request approved",documents:{...S.documents,nationalId:S.documents.nationalId?{...S.documents.nationalId,status:"verified"}:void 0,businessLicense:S.documents.businessLicense?{...S.documents.businessLicense,status:"verified"}:void 0,farmCertification:S.documents.farmCertification?{...S.documents.farmCertification,status:"verified"}:void 0}},C=n.map(R=>R.id===S.id?k:R);localStorage.setItem("agriconnect-verification-requests",JSON.stringify(C)),i(C);const E=(R,$)=>{const J=R.map(z=>{if(z.id===S.userId||z.email===S.userEmail){const q={...z};return S.type==="id"?(q.verified=!0,q.verificationStatus="verified",q.verificationDate=new Date().toISOString(),q.verificationSubmitted=!1,S.additionalInfo&&(S.additionalInfo.fullName&&(q.name=S.additionalInfo.fullName),S.additionalInfo.phoneNumber&&(q.phone=S.additionalInfo.phoneNumber),S.additionalInfo.address&&(q.location=S.additionalInfo.address))):S.type==="business"?(q.businessVerified=!0,q.verificationStatus="verified",q.verificationDate=new Date().toISOString(),q.verificationSubmitted=!1,q.verificationDocuments={...z.verificationDocuments,businessLicense:"verified"},S.additionalInfo&&(S.additionalInfo.businessName&&(q.businessName=S.additionalInfo.businessName),S.additionalInfo.businessType&&(q.businessType=S.additionalInfo.businessType),S.additionalInfo.businessAddress&&(q.location=S.additionalInfo.businessAddress))):S.requestType&&(q.verified=!0,q.verificationStatus="verified",q.verificationDate=new Date().toISOString(),q.verificationSubmitted=!1,(S.requestType==="tier2"||S.requestType==="buyer")&&(q.verificationDocuments={...z.verificationDocuments,businessLicense:"verified"}),S.businessInfo&&(q.businessName=S.businessInfo.businessName||z.businessName,q.businessDescription=S.businessInfo.businessDescription||z.businessDescription,q.businessType=S.businessInfo.businessType||z.businessType,S.businessInfo.location&&(q.location=S.businessInfo.location))),q}return z});return localStorage.setItem($,JSON.stringify(J)),J},P=JSON.parse(localStorage.getItem("agriconnect-myanmar-users")||"[]"),T=E(P,"agriconnect-myanmar-users"),A=JSON.parse(localStorage.getItem("agriconnect-myanmar-current-user")||"null");if(A&&(A.id===S.userId||A.email===S.userEmail)){const R=T.find($=>$.id===S.userId||$.email===S.userEmail);R&&localStorage.setItem("agriconnect-myanmar-current-user",JSON.stringify(R))}ge.success(`Verification request approved for ${S.userName}`),l(null),u("")}catch(k){console.error("Failed to approve request:",k),ge.error("Failed to approve verification request")}finally{p(!1)}},j=async S=>{if(!d.trim()){ge.error("Please provide rejection reason in review notes");return}p(!0);try{const k={...S,status:"rejected",reviewedAt:new Date().toISOString(),reviewedBy:t.email,reviewNotes:d,documents:{...S.documents,nationalId:S.documents.nationalId?{...S.documents.nationalId,status:"rejected"}:void 0,businessLicense:S.documents.businessLicense?{...S.documents.businessLicense,status:"rejected"}:void 0,farmCertification:S.documents.farmCertification?{...S.documents.farmCertification,status:"rejected"}:void 0}},C=n.map(A=>A.id===S.id?k:A);localStorage.setItem("agriconnect-verification-requests",JSON.stringify(C)),i(C);const P=JSON.parse(localStorage.getItem("agriconnect-myanmar-users")||"[]").map(A=>{if(A.id===S.userId){const R={...A,verificationStatus:"rejected",verificationRejectedAt:new Date().toISOString(),verificationRejectionReason:d,verificationSubmitted:!1};return S.type==="id"?R.verified=!1:S.type==="business"&&(R.businessVerified=!1),R}return A});localStorage.setItem("agriconnect-myanmar-users",JSON.stringify(P));const T=JSON.parse(localStorage.getItem("agriconnect-myanmar-current-user")||"null");if(T&&(T.id===S.userId||T.email===S.userEmail)){const A=P.find(R=>R.id===S.userId||R.email===S.userEmail);A&&localStorage.setItem("agriconnect-myanmar-current-user",JSON.stringify(A))}ge.success(`Verification request rejected for ${S.userName}`),l(null),u("")}catch(k){console.error("Failed to reject request:",k),ge.error("Failed to reject verification request")}finally{p(!1)}},b=n.filter(S=>S.status==="pending"),w=n.filter(S=>S.status!=="pending");return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Admin Verification Panel"}),e.jsx("p",{className:"text-muted-foreground",children:"Review and approve user verification requests"})]}),e.jsx(O,{variant:"outline",onClick:s,children:"Back to Admin Panel"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx(re,{children:e.jsx(ie,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Lt,{className:"w-5 h-5 text-yellow-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold",children:b.length}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Pending Reviews"})]})]})})}),e.jsx(re,{children:e.jsx(ie,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(He,{className:"w-5 h-5 text-green-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold",children:n.filter(S=>S.status==="approved").length}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Approved"})]})]})})}),e.jsx(re,{children:e.jsx(ie,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(An,{className:"w-5 h-5 text-red-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold",children:n.filter(S=>S.status==="rejected").length}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Rejected"})]})]})})}),e.jsx(re,{children:e.jsx(ie,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(dt,{className:"w-5 h-5 text-blue-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold",children:n.length}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Requests"})]})]})})})]}),e.jsxs(Bf,{defaultValue:"pending",className:"space-y-4",children:[e.jsxs(Uf,{children:[e.jsxs(Nr,{value:"pending",children:["Under Review (",b.length,")"]}),e.jsxs(Nr,{value:"processed",children:["Processed (",w.length,")"]}),e.jsx(Nr,{value:"sample-products",children:"Sample Products"}),e.jsx(Nr,{value:"storage",children:"Storage Management"}),e.jsx(Nr,{value:"debug",children:"Storage Debug"})]}),e.jsx(da,{value:"pending",className:"space-y-4",children:b.length===0?e.jsxs(is,{children:[e.jsx(Lt,{className:"w-4 h-4"}),e.jsx(os,{children:"No pending verification requests at the moment."})]}):e.jsx("div",{className:"grid gap-4",children:b.map(S=>e.jsxs(re,{className:"border-yellow-200 bg-yellow-50/50",children:[e.jsx(Ie,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx($t,{className:"w-4 h-4"}),e.jsx("span",{className:"font-semibold",children:S.userName})]}),e.jsx(Ee,{variant:"secondary",children:S.userType}),e.jsx(Ee,{className:g(S.status),children:S.status})]}),e.jsxs(rw,{children:[e.jsx(nw,{asChild:!0,children:e.jsxs(O,{variant:"outline",size:"sm",onClick:()=>l(S),children:[e.jsx(Ut,{className:"w-4 h-4 mr-2"}),"Review"]})}),e.jsxs(Df,{className:"max-w-4xl max-h-[80vh] overflow-y-auto",children:[e.jsxs(iw,{children:[e.jsx(Mf,{children:"Verification Request Review"}),e.jsxs(Of,{children:[h(S)," for ",S.userName]})]}),o&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"font-semibold flex items-center gap-2",children:[e.jsx($t,{className:"w-4 h-4"}),"User Information"]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx($e,{children:"Name"}),e.jsx("p",{className:"text-foreground",children:o.userName})]}),e.jsxs("div",{children:[e.jsx($e,{children:"Email"}),e.jsx("p",{className:"text-foreground",children:o.userEmail})]}),e.jsxs("div",{children:[e.jsx($e,{children:"User Type"}),e.jsx("p",{className:"text-foreground",children:o.userType})]}),e.jsxs("div",{children:[e.jsx($e,{children:"Request Type"}),e.jsx("p",{className:"text-foreground",children:h(o)})]})]})]}),o.businessInfo&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"font-semibold flex items-center gap-2",children:[e.jsx($n,{className:"w-4 h-4"}),"Business Information"]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4 text-sm",children:[o.businessInfo.businessName&&e.jsxs("div",{children:[e.jsx($e,{children:"Business Name"}),e.jsx("p",{className:"text-foreground",children:o.businessInfo.businessName})]}),o.businessInfo.businessType&&e.jsxs("div",{children:[e.jsx($e,{children:"Business Type"}),e.jsx("p",{className:"text-foreground",children:o.businessInfo.businessType})]}),o.businessInfo.location&&e.jsxs("div",{children:[e.jsx($e,{children:"Location"}),e.jsx("p",{className:"text-foreground",children:o.businessInfo.location})]}),o.businessInfo.registrationNumber&&e.jsxs("div",{children:[e.jsx($e,{children:"Registration Number"}),e.jsx("p",{className:"text-foreground",children:o.businessInfo.registrationNumber})]})]}),o.businessInfo.businessDescription&&e.jsxs("div",{children:[e.jsx($e,{children:"Business Description"}),e.jsx("p",{className:"text-foreground text-sm mt-1",children:o.businessInfo.businessDescription})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"font-semibold flex items-center gap-2",children:[e.jsx(er,{className:"w-4 h-4"}),"Submitted Documents"]}),o.documents.nationalId&&e.jsxs("div",{className:"border rounded-lg p-4 space-y-2",children:[e.jsx($e,{children:"National ID"}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:[o.documents.nationalId.front&&e.jsx("div",{children:"✓ Front side uploaded"}),o.documents.nationalId.back&&e.jsx("div",{children:"✓ Back side uploaded"}),e.jsx(Ee,{variant:"outline",className:"mt-2",children:o.documents.nationalId.status})]})]}),o.documents.businessLicense&&e.jsxs("div",{className:"border rounded-lg p-4 space-y-2",children:[e.jsx($e,{children:"Business License"}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:[o.documents.businessLicense.document&&e.jsx("div",{children:"✓ Business license uploaded"}),e.jsx(Ee,{variant:"outline",className:"mt-2",children:o.documents.businessLicense.status})]})]}),o.documents.farmCertification&&e.jsxs("div",{className:"border rounded-lg p-4 space-y-2",children:[e.jsx($e,{children:"Farm Certification"}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:[o.documents.farmCertification.document&&e.jsx("div",{children:"✓ Farm certification uploaded"}),e.jsx(Ee,{variant:"outline",className:"mt-2",children:o.documents.farmCertification.status})]})]})]}),e.jsx(sr,{}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx($e,{htmlFor:"reviewNotes",children:"Review Notes"}),e.jsx(es,{id:"reviewNotes",value:d,onChange:k=>u(k.target.value),placeholder:"Add notes about your decision...",className:"mt-2"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs(O,{onClick:()=>y(o),disabled:f,className:"bg-green-600 hover:bg-green-700",children:[e.jsx(He,{className:"w-4 h-4 mr-2"}),"Approve Request"]}),e.jsxs(O,{variant:"destructive",onClick:()=>j(o),disabled:f||!d.trim(),children:[e.jsx(An,{className:"w-4 h-4 mr-2"}),"Reject Request"]})]})]})]})]})]})]})}),e.jsx(ie,{children:e.jsxs("div",{className:"text-sm space-y-2",children:[e.jsxs("p",{className:"text-muted-foreground",children:[e.jsx("strong",{children:"Type:"})," ",h(S)]}),e.jsxs("p",{className:"text-muted-foreground",children:[e.jsx("strong",{children:"Submitted:"})," ",new Date(S.submittedAt).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})]}),e.jsxs("p",{className:"text-muted-foreground",children:[e.jsx("strong",{children:"Email:"})," ",S.userEmail]})]})})]},S.id))})}),e.jsx(da,{value:"processed",className:"space-y-4",children:w.length===0?e.jsxs(is,{children:[e.jsx(as,{className:"w-4 h-4"}),e.jsx(os,{children:"No processed verification requests yet."})]}):e.jsx("div",{className:"grid gap-4",children:w.map(S=>e.jsxs(re,{className:S.status==="approved"?"border-green-200 bg-green-50/50":"border-red-200 bg-red-50/50",children:[e.jsx(Ie,{className:"pb-3",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx($t,{className:"w-4 h-4"}),e.jsx("span",{className:"font-semibold",children:S.userName})]}),e.jsx(Ee,{variant:"secondary",children:S.userType}),e.jsx(Ee,{className:g(S.status),children:S.status})]})})}),e.jsx(ie,{children:e.jsxs("div",{className:"text-sm space-y-2",children:[e.jsxs("p",{className:"text-muted-foreground",children:[e.jsx("strong",{children:"Type:"})," ",h(S)]}),e.jsxs("p",{className:"text-muted-foreground",children:[e.jsx("strong",{children:"Reviewed:"})," ",S.reviewedAt?new Date(S.reviewedAt).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A"]}),e.jsxs("p",{className:"text-muted-foreground",children:[e.jsx("strong",{children:"Reviewed by:"})," ",S.reviewedBy||"N/A"]}),S.reviewNotes&&e.jsxs("p",{className:"text-muted-foreground",children:[e.jsx("strong",{children:"Notes:"})," ",S.reviewNotes]})]})})]},S.id))})}),e.jsx(da,{value:"sample-products",className:"space-y-4",children:e.jsx(nI,{})}),e.jsx(da,{value:"storage",className:"space-y-4",children:e.jsx(sI,{})}),e.jsx(da,{value:"debug",className:"space-y-4",children:e.jsx(rI,{})})]})]})}function iI({currentUser:t}){const[s,n]=v.useState([]),[i,o]=v.useState(null);v.useEffect(()=>{l(),t&&o(t)},[t]);const l=()=>{try{const j=JSON.parse(localStorage.getItem("agriconnect-verification-requests")||"[]"),b=j.filter(w=>w&&typeof w.id=="string"&&typeof w.userId=="string"&&typeof w.userEmail=="string"&&typeof w.userName=="string");if(n(b),!t){const w=JSON.parse(localStorage.getItem("agriconnect-myanmar-current-user")||"null");o(w)}console.log("📋 Loaded data:",{requestCount:b.length,filteredOut:j.length-b.length,currentUser:(t||i)?.email||"None"})}catch(j){console.error("Failed to load data:",j),ge.error("Failed to load verification data"),n([]),t||o(null)}},d=j=>{const w={admin:{id:"admin-001",email:"admin@agrilink.com",name:"Admin User",userType:"admin",verified:!0},farmer:{id:"farmer-001",email:"farmer@demo.com",name:"Test Farmer",userType:"farmer",verified:!1},buyer:{id:"buyer-001",email:"buyer@demo.com",name:"Test Buyer",userType:"buyer",verified:!1}}[j];localStorage.setItem("agriconnect-myanmar-current-user",JSON.stringify(w)),o(w),ge.success(`Logged in as ${w.name}`)},u=()=>{localStorage.removeItem("agriconnect-myanmar-current-user"),o(null),ge.success("Logged out")},f=()=>{const j="data:image/jpeg;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mNk+M9QDwADhgGAWjR9awAAAABJRU5ErkJggg==",b={id:`verification-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,userId:"test-user-001",userEmail:"testuser@demo.com",userName:"Test User",userType:"farmer",type:"id",status:"pending",submittedAt:new Date().toISOString(),documents:{nationalId:{front:j,back:j,status:"pending"},selfieWithId:j},additionalInfo:{fullName:"Test User",phoneNumber:"+95 9 123 456 789",address:"Yangon, Myanmar"}};try{const w=JSON.parse(localStorage.getItem("agriconnect-verification-requests")||"[]");w.push(b),localStorage.setItem("agriconnect-verification-requests",JSON.stringify(w)),n(w),ge.success("✅ Test verification request created")}catch(w){console.error("Failed to create test request:",w),ge.error("❌ Failed to create test request")}},p=(j,b)=>{try{const S=JSON.parse(localStorage.getItem("agriconnect-verification-requests")||"[]").map(k=>k.id===j?{...k,status:b}:k);localStorage.setItem("agriconnect-verification-requests",JSON.stringify(S)),n(S),ge.success(`✅ Request ${b}`)}catch(w){console.error("Failed to update request:",w),ge.error("❌ Failed to update request")}},g=()=>{localStorage.removeItem("agriconnect-verification-requests"),n([]),ge.success("🗑️ All requests cleared")},h=()=>{try{const j=[{id:"admin-001",email:"admin@agrilink.com",password:"admin123",name:"Admin User",userType:"admin",verified:!0},{id:"farmer-001",email:"farmer@demo.com",password:"demo123",name:"Test Farmer",userType:"farmer",verified:!1}];localStorage.setItem("agriconnect-myanmar-users",JSON.stringify(j)),ge.success("🎯 Demo users initialized")}catch(j){console.error("Failed to initialize demo users:",j),ge.error("❌ Failed to initialize demo users")}},y=j=>{switch(j){case"approved":return"bg-green-100 text-green-800";case"rejected":return"bg-red-100 text-red-800";case"pending":default:return"bg-yellow-100 text-yellow-800"}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs(re,{children:[e.jsxs(Ie,{children:[e.jsxs(Oe,{className:"flex items-center gap-2",children:[e.jsx(rr,{className:"w-5 h-5"}),"Simple Verification Tester"]}),e.jsx(ts,{children:"Direct localStorage testing for verification system - No authentication complexity"})]}),e.jsxs(ie,{className:"space-y-4",children:[e.jsxs("div",{className:"p-3 bg-muted rounded-lg",children:[e.jsx("p",{className:"text-sm font-medium mb-2",children:"Current User:"}),i?e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx($t,{className:"w-4 h-4"}),e.jsxs("span",{className:"text-sm",children:[i.name," (",i.email,")"]}),e.jsx(Ee,{variant:"secondary",children:i.userType})]}),e.jsx(O,{variant:"outline",size:"sm",onClick:u,children:"Logout"})]}):e.jsx("p",{className:"text-sm text-muted-foreground",children:"Not logged in"})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:[e.jsx(O,{variant:"outline",size:"sm",onClick:()=>d("admin"),children:"Login as Admin"}),e.jsx(O,{variant:"outline",size:"sm",onClick:()=>d("farmer"),children:"Login as Farmer"}),e.jsx(O,{variant:"outline",size:"sm",onClick:()=>d("buyer"),children:"Login as Buyer"}),e.jsx(O,{variant:"outline",size:"sm",onClick:h,children:"Init Demo Users"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-2",children:[e.jsxs(O,{onClick:f,className:"w-full",children:[e.jsx(fa,{className:"w-4 h-4 mr-2"}),"Add Test Request"]}),e.jsxs(O,{variant:"outline",onClick:l,className:"w-full",children:[e.jsx(rr,{className:"w-4 h-4 mr-2"}),"Refresh Data"]}),e.jsxs(O,{variant:"destructive",onClick:g,className:"w-full",children:[e.jsx(Tr,{className:"w-4 h-4 mr-2"}),"Clear All"]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 py-2",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-lg font-bold",children:s.filter(j=>j.status==="pending").length}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Under Review"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-lg font-bold",children:s.filter(j=>j.status==="approved").length}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Approved"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-lg font-bold",children:s.filter(j=>j.status==="rejected").length}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Rejected"})]})]})]})]}),e.jsxs(re,{children:[e.jsx(Ie,{children:e.jsxs(Oe,{children:["Verification Requests (",s.length,")"]})}),e.jsx(ie,{children:s.length===0?e.jsxs(is,{children:[e.jsx(Lt,{className:"w-4 h-4"}),e.jsx(os,{children:"No verification requests found. Create a test request to get started."})]}):e.jsx("div",{className:"space-y-3",children:s.map(j=>e.jsxs("div",{className:"border rounded-lg p-4 space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx($t,{className:"w-4 h-4"}),e.jsx("span",{className:"font-medium",children:j.userName}),e.jsx(Ee,{variant:"secondary",children:j.userType}),e.jsx(Ee,{className:y(j.status),children:j.status})]}),e.jsx("div",{className:"text-sm text-muted-foreground",children:new Date(j.submittedAt).toLocaleDateString()})]}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:[e.jsxs("p",{children:["Email: ",j.userEmail]}),e.jsxs("p",{children:["Phone: ",j.additionalInfo?.phoneNumber||"Not provided"]}),e.jsxs("p",{children:["Address: ",j.additionalInfo?.address||"Not provided"]})]}),i?.userType==="admin"&&j.status==="pending"&&e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(O,{size:"sm",onClick:()=>p(j.id,"approved"),className:"bg-green-600 hover:bg-green-700",children:[e.jsx(He,{className:"w-4 h-4 mr-1"}),"Approve"]}),e.jsx(O,{size:"sm",variant:"destructive",onClick:()=>p(j.id,"rejected"),children:"Reject"})]})]},j.id))})})]})]})}function oI({onBack:t}){return e.jsxs("div",{className:"max-w-4xl mx-auto space-y-8",children:[e.jsxs("div",{className:"space-y-4 mb-8",children:[e.jsxs(O,{variant:"ghost",onClick:t,className:"h-9 px-3 -ml-3",children:[e.jsx(ls,{className:"w-4 h-4 mr-2"}),"Back"]}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl md:text-3xl font-bold",children:"About AgriLink"}),e.jsx("p",{className:"text-muted-foreground",children:"Connecting Myanmar's Agricultural Community"})]})]}),e.jsxs(re,{className:"border-primary/20 bg-primary/5",children:[e.jsx(Ie,{children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-primary rounded-lg flex items-center justify-center",children:e.jsx(nr,{className:"w-5 h-5 text-primary-foreground"})}),e.jsxs("div",{children:[e.jsx(Oe,{children:"Our Mission"}),e.jsx(ts,{children:"Empowering Myanmar's agricultural ecosystem"})]})]})}),e.jsx(ie,{children:e.jsx("p",{className:"text-base leading-relaxed",children:"AgriLink is dedicated to creating transparent, efficient connections between farmers, traders, and buyers across Myanmar. We believe in fair pricing, quality products, and building trust through verified partnerships that strengthen our agricultural community."})})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Core Values"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs(re,{children:[e.jsx(Ie,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(vo,{className:"w-5 h-5 text-primary"}),e.jsx(Oe,{className:"text-lg",children:"Transparency"})]})}),e.jsx(ie,{children:e.jsx("p",{className:"text-sm text-muted-foreground",children:"Clear pricing, honest product descriptions, and verified seller information to build trust in every transaction."})})]}),e.jsxs(re,{children:[e.jsx(Ie,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(No,{className:"w-5 h-5 text-primary"}),e.jsx(Oe,{className:"text-lg",children:"Community"})]})}),e.jsx(ie,{children:e.jsx("p",{className:"text-sm text-muted-foreground",children:"Supporting local farmers and building connections that strengthen Myanmar's agricultural network."})})]}),e.jsxs(re,{children:[e.jsx(Ie,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(pa,{className:"w-5 h-5 text-primary"}),e.jsx(Oe,{className:"text-lg",children:"Quality"})]})}),e.jsx(ie,{children:e.jsx("p",{className:"text-sm text-muted-foreground",children:"Promoting high-quality agricultural products and sustainable farming practices across Myanmar."})})]}),e.jsxs(re,{children:[e.jsx(Ie,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ek,{className:"w-5 h-5 text-primary"}),e.jsx(Oe,{className:"text-lg",children:"Innovation"})]})}),e.jsx(ie,{children:e.jsx("p",{className:"text-sm text-muted-foreground",children:"Using technology to modernize agricultural trade while respecting traditional farming values and practices."})})]})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Project Background"}),e.jsxs(re,{children:[e.jsx(Ie,{children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(vS,{className:"w-6 h-6 text-primary"}),e.jsxs("div",{children:[e.jsx(Oe,{children:"Academic Partnership Project"}),e.jsx(ts,{children:"6th Semester IBS Project"})]})]})}),e.jsxs(ie,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx($n,{className:"w-4 h-4 text-primary"}),e.jsx("span",{className:"font-medium",children:"External Client"})]}),e.jsx("p",{className:"text-sm text-muted-foreground pl-6",children:"Infinity Success Co. Ltd."})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Lt,{className:"w-4 h-4 text-primary"}),e.jsx("span",{className:"font-medium",children:"Timeline"})]}),e.jsx("p",{className:"text-sm text-muted-foreground pl-6",children:"12-week development cycle"})]})]}),e.jsxs("div",{className:"pt-4 border-t",children:[e.jsx("h4",{className:"font-medium mb-3",children:"Key Features"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(He,{className:"w-4 h-4 text-primary"}),e.jsx("span",{className:"text-sm",children:"Price transparency system"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(He,{className:"w-4 h-4 text-primary"}),e.jsx("span",{className:"text-sm",children:"Seller verification system"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(He,{className:"w-4 h-4 text-primary"}),e.jsx("span",{className:"text-sm",children:"Mobile-first design"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(He,{className:"w-4 h-4 text-primary"}),e.jsx("span",{className:"text-sm",children:"Myanmar agricultural context"})]})]})]})]})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Who We Serve"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs(re,{className:"text-center",children:[e.jsxs(Ie,{children:[e.jsx(Io,{className:"w-8 h-8 text-primary mx-auto mb-2"}),e.jsx(Oe,{className:"text-lg",children:"Farmers"})]}),e.jsx(ie,{children:e.jsx("p",{className:"text-sm text-muted-foreground",children:"Connect directly with buyers, get fair prices for your products, and expand your market reach across Myanmar."})})]}),e.jsxs(re,{className:"text-center",children:[e.jsxs(Ie,{children:[e.jsx(fc,{className:"w-8 h-8 text-primary mx-auto mb-2"}),e.jsx(Oe,{className:"text-lg",children:"Traders"})]}),e.jsx(ie,{children:e.jsx("p",{className:"text-sm text-muted-foreground",children:"Source quality products from verified farmers and efficiently distribute to buyers throughout the region."})})]}),e.jsxs(re,{className:"text-center",children:[e.jsxs(Ie,{children:[e.jsx(No,{className:"w-8 h-8 text-primary mx-auto mb-2"}),e.jsx(Oe,{className:"text-lg",children:"Buyers"})]}),e.jsx(ie,{children:e.jsx("p",{className:"text-sm text-muted-foreground",children:"Access fresh, quality agricultural products directly from verified sources with transparent pricing."})})]})]})]}),e.jsxs("div",{className:"text-center pt-6",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"For more information about this project or partnership opportunities,"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"please contact us through our support channels."})]})]})}function lI({onBack:t,currentUser:s}){const[n,i]=v.useState({name:s?.name||"",email:s?.email||"",subject:"",message:"",category:""}),[o,l]=v.useState(!1),d=async f=>{if(f.preventDefault(),!n.name||!n.email||!n.message){ge.error("Please fill in all required fields");return}l(!0);try{await new Promise(p=>setTimeout(p,1500)),ge.success("Message sent successfully! We'll get back to you soon."),i({name:"",email:"",subject:"",message:"",category:""})}catch{ge.error("Failed to send message. Please try again.")}finally{l(!1)}},u=(f,p)=>{i(g=>({...g,[f]:p}))};return e.jsxs("div",{className:"max-w-4xl mx-auto space-y-8",children:[e.jsxs("div",{className:"space-y-4 mb-8",children:[e.jsxs(O,{variant:"ghost",onClick:t,className:"h-9 px-3 -ml-3",children:[e.jsx(ls,{className:"w-4 h-4 mr-2"}),"Back"]}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl md:text-3xl font-bold",children:"Contact & Support"}),e.jsx("p",{className:"text-muted-foreground",children:"Get in touch with the AgriLink team for any questions or support"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsx("div",{className:"lg:col-span-2 space-y-6",children:e.jsxs(re,{children:[e.jsxs(Ie,{children:[e.jsxs(Oe,{className:"flex items-center gap-2",children:[e.jsx(js,{className:"w-5 h-5 text-primary"}),"Send us a Message"]}),e.jsx(ts,{children:"Need help or have questions? Send us a message and we'll respond as soon as possible."})]}),e.jsx(ie,{children:e.jsxs("form",{onSubmit:d,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Name *"}),e.jsx(Ue,{value:n.name,onChange:f=>u("name",f.target.value),placeholder:"Your full name",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Email *"}),e.jsx(Ue,{type:"email",value:n.email,onChange:f=>u("email",f.target.value),placeholder:"your.email@example.com",required:!0})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Category"}),e.jsxs(Yt,{value:n.category,onValueChange:f=>u("category",f),children:[e.jsx(Xt,{className:"w-full",children:e.jsx(Qt,{placeholder:"Select a category"})}),e.jsxs(Zt,{children:[e.jsx(De,{value:"general",children:"General Inquiry"}),e.jsx(De,{value:"technical",children:"Technical Support"}),e.jsx(De,{value:"verification",children:"Account Verification"}),e.jsx(De,{value:"dispute",children:"Transaction Dispute"}),e.jsx(De,{value:"partnership",children:"Partnership"}),e.jsx(De,{value:"feedback",children:"Feedback"}),e.jsx(De,{value:"bug",children:"Bug Report"})]})]}),n.category==="technical"&&e.jsx("p",{className:"text-xs text-muted-foreground bg-blue-50 p-2 rounded",children:"💡 For technical issues, please describe what you were doing when the problem occurred and any error messages you saw."}),n.category==="verification"&&e.jsx("p",{className:"text-xs text-muted-foreground bg-green-50 p-2 rounded",children:"✅ For verification help, please mention your account type (Individual/Business) and which step you need assistance with."}),n.category==="dispute"&&e.jsx("p",{className:"text-xs text-muted-foreground bg-orange-50 p-2 rounded",children:"⚖️ For transaction disputes, please include relevant details about the order, seller, and the issue you're experiencing."}),n.category==="partnership"&&e.jsx("p",{className:"text-xs text-muted-foreground bg-purple-50 p-2 rounded",children:"🤝 For partnership inquiries, please describe your business and how you'd like to collaborate with AgriLink."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Subject"}),e.jsx(Ue,{value:n.subject,onChange:f=>u("subject",f.target.value),placeholder:"Brief description of your inquiry"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Message *"}),e.jsx(es,{value:n.message,onChange:f=>u("message",f.target.value),placeholder:"Tell us how we can help you...",className:"min-h-32",required:!0})]}),e.jsx(O,{type:"submit",className:"w-full",disabled:o,children:o?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-current border-t-transparent rounded-full animate-spin mr-2"}),"Sending..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Lv,{className:"w-4 h-4 mr-2"}),"Send Message"]})})]})})]})}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(re,{children:[e.jsxs(Ie,{children:[e.jsx(Oe,{className:"text-lg",children:"Project Information"}),e.jsx(ts,{children:"Academic project details"})]}),e.jsx(ie,{className:"space-y-4",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx($n,{className:"w-4 h-4 text-primary mt-1"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-sm",children:"External Client"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Infinity Success Co. Ltd."})]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx($t,{className:"w-4 h-4 text-primary mt-1"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-sm",children:"Project Type"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"6th Semester IBS Project"})]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Lt,{className:"w-4 h-4 text-primary mt-1"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-sm",children:"Development Period"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"12-week timeline"})]})]})]})})]}),e.jsxs(re,{children:[e.jsx(Ie,{children:e.jsx(Oe,{className:"text-lg",children:"Response Time"})}),e.jsx(ie,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(He,{className:"w-4 h-4 text-green-600"}),e.jsx("span",{className:"text-sm",children:"General inquiries: 1-2 business days"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(He,{className:"w-4 h-4 text-green-600"}),e.jsx("span",{className:"text-sm",children:"Technical/Account support: Same day"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(He,{className:"w-4 h-4 text-green-600"}),e.jsx("span",{className:"text-sm",children:"Partnership inquiries: 2-3 business days"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(He,{className:"w-4 h-4 text-green-600"}),e.jsx("span",{className:"text-sm",children:"Transaction disputes: 1 business day"})]})]})})]})]})]})]})}var rd="Collapsible",[cI,Vw]=Ns(rd),[dI,Vf]=cI(rd),qw=v.forwardRef((t,s)=>{const{__scopeCollapsible:n,open:i,defaultOpen:o,disabled:l,onOpenChange:d,...u}=t,[f,p]=Ir({prop:i,defaultProp:o??!1,onChange:d,caller:rd});return e.jsx(dI,{scope:n,disabled:l,contentId:Bs(),open:f,onOpenToggle:v.useCallback(()=>p(g=>!g),[p]),children:e.jsx(Le.div,{"data-state":Hf(f),"data-disabled":l?"":void 0,...u,ref:s})})});qw.displayName=rd;var Hw="CollapsibleTrigger",Ww=v.forwardRef((t,s)=>{const{__scopeCollapsible:n,...i}=t,o=Vf(Hw,n);return e.jsx(Le.button,{type:"button","aria-controls":o.contentId,"aria-expanded":o.open||!1,"data-state":Hf(o.open),"data-disabled":o.disabled?"":void 0,disabled:o.disabled,...i,ref:s,onClick:be(t.onClick,o.onOpenToggle)})});Ww.displayName=Hw;var qf="CollapsibleContent",Kw=v.forwardRef((t,s)=>{const{forceMount:n,...i}=t,o=Vf(qf,t.__scopeCollapsible);return e.jsx(ds,{present:n||o.open,children:({present:l})=>e.jsx(uI,{...i,ref:s,present:l})})});Kw.displayName=qf;var uI=v.forwardRef((t,s)=>{const{__scopeCollapsible:n,present:i,children:o,...l}=t,d=Vf(qf,n),[u,f]=v.useState(i),p=v.useRef(null),g=Ye(s,p),h=v.useRef(0),y=h.current,j=v.useRef(0),b=j.current,w=d.open||u,S=v.useRef(w),k=v.useRef(void 0);return v.useEffect(()=>{const C=requestAnimationFrame(()=>S.current=!1);return()=>cancelAnimationFrame(C)},[]),vt(()=>{const C=p.current;if(C){k.current=k.current||{transitionDuration:C.style.transitionDuration,animationName:C.style.animationName},C.style.transitionDuration="0s",C.style.animationName="none";const E=C.getBoundingClientRect();h.current=E.height,j.current=E.width,S.current||(C.style.transitionDuration=k.current.transitionDuration,C.style.animationName=k.current.animationName),f(i)}},[d.open,i]),e.jsx(Le.div,{"data-state":Hf(d.open),"data-disabled":d.disabled?"":void 0,id:d.contentId,hidden:!w,...l,ref:g,style:{"--radix-collapsible-content-height":y?`${y}px`:void 0,"--radix-collapsible-content-width":b?`${b}px`:void 0,...t.style},children:w&&o})});function Hf(t){return t?"open":"closed"}var mI=qw,fI=Ww,hI=Kw,lr="Accordion",pI=["Home","End","ArrowDown","ArrowUp","ArrowLeft","ArrowRight"],[Wf,gI,xI]=Mc(lr),[nd]=Ns(lr,[xI,Vw]),Kf=Vw(),Gw=le.forwardRef((t,s)=>{const{type:n,...i}=t,o=i,l=i;return e.jsx(Wf.Provider,{scope:t.__scopeAccordion,children:n==="multiple"?e.jsx(bI,{...l,ref:s}):e.jsx(wI,{...o,ref:s})})});Gw.displayName=lr;var[Jw,vI]=nd(lr),[Yw,yI]=nd(lr,{collapsible:!1}),wI=le.forwardRef((t,s)=>{const{value:n,defaultValue:i,onValueChange:o=()=>{},collapsible:l=!1,...d}=t,[u,f]=Ir({prop:n,defaultProp:i??"",onChange:o,caller:lr});return e.jsx(Jw,{scope:t.__scopeAccordion,value:le.useMemo(()=>u?[u]:[],[u]),onItemOpen:f,onItemClose:le.useCallback(()=>l&&f(""),[l,f]),children:e.jsx(Yw,{scope:t.__scopeAccordion,collapsible:l,children:e.jsx(Qw,{...d,ref:s})})})}),bI=le.forwardRef((t,s)=>{const{value:n,defaultValue:i,onValueChange:o=()=>{},...l}=t,[d,u]=Ir({prop:n,defaultProp:i??[],onChange:o,caller:lr}),f=le.useCallback(g=>u((h=[])=>[...h,g]),[u]),p=le.useCallback(g=>u((h=[])=>h.filter(y=>y!==g)),[u]);return e.jsx(Jw,{scope:t.__scopeAccordion,value:d,onItemOpen:f,onItemClose:p,children:e.jsx(Yw,{scope:t.__scopeAccordion,collapsible:!0,children:e.jsx(Qw,{...l,ref:s})})})}),[jI,ad]=nd(lr),Qw=le.forwardRef((t,s)=>{const{__scopeAccordion:n,disabled:i,dir:o,orientation:l="vertical",...d}=t,u=le.useRef(null),f=Ye(u,s),p=gI(n),h=Si(o)==="ltr",y=be(t.onKeyDown,j=>{if(!pI.includes(j.key))return;const b=j.target,w=p().filter($=>!$.ref.current?.disabled),S=w.findIndex($=>$.ref.current===b),k=w.length;if(S===-1)return;j.preventDefault();let C=S;const E=0,P=k-1,T=()=>{C=S+1,C>P&&(C=E)},A=()=>{C=S-1,C<E&&(C=P)};switch(j.key){case"Home":C=E;break;case"End":C=P;break;case"ArrowRight":l==="horizontal"&&(h?T():A());break;case"ArrowDown":l==="vertical"&&T();break;case"ArrowLeft":l==="horizontal"&&(h?A():T());break;case"ArrowUp":l==="vertical"&&A();break}const R=C%k;w[R].ref.current?.focus()});return e.jsx(jI,{scope:n,disabled:i,direction:o,orientation:l,children:e.jsx(Wf.Slot,{scope:n,children:e.jsx(Le.div,{...d,"data-orientation":l,ref:f,onKeyDown:i?void 0:y})})})}),Ec="AccordionItem",[NI,Gf]=nd(Ec),Xw=le.forwardRef((t,s)=>{const{__scopeAccordion:n,value:i,...o}=t,l=ad(Ec,n),d=vI(Ec,n),u=Kf(n),f=Bs(),p=i&&d.value.includes(i)||!1,g=l.disabled||t.disabled;return e.jsx(NI,{scope:n,open:p,disabled:g,triggerId:f,children:e.jsx(mI,{"data-orientation":l.orientation,"data-state":nb(p),...u,...o,ref:s,disabled:g,open:p,onOpenChange:h=>{h?d.onItemOpen(i):d.onItemClose(i)}})})});Xw.displayName=Ec;var Zw="AccordionHeader",eb=le.forwardRef((t,s)=>{const{__scopeAccordion:n,...i}=t,o=ad(lr,n),l=Gf(Zw,n);return e.jsx(Le.h3,{"data-orientation":o.orientation,"data-state":nb(l.open),"data-disabled":l.disabled?"":void 0,...i,ref:s})});eb.displayName=Zw;var Zm="AccordionTrigger",tb=le.forwardRef((t,s)=>{const{__scopeAccordion:n,...i}=t,o=ad(lr,n),l=Gf(Zm,n),d=yI(Zm,n),u=Kf(n);return e.jsx(Wf.ItemSlot,{scope:n,children:e.jsx(fI,{"aria-disabled":l.open&&!d.collapsible||void 0,"data-orientation":o.orientation,id:l.triggerId,...u,...i,ref:s})})});tb.displayName=Zm;var sb="AccordionContent",rb=le.forwardRef((t,s)=>{const{__scopeAccordion:n,...i}=t,o=ad(lr,n),l=Gf(sb,n),d=Kf(n);return e.jsx(hI,{role:"region","aria-labelledby":l.triggerId,"data-orientation":o.orientation,...d,...i,ref:s,style:{"--radix-accordion-content-height":"var(--radix-collapsible-content-height)","--radix-accordion-content-width":"var(--radix-collapsible-content-width)",...t.style}})});rb.displayName=sb;function nb(t){return t?"open":"closed"}var SI=Gw,kI=Xw,CI=eb,_I=tb,EI=rb;function TI({...t}){return e.jsx(SI,{"data-slot":"accordion",...t})}function PI({className:t,...s}){return e.jsx(kI,{"data-slot":"accordion-item",className:Ve("border-b last:border-b-0",t),...s})}function II({className:t,children:s,...n}){return e.jsx(CI,{className:"flex",children:e.jsxs(_I,{"data-slot":"accordion-trigger",className:Ve("focus-visible:border-ring focus-visible:ring-ring/50 flex flex-1 items-start justify-between gap-4 rounded-md py-4 text-left text-sm font-medium transition-all outline-none hover:underline focus-visible:ring-[3px] disabled:pointer-events-none disabled:opacity-50 [&[data-state=open]>svg]:rotate-180",t),...n,children:[s,e.jsx(Rc,{className:"text-muted-foreground pointer-events-none size-4 shrink-0 translate-y-0.5 transition-transform duration-200"})]})})}function AI({className:t,children:s,...n}){return e.jsx(EI,{"data-slot":"accordion-content",className:"data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down overflow-hidden text-sm",...n,children:e.jsx("div",{className:Ve("pt-0 pb-4",t),children:s})})}const xm=[{id:"getting-started",title:"Getting Started",icon:Io,color:"bg-green-100 text-green-700",questions:[{question:"How do I create an account on AgriLink?",answer:"Click the 'Register' button in the top navigation. Choose between Individual Account (for individual farmers/buyers) or Business Account (for registered businesses). Fill in the required information and verify your account through the steps provided."},{question:"What's the difference between Individual and Business accounts?",answer:"Individual accounts are for personal farmers, small-scale producers, and individual buyers. Business accounts are for registered companies, cooperatives, and formal trading businesses. Each has different verification requirements that respect Myanmar's agricultural context."},{question:"How do I add my first product listing?",answer:"After logging in as a farmer or trader, go to your Dashboard and click 'Add Listing'. Fill in product details including name, category, price, quantity, and location. Add clear photos and a detailed description to attract buyers."},{question:"Is AgriLink free to use?",answer:"Yes, AgriLink is completely free to use for all farmers, traders, and buyers. There are no listing fees, transaction fees, or subscription costs. Our goal is to make agricultural trade accessible to everyone in Myanmar."}]},{id:"verification",title:"Verification & Trust",icon:dt,color:"bg-blue-100 text-blue-700",questions:[{question:"What is the verification system?",answer:"Our verification system helps build trust by confirming seller identities and business legitimacy. Individual accounts verify personal ID and farming credentials, while Business accounts verify business registration and certifications."},{question:"Do I need a business license to sell on AgriLink?",answer:"No, you don't need a business license for an Individual Account. We understand many farmers in Myanmar operate informally. Business licenses are only required for Business Account verification."},{question:"How long does verification take?",answer:"Individual verification typically takes 1-2 business days. Business verification can take 3-5 business days as we review business documents. You can start listing products immediately, but verified status helps build buyer trust."},{question:"What documents do I need for verification?",answer:"For Individual accounts: Only Myanmar National ID/NRC is required - we respect that many farmers operate informally and don't require business licenses. For Business accounts: Business registration documents plus personal ID verification are required. All documents can be uploaded securely through the app."},{question:"Why do verification badges have different colors?",answer:"We use a color-coded system to make verification status clear at a glance: Red indicates unverified status, Yellow shows phone verification in progress, Blue means documents are under admin review, and Green indicates full verification complete. This helps users quickly assess trust levels when browsing products."}]},{id:"buying-selling",title:"Buying & Selling",icon:af,color:"bg-purple-100 text-purple-700",questions:[{question:"How do I contact a seller?",answer:"Click the 'Chat' button on any product listing to start a conversation with the seller. You can discuss pricing, quantity, quality, and delivery arrangements directly through our messaging system."},{question:"How are prices determined?",answer:"Sellers set their own prices based on quality, quantity, location, and market conditions. Use our price comparison feature to see how prices compare across different sellers for the same product."},{question:"Can I negotiate prices?",answer:"Yes! Most sellers are open to price negotiations, especially for bulk orders. Use the chat feature to discuss pricing, and remember to be respectful and fair in your negotiations."},{question:"How do payments work?",answer:"AgriLink facilitates connections but doesn't process payments directly. Buyers and sellers arrange payment methods that work for them - cash on delivery, bank transfer, or mobile payment systems popular in Myanmar."}]},{id:"delivery",title:"Delivery & Logistics",icon:ja,color:"bg-orange-100 text-orange-700",questions:[{question:"Does AgriLink provide delivery services?",answer:"AgriLink connects buyers and sellers, but delivery arrangements are made directly between parties. Sellers often provide delivery within their local area, or buyers can arrange pickup."},{question:"How do I arrange product pickup or delivery?",answer:"Discuss delivery options through the chat feature with your seller. Many farmers offer local delivery, while others prefer farm pickup. For long-distance orders, you may need to arrange third-party transport."},{question:"What if products are damaged during transport?",answer:"Inspect products upon delivery and communicate any issues immediately with the seller. Most verified sellers will work with you to resolve quality issues fairly."}]},{id:"badges",title:"Badges & Trust System",icon:dt,color:"bg-amber-100 text-amber-700",questions:[{question:"What do the different user type badges mean?",answer:"AgriLink uses badges to help identify different types of users: Farmer (green badge - grows and harvests agricultural products), Trader (orange badge - distributes and trades agricultural products), and Buyer (blue badge - purchases products for business or personal use). Each badge also shows an icon indicating account type: a person icon for Individual accounts or building icon for Business accounts."},{question:"What are the verification levels and what do they mean?",answer:"AgriLink has four verification levels with color-coded badges: Unverified (red - no verification started), Phone Verified (yellow - phone confirmed but ID still needed), Under Review (blue - documents submitted, awaiting admin review), and Verified (green - verification complete). Both Individual and Business account types go through these same levels and reach the same final 'Verified' status."},{question:"Does verification guarantee a seller is trustworthy?",answer:"Verification helps build trust by confirming identity and legitimacy, but it doesn't guarantee transaction success or product quality. We encourage all users to communicate clearly, ask questions, and use good judgment when making transactions. Think of verification as one helpful factor in building confidence, not a complete guarantee."},{question:"Do I need to be verified to use AgriLink?",answer:"No, verification is completely voluntary. You can browse products, contact sellers, and make transactions without verification. However, many buyers prefer to work with verified sellers as it helps build confidence in the transaction."},{question:"Can verification status change?",answer:"Once verified, your status remains verified unless there are policy violations. If you're unverified, you can start the verification process anytime by choosing either Individual or Business account verification and submitting the required documents. The verification progresses through stages: Phone Verification (yellow) → Under Review (blue) → Verified (green)."},{question:"What's the difference between Individual and Business account verification?",answer:"Individual Account verification is designed for farmers, traders, and buyers who operate informally - requiring only Myanmar National ID/NRC for verification. Business Account verification is for registered companies, cooperatives, and formal businesses - requiring both business registration documents AND personal ID verification. This system respects Myanmar's agricultural context where many farmers don't have business licenses."},{question:"How can I tell if someone has an Individual or Business account?",answer:"Look at the icon in their user badge: Individual accounts show a person icon, while Business accounts show a building icon. This appears next to their user type (Farmer, Trader, or Buyer) and helps you understand whether you're dealing with an individual seller or a formal business."}]},{id:"account",title:"Account Management",icon:qS,color:"bg-gray-100 text-gray-700",questions:[{question:"How do I edit my profile information?",answer:"Go to your profile page and click the edit icon next to any section you want to update. You can change your contact information, business description, and other details anytime."},{question:"Can I delete my account?",answer:"Yes, you can delete your account by contacting our support team. Note that this will remove all your listings and chat history permanently."},{question:"How do I change my password?",answer:"Go to your profile settings and look for the 'Change Password' option. You'll need to enter your current password and choose a new secure password."},{question:"I forgot my password. How do I reset it?",answer:"Click 'Forgot Password' on the login page and enter your email address. We'll send you instructions to reset your password securely."}]},{id:"technical",title:"Technical Support",icon:js,color:"bg-red-100 text-red-700",questions:[{question:"The app is running slowly. What can I do?",answer:"Try refreshing your browser or restarting the app. Clear your browser cache if issues persist. AgriLink is optimized for mobile devices and works best with a stable internet connection."},{question:"Why can't I upload photos?",answer:"Check your internet connection and ensure your photos are under 5MB each. Supported formats are JPG, PNG, and WebP. Try refreshing the page and uploading again."},{question:"Messages aren't sending. What's wrong?",answer:"Check your internet connection first. If you're in a rural area with poor connectivity, messages may take longer to send. Try refreshing the page or restarting the app."},{question:"Can I use AgriLink offline?",answer:"AgriLink requires an internet connection for most features. However, you can view previously loaded content offline, and messages will send once you're back online."}]}];function RI({onBack:t,onShowContactUs:s}){const[n,i]=v.useState("getting-started"),o=n?xm.filter(l=>l.id===n):xm;return e.jsxs("div",{className:"max-w-4xl mx-auto space-y-8",children:[e.jsxs("div",{className:"space-y-4 mb-8",children:[e.jsxs(O,{variant:"ghost",onClick:t,className:"h-9 px-3 -ml-3",children:[e.jsx(ls,{className:"w-4 h-4 mr-2"}),"Back"]}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl md:text-3xl font-bold",children:"Frequently Asked Questions"}),e.jsx("p",{className:"text-muted-foreground",children:"Find answers to common questions about AgriLink"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-3",children:[e.jsx(O,{variant:n===null?"default":"outline",onClick:()=>i(null),className:"text-xs h-auto py-2",children:"All Topics"}),xm.map(l=>e.jsx(O,{variant:n===l.id?"default":"outline",onClick:()=>i(l.id),className:"text-xs h-auto py-2",children:l.title},l.id))]}),e.jsx("div",{className:"space-y-8",children:o.map(l=>e.jsxs(re,{className:"shadow-sm border-border",children:[e.jsx(Ie,{className:"pb-4",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:`p-3 rounded-lg ${l.color}`,children:e.jsx(l.icon,{className:"w-6 h-6"})}),e.jsxs("div",{children:[e.jsx(Oe,{className:"text-xl",children:l.title}),e.jsxs(ts,{className:"text-sm",children:[l.questions.length," question",l.questions.length!==1?"s":""]})]})]})}),e.jsx(ie,{className:"pt-0 space-y-3",children:l.questions.map((d,u)=>e.jsx(TI,{type:"single",collapsible:!0,className:"w-full",children:e.jsxs(PI,{value:`${l.id}-${u}`,className:"border border-border rounded-lg overflow-hidden",children:[e.jsx(II,{className:"text-left hover:no-underline px-6 py-4 hover:bg-muted/20 transition-colors",children:e.jsx("span",{className:"font-medium text-sm md:text-base pr-4",children:d.question})}),e.jsx(AI,{className:"px-6 pb-6 pt-2 border-t border-border",children:e.jsx("div",{className:"text-sm text-muted-foreground leading-relaxed",children:d.answer})})]})},u))})]},l.id))}),e.jsx(re,{className:"border-primary/20 bg-primary/5",children:e.jsx(ie,{className:"pt-6",children:e.jsxs("div",{className:"text-center space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(js,{className:"w-5 h-5 text-primary"}),e.jsx("h3",{className:"font-medium",children:"Still need help?"})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Can't find the answer you're looking for? Our support team is here to help."}),e.jsx(O,{className:"mt-3",onClick:s,children:"Contact Support"})]})})})]})}function DI({currentUserId:t,currentUserName:s,currentUserType:n,onBack:i}){const[o,l]=v.useState([]),[d,u]=v.useState(!0),[f,p]=v.useState("all");v.useEffect(()=>{const C=[{id:"1",productId:"1",productName:"Premium Jasmine Rice - 50kg",productImage:"https://images.unsplash.com/photo-1586201375761-83865001e31c?w=100&h=100&fit=crop",buyerId:"buyer1",buyerName:"Ma Phyu Phyu",sellerId:"seller1",sellerName:"Ko Thura Min",offerPrice:42e3,originalPrice:45e3,quantity:"10 bags",message:"Interested in bulk purchase. Can we discuss delivery?",deliveryAddress:"123 Main Street, Yangon",paymentMethod:"cash",status:"pending",createdAt:new Date(Date.now()-1728e5).toISOString(),chatId:"chat1"},{id:"2",productId:"2",productName:"Fresh Tomatoes - 25kg",productImage:"https://images.unsplash.com/photo-1592841200221-a6898f307baa?w=100&h=100&fit=crop",buyerId:"buyer2",buyerName:"U Aung Min",sellerId:"seller2",sellerName:"Ma Su Hlaing",offerPrice:17e3,originalPrice:18e3,quantity:"5 crates",message:"Looking for fresh tomatoes for my restaurant.",deliveryAddress:"456 Business District, Mandalay",paymentMethod:"bank_transfer",status:"accepted",createdAt:new Date(Date.now()-432e6).toISOString(),acceptedAt:new Date(Date.now()-3456e5).toISOString(),chatId:"chat2"},{id:"3",productId:"3",productName:"Premium Turmeric Powder - 10kg",productImage:"https://images.unsplash.com/photo-1615485290382-441e4d049cb5?w=100&h=100&fit=crop",buyerId:"buyer3",buyerName:"Daw Hla Hla",sellerId:"seller3",sellerName:"Ko Kyaw Zin",offerPrice:24e3,originalPrice:25e3,quantity:"3 sacks",message:"Need for export. Can you provide quality certificate?",deliveryAddress:"789 Export Zone, Yangon",paymentMethod:"advance",status:"completed",createdAt:new Date(Date.now()-864e6).toISOString(),acceptedAt:new Date(Date.now()-7776e5).toISOString(),completedAt:new Date(Date.now()-6048e5).toISOString(),chatId:"chat3"}].filter(E=>E.buyerId===t||E.sellerId===t);l(C),u(!1)},[t]);const g=k=>{switch(k){case"accepted":return"bg-green-100 text-green-800 border-green-300";case"rejected":return"bg-red-100 text-red-800 border-red-300";case"expired":return"bg-gray-100 text-gray-800 border-gray-300";case"completed":return"bg-blue-100 text-blue-800 border-blue-300";case"cancelled":return"bg-orange-100 text-orange-800 border-orange-300";default:return"bg-yellow-100 text-yellow-800 border-yellow-300"}},h=k=>{switch(k){case"accepted":return e.jsx(He,{className:"w-4 h-4"});case"rejected":return e.jsx(An,{className:"w-4 h-4"});case"completed":return e.jsx(He,{className:"w-4 h-4"});case"cancelled":return e.jsx(An,{className:"w-4 h-4"});default:return e.jsx(Lt,{className:"w-4 h-4"})}},y=o.filter(k=>f==="all"?!0:f==="pending"?k.status==="pending":f==="accepted"?k.status==="accepted":f==="completed"?k.status==="completed":!0),j=k=>k.sellerId===t,b=k=>{l(C=>C.map(E=>E.id===k?{...E,status:"accepted",acceptedAt:new Date().toISOString()}:E))},w=k=>{l(C=>C.map(E=>E.id===k?{...E,status:"rejected"}:E))},S=k=>{l(C=>C.map(E=>E.id===k?{...E,status:"completed",completedAt:new Date().toISOString()}:E))};return d?e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsx("h1",{className:"text-2xl font-bold",children:"Deals Management"})}),e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto"}),e.jsx("p",{className:"text-muted-foreground mt-2",children:"Loading deals..."})]})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Deals Management"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage your offers, negotiations, and completed transactions"})]}),e.jsx(O,{variant:"outline",onClick:i,children:"Back"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx(re,{children:e.jsx(ie,{className:"p-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Lt,{className:"w-5 h-5 text-yellow-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Pending"}),e.jsx("p",{className:"text-2xl font-bold",children:o.filter(k=>k.status==="pending").length})]})]})})}),e.jsx(re,{children:e.jsx(ie,{className:"p-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(He,{className:"w-5 h-5 text-green-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Accepted"}),e.jsx("p",{className:"text-2xl font-bold",children:o.filter(k=>k.status==="accepted").length})]})]})})}),e.jsx(re,{children:e.jsx(ie,{className:"p-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Yr,{className:"w-5 h-5 text-blue-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Completed"}),e.jsx("p",{className:"text-2xl font-bold",children:o.filter(k=>k.status==="completed").length})]})]})})}),e.jsx(re,{children:e.jsx(ie,{className:"p-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ga,{className:"w-5 h-5 text-primary"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Value"}),e.jsxs("p",{className:"text-2xl font-bold",children:[o.filter(k=>k.status==="completed").reduce((k,C)=>k+(C.offerPrice*parseFloat(C.quantity)||0),0).toLocaleString()," MMK"]})]})]})})})]}),e.jsxs(Bf,{value:f,onValueChange:p,children:[e.jsxs(Uf,{className:"grid w-full grid-cols-4",children:[e.jsx(Nr,{value:"all",children:"All Deals"}),e.jsx(Nr,{value:"pending",children:"Pending"}),e.jsx(Nr,{value:"accepted",children:"Accepted"}),e.jsx(Nr,{value:"completed",children:"Completed"})]}),e.jsx(da,{value:f,className:"space-y-4",children:y.length===0?e.jsx(re,{children:e.jsxs(ie,{className:"text-center py-12",children:[e.jsx(Nt,{className:"w-16 h-16 text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No deals found"}),e.jsx("p",{className:"text-muted-foreground",children:f==="all"?"You don't have any deals yet. Start by making an offer on a product!":`No ${f} deals found.`})]})}):y.map(k=>e.jsx(re,{className:"hover:shadow-md transition-shadow",children:e.jsx(ie,{className:"p-6",children:e.jsxs("div",{className:"flex flex-col lg:flex-row gap-6",children:[e.jsxs("div",{className:"flex gap-4",children:[e.jsx("img",{src:k.productImage,alt:k.productName,className:"w-20 h-20 object-cover rounded-lg"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-lg",children:k.productName}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground mt-1",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx($t,{className:"w-4 h-4"}),j(k)?k.buyerName:k.sellerName]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(ba,{className:"w-4 h-4"}),new Date(k.createdAt).toLocaleDateString()]})]})]})]}),e.jsxs("div",{className:"flex-1 space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Offer Price:"}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"font-bold text-lg",children:[k.offerPrice.toLocaleString()," MMK"]}),k.offerPrice!==k.originalPrice&&e.jsxs("div",{className:"text-xs text-muted-foreground",children:["Original: ",k.originalPrice.toLocaleString()," MMK"]})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Quantity:"}),e.jsx("span",{className:"font-medium",children:k.quantity})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Total Amount:"}),e.jsxs("span",{className:"font-bold text-primary text-lg",children:[(k.offerPrice*parseFloat(k.quantity)||0).toLocaleString()," MMK"]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Payment:"}),e.jsx("span",{className:"text-sm",children:k.paymentMethod==="cash"?"Cash on Delivery":k.paymentMethod==="bank_transfer"?"Bank Transfer":k.paymentMethod==="mobile_payment"?"Mobile Payment":k.paymentMethod==="advance"?"50% Advance, 50% on Delivery":k.paymentMethod})]}),k.deliveryAddress&&e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(Vt,{className:"w-4 h-4 text-muted-foreground mt-0.5"}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Delivery Address:"}),e.jsx("p",{className:"text-sm",children:k.deliveryAddress})]})]}),k.message&&e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(js,{className:"w-4 h-4 text-muted-foreground mt-0.5"}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Message:"}),e.jsx("p",{className:"text-sm",children:k.message})]})]})]}),e.jsxs("div",{className:"flex flex-col items-end space-y-3",children:[e.jsxs(Ee,{className:g(k.status),children:[h(k.status),e.jsx("span",{className:"ml-1 capitalize",children:k.status})]}),k.status==="pending"&&j(k)&&e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(O,{size:"sm",onClick:()=>b(k.id),children:[e.jsx(He,{className:"w-4 h-4 mr-1"}),"Accept"]}),e.jsxs(O,{size:"sm",variant:"outline",onClick:()=>w(k.id),children:[e.jsx(An,{className:"w-4 h-4 mr-1"}),"Reject"]})]}),k.status==="accepted"&&e.jsxs(O,{size:"sm",onClick:()=>S(k.id),children:[e.jsx(He,{className:"w-4 h-4 mr-1"}),"Mark Completed"]}),k.status==="completed"&&e.jsxs(O,{size:"sm",variant:"outline",children:[e.jsx(Yr,{className:"w-4 h-4 mr-1"}),"Leave Review"]}),k.chatId&&e.jsxs(O,{size:"sm",variant:"outline",children:[e.jsx(js,{className:"w-4 h-4 mr-1"}),"View Chat"]})]})]})})},k.id))})]})]})}function MI({isOpen:t,onClose:s,onSubmit:n,product:i,currentUser:o}){const[l,d]=v.useState({offerPrice:i.price,quantity:"1",message:"",deliveryAddress:"",deliveryNotes:"",paymentMethod:"cash"}),[u,f]=v.useState(!1);if(!t)return null;const p=async y=>{y.preventDefault(),f(!0);try{await n(l),s()}catch(j){console.error("Error submitting offer:",j)}finally{f(!1)}},g=l.offerPrice-i.price,h=(g/i.price*100).toFixed(1);return e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs(re,{className:"w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(Ie,{className:"flex flex-row items-center justify-between space-y-0 pb-4",children:[e.jsxs(Oe,{className:"flex items-center gap-2",children:[e.jsx(ga,{className:"w-5 h-5"}),"Make an Offer"]}),e.jsx(O,{variant:"ghost",size:"sm",onClick:s,children:e.jsx(cs,{className:"w-4 h-4"})})]}),e.jsxs(ie,{className:"space-y-6",children:[e.jsxs("div",{className:"bg-muted/50 rounded-lg p-4",children:[e.jsx("h3",{className:"font-semibold text-lg",children:i.name}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground mt-2",children:[e.jsxs("span",{children:["Seller: ",i.sellerName]}),e.jsx("span",{children:"•"}),e.jsxs("span",{children:["Location: ",i.location]})]}),e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsxs("span",{className:"text-lg font-bold",children:["Original Price: ",i.price.toLocaleString()," MMK"]}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:["per ",i.unit]})]})]}),e.jsxs("form",{onSubmit:p,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx($e,{htmlFor:"offerPrice",children:"Your Offer Price (MMK)"}),e.jsxs("div",{className:"relative",children:[e.jsx(ga,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),e.jsx(Ue,{id:"offerPrice",type:"number",value:l.offerPrice,onChange:y=>d({...l,offerPrice:Number(y.target.value)}),className:"pl-10",min:"0",step:"1000",required:!0})]}),g!==0&&e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsxs(Ee,{variant:g<0?"destructive":"default",children:[g<0?"↓":"↑"," ",Math.abs(g).toLocaleString()," MMK"]}),e.jsxs("span",{className:"text-muted-foreground",children:["(",h,"% ",g<0?"below":"above"," original)"]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx($e,{htmlFor:"quantity",children:"Quantity"}),e.jsxs("div",{className:"relative",children:[e.jsx(Nt,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),e.jsx(Ue,{id:"quantity",value:l.quantity,onChange:y=>d({...l,quantity:y.target.value}),className:"pl-10",placeholder:"e.g., 5 bags, 10 kg",required:!0})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx($e,{htmlFor:"message",children:"Message to Seller"}),e.jsxs("div",{className:"relative",children:[e.jsx(js,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),e.jsx(es,{id:"message",value:l.message,onChange:y=>d({...l,message:y.target.value}),className:"pl-10 min-h-[80px]",placeholder:"Tell the seller about your offer, delivery preferences, or any questions..."})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx($e,{htmlFor:"deliveryAddress",children:"Delivery Address"}),e.jsx(es,{id:"deliveryAddress",value:l.deliveryAddress,onChange:y=>d({...l,deliveryAddress:y.target.value}),placeholder:"Enter your delivery address...",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx($e,{htmlFor:"deliveryNotes",children:"Delivery Notes (Optional)"}),e.jsx(es,{id:"deliveryNotes",value:l.deliveryNotes,onChange:y=>d({...l,deliveryNotes:y.target.value}),placeholder:"Any special delivery instructions..."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx($e,{htmlFor:"paymentMethod",children:"Preferred Payment Method"}),e.jsxs("select",{id:"paymentMethod",value:l.paymentMethod,onChange:y=>d({...l,paymentMethod:y.target.value}),className:"w-full p-2 border rounded-md",children:[e.jsx("option",{value:"cash",children:"Cash on Delivery"}),e.jsx("option",{value:"bank_transfer",children:"Bank Transfer"}),e.jsx("option",{value:"mobile_payment",children:"Mobile Payment"}),e.jsx("option",{value:"advance",children:"50% Advance, 50% on Delivery"})]})]}),e.jsxs("div",{className:"bg-primary/10 rounded-lg p-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"font-semibold",children:"Total Offer Amount:"}),e.jsxs("span",{className:"text-xl font-bold text-primary",children:[(l.offerPrice*parseFloat(l.quantity)||0).toLocaleString()," MMK"]})]}),e.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:[l.quantity," × ",l.offerPrice.toLocaleString()," MMK"]})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx(O,{type:"button",variant:"outline",onClick:s,className:"flex-1",disabled:u,children:"Cancel"}),e.jsx(O,{type:"submit",className:"flex-1",disabled:u,children:u?e.jsxs(e.Fragment,{children:[e.jsx(Lt,{className:"w-4 h-4 mr-2 animate-spin"}),"Sending Offer..."]}):"Send Offer"})]})]})]})]})})}function OI({isOpen:t,onClose:s,onSubmit:n,transaction:i,currentUser:o}){const[l,d]=v.useState({rating:5,comment:"",wouldRecommend:!0,deliveryRating:5,communicationRating:5,qualityRating:5}),[u,f]=v.useState(!1);if(!t)return null;const p=async h=>{h.preventDefault(),f(!0);try{await n(l),s()}catch(y){console.error("Error submitting review:",y)}finally{f(!1)}},g=(h,y,j)=>e.jsxs("div",{className:"space-y-2",children:[e.jsx($e,{children:j}),e.jsxs("div",{className:"flex items-center gap-1",children:[[1,2,3,4,5].map(b=>e.jsx("button",{type:"button",onClick:()=>y(b),className:"p-1 hover:scale-110 transition-transform",children:e.jsx(Yr,{className:`w-6 h-6 ${b<=h?"text-yellow-400 fill-yellow-400":"text-gray-300"}`})},b)),e.jsxs("span",{className:"ml-2 text-sm text-muted-foreground",children:[h,"/5"]})]})]});return e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs(re,{className:"w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(Ie,{className:"flex flex-row items-center justify-between space-y-0 pb-4",children:[e.jsxs(Oe,{className:"flex items-center gap-2",children:[e.jsx(Yr,{className:"w-5 h-5"}),"Leave a Review"]}),e.jsx(O,{variant:"ghost",size:"sm",onClick:s,children:e.jsx(cs,{className:"w-4 h-4"})})]}),e.jsxs(ie,{className:"space-y-6",children:[e.jsxs("div",{className:"bg-muted/50 rounded-lg p-4",children:[e.jsx("h3",{className:"font-semibold text-lg",children:"Transaction Details"}),e.jsxs("div",{className:"space-y-2 mt-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Product:"}),e.jsx("span",{className:"font-medium",children:i.productName})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:i.otherPartyType==="seller"?"Seller:":"Buyer:"}),e.jsx("span",{className:"font-medium",children:i.otherPartyName})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Amount:"}),e.jsxs("span",{className:"font-medium",children:[i.dealAmount.toLocaleString()," MMK"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Completed:"}),e.jsx("span",{className:"font-medium",children:new Date(i.completedAt).toLocaleDateString()})]})]})]}),e.jsxs("form",{onSubmit:p,className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-semibold",children:"Overall Experience"}),g(l.rating,h=>d({...l,rating:h}),"How would you rate this transaction overall?")]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-semibold",children:"Detailed Ratings"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[g(l.qualityRating,h=>d({...l,qualityRating:h}),"Product Quality"),g(l.communicationRating,h=>d({...l,communicationRating:h}),"Communication"),g(l.deliveryRating,h=>d({...l,deliveryRating:h}),"Delivery")]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs($e,{children:["Would you recommend this ",i.otherPartyType,"?"]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs(O,{type:"button",variant:l.wouldRecommend?"default":"outline",onClick:()=>d({...l,wouldRecommend:!0}),className:"flex items-center gap-2",children:[e.jsx(nk,{className:"w-4 h-4"}),"Yes"]}),e.jsxs(O,{type:"button",variant:l.wouldRecommend?"outline":"destructive",onClick:()=>d({...l,wouldRecommend:!1}),className:"flex items-center gap-2",children:[e.jsx(sk,{className:"w-4 h-4"}),"No"]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx($e,{htmlFor:"comment",children:"Your Review (Optional)"}),e.jsxs("div",{className:"relative",children:[e.jsx(js,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),e.jsx(es,{id:"comment",value:l.comment,onChange:h=>d({...l,comment:h.target.value}),className:"pl-10 min-h-[100px]",placeholder:"Share your experience with this transaction. What went well? What could be improved?"})]})]}),e.jsxs("div",{className:"bg-primary/10 rounded-lg p-4",children:[e.jsx("h4",{className:"font-semibold mb-2",children:"Review Summary"}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Overall Rating:"}),e.jsx("div",{className:"flex items-center gap-1",children:[1,2,3,4,5].map(h=>e.jsx(Yr,{className:`w-4 h-4 ${h<=l.rating?"text-yellow-400 fill-yellow-400":"text-gray-300"}`},h))})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Recommendation:"}),e.jsx(Ee,{variant:l.wouldRecommend?"default":"destructive",children:l.wouldRecommend?"Yes":"No"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Quality:"}),e.jsxs("span",{children:[l.qualityRating,"/5"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Communication:"}),e.jsxs("span",{children:[l.communicationRating,"/5"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Delivery:"}),e.jsxs("span",{children:[l.deliveryRating,"/5"]})]})]})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx(O,{type:"button",variant:"outline",onClick:s,className:"flex-1",disabled:u,children:"Cancel"}),e.jsx(O,{type:"submit",className:"flex-1",disabled:u,children:u?"Submitting...":"Submit Review"})]})]})]})]})})}var vm={exports:{}},ym={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lv;function LI(){if(lv)return ym;lv=1;var t=Ic();function s(h,y){return h===y&&(h!==0||1/h===1/y)||h!==h&&y!==y}var n=typeof Object.is=="function"?Object.is:s,i=t.useState,o=t.useEffect,l=t.useLayoutEffect,d=t.useDebugValue;function u(h,y){var j=y(),b=i({inst:{value:j,getSnapshot:y}}),w=b[0].inst,S=b[1];return l(function(){w.value=j,w.getSnapshot=y,f(w)&&S({inst:w})},[h,j,y]),o(function(){return f(w)&&S({inst:w}),h(function(){f(w)&&S({inst:w})})},[h]),d(j),j}function f(h){var y=h.getSnapshot;h=h.value;try{var j=y();return!n(h,j)}catch{return!0}}function p(h,y){return y()}var g=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?p:u;return ym.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:g,ym}var cv;function $I(){return cv||(cv=1,vm.exports=LI()),vm.exports}var FI=$I();function zI(){return FI.useSyncExternalStore(BI,()=>!0,()=>!1)}function BI(){return()=>{}}var Jf="Avatar",[UI]=Ns(Jf),[VI,ab]=UI(Jf),ib=v.forwardRef((t,s)=>{const{__scopeAvatar:n,...i}=t,[o,l]=v.useState("idle");return e.jsx(VI,{scope:n,imageLoadingStatus:o,onImageLoadingStatusChange:l,children:e.jsx(Le.span,{...i,ref:s})})});ib.displayName=Jf;var ob="AvatarImage",qI=v.forwardRef((t,s)=>{const{__scopeAvatar:n,src:i,onLoadingStatusChange:o=()=>{},...l}=t,d=ab(ob,n),u=HI(i,l),f=Ot(p=>{o(p),d.onImageLoadingStatusChange(p)});return vt(()=>{u!=="idle"&&f(u)},[u,f]),u==="loaded"?e.jsx(Le.img,{...l,ref:s,src:i}):null});qI.displayName=ob;var lb="AvatarFallback",cb=v.forwardRef((t,s)=>{const{__scopeAvatar:n,delayMs:i,...o}=t,l=ab(lb,n),[d,u]=v.useState(i===void 0);return v.useEffect(()=>{if(i!==void 0){const f=window.setTimeout(()=>u(!0),i);return()=>window.clearTimeout(f)}},[i]),d&&l.imageLoadingStatus!=="loaded"?e.jsx(Le.span,{...o,ref:s}):null});cb.displayName=lb;function dv(t,s){return t?s?(t.src!==s&&(t.src=s),t.complete&&t.naturalWidth>0?"loaded":"loading"):"error":"idle"}function HI(t,{referrerPolicy:s,crossOrigin:n}){const i=zI(),o=v.useRef(null),l=i?(o.current||(o.current=new window.Image),o.current):null,[d,u]=v.useState(()=>dv(l,t));return vt(()=>{u(dv(l,t))},[l,t]),vt(()=>{const f=h=>()=>{u(h)};if(!l)return;const p=f("loaded"),g=f("error");return l.addEventListener("load",p),l.addEventListener("error",g),s&&(l.referrerPolicy=s),typeof n=="string"&&(l.crossOrigin=n),()=>{l.removeEventListener("load",p),l.removeEventListener("error",g)}},[l,n,s]),d}var WI=ib,KI=cb;function uv({className:t,...s}){return e.jsx(WI,{"data-slot":"avatar",className:Ve("relative flex size-10 shrink-0 overflow-hidden rounded-full",t),...s})}function mv({className:t,...s}){return e.jsx(KI,{"data-slot":"avatar-fallback",className:Ve("bg-muted flex size-full items-center justify-center rounded-full",t),...s})}var ef=["Enter"," "],GI=["ArrowDown","PageUp","Home"],db=["ArrowUp","PageDown","End"],JI=[...GI,...db],YI={ltr:[...ef,"ArrowRight"],rtl:[...ef,"ArrowLeft"]},QI={ltr:["ArrowLeft"],rtl:["ArrowRight"]},Oo="Menu",[To,XI,ZI]=Mc(Oo),[Sa,ub]=Ns(Oo,[ZI,Uc,td]),id=Uc(),mb=td(),[eA,ka]=Sa(Oo),[tA,Lo]=Sa(Oo),fb=t=>{const{__scopeMenu:s,open:n=!1,children:i,dir:o,onOpenChange:l,modal:d=!0}=t,u=id(s),[f,p]=v.useState(null),g=v.useRef(!1),h=Ot(l),y=Si(o);return v.useEffect(()=>{const j=()=>{g.current=!0,document.addEventListener("pointerdown",b,{capture:!0,once:!0}),document.addEventListener("pointermove",b,{capture:!0,once:!0})},b=()=>g.current=!1;return document.addEventListener("keydown",j,{capture:!0}),()=>{document.removeEventListener("keydown",j,{capture:!0}),document.removeEventListener("pointerdown",b,{capture:!0}),document.removeEventListener("pointermove",b,{capture:!0})}},[]),e.jsx(hy,{...u,children:e.jsx(eA,{scope:s,open:n,onOpenChange:h,content:f,onContentChange:p,children:e.jsx(tA,{scope:s,onClose:v.useCallback(()=>h(!1),[h]),isUsingKeyboardRef:g,dir:y,modal:d,children:i})})})};fb.displayName=Oo;var sA="MenuAnchor",Yf=v.forwardRef((t,s)=>{const{__scopeMenu:n,...i}=t,o=id(n);return e.jsx(py,{...o,...i,ref:s})});Yf.displayName=sA;var Qf="MenuPortal",[rA,hb]=Sa(Qf,{forceMount:void 0}),pb=t=>{const{__scopeMenu:s,forceMount:n,children:i,container:o}=t,l=ka(Qf,s);return e.jsx(rA,{scope:s,forceMount:n,children:e.jsx(ds,{present:n||l.open,children:e.jsx(Vc,{asChild:!0,container:o,children:i})})})};pb.displayName=Qf;var Us="MenuContent",[nA,Xf]=Sa(Us),gb=v.forwardRef((t,s)=>{const n=hb(Us,t.__scopeMenu),{forceMount:i=n.forceMount,...o}=t,l=ka(Us,t.__scopeMenu),d=Lo(Us,t.__scopeMenu);return e.jsx(To.Provider,{scope:t.__scopeMenu,children:e.jsx(ds,{present:i||l.open,children:e.jsx(To.Slot,{scope:t.__scopeMenu,children:d.modal?e.jsx(aA,{...o,ref:s}):e.jsx(iA,{...o,ref:s})})})})}),aA=v.forwardRef((t,s)=>{const n=ka(Us,t.__scopeMenu),i=v.useRef(null),o=Ye(s,i);return v.useEffect(()=>{const l=i.current;if(l)return yf(l)},[]),e.jsx(Zf,{...t,ref:o,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:be(t.onFocusOutside,l=>l.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),iA=v.forwardRef((t,s)=>{const n=ka(Us,t.__scopeMenu);return e.jsx(Zf,{...t,ref:s,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),oA=ha("MenuContent.ScrollLock"),Zf=v.forwardRef((t,s)=>{const{__scopeMenu:n,loop:i=!1,trapFocus:o,onOpenAutoFocus:l,onCloseAutoFocus:d,disableOutsidePointerEvents:u,onEntryFocus:f,onEscapeKeyDown:p,onPointerDownOutside:g,onFocusOutside:h,onInteractOutside:y,onDismiss:j,disableOutsideScroll:b,...w}=t,S=ka(Us,n),k=Lo(Us,n),C=id(n),E=mb(n),P=XI(n),[T,A]=v.useState(null),R=v.useRef(null),$=Ye(s,R,S.onContentChange),J=v.useRef(0),z=v.useRef(""),q=v.useRef(0),Q=v.useRef(null),Z=v.useRef("right"),he=v.useRef(0),se=b?Hc:v.Fragment,te=b?{as:oA,allowPinchZoom:!0}:void 0,ne=M=>{const H=z.current+M,I=P().filter(W=>!W.disabled),V=document.activeElement,D=I.find(W=>W.ref.current===V)?.textValue,ae=I.map(W=>W.textValue),ce=yA(ae,H,D),pe=I.find(W=>W.textValue===ce)?.ref.current;(function W(X){z.current=X,window.clearTimeout(J.current),X!==""&&(J.current=window.setTimeout(()=>W(""),1e3))})(H),pe&&setTimeout(()=>pe.focus())};v.useEffect(()=>()=>window.clearTimeout(J.current),[]),df();const U=v.useCallback(M=>Z.current===Q.current?.side&&bA(M,Q.current?.area),[]);return e.jsx(nA,{scope:n,searchRef:z,onItemEnter:v.useCallback(M=>{U(M)&&M.preventDefault()},[U]),onItemLeave:v.useCallback(M=>{U(M)||(R.current?.focus(),A(null))},[U]),onTriggerLeave:v.useCallback(M=>{U(M)&&M.preventDefault()},[U]),pointerGraceTimerRef:q,onPointerGraceIntentChange:v.useCallback(M=>{Q.current=M},[]),children:e.jsx(se,{...te,children:e.jsx(Lc,{asChild:!0,trapped:o,onMountAutoFocus:be(l,M=>{M.preventDefault(),R.current?.focus({preventScroll:!0})}),onUnmountAutoFocus:d,children:e.jsx(Oc,{asChild:!0,disableOutsidePointerEvents:u,onEscapeKeyDown:p,onPointerDownOutside:g,onFocusOutside:h,onInteractOutside:y,onDismiss:j,children:e.jsx(Cw,{asChild:!0,...E,dir:k.dir,orientation:"vertical",loop:i,currentTabStopId:T,onCurrentTabStopIdChange:A,onEntryFocus:be(f,M=>{k.isUsingKeyboardRef.current||M.preventDefault()}),preventScrollOnEntryFocus:!0,children:e.jsx(gy,{role:"menu","aria-orientation":"vertical","data-state":Ab(S.open),"data-radix-menu-content":"",dir:k.dir,...C,...w,ref:$,style:{outline:"none",...w.style},onKeyDown:be(w.onKeyDown,M=>{const I=M.target.closest("[data-radix-menu-content]")===M.currentTarget,V=M.ctrlKey||M.altKey||M.metaKey,D=M.key.length===1;I&&(M.key==="Tab"&&M.preventDefault(),!V&&D&&ne(M.key));const ae=R.current;if(M.target!==ae||!JI.includes(M.key))return;M.preventDefault();const pe=P().filter(W=>!W.disabled).map(W=>W.ref.current);db.includes(M.key)&&pe.reverse(),xA(pe)}),onBlur:be(t.onBlur,M=>{M.currentTarget.contains(M.target)||(window.clearTimeout(J.current),z.current="")}),onPointerMove:be(t.onPointerMove,Po(M=>{const H=M.target,I=he.current!==M.clientX;if(M.currentTarget.contains(H)&&I){const V=M.clientX>he.current?"right":"left";Z.current=V,he.current=M.clientX}}))})})})})})})});gb.displayName=Us;var lA="MenuGroup",eh=v.forwardRef((t,s)=>{const{__scopeMenu:n,...i}=t;return e.jsx(Le.div,{role:"group",...i,ref:s})});eh.displayName=lA;var cA="MenuLabel",xb=v.forwardRef((t,s)=>{const{__scopeMenu:n,...i}=t;return e.jsx(Le.div,{...i,ref:s})});xb.displayName=cA;var Tc="MenuItem",fv="menu.itemSelect",od=v.forwardRef((t,s)=>{const{disabled:n=!1,onSelect:i,...o}=t,l=v.useRef(null),d=Lo(Tc,t.__scopeMenu),u=Xf(Tc,t.__scopeMenu),f=Ye(s,l),p=v.useRef(!1),g=()=>{const h=l.current;if(!n&&h){const y=new CustomEvent(fv,{bubbles:!0,cancelable:!0});h.addEventListener(fv,j=>i?.(j),{once:!0}),Uv(h,y),y.defaultPrevented?p.current=!1:d.onClose()}};return e.jsx(vb,{...o,ref:f,disabled:n,onClick:be(t.onClick,g),onPointerDown:h=>{t.onPointerDown?.(h),p.current=!0},onPointerUp:be(t.onPointerUp,h=>{p.current||h.currentTarget?.click()}),onKeyDown:be(t.onKeyDown,h=>{const y=u.searchRef.current!=="";n||y&&h.key===" "||ef.includes(h.key)&&(h.currentTarget.click(),h.preventDefault())})})});od.displayName=Tc;var vb=v.forwardRef((t,s)=>{const{__scopeMenu:n,disabled:i=!1,textValue:o,...l}=t,d=Xf(Tc,n),u=mb(n),f=v.useRef(null),p=Ye(s,f),[g,h]=v.useState(!1),[y,j]=v.useState("");return v.useEffect(()=>{const b=f.current;b&&j((b.textContent??"").trim())},[l.children]),e.jsx(To.ItemSlot,{scope:n,disabled:i,textValue:o??y,children:e.jsx(_w,{asChild:!0,...u,focusable:!i,children:e.jsx(Le.div,{role:"menuitem","data-highlighted":g?"":void 0,"aria-disabled":i||void 0,"data-disabled":i?"":void 0,...l,ref:p,onPointerMove:be(t.onPointerMove,Po(b=>{i?d.onItemLeave(b):(d.onItemEnter(b),b.defaultPrevented||b.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:be(t.onPointerLeave,Po(b=>d.onItemLeave(b))),onFocus:be(t.onFocus,()=>h(!0)),onBlur:be(t.onBlur,()=>h(!1))})})})}),dA="MenuCheckboxItem",yb=v.forwardRef((t,s)=>{const{checked:n=!1,onCheckedChange:i,...o}=t;return e.jsx(Sb,{scope:t.__scopeMenu,checked:n,children:e.jsx(od,{role:"menuitemcheckbox","aria-checked":Pc(n)?"mixed":n,...o,ref:s,"data-state":sh(n),onSelect:be(o.onSelect,()=>i?.(Pc(n)?!0:!n),{checkForDefaultPrevented:!1})})})});yb.displayName=dA;var wb="MenuRadioGroup",[uA,mA]=Sa(wb,{value:void 0,onValueChange:()=>{}}),bb=v.forwardRef((t,s)=>{const{value:n,onValueChange:i,...o}=t,l=Ot(i);return e.jsx(uA,{scope:t.__scopeMenu,value:n,onValueChange:l,children:e.jsx(eh,{...o,ref:s})})});bb.displayName=wb;var jb="MenuRadioItem",Nb=v.forwardRef((t,s)=>{const{value:n,...i}=t,o=mA(jb,t.__scopeMenu),l=n===o.value;return e.jsx(Sb,{scope:t.__scopeMenu,checked:l,children:e.jsx(od,{role:"menuitemradio","aria-checked":l,...i,ref:s,"data-state":sh(l),onSelect:be(i.onSelect,()=>o.onValueChange?.(n),{checkForDefaultPrevented:!1})})})});Nb.displayName=jb;var th="MenuItemIndicator",[Sb,fA]=Sa(th,{checked:!1}),kb=v.forwardRef((t,s)=>{const{__scopeMenu:n,forceMount:i,...o}=t,l=fA(th,n);return e.jsx(ds,{present:i||Pc(l.checked)||l.checked===!0,children:e.jsx(Le.span,{...o,ref:s,"data-state":sh(l.checked)})})});kb.displayName=th;var hA="MenuSeparator",Cb=v.forwardRef((t,s)=>{const{__scopeMenu:n,...i}=t;return e.jsx(Le.div,{role:"separator","aria-orientation":"horizontal",...i,ref:s})});Cb.displayName=hA;var pA="MenuArrow",_b=v.forwardRef((t,s)=>{const{__scopeMenu:n,...i}=t,o=id(n);return e.jsx(xy,{...o,...i,ref:s})});_b.displayName=pA;var gA="MenuSub",[qR,Eb]=Sa(gA),xo="MenuSubTrigger",Tb=v.forwardRef((t,s)=>{const n=ka(xo,t.__scopeMenu),i=Lo(xo,t.__scopeMenu),o=Eb(xo,t.__scopeMenu),l=Xf(xo,t.__scopeMenu),d=v.useRef(null),{pointerGraceTimerRef:u,onPointerGraceIntentChange:f}=l,p={__scopeMenu:t.__scopeMenu},g=v.useCallback(()=>{d.current&&window.clearTimeout(d.current),d.current=null},[]);return v.useEffect(()=>g,[g]),v.useEffect(()=>{const h=u.current;return()=>{window.clearTimeout(h),f(null)}},[u,f]),e.jsx(Yf,{asChild:!0,...p,children:e.jsx(vb,{id:o.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":o.contentId,"data-state":Ab(n.open),...t,ref:Ac(s,o.onTriggerChange),onClick:h=>{t.onClick?.(h),!(t.disabled||h.defaultPrevented)&&(h.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:be(t.onPointerMove,Po(h=>{l.onItemEnter(h),!h.defaultPrevented&&!t.disabled&&!n.open&&!d.current&&(l.onPointerGraceIntentChange(null),d.current=window.setTimeout(()=>{n.onOpenChange(!0),g()},100))})),onPointerLeave:be(t.onPointerLeave,Po(h=>{g();const y=n.content?.getBoundingClientRect();if(y){const j=n.content?.dataset.side,b=j==="right",w=b?-5:5,S=y[b?"left":"right"],k=y[b?"right":"left"];l.onPointerGraceIntentChange({area:[{x:h.clientX+w,y:h.clientY},{x:S,y:y.top},{x:k,y:y.top},{x:k,y:y.bottom},{x:S,y:y.bottom}],side:j}),window.clearTimeout(u.current),u.current=window.setTimeout(()=>l.onPointerGraceIntentChange(null),300)}else{if(l.onTriggerLeave(h),h.defaultPrevented)return;l.onPointerGraceIntentChange(null)}})),onKeyDown:be(t.onKeyDown,h=>{const y=l.searchRef.current!=="";t.disabled||y&&h.key===" "||YI[i.dir].includes(h.key)&&(n.onOpenChange(!0),n.content?.focus(),h.preventDefault())})})})});Tb.displayName=xo;var Pb="MenuSubContent",Ib=v.forwardRef((t,s)=>{const n=hb(Us,t.__scopeMenu),{forceMount:i=n.forceMount,...o}=t,l=ka(Us,t.__scopeMenu),d=Lo(Us,t.__scopeMenu),u=Eb(Pb,t.__scopeMenu),f=v.useRef(null),p=Ye(s,f);return e.jsx(To.Provider,{scope:t.__scopeMenu,children:e.jsx(ds,{present:i||l.open,children:e.jsx(To.Slot,{scope:t.__scopeMenu,children:e.jsx(Zf,{id:u.contentId,"aria-labelledby":u.triggerId,...o,ref:p,align:"start",side:d.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:g=>{d.isUsingKeyboardRef.current&&f.current?.focus(),g.preventDefault()},onCloseAutoFocus:g=>g.preventDefault(),onFocusOutside:be(t.onFocusOutside,g=>{g.target!==u.trigger&&l.onOpenChange(!1)}),onEscapeKeyDown:be(t.onEscapeKeyDown,g=>{d.onClose(),g.preventDefault()}),onKeyDown:be(t.onKeyDown,g=>{const h=g.currentTarget.contains(g.target),y=QI[d.dir].includes(g.key);h&&y&&(l.onOpenChange(!1),u.trigger?.focus(),g.preventDefault())})})})})})});Ib.displayName=Pb;function Ab(t){return t?"open":"closed"}function Pc(t){return t==="indeterminate"}function sh(t){return Pc(t)?"indeterminate":t?"checked":"unchecked"}function xA(t){const s=document.activeElement;for(const n of t)if(n===s||(n.focus(),document.activeElement!==s))return}function vA(t,s){return t.map((n,i)=>t[(s+i)%t.length])}function yA(t,s,n){const o=s.length>1&&Array.from(s).every(p=>p===s[0])?s[0]:s,l=n?t.indexOf(n):-1;let d=vA(t,Math.max(l,0));o.length===1&&(d=d.filter(p=>p!==n));const f=d.find(p=>p.toLowerCase().startsWith(o.toLowerCase()));return f!==n?f:void 0}function wA(t,s){const{x:n,y:i}=t;let o=!1;for(let l=0,d=s.length-1;l<s.length;d=l++){const u=s[l],f=s[d],p=u.x,g=u.y,h=f.x,y=f.y;g>i!=y>i&&n<(h-p)*(i-g)/(y-g)+p&&(o=!o)}return o}function bA(t,s){if(!s)return!1;const n={x:t.clientX,y:t.clientY};return wA(n,s)}function Po(t){return s=>s.pointerType==="mouse"?t(s):void 0}var jA=fb,NA=Yf,SA=pb,kA=gb,CA=eh,_A=xb,EA=od,TA=yb,PA=bb,IA=Nb,AA=kb,RA=Cb,DA=_b,MA=Tb,OA=Ib,ld="DropdownMenu",[LA]=Ns(ld,[ub]),us=ub(),[$A,Rb]=LA(ld),Db=t=>{const{__scopeDropdownMenu:s,children:n,dir:i,open:o,defaultOpen:l,onOpenChange:d,modal:u=!0}=t,f=us(s),p=v.useRef(null),[g,h]=Ir({prop:o,defaultProp:l??!1,onChange:d,caller:ld});return e.jsx($A,{scope:s,triggerId:Bs(),triggerRef:p,contentId:Bs(),open:g,onOpenChange:h,onOpenToggle:v.useCallback(()=>h(y=>!y),[h]),modal:u,children:e.jsx(jA,{...f,open:g,onOpenChange:h,dir:i,modal:u,children:n})})};Db.displayName=ld;var Mb="DropdownMenuTrigger",Ob=v.forwardRef((t,s)=>{const{__scopeDropdownMenu:n,disabled:i=!1,...o}=t,l=Rb(Mb,n),d=us(n);return e.jsx(NA,{asChild:!0,...d,children:e.jsx(Le.button,{type:"button",id:l.triggerId,"aria-haspopup":"menu","aria-expanded":l.open,"aria-controls":l.open?l.contentId:void 0,"data-state":l.open?"open":"closed","data-disabled":i?"":void 0,disabled:i,...o,ref:Ac(s,l.triggerRef),onPointerDown:be(t.onPointerDown,u=>{!i&&u.button===0&&u.ctrlKey===!1&&(l.onOpenToggle(),l.open||u.preventDefault())}),onKeyDown:be(t.onKeyDown,u=>{i||(["Enter"," "].includes(u.key)&&l.onOpenToggle(),u.key==="ArrowDown"&&l.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(u.key)&&u.preventDefault())})})})});Ob.displayName=Mb;var FA="DropdownMenuPortal",Lb=t=>{const{__scopeDropdownMenu:s,...n}=t,i=us(s);return e.jsx(SA,{...i,...n})};Lb.displayName=FA;var $b="DropdownMenuContent",Fb=v.forwardRef((t,s)=>{const{__scopeDropdownMenu:n,...i}=t,o=Rb($b,n),l=us(n),d=v.useRef(!1);return e.jsx(kA,{id:o.contentId,"aria-labelledby":o.triggerId,...l,...i,ref:s,onCloseAutoFocus:be(t.onCloseAutoFocus,u=>{d.current||o.triggerRef.current?.focus(),d.current=!1,u.preventDefault()}),onInteractOutside:be(t.onInteractOutside,u=>{const f=u.detail.originalEvent,p=f.button===0&&f.ctrlKey===!0,g=f.button===2||p;(!o.modal||g)&&(d.current=!0)}),style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});Fb.displayName=$b;var zA="DropdownMenuGroup",BA=v.forwardRef((t,s)=>{const{__scopeDropdownMenu:n,...i}=t,o=us(n);return e.jsx(CA,{...o,...i,ref:s})});BA.displayName=zA;var UA="DropdownMenuLabel",zb=v.forwardRef((t,s)=>{const{__scopeDropdownMenu:n,...i}=t,o=us(n);return e.jsx(_A,{...o,...i,ref:s})});zb.displayName=UA;var VA="DropdownMenuItem",Bb=v.forwardRef((t,s)=>{const{__scopeDropdownMenu:n,...i}=t,o=us(n);return e.jsx(EA,{...o,...i,ref:s})});Bb.displayName=VA;var qA="DropdownMenuCheckboxItem",HA=v.forwardRef((t,s)=>{const{__scopeDropdownMenu:n,...i}=t,o=us(n);return e.jsx(TA,{...o,...i,ref:s})});HA.displayName=qA;var WA="DropdownMenuRadioGroup",KA=v.forwardRef((t,s)=>{const{__scopeDropdownMenu:n,...i}=t,o=us(n);return e.jsx(PA,{...o,...i,ref:s})});KA.displayName=WA;var GA="DropdownMenuRadioItem",JA=v.forwardRef((t,s)=>{const{__scopeDropdownMenu:n,...i}=t,o=us(n);return e.jsx(IA,{...o,...i,ref:s})});JA.displayName=GA;var YA="DropdownMenuItemIndicator",QA=v.forwardRef((t,s)=>{const{__scopeDropdownMenu:n,...i}=t,o=us(n);return e.jsx(AA,{...o,...i,ref:s})});QA.displayName=YA;var XA="DropdownMenuSeparator",Ub=v.forwardRef((t,s)=>{const{__scopeDropdownMenu:n,...i}=t,o=us(n);return e.jsx(RA,{...o,...i,ref:s})});Ub.displayName=XA;var ZA="DropdownMenuArrow",eR=v.forwardRef((t,s)=>{const{__scopeDropdownMenu:n,...i}=t,o=us(n);return e.jsx(DA,{...o,...i,ref:s})});eR.displayName=ZA;var tR="DropdownMenuSubTrigger",sR=v.forwardRef((t,s)=>{const{__scopeDropdownMenu:n,...i}=t,o=us(n);return e.jsx(MA,{...o,...i,ref:s})});sR.displayName=tR;var rR="DropdownMenuSubContent",nR=v.forwardRef((t,s)=>{const{__scopeDropdownMenu:n,...i}=t,o=us(n);return e.jsx(OA,{...o,...i,ref:s,style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});nR.displayName=rR;var aR=Db,iR=Ob,oR=Lb,lR=Fb,cR=zb,dR=Bb,uR=Ub;function mR({...t}){return e.jsx(aR,{"data-slot":"dropdown-menu",...t})}function fR({...t}){return e.jsx(iR,{"data-slot":"dropdown-menu-trigger",...t})}function hR({className:t,sideOffset:s=4,...n}){return e.jsx(oR,{children:e.jsx(lR,{"data-slot":"dropdown-menu-content",sideOffset:s,className:Ve("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-h-(--radix-dropdown-menu-content-available-height) min-w-[8rem] origin-(--radix-dropdown-menu-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border p-1 shadow-md",t),...n})})}function En({className:t,inset:s,variant:n="default",...i}){return e.jsx(dR,{"data-slot":"dropdown-menu-item","data-inset":s,"data-variant":n,className:Ve("focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/20 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[svg]:!text-destructive [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...i})}function pR({className:t,inset:s,...n}){return e.jsx(cR,{"data-slot":"dropdown-menu-label","data-inset":s,className:Ve("px-2 py-1.5 text-sm font-medium data-[inset]:pl-8",t),...n})}function hv({className:t,...s}){return e.jsx(uR,{"data-slot":"dropdown-menu-separator",className:Ve("bg-border -mx-1 my-1 h-px",t),...s})}function gR({user:t,onLogout:s,onViewStorefront:n,onUpdateUser:i,onGoToDashboard:o,onShowVerification:l,onEditProfile:d,onViewProfile:u,onViewMessages:f,onShowAdminVerification:p}){const[g,h]=v.useState(!1),y=b=>{switch(Qr(b)){case"business-verified":return{status:"verified",color:"text-green-600 dark:text-green-400",bgColor:"bg-green-50 dark:bg-green-900/20",borderColor:"border-green-200 dark:border-green-800",dotColor:"bg-green-600"};case"id-verified":return{status:"verified",color:"text-green-600 dark:text-green-400",bgColor:"bg-green-50 dark:bg-green-900/20",borderColor:"border-green-200 dark:border-green-800",dotColor:"bg-green-600"};case"under-review":return{status:"under-review",color:"text-blue-600 dark:text-blue-400",bgColor:"bg-blue-50 dark:bg-blue-900/20",borderColor:"border-blue-200 dark:border-blue-800",dotColor:"bg-blue-600"};case"phone-verified":return{status:"in-progress",color:"text-yellow-600 dark:text-yellow-400",bgColor:"bg-yellow-50 dark:bg-yellow-900/20",borderColor:"border-yellow-200 dark:border-yellow-800",dotColor:"bg-yellow-600"};default:return{status:"not-started",color:"text-red-600 dark:text-red-400",bgColor:"bg-red-50 dark:bg-red-900/20",borderColor:"border-red-200 dark:border-red-800",dotColor:"bg-red-600"}}},j=b=>b.split(" ").map(w=>w[0]).join("").toUpperCase().slice(0,2);return g?e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-card rounded-lg p-6 w-full max-w-md max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"My Profile"}),e.jsx(O,{variant:"ghost",size:"sm",onClick:()=>h(!1),children:"×"})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx(uv,{className:"w-20 h-20 mx-auto mb-4",children:t.profileImage||t.avatar?e.jsx(ko,{src:t.profileImage||t.avatar,alt:`${t.name}'s profile`,className:"w-full h-full object-cover rounded-full"}):e.jsx(mv,{className:"text-lg",children:j(t.name)})}),e.jsx("h3",{className:"text-lg font-medium",children:t.name}),e.jsx(Ni,{userType:t.userType,accountType:gi(t),verificationLevel:Qr(t),size:"sm"}),e.jsxs("div",{className:"mt-2",children:[t.userType==="admin"&&e.jsxs("div",{className:"flex items-center justify-center gap-1 text-sm text-primary",children:[e.jsx(dt,{className:"w-4 h-4"}),"Platform Administrator"]}),t.userType!=="admin"&&t.verified&&e.jsxs("div",{className:"flex items-center justify-center gap-1 text-sm text-green-600",children:[e.jsx(dt,{className:"w-4 h-4"}),"Verified Account"]}),t.userType!=="admin"&&t.verificationStatus==="under_review"&&e.jsxs("div",{className:"flex items-center justify-center gap-1 text-sm text-amber-600",children:[e.jsx(zs,{className:"w-4 h-4"}),"Verification Under Review"]}),t.userType!=="admin"&&!t.verified&&t.verificationStatus!=="under_review"&&e.jsxs("div",{className:"flex items-center justify-center gap-1 text-sm text-muted-foreground",children:[e.jsx(dt,{className:"w-4 h-4"}),"Verification Available"]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("h4",{className:"font-medium flex items-center gap-2",children:[e.jsx($t,{className:"w-4 h-4"}),"Contact Information"]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[e.jsx(Vt,{className:"w-4 h-4"}),e.jsx("span",{children:t.location})]}),e.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[e.jsx(Cr,{className:"w-4 h-4"}),e.jsx("span",{children:t.phone})]})]})]}),t.businessName&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("h4",{className:"font-medium flex items-center gap-2",children:[e.jsx(_r,{className:"w-4 h-4"}),"Business Information"]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Business Name:"}),e.jsx("div",{className:"text-muted-foreground",children:t.businessName})]}),t.businessDescription&&e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Description:"}),e.jsx("div",{className:"text-muted-foreground",children:t.businessDescription})]}),t.experience&&e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Experience:"}),e.jsx("div",{className:"text-muted-foreground",children:t.experience})]}),t.specialization&&e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Specialization:"}),e.jsx("div",{className:"text-muted-foreground capitalize",children:t.specialization})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"font-medium",children:"Account Stats"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{className:"text-center p-3 bg-muted rounded-lg",children:[e.jsx("div",{className:"font-medium",children:"Member Since"}),e.jsx("div",{className:"text-muted-foreground",children:Dc(t.joinedDate)})]}),e.jsxs("div",{className:"text-center p-3 bg-muted rounded-lg",children:[e.jsx("div",{className:"font-medium",children:"Rating"}),e.jsx("div",{className:"text-muted-foreground",children:t.rating>0?`${t.rating}/5`:"No ratings yet"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[(t.userType==="farmer"||t.userType==="trader"||t.userType==="buyer")&&o&&e.jsxs(O,{variant:"outline",className:"w-full justify-start gap-2",onClick:()=>{h(!1),o()},children:[e.jsx(mc,{className:"w-4 h-4"}),"Dashboard"]}),t.userType==="admin"&&o&&e.jsxs(O,{variant:"outline",className:"w-full justify-start gap-2",onClick:()=>{h(!1),o()},children:[e.jsx(dt,{className:"w-4 h-4"}),"Admin Panel"]}),t.userType==="admin"&&p&&e.jsxs(O,{variant:"outline",className:"w-full justify-start gap-2",onClick:()=>{h(!1),p()},children:[e.jsx(pa,{className:"w-4 h-4"}),"Verification Requests"]}),e.jsxs(O,{variant:"outline",className:"w-full justify-start gap-2",onClick:()=>{h(!1),f?.()},children:[e.jsx(js,{className:"w-4 h-4"}),"Messages"]}),e.jsxs(O,{variant:"outline",className:"w-full justify-start gap-2",onClick:()=>{h(!1),l?.()},children:[e.jsx(dt,{className:`w-4 h-4 ${y(t).color}`}),t.verified?"Verification Status":t.verificationStatus==="under_review"?"Verification":t.verificationSubmitted?"Verification Status":"Get Verified",y(t).status==="under-review"&&e.jsx(Ee,{variant:"secondary",className:`ml-auto text-xs ${y(t).bgColor} ${y(t).color} ${y(t).borderColor}`,children:t.verificationStatus==="under_review"||t.verificationSubmitted?"Under Review":"Reviewing"}),y(t).status==="verified"&&e.jsx(Ee,{variant:"secondary",className:`ml-auto text-xs ${y(t).bgColor} ${y(t).color} ${y(t).borderColor}`,children:"Verified"}),y(t).status==="in-progress"&&e.jsx(Ee,{variant:"secondary",className:`ml-auto text-xs ${y(t).bgColor} ${y(t).color} ${y(t).borderColor}`,children:"Phone Verified"}),y(t).status==="not-started"&&e.jsx(Ee,{variant:"secondary",className:"ml-auto text-xs",children:"Available"})]}),e.jsxs(O,{variant:"outline",className:"w-full justify-start gap-2",children:[e.jsx(Av,{className:"w-4 h-4"}),"Notification Settings"]}),e.jsxs(O,{variant:"outline",className:"w-full justify-start gap-2 text-destructive hover:text-destructive",onClick:()=>{h(!1),s()},children:[e.jsx(ex,{className:"w-4 h-4"}),"Sign Out"]})]})]})]})}):e.jsx("div",{children:e.jsxs(mR,{children:[e.jsx(fR,{className:"relative h-9 w-9 md:h-10 md:w-10 rounded-full hover:bg-accent/50 transition-colors cursor-pointer focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",children:e.jsx(uv,{className:"h-9 w-9 md:h-10 md:w-10",children:t.profileImage||t.avatar?e.jsx(ko,{src:t.profileImage||t.avatar,alt:`${t.name}'s profile`,className:"w-full h-full object-cover rounded-full"}):e.jsx(mv,{className:"text-sm",children:j(t.name)})})}),e.jsxs(hR,{className:"w-56",align:"end",forceMount:!0,children:[e.jsx(pR,{className:"font-normal",children:e.jsxs("div",{className:"flex flex-col space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:"text-sm font-medium leading-none",children:t.name}),e.jsxs(Ee,{variant:"outline",className:`text-xs px-2 py-0.5 font-medium flex items-center gap-1 ${t.userType==="farmer"?"bg-green-600 text-white border-green-600":t.userType==="trader"?"bg-orange-600 text-white border-orange-600":t.userType==="buyer"?"bg-blue-50 text-blue-700 border-blue-200 dark:bg-blue-900/20 dark:text-blue-400 dark:border-blue-800":"bg-gray-50 text-gray-700 border-gray-200 dark:bg-gray-900/20 dark:text-gray-300 dark:border-gray-800"}`,children:[gi(t)==="business"?e.jsx($n,{className:`w-3 h-3 ${t.userType==="farmer"||t.userType==="trader"?"text-white":t.userType==="buyer"?"text-blue-700 dark:text-blue-400":"text-gray-700 dark:text-gray-300"}`}):e.jsx($t,{className:`w-3 h-3 ${t.userType==="farmer"||t.userType==="trader"?"text-white":t.userType==="buyer"?"text-blue-700 dark:text-blue-400":"text-gray-700 dark:text-gray-300"}`}),t.userType==="farmer"&&"Farmer",t.userType==="trader"&&"Trader",t.userType==="buyer"&&"Buyer",t.userType==="admin"&&"Admin"]})]}),e.jsx("p",{className:"text-xs leading-none text-muted-foreground",children:t.email})]})}),e.jsx(hv,{}),e.jsxs(En,{onClick:u,children:[e.jsx($t,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"Profile"})]}),(t.userType==="farmer"||t.userType==="trader"||t.userType==="buyer")&&o&&e.jsxs(En,{onClick:o,children:[e.jsx(mc,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"Dashboard"})]}),t.userType==="admin"&&o&&e.jsxs(En,{onClick:o,children:[e.jsx(dt,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"Admin Panel"})]}),t.userType==="admin"&&p&&e.jsxs(En,{onClick:p,children:[e.jsx(pa,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"Verification Requests"})]}),(t.userType==="farmer"||t.userType==="trader")&&e.jsxs(En,{onClick:()=>n?.(t.id),children:[e.jsx(_r,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"My Storefront"})]}),e.jsxs(En,{onClick:f,children:[e.jsx(js,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"Messages"})]}),e.jsxs(En,{onClick:()=>l?.(),children:[e.jsx(dt,{className:`mr-2 h-4 w-4 ${y(t).color}`}),e.jsx("span",{children:t.verified?"Verification Status":t.verificationStatus==="under_review"?"Verification":t.verificationSubmitted?"Verification Status":"Get Verified"}),y(t).status==="under-review"&&e.jsx("div",{className:`ml-auto w-2 h-2 rounded-full ${y(t).dotColor}`,title:"Under Review"}),y(t).status==="verified"&&e.jsx("div",{className:`ml-auto w-2 h-2 rounded-full ${y(t).dotColor}`,title:"Verified"}),y(t).status==="in-progress"&&e.jsx("div",{className:`ml-auto w-2 h-2 rounded-full ${y(t).dotColor}`,title:"Phone Verified - ID Verification Still Needed"}),y(t).status==="not-started"&&e.jsx("div",{className:`ml-auto w-2 h-2 rounded-full ${y(t).dotColor}`,title:"Verification Available"})]}),e.jsx(hv,{}),e.jsxs(En,{onClick:s,children:[e.jsx(ex,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"Log out"})]})]})]})})}function xR({currentView:t,currentUser:s,onBackToMarketplace:n,onGoToDashboard:i,onGoToLogin:o,onGoToRegister:l,onLogout:d,onViewStorefront:u,onUpdateUser:f,onShowVerification:p,onEditProfile:g,onViewProfile:h,onViewMessages:y,onShowAdminVerification:j,editingProduct:b}){return e.jsx("header",{className:"sticky top-0 z-40 border-b bg-card",children:e.jsx("div",{className:"w-full max-w-7xl mx-auto px-4 py-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("button",{onClick:n,className:"flex items-center gap-3 hover:opacity-80 transition-opacity duration-200 cursor-pointer",children:[e.jsx("div",{className:"w-10 h-10 md:w-12 md:h-12 bg-primary rounded-lg flex items-center justify-center shadow-md",children:e.jsx(nr,{className:"w-5 h-5 md:w-6 md:h-6 text-primary-foreground"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-lg md:text-xl font-semibold",children:"AgriLink"}),e.jsx("p",{className:"text-xs md:text-sm text-muted-foreground hidden sm:block",children:"Linking agriculture to opportunity"})]})]}),e.jsxs("div",{className:"flex items-center gap-2 md:gap-4",children:[e.jsx("div",{className:"flex md:hidden items-center gap-1",children:t!=="marketplace"&&e.jsx(O,{variant:"ghost",onClick:n,className:"px-2 h-8 text-sm",children:"Home"})}),e.jsxs("div",{className:"hidden md:flex items-center gap-2",children:[e.jsx(O,{variant:t==="marketplace"?"default":"ghost",className:"h-9 px-4 text-sm",onClick:n,children:"Marketplace"}),s&&e.jsxs(e.Fragment,{children:[(s.userType==="farmer"||s.userType==="trader"||s.userType==="buyer")&&e.jsx(O,{variant:t==="dashboard"?"default":"ghost",className:"h-9 px-4 text-sm",onClick:i,children:"Dashboard"}),s.userType==="admin"&&e.jsx(O,{variant:t==="marketplace"?"default":"ghost",className:"h-9 px-4 text-sm",onClick:i,children:"Admin Panel"}),t==="profile"&&e.jsx(O,{variant:"default",size:"sm",disabled:!0,children:"Profile"}),t==="add-listing"&&e.jsx(O,{variant:"default",size:"sm",disabled:!0,children:b?"Edit Listing":"Add Listing"}),t==="messages"&&e.jsx(O,{variant:"default",size:"sm",disabled:!0,children:"Messages"}),t==="verification"&&e.jsx(O,{variant:"default",size:"sm",disabled:!0,children:"Verification"}),t==="admin-verification"&&e.jsx(O,{variant:"default",size:"sm",disabled:!0,children:"Admin Verification"})]}),!s&&t==="forgot-password"&&e.jsx(O,{variant:"ghost",size:"sm",disabled:!0,children:"Reset Password"})]}),s?e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("span",{className:"text-sm text-muted-foreground hidden lg:inline font-medium",children:["Welcome, ",s.name.split(" ")[0]]}),e.jsx(gR,{user:s,onLogout:d,onViewStorefront:u,onUpdateUser:f,onGoToDashboard:i,onShowVerification:p,onEditProfile:g,onViewProfile:h,onViewMessages:y,onShowAdminVerification:j})]}):e.jsxs("div",{className:"flex items-center gap-1 md:gap-2",children:[e.jsx(O,{variant:t==="login"?"default":"outline",onClick:o,className:"md:hidden px-2 h-8",children:e.jsx(Zg,{className:"w-4 h-4"})}),e.jsx(O,{variant:t==="register"?"default":"outline",onClick:l,className:"md:hidden px-2 h-8",children:e.jsx(tx,{className:"w-4 h-4"})}),e.jsxs(O,{variant:t==="login"?"default":"outline",onClick:o,className:"hidden md:flex h-9 px-4 text-sm",children:[e.jsx(Zg,{className:"w-4 h-4 mr-2"}),"Sign In"]}),e.jsxs(O,{variant:t==="register"?"default":"outline",onClick:l,className:"hidden md:flex h-9 px-4 text-sm",children:[e.jsx(tx,{className:"w-4 h-4 mr-2"}),"Register"]})]})]})]})})})}function vR({onShowAboutUs:t,onShowContactUs:s,onShowFAQ:n}){return e.jsxs("footer",{className:"border-t bg-card mt-8",children:[e.jsxs("div",{className:"w-full max-w-7xl mx-auto px-4 py-6",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2 mb-2",children:[e.jsx(nr,{className:"w-4 h-4 text-primary"}),e.jsx("span",{className:"text-sm md:text-base font-semibold",children:"Connecting Myanmar's Agricultural Community"})]}),e.jsx("p",{className:"text-xs md:text-sm text-muted-foreground max-w-xl mx-auto",children:"Transparent pricing • Direct connections • Quality products • Trusted marketplace"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-0",children:[e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2 mb-1",children:[e.jsx(Io,{className:"w-4 h-4 text-primary"}),e.jsx("span",{className:"font-medium text-sm md:text-base",children:"For Farmers"})]}),e.jsx("p",{className:"text-xs md:text-sm text-muted-foreground",children:"Direct sales • Fair pricing • Wider market reach"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2 mb-1",children:[e.jsx(ja,{className:"w-4 h-4 text-primary"}),e.jsx("span",{className:"font-medium text-sm md:text-base",children:"For Traders"})]}),e.jsx("p",{className:"text-xs md:text-sm text-muted-foreground",children:"Quality sourcing • Efficient distribution • Network growth"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2 mb-1",children:[e.jsx(lf,{className:"w-4 h-4 text-primary"}),e.jsx("span",{className:"font-medium text-sm md:text-base",children:"For Buyers"})]}),e.jsx("p",{className:"text-xs md:text-sm text-muted-foreground",children:"Quality sourcing • Efficient distribution • Network growth"})]})]})]}),e.jsx("div",{className:"border-t"}),e.jsx("div",{className:"container mx-auto px-4 py-6",children:e.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between gap-4",children:[e.jsx("div",{className:"text-xs md:text-sm text-muted-foreground text-center md:text-left",children:e.jsx("p",{children:"© 2025 AgriLink - Academic Project developed in partnership with Infinity Success Co. Ltd."})}),e.jsxs("div",{className:"flex items-center gap-4 text-xs md:text-sm",children:[e.jsx("button",{onClick:t,className:"text-muted-foreground hover:text-primary transition-colors duration-200",children:"About Us"}),e.jsx("span",{className:"text-muted-foreground",children:"•"}),e.jsx("button",{onClick:s,className:"text-muted-foreground hover:text-primary transition-colors duration-200",children:"Contact Us"}),e.jsx("span",{className:"text-muted-foreground",children:"•"}),e.jsx("button",{onClick:n,className:"text-muted-foreground hover:text-primary transition-colors duration-200",children:"FAQ"})]})]})})]})}function yR({currentUser:t,allProducts:s,onGoToRegister:n,onGoToLogin:i,onShowAddListing:o}){return e.jsxs("section",{className:"relative py-8 lg:py-12 overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-primary/15 via-amber-900/8 to-stone-600/12"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-tr from-transparent via-primary/8 to-transparent"}),e.jsx("div",{className:"absolute top-6 right-6 w-32 h-32 bg-primary/20 rounded-full blur-2xl"}),e.jsx("div",{className:"absolute bottom-6 left-6 w-40 h-40 bg-amber-900/25 rounded-full blur-2xl"}),e.jsx("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-64 h-64 bg-stone-700/15 rounded-full blur-3xl"}),e.jsxs("div",{className:"relative max-w-5xl mx-auto text-center space-y-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("h1",{className:"text-3xl lg:text-4xl font-bold tracking-tight",children:[e.jsxs("span",{className:"text-foreground",children:["Connect."," "]}),e.jsxs("span",{className:"text-primary",children:["Discover."," "]}),e.jsx("span",{className:"text-foreground",children:"Thrive."})]}),e.jsx("p",{className:"text-lg text-muted-foreground max-w-3xl mx-auto",children:"Connecting producers, distributors, businesses, and consumers across Myanmar. Quality products, transparent pricing, and trusted partnerships for all."})]}),t?e.jsxs("div",{className:"bg-card border rounded-2xl p-4 max-w-2xl mx-auto",children:[e.jsxs("p",{className:"text-foreground mb-2",children:["Welcome back,"," ",e.jsx("span",{className:"font-semibold text-primary",children:t.name.split(" ")[0]}),"!"]}),e.jsx("p",{className:"text-muted-foreground mb-3 text-sm",children:t.userType==="farmer"?"Ready to share your fresh products with customers across Myanmar?":t.userType==="trader"?"Ready to connect buyers with quality agricultural products?":"Discover fresh products and connect directly with local farmers and suppliers."}),(t.userType==="farmer"||t.userType==="trader")&&e.jsxs(O,{size:"lg",onClick:o,className:"px-6 py-3 rounded-xl",children:["List Your Products"," ",e.jsx(uc,{className:"ml-2 w-4 h-4"})]})]}):e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 justify-center items-center",children:[e.jsxs(O,{size:"lg",onClick:n,className:"px-6 py-4 rounded-xl shadow-lg hover:shadow-xl transition-all duration-300",children:["Get Started"," ",e.jsx(uc,{className:"ml-2 w-4 h-4"})]}),e.jsx(O,{size:"lg",variant:"outline",onClick:i,className:"px-6 py-4 rounded-xl",children:"Sign In"})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 max-w-4xl mx-auto pt-6",children:[e.jsxs("div",{className:"bg-card border rounded-xl p-3 text-center",children:[e.jsxs("div",{className:"text-xl font-bold text-foreground",children:[s.length,"+"]}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Fresh Products"})]}),e.jsxs("div",{className:"bg-card border rounded-xl p-3 text-center",children:[e.jsx("div",{className:"text-xl font-bold text-foreground",children:"Connected"}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Supply Network"})]}),e.jsxs("div",{className:"bg-card border rounded-xl p-3 text-center",children:[e.jsx("div",{className:"text-xl font-bold text-foreground",children:"Fair"}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Transparent Pricing"})]}),e.jsxs("div",{className:"bg-card border rounded-xl p-3 text-center",children:[e.jsx("div",{className:"text-xl font-bold text-foreground",children:"Local"}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Myanmar Grown"})]})]})]})]})}function wR({onOpenStorageManagement:t}){const[s,n]=v.useState(ma()),[i,o]=v.useState(!1),[l,d]=v.useState(!1),[u,f]=v.useState(Date.now());v.useEffect(()=>{const j=()=>{const w=ma();n(w),f(Date.now())};j();const b=setInterval(j,3e4);return()=>clearInterval(b)},[]),v.useEffect(()=>{const j=()=>{setTimeout(()=>{const b=ma();n(b)},100)};return window.addEventListener("storage",j),window.addEventListener("agrilink-storage-changed",j),()=>{window.removeEventListener("storage",j),window.removeEventListener("agrilink-storage-changed",j)}},[]);const p=async()=>{o(!0);try{await Uw();const j=ma();n(j),ge.success("Storage cleanup completed successfully!")}catch(j){console.error("Cleanup failed:",j),ge.error("Storage cleanup failed. Please try again.")}finally{o(!1)}};if(l||s.percentage<75)return null;const h=s.percentage>=95?{variant:"destructive",icon:as,title:"Storage Critical",message:"Storage is nearly full. New data may not be saved.",color:"text-red-600"}:s.percentage>=85?{variant:"default",icon:as,title:"Storage Warning",message:"Storage is getting full. Consider clearing old data.",color:"text-yellow-600"}:{variant:"default",icon:Jr,title:"Storage Notice",message:"Storage usage is elevated. Monitor for issues.",color:"text-blue-600"},y=h.icon;return e.jsx("div",{className:"fixed bottom-4 right-4 z-40 max-w-sm",children:e.jsxs(is,{variant:h.variant,className:"shadow-lg border-2",children:[e.jsx(y,{className:"h-4 w-4"}),e.jsxs(os,{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:h.title}),e.jsx("div",{className:"text-sm",children:h.message})]}),e.jsx(O,{variant:"ghost",size:"sm",onClick:()=>d(!0),className:"h-6 w-6 p-0",children:e.jsx(cs,{className:"h-3 w-3"})})]}),e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsxs("span",{children:[Math.round(s.used/1024)," KB / ",Math.round(s.total/1024)," KB"]}),e.jsxs(Ee,{variant:"outline",className:h.color,children:[Math.round(s.percentage),"% used"]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(O,{size:"sm",variant:"outline",onClick:p,disabled:i,className:"flex-1",children:i?e.jsxs(e.Fragment,{children:[e.jsx(Jr,{className:"w-3 h-3 mr-1 animate-pulse"}),"Cleaning..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Tr,{className:"w-3 h-3 mr-1"}),"Quick Clean"]})}),t&&e.jsxs(O,{size:"sm",onClick:t,className:"flex-1",children:[e.jsx(Jr,{className:"w-3 h-3 mr-1"}),"Manage"]})]})]})]})})}class bR extends le.Component{constructor(s){super(s),this.state={hasError:!1}}static getDerivedStateFromError(s){return{hasError:!0,error:s}}componentDidCatch(s,n){console.error("AgriLink Error Boundary caught an error:",s,n)}handleRetry=()=>{this.setState({hasError:!1,error:void 0})};render(){return this.state.hasError?this.props.fallback?this.props.fallback:e.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center p-4",children:e.jsxs(re,{className:"max-w-md mx-auto",children:[e.jsxs(Ie,{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-destructive/10 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(as,{className:"w-8 h-8 text-destructive"})}),e.jsx(Oe,{children:"Something went wrong"})]}),e.jsxs(ie,{className:"space-y-4 text-center",children:[e.jsx("p",{className:"text-muted-foreground",children:"AgriLink encountered an unexpected error. Don't worry, your data is safe."}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(O,{onClick:this.handleRetry,className:"w-full",children:[e.jsx(rr,{className:"w-4 h-4 mr-2"}),"Try Again"]}),e.jsx(O,{variant:"outline",onClick:()=>window.location.reload(),className:"w-full",children:"Refresh Page"})]}),!1]})]})}):this.props.children}}var jR=(t,s,n,i,o,l,d,u)=>{let f=document.documentElement,p=["light","dark"];function g(j){(Array.isArray(t)?t:[t]).forEach(b=>{let w=b==="class",S=w&&l?o.map(k=>l[k]||k):o;w?(f.classList.remove(...S),f.classList.add(l&&l[j]?l[j]:j)):f.setAttribute(b,j)}),h(j)}function h(j){u&&p.includes(j)&&(f.style.colorScheme=j)}function y(){return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}if(i)g(i);else try{let j=localStorage.getItem(s)||n,b=d&&j==="system"?y():j;g(b)}catch{}},NR=v.createContext(void 0),SR={setTheme:t=>{},themes:[]},kR=()=>{var t;return(t=v.useContext(NR))!=null?t:SR};v.memo(({forcedTheme:t,storageKey:s,attribute:n,enableSystem:i,enableColorScheme:o,defaultTheme:l,value:d,themes:u,nonce:f,scriptProps:p})=>{let g=JSON.stringify([n,s,l,t,u,d,i,o]).slice(1,-1);return v.createElement("script",{...p,suppressHydrationWarning:!0,nonce:typeof window>"u"?f:"",dangerouslySetInnerHTML:{__html:`(${jR.toString()})(${g})`}})});const CR=({...t})=>{const{theme:s="system"}=kR();return e.jsx(X4,{theme:s,className:"toaster group",style:{"--normal-bg":"var(--popover)","--normal-text":"var(--popover-foreground)","--normal-border":"var(--border)"},...t})},_R=(t,s=45e3)=>[{id:"mock-1",sellerName:"Irrawaddy Valley Co-op",sellerType:"farmer",location:"Pyay",quantity:"200 bags",lastUpdated:"3 hours ago"},{id:"mock-2",sellerName:"Central Myanmar Trading",sellerType:"trader",location:"Naypyidaw",quantity:"500 bags",lastUpdated:"1 hour ago"},{id:"mock-3",sellerName:"Delta Agriculture Network",sellerType:"farmer",location:"Bogalay",quantity:"150 bags",lastUpdated:"4 hours ago"}].map(o=>{const l=(Math.random()-.5)*.15,d=Math.floor(s*(1+l));return{...o,price:d}}),ER=(t,s,n)=>{const i=v.useMemo(()=>t.filter(l=>{const d=!s.search||l.name.toLowerCase().includes(s.search.toLowerCase())||l.sellerName.toLowerCase().includes(s.search.toLowerCase());let u=!0;s.region&&s.region!=="all"&&(u=M_(l.location)===s.region),s.city&&s.city!=="all"&&(u=l.location===s.city),s.location&&s.location!=="all"&&(u=l.location===s.location);const f=!s.sellerType||s.sellerType==="all"||l.sellerType===s.sellerType;let p=!0;if(s.verifiedStatus&&s.verifiedStatus!=="all"&&n){const y=n(l.sellerId);s.verifiedStatus==="verified"?p=y:s.verifiedStatus==="unverified"&&(p=!y)}const g=!s.category||s.category==="all"||l.name.toLowerCase().includes(s.category.toLowerCase());let h=!0;if(s.priceRange&&s.priceRange!=="all"){const y=l.price;switch(s.priceRange){case"0-50000":h=y>=0&&y<=5e4;break;case"50000-100000":h=y>5e4&&y<=1e5;break;case"100000-200000":h=y>1e5&&y<=2e5;break;case"200000+":h=y>2e5;break}}return d&&u&&f&&p&&g&&h}).sort((l,d)=>{switch(s.sortBy){case"price-low":return l.price-d.price;case"price-high":return d.price-l.price;case"location":return l.location.localeCompare(d.location);case"newest":default:return new Date(d.lastUpdated).getTime()-new Date(l.lastUpdated).getTime()}}),[t,s,n]),o=v.useMemo(()=>{let l=0;return s.search&&s.search.trim()!==""&&l++,s.category&&s.category!==""&&s.category!=="all"&&l++,(s.city&&s.city!==""&&s.city!=="all"||s.region&&s.region!==""&&s.region!=="all"||s.location&&s.location!==""&&s.location!=="all")&&l++,s.sellerType&&s.sellerType!==""&&s.sellerType!=="all"&&l++,s.verifiedStatus&&s.verifiedStatus!==""&&s.verifiedStatus!=="all"&&l++,s.priceRange&&s.priceRange!==""&&s.priceRange!=="all"&&l++,l},[s]);return{filteredProducts:i,getActiveFiltersCount:o}},TR=()=>{const[t,s]=v.useState([]),[n,i]=v.useState(!0),[o,l]=v.useState(null),{backendAvailable:d}=Xc(),u=v.useCallback(async()=>{try{if(i(!0),l(null),!d||!yr.isSupabaseConfigured()){const w=localStorage.getItem("agriconnect-myanmar-user-products");if(w){const S=JSON.parse(w);s(S)}else s([]);i(!1);return}const b=new Promise((w,S)=>{setTimeout(()=>S(new Error("Products fetch timeout")),1e4)});try{const w=fo.getAll(),k=(await Promise.race([w,b])).map(f);s(k)}catch(w){console.log("Backend fetch failed, trying KV store:",w);try{const S=fetch(`${yr.SUPABASE_URL}/functions/v1/make-server-aa5728d5/kv/products`,{headers:{Authorization:`Bearer ${yr.SUPABASE_ANON_KEY}`}}),C=await(await Promise.race([S,b])).json();if(C.products){const E=C.products.map(f);s(E)}else s([])}catch(S){console.log("KV store also failed, using empty array:",S),s([])}}}catch(b){console.error("Fetch products error:",b),l(b instanceof Error?b.message:"Failed to fetch products"),s([])}finally{i(!1)}},[d]),f=b=>({id:b.id,sellerId:b.seller_id,name:b.name,price:Number(b.price),unit:b.unit,location:b.location,sellerType:b.profiles?.user_type||"farmer",sellerName:b.profiles?.business_name||b.profiles?.name||"Unknown Seller",image:b.images?.[0]||"https://images.unsplash.com/photo-1574323347407-f5e1ad6d020b",quantity:b.quantity_available,priceChange:Math.floor(Math.random()*20)-10,lastUpdated:new Date(b.updated_at).toLocaleDateString(),variations:b.variations||[]}),p=b=>({name:b.name,description:b.variations?.[0]?.description,category:"agriculture",price:b.price,unit:b.unit,quantity_available:b.quantity,location:b.location,images:b.image?[b.image]:[],variations:b.variations||[]}),g=v.useCallback(async b=>{try{if(!d||!yr.isSupabaseConfigured()){const S={id:`product-${Date.now()}`,...b,sellerId:b.sellerId||"current-user",priceChange:0,lastUpdated:new Date().toLocaleDateString()},k=JSON.parse(localStorage.getItem("agriconnect-myanmar-user-products")||"[]"),C=[S,...k];return localStorage.setItem("agriconnect-myanmar-user-products",JSON.stringify(C)),s(E=>[S,...E]),S}const w=p(b);try{const S=await fo.create(w),k=f(S);return s(C=>[k,...C]),k}catch(S){console.log("Backend create failed, trying KV store:",S);const C=await(await fetch(`${yr.SUPABASE_URL}/functions/v1/make-server-aa5728d5/kv/products`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${yr.SUPABASE_ANON_KEY}`},body:JSON.stringify(w)})).json();if(C.product){const E=f(C.product);return s(P=>[E,...P]),E}}}catch(w){throw console.error("Create product error:",w),w}},[d]),h=v.useCallback(async(b,w)=>{try{const S=p(w),k=await fo.update(b,S),C=f(k);return s(E=>E.map(P=>P.id===b?C:P)),C}catch(S){throw console.error("Update product error:",S),S}},[]),y=v.useCallback(async b=>{try{await fo.delete(b),s(w=>w.filter(S=>S.id!==b))}catch(w){throw console.error("Delete product error:",w),w}},[]),j=v.useCallback(async b=>{try{return(await fo.getUserProducts(b)).map(f)}catch(w){return console.error("Get user products error:",w),[]}},[]);return v.useEffect(()=>{d!==void 0&&u()},[d]),v.useEffect(()=>{if(d)try{const b=D0.subscribeToProducts(w=>{if(console.log("Real-time product update:",w),w.eventType==="INSERT"){const S=f(w.new);s(k=>[S,...k])}else if(w.eventType==="UPDATE"){const S=f(w.new);s(k=>k.map(C=>C.id===S.id?S:C))}else w.eventType==="DELETE"&&s(S=>S.filter(k=>k.id!==w.old.id))});return()=>{b.unsubscribe()}}catch(b){console.log("Real-time subscription failed:",b)}},[d]),{products:t,loading:n,error:o,fetchProducts:u,createProduct:g,updateProduct:h,deleteProduct:y,getUserProducts:j}};class PR{static RETENTION_DAYS=30;static MAX_MESSAGES_PER_CONVERSATION=1e3;static async performCleanup(){console.log("🧹 Starting comprehensive chat storage cleanup...");const s={conversationsRemoved:0,messagesRemoved:0,offersRemoved:0,totalBytesFreed:0},n=this.getStorageSize();try{s.conversationsRemoved=await this.cleanupConversations(),s.messagesRemoved=await this.cleanupMessages(),s.offersRemoved=await this.cleanupOffers(),await this.removeOrphanedData();const i=this.getStorageSize();return s.totalBytesFreed=Math.max(0,n-i),console.log("✅ Chat storage cleanup completed:",s),s.conversationsRemoved+s.messagesRemoved+s.offersRemoved>0&&ge.success(`Cleaned up ${s.conversationsRemoved+s.messagesRemoved+s.offersRemoved} items`,{description:`Freed ${Math.round(s.totalBytesFreed/1024)} KB of storage space`}),s}catch(i){throw console.error("❌ Failed to cleanup chat storage:",i),ge.error("Failed to cleanup chat storage"),i}}static async cleanupConversations(){try{const s=this.getStoredConversations(),n=new Date(Date.now()-this.RETENTION_DAYS*24*60*60*1e3),i=s.filter(l=>!(!l.id||!l.productId||!l.buyerId||!l.sellerId||new Date(l.updatedAt||l.createdAt||"2024-01-01")<n)),o=s.length-i.length;return o>0&&(localStorage.setItem("agriconnect-myanmar-conversations",JSON.stringify(i)),console.log(`🗑️ Removed ${o} invalid/old conversations`)),o}catch(s){return console.error("Failed to cleanup conversations:",s),localStorage.removeItem("agriconnect-myanmar-conversations"),1}}static async cleanupMessages(){try{const n=Object.keys(localStorage).filter(u=>u.startsWith("agriconnect-myanmar-messages-")),i=this.getStoredConversations(),o=new Set(i.map(u=>u.id));let l=0;const d=new Date(Date.now()-this.RETENTION_DAYS*24*60*60*1e3);for(const u of n)try{const f=u.replace("agriconnect-myanmar-messages-","");if(!o.has(f)){localStorage.removeItem(u),l++;continue}const p=JSON.parse(localStorage.getItem(u)||"[]"),h=p.filter(b=>!b.id||!b.content||!b.senderId?!1:new Date(b.createdAt||b.timestamp||"2024-01-01")>d).slice(-this.MAX_MESSAGES_PER_CONVERSATION),y=p.length,j=h.length;j===0?(localStorage.removeItem(u),l+=y):j!==y&&(localStorage.setItem(u,JSON.stringify(h)),l+=y-j)}catch(f){console.warn(`Failed to process message key ${u}:`,f),localStorage.removeItem(u),l++}return l>0&&console.log(`🗑️ Removed ${l} invalid/old messages`),l}catch(s){return console.error("Failed to cleanup messages:",s),0}}static async cleanupOffers(){try{const s=this.getStoredOffers(),n=new Date(Date.now()-this.RETENTION_DAYS*24*60*60*1e3),i=s.filter(l=>!l.id||!l.buyerId||!l.sellerId||!l.productId||new Date(l.createdAt||"2024-01-01")<n?!1:(l.status==="accepted"||l.status==="counter_offered",!0)),o=s.length-i.length;return o>0&&(localStorage.setItem("agriconnect-myanmar-offers",JSON.stringify(i)),console.log(`🗑️ Removed ${o} invalid/old offers`)),o}catch(s){return console.error("Failed to cleanup offers:",s),localStorage.removeItem("agriconnect-myanmar-offers"),1}}static async removeOrphanedData(){try{const s=this.getStoredUsers(),n=new Set(s.map(p=>p.id)),i=this.getStoredProducts(),o=new Set(i.map(p=>p.id)),l=this.getStoredConversations(),d=l.filter(p=>n.has(p.buyerId)&&n.has(p.sellerId)&&o.has(p.productId));d.length!==l.length&&(localStorage.setItem("agriconnect-myanmar-conversations",JSON.stringify(d)),console.log(`🗑️ Removed ${l.length-d.length} orphaned conversations`));const u=this.getStoredOffers(),f=u.filter(p=>n.has(p.buyerId)&&n.has(p.sellerId)&&o.has(p.productId));f.length!==u.length&&(localStorage.setItem("agriconnect-myanmar-offers",JSON.stringify(f)),console.log(`🗑️ Removed ${u.length-f.length} orphaned offers`))}catch(s){console.error("Failed to remove orphaned data:",s)}}static async performFullReset(){try{console.log("🚨 Performing full chat data reset...");const n=Object.keys(localStorage).filter(l=>l.startsWith("agriconnect-myanmar-messages-")||l==="agriconnect-myanmar-conversations"||l==="agriconnect-myanmar-offers");n.forEach(l=>localStorage.removeItem(l));const o=Object.keys(sessionStorage).filter(l=>l.includes("chat")||l.includes("conversation")||l.includes("message"));o.forEach(l=>sessionStorage.removeItem(l)),console.log(`🗑️ Removed ${n.length+o.length} chat storage items`),ge.success("All chat data has been reset",{description:"You can now start fresh conversations"})}catch(s){throw console.error("❌ Failed to perform full reset:",s),ge.error("Failed to reset chat data"),s}}static getStorageSize(){try{return JSON.stringify(localStorage).length}catch{return 0}}static getStoredConversations(){try{return JSON.parse(localStorage.getItem("agriconnect-myanmar-conversations")||"[]")}catch{return[]}}static getStoredOffers(){try{return JSON.parse(localStorage.getItem("agriconnect-myanmar-offers")||"[]")}catch{return[]}}static getStoredUsers(){try{return JSON.parse(localStorage.getItem("agriconnect-myanmar-users")||"[]")}catch{return[]}}static getStoredProducts(){try{return JSON.parse(localStorage.getItem("agriconnect-myanmar-local-products")||"[]")}catch{return[]}}static getStorageStats(){try{const s=this.getStoredConversations(),n=this.getStoredOffers(),i=Object.keys(localStorage).filter(l=>l.startsWith("agriconnect-myanmar-messages-")),o=i.reduce((l,d)=>{try{const u=JSON.parse(localStorage.getItem(d)||"[]");return l+u.length}catch{return l}},0);return{conversations:s.length,messageConversations:i.length,totalMessages:o,offers:n.length,storageSize:this.getStorageSize()}}catch(s){return console.error("Failed to get storage stats:",s),{conversations:0,messageConversations:0,totalMessages:0,offers:0,storageSize:0}}}}const IR=()=>{const t=localStorage.getItem("agriconnect-last-chat-cleanup"),s=Date.now(),n=1440*60*1e3;(!t||s-parseInt(t)>n)&&setTimeout(async()=>{try{await PR.performCleanup(),localStorage.setItem("agriconnect-last-chat-cleanup",s.toString())}catch(i){console.error("Periodic cleanup failed:",i)}},5e3)};class AR extends v.Component{renderCount=0;constructor(s){super(s),this.state={hasError:!1,errorCount:0}}static getDerivedStateFromError(s){return{hasError:!0,error:s,lastError:new Date}}componentDidCatch(s,n){console.error("PerformanceErrorBoundary caught an error:",s,n),(s.message.includes("Cannot update a component")||s.message.includes("setState")||n.componentStack?.includes("setState"))&&console.error("🚨 setState during render detected!",{error:s.message,componentStack:n.componentStack}),this.setState(i=>({errorCount:i.errorCount+1}))}componentDidUpdate(){this.renderCount++,this.renderCount>100&&(console.error("🚨 Excessive renders detected in error boundary child components"),this.setState({hasError:!0,error:new Error(`Excessive renders detected (${this.renderCount})`),lastError:new Date}))}handleRetry=()=>{this.renderCount=0,this.setState({hasError:!1,error:void 0})};handleReset=()=>{if(window.confirm("This will clear all app data and reload the page. Continue?"))try{Object.keys(localStorage).forEach(s=>{s.startsWith("agriconnect-myanmar")&&localStorage.removeItem(s)}),sessionStorage.clear(),window.location.reload()}catch(s){console.error("Failed to reset app data:",s),window.location.reload()}};render(){return this.state.hasError?this.props.fallback||e.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center p-4",children:e.jsxs(re,{className:"w-full max-w-md",children:[e.jsxs(Ie,{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-destructive rounded-lg flex items-center justify-center mx-auto mb-4",children:e.jsx(as,{className:"w-8 h-8 text-destructive-foreground"})}),e.jsx(Oe,{className:"text-xl",children:"Performance Issue Detected"})]}),e.jsxs(ie,{className:"space-y-4",children:[e.jsxs("div",{className:"text-sm text-muted-foreground space-y-2",children:[e.jsx("p",{children:"The application encountered a performance issue:"}),e.jsx("code",{className:"block bg-muted p-2 rounded text-xs",children:this.state.error?.message||"Unknown error"}),this.state.errorCount>1&&e.jsxs("p",{className:"text-amber-600",children:["This error has occurred ",this.state.errorCount," times."]})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs(O,{onClick:this.handleRetry,variant:"default",className:"w-full",children:[e.jsx(rr,{className:"w-4 h-4 mr-2"}),"Try Again"]}),this.state.errorCount>2&&e.jsxs(O,{onClick:this.handleReset,variant:"destructive",className:"w-full",children:[e.jsx(as,{className:"w-4 h-4 mr-2"}),"Reset App Data"]}),e.jsx(O,{onClick:()=>window.location.reload(),variant:"outline",className:"w-full",children:"Refresh Page"})]}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:[e.jsxs("p",{children:["Render count: ",this.renderCount]}),e.jsxs("p",{children:["Error count: ",this.state.errorCount]}),this.state.lastError&&e.jsxs("p",{children:["Last error: ",this.state.lastError.toLocaleTimeString()]})]})]})]})}):this.props.children}}function RR({currentView:t,currentUser:s,setCurrentView:n,setSelectedProductId:i,setSelectedChat:o,setSelectedSellerId:l,setVerificationInitialStep:d,previousView:u,setPreviousView:f}){const p=v.useCallback(()=>{console.log("Marketplace button clicked"),i(null),o(null),n("marketplace")},[i,o,n]),g=v.useCallback(()=>{f&&f(t),i(null),o(null),l(null),s?.userType==="farmer"||s?.userType==="trader"||s?.userType==="buyer"?n("dashboard"):(s?.userType,n("marketplace"))},[t,f,s,i,o,l,n]),h=v.useCallback(()=>{u&&u!==t?n(u):s?.userType==="farmer"||s?.userType==="trader"||s?.userType==="buyer"?n("dashboard"):n("marketplace")},[u,t,s,n]),y=v.useCallback(()=>{f&&f(t),n("profile")},[t,f,n]),j=v.useCallback(()=>{f&&f(t),n("messages")},[t,f,n]),b=v.useCallback((Q=1)=>{f&&f(t),d(Q),n("verification")},[t,f,d,n]),w=v.useCallback(()=>{f&&f(t),n("admin-verification")},[t,f,n]),S=v.useCallback(()=>{f&&f(t),n("about-us")},[t,f,n]),k=v.useCallback(()=>{f&&f(t),n("contact-us")},[t,f,n]),C=v.useCallback(()=>{f&&f(t),n("faq")},[t,f,n]),E=v.useCallback(()=>{n("profile"),window.scrollTo({top:0,behavior:"smooth"})},[n]),P=v.useCallback(()=>{n("register")},[n]),T=v.useCallback(()=>{n("login")},[n]),A=v.useCallback(()=>{n("forgot-password")},[n]),R=v.useCallback(Q=>{f&&f(t),i(Q),n("product-details")},[t,f,i,n]),$=v.useCallback(Q=>{i(Q),n("price-comparison")},[i,n]),J=v.useCallback(()=>{t==="price-comparison"?n("product-details"):p()},[t,p,n]),z=v.useCallback(Q=>{f&&f(t),l(Q),n("seller-storefront")},[t,f,l,n]),q=v.useCallback(()=>{n("seller-storefront")},[n]);return{handleBackToMarketplace:p,handleBackToPrevious:h,handleGoToDashboard:g,handleViewProfile:y,handleViewMessages:j,handleShowVerification:b,handleShowAdminVerification:w,handleShowAboutUs:S,handleShowContactUs:k,handleShowFAQ:C,handleBackToProfile:E,handleGoToRegister:P,handleGoToLogin:T,handleGoToForgotPassword:A,handleViewDetails:R,handlePriceCompare:$,handleBackToProductDetails:J,handleViewStorefront:z,handleBackToStorefront:q}}function DR({currentUser:t,backendAvailable:s,backendProducts:n,localProducts:i,setLocalProducts:o,createProduct:l,updateProduct:d,deleteProduct:u,setEditingProduct:f,setCurrentView:p,setPreviousView:g,setAuthModal:h,currentView:y,previousView:j}){const b=v.useCallback(async E=>{try{if(console.log("🚀 handleAddListing called with:",{productId:E.id,productName:E.name,price:E.price,priceType:typeof E.price,isEditing:E.isEditing,hasImage:!!E.image,imageSize:E.image?.length||0,totalSize:JSON.stringify(E).length}),!s||!n||n.length===0){if(console.log("📱 Local mode: handling locally"),E.isEditing){console.log("✏️ Updating existing product:",E.id),console.log("📝 Original listing data:",{id:E.id,name:E.name,price:E.price,priceType:typeof E.price});const P={...E};delete P.isEditing,console.log("📦 Updated product to save:",{id:P.id,name:P.name,price:P.price,priceType:typeof P.price}),o(T=>T.map(A=>A.id===E.id?(console.log("🔄 Replacing product:",A.id,"with new data"),console.log("💰 Price update details:",{oldPrice:A.price,oldPriceType:typeof A.price,newPrice:P.price,newPriceType:typeof P.price,priceChanged:A.price!==P.price}),P):A))}else{console.log("➕ Adding new product");const P={...E};delete P.isEditing;const T={...P,id:`local-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,lastUpdated:new Date().toISOString(),sellerId:t?.id||E.sellerId};o(A=>[T,...A]),console.log("✅ Added new product:",T.id)}console.log("🎉 Product operation completed successfully"),E.isEditing&&(console.log("🔄 Forcing UI refresh after product update"),o(P=>[...P])),ge.success(E.isEditing?"Product updated successfully!":"Product added successfully!")}else{console.log("🌐 Backend mode: using API");const P={...E};delete P.isEditing,E.isEditing?(await d(E.id,P),ge.success("Product updated successfully!")):(await l(P),ge.success("Product added successfully!"))}console.log("🧹 Clearing editing state and navigating back to:",j),console.log("🧹 Clearing editing state and navigating back to:",j),f(null),setTimeout(()=>{console.log("📱 Navigating to:",j),p(j),console.log("✅ Navigation completed")},100)}catch(P){throw console.error("❌ Product operation failed:",P),P instanceof Error?ge.error(`Failed to save product: ${P.message}`):ge.error("Failed to save product. Please try again."),P}},[l,d,s,n,j,t,o,f,p]),w=v.useCallback((E,P)=>{if(console.log("✏️ Edit Product:",E.id),!t){h("login");return}if(t.userType==="buyer")return;const T=P.find(A=>A.id===E.id);if(!T){console.error("❌ Product not found:",E.id),ge.error("Product not found. Please refresh and try again.");return}console.log("📦 Product to edit:",{id:T.id,name:T.name,description:T.description?.substring(0,50)+"..."||"None",category:T.category||"None",hasImage:!!T.image}),console.log("💰 Price debug - Product to edit:",{price:T.price,priceType:typeof T.price}),f(T),g(y),p("add-listing")},[t,h,f,g,p,y]),S=v.useCallback(()=>{if(console.log("🚀 handleShowAddListing called"),console.log("Current user:",t?.email,t?.userType),console.log("Current view:",y),!t){console.log("❌ No current user - showing login modal"),h("login");return}if(t.userType==="buyer"){console.log("❌ User is buyer - cannot create listings");return}console.log("✅ Setting up add listing form"),f(null),g(y),p("add-listing"),console.log("✅ View changed to add-listing")},[y,t,h,f,g,p]),k=v.useCallback(async E=>{console.log("🗑️ Deleting product:",E);try{if(!s||!n||n.length===0)if(console.log("📝 Checking product type for deletion:",E),E.startsWith("sample-")){console.log("🚫 Sample product detected - adding to deletion blacklist:",E);try{const P=JSON.parse(localStorage.getItem("agriconnect-myanmar-hidden-sample-products")||"[]");P.includes(E)||(P.push(E),localStorage.setItem("agriconnect-myanmar-hidden-sample-products",JSON.stringify(P)),window.dispatchEvent(new Event("sample-products-changed"))),console.log("✅ Sample product hidden successfully:",E),ge.success("Sample product removed from display")}catch(P){console.error("❌ Failed to hide sample product:",P),ge.error("Failed to remove sample product - storage error");return}}else console.log("📝 Removing user product from local products:",E),o(P=>P.filter(T=>T.id!==E)),console.log("✅ User product deletion completed:",E),ge.success("Product deleted successfully");else await u(E),ge.success("Product deleted successfully")}catch(P){throw console.error("❌ Delete product failed:",P),ge.error("Failed to delete product"),P}},[u,s,n,o]),C=v.useCallback(()=>{f(null),p(j)},[j,f,p]);return{handleAddListing:b,handleEditListing:w,handleShowAddListing:S,handleDeleteListing:k,handleBackFromAddListing:C}}function MR({currentUser:t,allProducts:s,startConversation:n,setSelectedChat:i,setAuthModal:o}){return{handleChat:v.useCallback(async d=>{if(!t){o("login");return}try{const u=s.find(f=>f.id===d);u&&(await n(u.sellerId,d),i(d))}catch(u){console.error("Failed to start conversation:",u),u instanceof Error&&!u.message.includes("Not authenticated")&&ge.error("Failed to start conversation. Please try again.")}},[t,s,n,i,o])}}function dc(t,s){if(s&&t===s.id){const n=s.verified||!1,i=s.businessVerified||!1,o=s.verificationStatus||"unverified";return{idVerified:n,businessVerified:i,verified:n,trustLevel:i?"business-verified":n?"id-verified":o==="under_review"?"under-review":"unverified",tierLabel:i?"Business Verified":n?"Verified":o==="under_review"?"Under Review":"Unverified",levelBadge:i?"Tier 2":n?"Tier 1":o==="under_review"?"Under Review":"Unverified",level:i?2:n?1:0,userType:s.userType,accountType:s.accountType}}try{const i=JSON.parse(localStorage.getItem("agriconnect-myanmar-users")||"[]").find(o=>o.id===t);if(i){const o=i.verified||!1,l=i.businessVerified||!1,d=i.verificationStatus||"unverified";return{idVerified:o,businessVerified:l,verified:o,trustLevel:l?"business-verified":o?"id-verified":d==="under_review"?"under-review":"unverified",tierLabel:l?"Business Verified":o?"Verified":d==="under_review"?"Under Review":"Unverified",levelBadge:l?"Tier 2":o?"Tier 1":d==="under_review"?"Under Review":"Unverified",level:l?2:o?1:0,userType:i.userType,accountType:i.accountType}}}catch(n){console.error("Error checking seller verification status:",n)}return{idVerified:!1,businessVerified:!1,verified:!1,trustLevel:"unverified",tierLabel:"Unverified",levelBadge:"Unverified",level:0,userType:void 0,accountType:void 0}}function OR(t,s){return dc(t,s).verified}function LR(){const[t,s]=v.useState(null);if(v.useRef(0),t)return e.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:e.jsxs("div",{className:"text-center space-y-4 max-w-md",children:[e.jsx("div",{className:"w-16 h-16 bg-destructive rounded-lg flex items-center justify-center mx-auto",children:e.jsx(nr,{className:"w-8 h-8 text-destructive-foreground"})}),e.jsx("h2",{className:"text-xl font-semibold",children:"Application Error"}),e.jsx("p",{className:"text-muted-foreground",children:t}),e.jsx(O,{onClick:()=>window.location.reload(),children:"Refresh Page"})]})});const[n,i]=v.useState("marketplace"),[o,l]=v.useState(null),[d,u]=v.useState(null),[f,p]=v.useState(null),[g,h]=v.useState(null),[y,j]=v.useState(null),[b,w]=v.useState("marketplace"),[S,k]=v.useState(1),[C,E]=v.useState(!1),P=v.useCallback(()=>{try{const ue=JSON.parse(localStorage.getItem("agriconnect-myanmar-users")||"[]"),Te=ue.map(Je=>Je.email);if(["admin@agrilink.com","thura.farmer@gmail.com","kyaw.trader@gmail.com","su.buyer@gmail.com"].some(Je=>Te.includes(Je))){ge.error("Demo accounts already exist. Check login credentials below.");return}const Me=[{id:`admin-${Date.now()}`,email:"admin@agrilink.com",password:"admin123",name:"System Administrator",userType:"admin",accountType:"business",location:"Yangon",region:"Yangon Region",phone:"+95 9 123 456 789",businessName:"AgriLink Administration",businessDescription:"Platform administration and verification management",experience:"5 years",verified:!0,phoneVerified:!0,qualityCertifications:[],farmingMethods:[],joinedDate:new Date().toISOString(),rating:5,totalReviews:0},{id:"farmer-thura-001",email:"thura.farmer@gmail.com",password:"farmer123",name:"Ko Thura Min",userType:"farmer",accountType:"individual",location:"Bago",region:"Bago Region",phone:"+95 9 987 654 321",businessName:"Thura Min Rice Farm",businessDescription:"Premium jasmine rice cultivation with traditional methods",experience:"15 years",verified:!0,phoneVerified:!0,qualityCertifications:["Organic Certified"],farmingMethods:["Traditional","Sustainable"],joinedDate:new Date(Date.now()-365*24*60*60*1e3).toISOString(),rating:4.8,totalReviews:24},{id:"farmer-su-002",email:"su.vegetables@gmail.com",password:"farmer123",name:"Ma Su Hlaing",userType:"farmer",accountType:"individual",location:"Mandalay",region:"Mandalay Region",phone:"+95 9 876 543 210",businessName:"Su Hlaing Organic Farm",businessDescription:"Fresh organic vegetables and seasonal produce",experience:"8 years",verified:!0,phoneVerified:!0,qualityCertifications:["Organic Certified"],farmingMethods:["Organic","Hydroponic"],joinedDate:new Date(Date.now()-4800*60*60*1e3).toISOString(),rating:4.7,totalReviews:31},{id:"trader-kyaw-003",email:"kyaw.trader@gmail.com",password:"trader123",name:"Ko Kyaw Zin",userType:"trader",accountType:"business",location:"Yangon",region:"Yangon Region",phone:"+95 9 765 432 109",businessName:"Kyaw Zin Spice Trading",businessDescription:"Premium spices and agricultural processing",experience:"12 years",verified:!0,phoneVerified:!0,qualityCertifications:["Licensed Trader","Export Certified"],farmingMethods:[],joinedDate:new Date(Date.now()-300*24*60*60*1e3).toISOString(),rating:4.6,totalReviews:18},{id:"farmer-min-004",email:"min.fruits@gmail.com",password:"farmer123",name:"Ko Min Oo",userType:"farmer",accountType:"individual",location:"Magway",region:"Magway Region",phone:"+95 9 654 321 098",businessName:"Min Oo Exotic Fruits",businessDescription:"Tropical and exotic fruit cultivation",experience:"10 years",verified:!0,phoneVerified:!0,qualityCertifications:["Export Quality"],farmingMethods:["Controlled Environment","Sustainable"],joinedDate:new Date(Date.now()-4320*60*60*1e3).toISOString(),rating:4.9,totalReviews:42},{id:`buyer-${Date.now()}`,email:"buyer.test@gmail.com",password:"buyer123",name:"Ma Phyu Phyu",userType:"buyer",accountType:"individual",location:"Yangon",region:"Yangon Region",phone:"+95 9 543 210 987",businessName:"",businessDescription:"",experience:"2 years",verified:!1,phoneVerified:!0,qualityCertifications:[],farmingMethods:[],joinedDate:new Date(Date.now()-1440*60*60*1e3).toISOString(),rating:0,totalReviews:0,preferences:{categories:["Rice","Vegetables","Fruits"],priceRange:"budget",deliveryRadius:50}}];ue.push(...Me),localStorage.setItem("agriconnect-myanmar-users",JSON.stringify(ue)),ge.success("Demo accounts created successfully!"),ge.info("You can now test different user experiences. Check login credentials in the panel below.",{duration:5e3})}catch(ue){console.error("Failed to create demo accounts:",ue),ge.error("Failed to create demo accounts")}},[]),[T,A]=v.useState(!1),[R,$]=v.useState({show:!1,feature:"chat"}),[J,z]=v.useState(!1),[q,Q]=v.useState(null),[Z,he]=v.useState(!1),[se,te]=v.useState(null),[ne,U]=v.useState(()=>{try{const ue=localStorage.getItem("agriconnect-myanmar-local-products");if(!ue)return[];const Te=JSON.parse(ue);if(!Array.isArray(Te))return console.warn("Local products data is not an array, resetting..."),localStorage.removeItem("agriconnect-myanmar-local-products"),[];const ee=Te.filter(Me=>Me&&typeof Me=="object"&&Me.id&&Me.name&&typeof Me.price=="number");return ee.length!==Te.length&&(console.warn(`Filtered out ${Te.length-ee.length} corrupted product entries`),localStorage.setItem("agriconnect-myanmar-local-products",JSON.stringify(ee))),ee}catch(ue){return console.error("Failed to load local products:",ue),localStorage.removeItem("agriconnect-myanmar-local-products"),[]}}),[M,H]=v.useState(()=>{try{const ue=localStorage.getItem("agriconnect-myanmar-saved-products");return ue?JSON.parse(ue):[]}catch(ue){return console.error("Failed to load saved products:",ue),[]}}),{backendAvailable:I,checking:V}=Xc(),{user:D,loading:ae,signUp:ce,signIn:pe,signOut:W,updateProfile:X}=M0(),{products:xe,createProduct:ye,updateProduct:je,deleteProduct:Ne}=TR(),{startConversation:Xe}=Tf(D?.id&&!ae?D.id:void 0),st=v.useRef();v.useEffect(()=>(st.current&&clearTimeout(st.current),st.current=setTimeout(async()=>{try{const{safeLocalStorageSetItem:ue}=await Sr(async()=>{const{safeLocalStorageSetItem:Te}=await Promise.resolve().then(()=>ic);return{safeLocalStorageSetItem:Te}},void 0);await ue("agriconnect-myanmar-local-products",ne)}catch(ue){console.error("Failed to save local products:",ue)}},1e3),()=>{st.current&&clearTimeout(st.current)}),[ne.length]);const ms=v.useRef();v.useEffect(()=>(ms.current&&clearTimeout(ms.current),ms.current=setTimeout(async()=>{try{const{safeLocalStorageSetItem:ue}=await Sr(async()=>{const{safeLocalStorageSetItem:Te}=await Promise.resolve().then(()=>ic);return{safeLocalStorageSetItem:Te}},void 0);await ue("agriconnect-myanmar-saved-products",M)}catch(ue){console.error("Failed to save saved products:",ue)}},1e3),()=>{ms.current&&clearTimeout(ms.current)}),[M.length]);const[Ss,qt]=v.useState({search:"",category:"",location:"",region:"",city:"",sellerType:"",verifiedStatus:"",priceRange:"",sortBy:"newest"}),[Un,Ht]=v.useState(0);v.useEffect(()=>{const ue=ee=>{ee.key==="agriconnect-myanmar-hidden-sample-products"&&Ht(Me=>Me+1)},Te=()=>{Ht(ee=>ee+1)};return window.addEventListener("storage",ue),window.addEventListener("sample-products-changed",Te),()=>{window.removeEventListener("storage",ue),window.removeEventListener("sample-products-changed",Te)}},[]);const ut=v.useMemo(()=>{try{let ue=[];try{ue=JSON.parse(localStorage.getItem("agriconnect-myanmar-hidden-sample-products")||"[]")}catch(ee){console.warn("Failed to load hidden sample products:",ee)}return I&&xe&&xe.length>0?[...xe,...ne]:[...Xm.filter(ee=>!ue.includes(ee.id)),...ne]}catch(ue){return console.error("Error in allProducts calculation:",ue),s("Failed to load products. Please refresh the page."),[]}},[xe?.length,I,ne.length,Un]),Ae=RR({currentView:n,currentUser:D,setCurrentView:i,setSelectedProductId:u,setSelectedChat:l,setSelectedSellerId:p,setVerificationInitialStep:k,previousView:b,setPreviousView:w}),rt=DR({currentUser:D,backendAvailable:I,backendProducts:xe,localProducts:ne,setLocalProducts:U,createProduct:ye,updateProduct:je,deleteProduct:Ne,setEditingProduct:j,setCurrentView:i,setPreviousView:w,setAuthModal:h,currentView:n,previousView:b}),ss=MR({currentUser:D?.id?D:null,allProducts:ut,startConversation:Xe,setSelectedChat:l,setAuthModal:h}),en=v.useRef(!1);v.useEffect(()=>{if(D&&!ae&&!en.current){if(["verification","profile","edit-profile","messages","seller-storefront","marketplace","add-listing","product-details","price-comparison","about-us","contact-us","faq","admin-verification","deals"].includes(n)){en.current=!0;return}D.userType==="farmer"||D.userType==="trader"||D.userType==="buyer"?i("dashboard"):D.userType==="admin"&&i("marketplace"),en.current=!0}},[D?.id,D?.userType,ae]),v.useEffect(()=>{n!=="seller-storefront"&&E(!1)},[n]),v.useEffect(()=>{["faq","about-us","contact-us","profile","verification","admin-verification","add-listing","messages","deals"].includes(n)&&window.scrollTo({top:0,behavior:"smooth"})},[n]);const Dr=v.useRef(null);v.useEffect(()=>{if(Dr.current===null)try{const ue="agriconnect-test-write",Te="test-"+Date.now();localStorage.setItem(ue,Te);const ee=localStorage.getItem(ue);localStorage.removeItem(ue),ee!==Te?(console.error("❌ localStorage write/read test failed"),Dr.current=!1,ge.error("Storage system error. Some features may not work properly.")):(console.log("✅ localStorage integrity verified"),Dr.current=!0,IR(),Sr(async()=>{const{storageManager:Me}=await Promise.resolve().then(()=>ic);return{storageManager:Me}},void 0).then(({storageManager:Me})=>{Me.isStorageNearCapacity()&&(console.log("🧹 Storage near capacity, running automatic cleanup..."),Me.cleanupStorage().then(Je=>{Je.freed>0&&console.log(`✅ Automatic cleanup freed ${Math.round(Je.freed/1024)} KB`)}).catch(Je=>{console.warn("⚠️ Automatic cleanup failed:",Je)}))}).catch(Me=>{console.warn("⚠️ Could not load storage manager:",Me)}))}catch(ue){console.error("❌ localStorage integrity check failed:",ue),Dr.current=!1,ge.error("Storage system error. Some features may not work properly.")}},[]),v.useEffect(()=>{const ue=async()=>{try{const{getStorageInfo:Me}=await Sr(async()=>{const{getStorageInfo:yt}=await Promise.resolve().then(()=>ic);return{getStorageInfo:yt}},void 0),Je=Me();Je.percentage>90?ge.error("Storage is critically full! Some features may not work. Please clear old data.",{duration:1e4,action:D?.userType==="admin"?{label:"Open Storage Manager",onClick:()=>i("admin-verification")}:void 0}):Je.percentage>80&&ge.warning("Storage is getting full. Consider clearing old data.",{duration:5e3,action:D?.userType==="admin"?{label:"View Storage",onClick:()=>i("admin-verification")}:void 0})}catch(Me){console.warn("Could not check storage capacity:",Me)}},Te=setTimeout(ue,3e4),ee=setInterval(ue,600*1e3);return()=>{clearInterval(ee),clearTimeout(Te)}},[]);const Mr=ER(ut,Ss,OR),{filteredProducts:tn,getActiveFiltersCount:Or}=Mr||{filteredProducts:ut,getActiveFiltersCount:()=>0},lt=v.useMemo(()=>o?ut.find(ue=>ue.id===o):null,[o,ut.length]),Qe=v.useMemo(()=>d?ut.find(ue=>ue.id===d):null,[d,ut.length]),cr=v.useCallback(async(ue,Te)=>{try{await pe(ue,Te),h(null)}catch(ee){throw console.error("Login failed:",ee),ee}},[pe]),qs=v.useCallback(async ue=>{try{await ce(ue),h(null)}catch(Te){throw console.error("Registration failed:",Te),Te}},[ce]),Ca=v.useCallback(async()=>{try{await W(),l(null),i("marketplace")}catch(ue){console.error("Logout failed:",ue)}},[W]),Hs=v.useCallback(async ue=>{try{await X(ue)}catch(Te){throw console.error("Profile update failed:",Te),Te}},[X]),Vn=v.useCallback(()=>{console.log("Edit profile clicked - using inline editing")},[]),sn=v.useCallback(async()=>{const ue=document.createElement("input");ue.type="file",ue.accept="image/*",ue.onchange=async Te=>{const ee=Te.target.files?.[0];if(!(!ee||!D))try{const Me=URL.createObjectURL(ee);await Hs({...D,storefrontImage:Me}),console.log("Storefront image updated successfully")}catch(Me){console.error("Failed to update storefront image:",Me)}},ue.click()},[D,Hs]),qn=v.useCallback((ue,Te)=>{if(!D){ge.error("Please log in to save products");return}H(ee=>{if(ee.findIndex(Je=>Je.productId===ue)>=0){const Je=ee.filter(yt=>yt.productId!==ue);return ge.success("Product removed from saved items"),Je}else{const Je={productId:ue,savedDate:new Date().toISOString(),priceWhenSaved:Te,alerts:{priceAlert:!0,stockAlert:!1}};return ge.success("Product saved for price tracking"),[...ee,Je]}})},[D]),Lr=v.useCallback(ue=>{if(!D){ge.error("Please log in to make offers");return}if(D.userType!=="buyer"){ge.error("Only buyers can make offers");return}Q(ue),z(!0)},[D]),fs=v.useCallback(async ue=>{if(!(!D||!q))try{const Te={id:`offer-${Date.now()}`,productId:q.id,buyerId:D.id,sellerId:q.sellerId,...ue,status:"pending",createdAt:new Date().toISOString()},ee=JSON.parse(localStorage.getItem("agriconnect-offers")||"[]");ee.push(Te),localStorage.setItem("agriconnect-offers",JSON.stringify(ee)),ge.success("Offer sent successfully!"),z(!1),Q(null)}catch(Te){console.error("Error submitting offer:",Te),ge.error("Failed to send offer. Please try again.")}},[D,q]),Hn=v.useCallback(async ue=>{if(!(!D||!se))try{const Te={id:`review-${Date.now()}`,reviewerId:D.id,revieweeId:se.otherPartyId,productId:se.productId,...ue,createdAt:new Date().toISOString()},ee=JSON.parse(localStorage.getItem("agriconnect-reviews")||"[]");ee.push(Te),localStorage.setItem("agriconnect-reviews",JSON.stringify(ee)),ge.success("Review submitted successfully!"),he(!1),te(null)}catch(Te){console.error("Error submitting review:",Te),ge.error("Failed to submit review. Please try again.")}},[D,se]),dr=v.useMemo(()=>{if(!Qe)return[];const ue=Qe.price||45e3,Te=ut.filter(Me=>Me.name===Qe.name).map(Me=>({id:Me.id,sellerName:Me.sellerName,sellerType:Me.sellerType,price:Me.price,location:Me.location,quantity:Me.quantity,lastUpdated:Me.lastUpdated})),ee=_R(Qe.name,ue);return[...Te,...ee]},[Qe?.id,Qe?.name,Qe?.price,ut.length]);return V||ae?e.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("div",{className:"w-16 h-16 bg-primary rounded-lg flex items-center justify-center mx-auto animate-pulse",children:e.jsx(nr,{className:"w-8 h-8 text-primary-foreground"})}),e.jsx("h2",{className:"text-xl font-semibold",children:"AgriLink"}),e.jsx("p",{className:"text-muted-foreground",children:V?"Connecting to server...":"Loading..."}),e.jsx("div",{className:"w-32 h-1 bg-muted rounded-full mx-auto overflow-hidden",children:e.jsx("div",{className:"w-full h-full bg-primary rounded-full animate-pulse"})}),!1]})}):e.jsx(bR,{children:e.jsx(AR,{children:e.jsxs("div",{className:"min-h-screen bg-background flex flex-col",children:[e.jsx(xR,{currentView:n,currentUser:D,onBackToMarketplace:Ae.handleBackToMarketplace,onGoToDashboard:Ae.handleGoToDashboard,onGoToLogin:Ae.handleGoToLogin,onGoToRegister:Ae.handleGoToRegister,onLogout:Ca,onViewStorefront:Ae.handleViewStorefront,onUpdateUser:Hs,onShowVerification:Ae.handleShowVerification,onEditProfile:Vn,onViewProfile:Ae.handleViewProfile,onViewMessages:Ae.handleViewMessages,onShowAdminVerification:Ae.handleShowAdminVerification,editingProduct:y}),e.jsx("main",{className:`w-full max-w-7xl mx-auto px-4 ${n==="marketplace"||n==="dashboard"||n==="add-listing"||n==="seller-storefront"||n==="product-details"||n==="price-comparison"||n==="messages"||n==="deals"||n==="admin-verification"||n==="about-us"||n==="contact-us"||n==="faq"?"flex-grow":"flex-grow-0"}`,children:e.jsxs("div",{className:"pt-8 pb-16",children:[n==="login"&&e.jsx("div",{className:"max-w-2xl mx-auto",children:e.jsx(lP,{onLogin:cr,onSwitchToRegister:Ae.handleGoToRegister,onForgotPassword:Ae.handleGoToForgotPassword,onClose:Ae.handleBackToMarketplace})}),n==="register"&&e.jsx("div",{className:"max-w-2xl mx-auto",children:e.jsx(rv,{onRegister:qs,onSwitchToLogin:Ae.handleGoToLogin,onClose:Ae.handleBackToMarketplace})}),n==="forgot-password"&&e.jsx("div",{className:"max-w-2xl mx-auto",children:e.jsx(dP,{onBack:Ae.handleGoToLogin,onReturnToLogin:Ae.handleGoToLogin})}),n==="profile"&&D&&e.jsx("div",{className:"max-w-6xl mx-auto",children:e.jsx(OP,{user:D,onBack:Ae.handleBackToPrevious,onEditProfile:Vn,onShowVerification:Ae.handleShowVerification,onUpdate:Hs,onViewStorefront:Ae.handleViewStorefront})}),n==="add-listing"&&D&&e.jsx("div",{className:"max-w-4xl mx-auto",children:e.jsx(pP,{currentUser:D,onBack:rt.handleBackFromAddListing,onSave:rt.handleAddListing,editingProduct:y})}),n==="dashboard"&&D&&(D.userType==="farmer"||D.userType==="trader")&&e.jsx(xP,{user:D,userProducts:ut.filter(ue=>ue.sellerId===D.id),onAddListing:rt.handleShowAddListing,onEditListing:ue=>rt.handleEditListing(ue,ut),onDeleteListing:rt.handleDeleteListing,onViewStorefront:()=>Ae.handleViewStorefront(D.id),onGoToMarketplace:Ae.handleBackToMarketplace,onViewProduct:Ae.handleViewDetails,onShowVerification:Ae.handleShowVerification,onViewMessages:Ae.handleViewMessages}),n==="dashboard"&&D&&D.userType==="buyer"&&e.jsx(vP,{user:D,allProducts:ut,savedProducts:M,onGoToMarketplace:Ae.handleBackToMarketplace,onViewProduct:Ae.handleViewDetails,onStartChat:ss.handleChat,onViewMessages:Ae.handleViewMessages}),n==="messages"&&D&&e.jsx("div",{className:"max-w-6xl mx-auto",children:e.jsx(zP,{currentUser:D,onBack:Ae.handleBackToPrevious,onStartChat:ss.handleChat})}),n==="deals"&&D&&e.jsx("div",{className:"max-w-6xl mx-auto",children:e.jsx(DI,{currentUserId:D.id,currentUserName:D.name,currentUserType:D.userType,onBack:Ae.handleBackToPrevious})}),n==="verification"&&D&&e.jsx("div",{className:"max-w-4xl mx-auto pt-8",children:e.jsx(bP,{currentUser:D,onClose:Ae.handleBackToProfile,onUpdate:Hs})}),n==="admin-verification"&&D&&D.userType==="admin"&&e.jsx("div",{className:"max-w-7xl mx-auto",children:e.jsx(aI,{currentAdmin:D,onBack:Ae.handleBackToPrevious})}),n==="about-us"&&e.jsx("div",{className:"max-w-4xl mx-auto",children:e.jsx(oI,{onBack:Ae.handleBackToPrevious})}),n==="contact-us"&&e.jsx("div",{className:"max-w-4xl mx-auto",children:e.jsx(lI,{onBack:Ae.handleBackToPrevious,currentUser:D})}),n==="faq"&&e.jsx("div",{className:"max-w-4xl mx-auto",children:e.jsx(RI,{onBack:Ae.handleBackToPrevious,onShowContactUs:Ae.handleShowContactUs})}),n==="marketplace"&&e.jsxs("div",{className:"space-y-8",children:[e.jsx(yR,{currentUser:D,allProducts:ut,onGoToRegister:Ae.handleGoToRegister,onGoToLogin:Ae.handleGoToLogin,onShowAddListing:rt.handleShowAddListing}),e.jsxs("section",{className:"space-y-6",children:[D?.userType==="admin"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-primary/10 border border-primary/20 rounded-lg p-4 text-center",children:[e.jsx("p",{className:"text-sm font-medium text-primary",children:"🛠️ Admin Dashboard - Product Management Mode Active"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"You have administrator privileges to manage all products on the platform"})]}),e.jsx(iI,{currentUser:D})]}),!D&&e.jsxs("div",{className:"bg-muted/50 border rounded-lg p-4",children:[e.jsxs("div",{className:"text-center mb-4",children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:"🔧 Development Mode: Test different user types"}),e.jsx(O,{variant:"outline",size:"sm",onClick:P,className:"text-xs",children:"Create Demo Accounts"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:"Creates sample sellers and buyers for testing"})]}),e.jsxs("div",{className:"text-left text-xs space-y-1 bg-card p-3 rounded border",children:[e.jsx("p",{className:"font-medium mb-2",children:"Quick Login Credentials:"}),e.jsxs("p",{children:[e.jsx("strong",{children:"Admin:"})," admin@agrilink.com / admin123"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Farmer:"})," thura.farmer@gmail.com / farmer123"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Trader:"})," kyaw.trader@gmail.com / trader123"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Buyer:"})," buyer.test@gmail.com / buyer123"]})]})]}),e.jsx(O_,{filters:Ss,onFiltersChange:qt,activeFiltersCount:Or},JSON.stringify(Ss)),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:tn.map(ue=>{const Te=dc(ue.sellerId,D);return e.jsx(bk,{product:ue,onChat:ss.handleChat,onViewDetails:Ae.handleViewDetails,onViewStorefront:Ae.handleViewStorefront,onDelete:D?.userType==="admin"?rt.handleDeleteListing:void 0,onSaveProduct:D?.userType==="buyer"?qn:void 0,onMakeOffer:Lr,currentUserId:D?.id,currentUserType:D?.userType,sellerVerified:Te.verified,sellerVerificationStatus:Te,adminMode:D?.userType==="admin",savedProductIds:M.map(ee=>ee.productId)},ue.id)})}),tn.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx("p",{className:"text-muted-foreground",children:"No products found matching your criteria."}),e.jsx(O,{variant:"outline",className:"mt-4",onClick:()=>qt({search:"",category:"",location:"",region:"",city:"",sellerType:"",priceRange:"",sortBy:"newest"}),children:"Clear Filters"})]})]})]}),n==="product-details"&&Qe&&(()=>{const ue=dc(Qe.sellerId,D);let Te=null;return Qe.sellerId===D?.id?Te={id:D.id,name:D.businessName||D.name,businessName:D.businessName,userType:D.userType,location:D.location,experience:D.experience,joinedDate:D.joinedDate||"Recently",rating:D.rating||4.2,totalReviews:D.totalReviews||12,yearsActive:D.experience?parseInt(D.experience.split(" ")[0])||1:3,responseTime:D.responseTime||(D.userType==="farmer"?"3 hours":"1 hour"),phone:D.phone||`+95 9 ${Math.floor(100+Math.random()*900)} ${Math.floor(100+Math.random()*900)} ${Math.floor(100+Math.random()*900)}`,openingHours:D.openingHours||(D.userType==="farmer"?"9 AM - 6 PM":"8 AM - 7 PM")}:Te={id:Qe.sellerId,name:Qe.sellerName||"Seller",businessName:Qe.sellerName||"Seller",userType:Qe.sellerType||"farmer",location:Qe.location||"Unknown",experience:"3 years",joinedDate:"Recently",rating:4.2+Math.random()*.6,totalReviews:Math.floor(Math.random()*40)+10,yearsActive:3,responseTime:Qe.sellerType==="farmer"?"3 hours":"1 hour",phone:`+95 9 ${Math.floor(100+Math.random()*900)} ${Math.floor(100+Math.random()*900)} ${Math.floor(100+Math.random()*900)}`,openingHours:Qe.sellerType==="farmer"?"9 AM - 6 PM":"8 AM - 7 PM"},e.jsx(aP,{product:Qe,onBack:Ae.handleBackToMarketplace,onChat:ss.handleChat,onPriceCompare:Ae.handlePriceCompare,onViewStorefront:Ae.handleViewStorefront,onEditProduct:ee=>rt.handleEditListing(ee,ut),currentUserId:b==="seller-storefront"&&Qe.sellerId===D?.id?null:D?.id,isUserVerified:D?.verified||!1,userType:D?.userType,isPhoneVerified:D?.phoneVerified||!1,sellerVerified:ue.verified,sellerVerificationStatus:ue,sellerProfile:Te})})(),n==="price-comparison"&&Qe&&e.jsx(L_,{productName:Qe.name,priceData:dr,unit:Qe.unit,onBack:Ae.handleBackToProductDetails,isOwnProduct:D?.id===Qe.sellerId}),n==="seller-storefront"&&f&&(()=>{let ue=null;if(f===D?.id)ue={id:D.id,name:D.businessName||D.name,type:D.userType,accountType:D.accountType,location:D.location,description:D.businessDescription||`${D.userType} in ${D.location}`,image:D.storefrontImage||"https://images.unsplash.com/photo-1500382017468-9049fed747ef?w=400&h=300&fit=crop",rating:D.rating||0,totalReviews:D.totalReviews||0,yearsActive:parseInt(D.experience?.split(" ")[0]||"1"),responseTime:D.responseTime||(D.userType==="farmer"?"3 hours":"1 hour"),certifications:D.qualityCertifications||[],joinedDate:D.joinedDate||"Recently",verified:D.verified||!1,phone:D.phone||"",email:D.email||"",website:D.website||"",facebook:D.facebook||"",instagram:D.instagram||"",telegram:D.telegram||"",businessHours:D.businessHours||"9 AM - 6 PM, Mon-Sat",specialties:D.specialties||[],policies:D.policies||{returns:"",delivery:"",payment:""}};else try{const ee=JSON.parse(localStorage.getItem("agriconnect-myanmar-users")||"[]").find(Me=>Me.id===f);ee&&(ue={id:ee.id,name:ee.businessName||ee.name,type:ee.userType,accountType:ee.accountType,location:ee.location,description:ee.businessDescription||`${ee.userType} in ${ee.location}`,image:ee.storefrontImage||"https://images.unsplash.com/photo-1500382017468-9049fed747ef?w=400&h=300&fit=crop",rating:ee.rating||0,totalReviews:ee.totalReviews||0,yearsActive:parseInt(ee.experience?.split(" ")[0]||"3"),responseTime:ee.responseTime||(ee.userType==="farmer"?"3 hours":"1 hour"),certifications:ee.qualityCertifications||[],joinedDate:ee.joinedDate||"Recently",verified:ee.verified||!1,phone:ee.phone||"",email:ee.email||"",website:ee.website||"",facebook:ee.facebook||"",instagram:ee.instagram||"",telegram:ee.telegram||"",businessHours:ee.businessHours||"9 AM - 6 PM, Mon-Sat",specialties:ee.specialties||[],policies:ee.policies||{returns:"",delivery:"",payment:""}})}catch(Te){console.error("Error looking up seller:",Te)}return ue?e.jsx(iP,{seller:ue,products:ut.filter(Te=>Te.sellerId===f),onBack:Ae.handleBackToPrevious,onViewProduct:Ae.handleViewDetails,onChat:ss.handleChat,isOwnStorefront:f===D?.id,onEditStorefrontImage:f===D?.id?sn:void 0,onUpdateStorefront:f===D?.id?Hs:void 0,previewMode:C,onTogglePreviewMode:f===D?.id?E:void 0}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx("p",{className:"text-muted-foreground mb-4",children:"Seller not found."}),e.jsx(O,{onClick:Ae.handleBackToMarketplace,children:"Back to Marketplace"})]})})()]})}),o&&lt&&(()=>{const ue=lt.sellerId===D?.id?D:null,Te=dc(lt.sellerId,D);return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 bg-card shadow-2xl border-l border-t z-50 transition-transform duration-300 md:hidden",children:e.jsx(Cc,{sellerName:lt.sellerName,sellerType:lt.sellerType,sellerLocation:lt.location,sellerRating:4.5,productName:lt.name,productId:lt.id,sellerId:lt.sellerId,onClose:()=>l(null),sellerVerified:ue?.verified||!1,currentUserVerified:D?.verified||!1,currentUserType:D?.userType,sellerVerificationStatus:Te,product:lt})}),e.jsx("div",{className:"hidden md:block fixed right-0 bottom-0 h-[600px] w-96 bg-card shadow-2xl border-l border-t z-50 transition-transform duration-300",children:e.jsx(Cc,{sellerName:lt.sellerName,sellerType:lt.sellerType,sellerLocation:lt.location,sellerRating:4.5,productName:lt.name,productId:lt.id,sellerId:lt.sellerId,onClose:()=>l(null),sellerVerified:ue?.verified||!1,currentUserVerified:D?.verified||!1,currentUserType:D?.userType,sellerVerificationStatus:Te,product:lt})})]})})(),g==="register"&&e.jsx(rv,{onRegister:qs,onSwitchToLogin:Ae.handleGoToLogin,onClose:()=>h(null)}),R.show&&e.jsx(BP,{feature:R.feature,sellerName:R.sellerName,userType:D?.userType,onClose:()=>$({show:!1,feature:"chat"}),onStartVerification:()=>{$({show:!1,feature:"chat"}),Ae.handleShowVerification()}}),e.jsx(vR,{onShowAboutUs:Ae.handleShowAboutUs,onShowContactUs:Ae.handleShowContactUs,onShowFAQ:Ae.handleShowFAQ}),e.jsx(wR,{onOpenStorageManagement:D?.userType==="admin"?()=>i("admin-verification"):void 0}),J&&q&&D&&e.jsx(MI,{isOpen:J,onClose:()=>{z(!1),Q(null)},onSubmit:fs,product:{id:q.id,name:q.name,price:q.price,unit:q.unit,sellerName:q.sellerName,location:q.location},currentUser:{id:D.id,name:D.name}}),Z&&se&&D&&e.jsx(OI,{isOpen:Z,onClose:()=>{he(!1),te(null)},onSubmit:Hn,transaction:se,currentUser:{id:D.id,name:D.name}}),e.jsx(CR,{position:"top-right"})]})})})}HN.createRoot(document.getElementById("root")).render(e.jsx(LR,{}));
